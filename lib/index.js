(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["UIKernel"] = factory();
	else
		root["UIKernel"] = factory();
})(global, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/node.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/browser.js":
/*!************************!*\
  !*** ./src/browser.js ***!
  \************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _common_setImmediate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./common/setImmediate */ "./src/common/setImmediate.js");
/* harmony import */ var _common_setImmediate__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_common_setImmediate__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _common_variables__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./common/variables */ "./src/common/variables.js");
/* harmony import */ var _grid_models_applyGridFilters__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./grid/models/applyGridFilters */ "./src/grid/models/applyGridFilters.js");
/* harmony import */ var _grid_Component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./grid/Component */ "./src/grid/Component.js");
/* harmony import */ var _form_FormService__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./form/FormService */ "./src/form/FormService.js");
/* harmony import */ var _form_connectForm__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./form/connectForm */ "./src/form/connectForm.js");
/* harmony import */ var _common_validation_Validator__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./common/validation/Validator */ "./src/common/validation/Validator.js");
/* harmony import */ var _grid_export_exportGridData__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./grid/export/exportGridData */ "./src/grid/export/exportGridData.js");
/* harmony import */ var _grid_export_exporters_toJSON__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./grid/export/exporters/toJSON */ "./src/grid/export/exporters/toJSON.js");
/* harmony import */ var _common_validation_ValidationErrors__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./common/validation/ValidationErrors */ "./src/common/validation/ValidationErrors.js");
/* harmony import */ var _grid_models_GridXhrModel__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./grid/models/GridXhrModel */ "./src/grid/models/GridXhrModel.js");
/* harmony import */ var _grid_models_GridCollectionModel__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./grid/models/GridCollectionModel */ "./src/grid/models/GridCollectionModel.js");
/* harmony import */ var _common_Events__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./common/Events */ "./src/common/Events.js");
/* harmony import */ var _form_FormModel__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./form/FormModel */ "./src/form/FormModel.js");
/* harmony import */ var _form_FormXhrModel__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./form/FormXhrModel */ "./src/form/FormXhrModel.js");
/* harmony import */ var _list_ListXhrModel__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./list/ListXhrModel */ "./src/list/ListXhrModel.js");
/* harmony import */ var _form_AbstractFormModel__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./form/AbstractFormModel */ "./src/form/AbstractFormModel.js");
/* harmony import */ var _grid_models_AbstractGridModel__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./grid/models/AbstractGridModel */ "./src/grid/models/AbstractGridModel.js");
/* harmony import */ var _list_AbstractListModel__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./list/AbstractListModel */ "./src/list/AbstractListModel.js");
/* harmony import */ var _form_adapters_GridToFormUpdate__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./form/adapters/GridToFormUpdate */ "./src/form/adapters/GridToFormUpdate.js");
/* harmony import */ var _form_adapters_GridToFormCreate__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./form/adapters/GridToFormCreate */ "./src/form/adapters/GridToFormCreate.js");
/* harmony import */ var _editors_Select__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./editors/Select */ "./src/editors/Select.js");
/* harmony import */ var _editors_SuggestBox__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./editors/SuggestBox */ "./src/editors/SuggestBox.js");
/* harmony import */ var _editors_DatePicker__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./editors/DatePicker */ "./src/editors/DatePicker.js");
/* harmony import */ var _editors_Checkbox__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./editors/Checkbox */ "./src/editors/Checkbox.js");
/* harmony import */ var _editors_Number__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./editors/Number */ "./src/editors/Number.js");
/* harmony import */ var _common_ArgumentsError__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./common/ArgumentsError */ "./src/common/ArgumentsError.js");
/* harmony import */ var _common_ThrottleError__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./common/ThrottleError */ "./src/common/ThrottleError.js");
/* harmony import */ var _common_validation_rules_boolean__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./common/validation/rules/boolean */ "./src/common/validation/rules/boolean.js");
/* harmony import */ var _common_validation_rules_date__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./common/validation/rules/date */ "./src/common/validation/rules/date.js");
/* harmony import */ var _common_validation_rules_enum__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./common/validation/rules/enum */ "./src/common/validation/rules/enum.js");
/* harmony import */ var _common_validation_rules_set__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./common/validation/rules/set */ "./src/common/validation/rules/set.js");
/* harmony import */ var _common_validation_rules_float__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./common/validation/rules/float */ "./src/common/validation/rules/float.js");
/* harmony import */ var _common_validation_rules_regExp__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./common/validation/rules/regExp */ "./src/common/validation/rules/regExp.js");
/* harmony import */ var _common_validation_rules_notNull__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./common/validation/rules/notNull */ "./src/common/validation/rules/notNull.js");
/* harmony import */ var _common_validation_rules_number__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./common/validation/rules/number */ "./src/common/validation/rules/number.js");
/* harmony import */ var _common_validation_rules_notEmpty__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./common/validation/rules/notEmpty */ "./src/common/validation/rules/notEmpty.js");
/* harmony import */ var _form_mixin__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./form/mixin */ "./src/form/mixin.js");
/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */







































if (!global._babelPolyfill) {
  __webpack_require__(/*! @babel/polyfill/browser */ "@babel/polyfill/browser");
}

var UIKernel = {
  applyGridFilters: _grid_models_applyGridFilters__WEBPACK_IMPORTED_MODULE_2__["default"],
  Grid: _grid_Component__WEBPACK_IMPORTED_MODULE_3__["default"],
  Form: _form_FormService__WEBPACK_IMPORTED_MODULE_4__["default"],
  connectForm: _form_connectForm__WEBPACK_IMPORTED_MODULE_5__["default"],
  createValidator: _common_validation_Validator__WEBPACK_IMPORTED_MODULE_6__["default"].create,
  exportGridData: _grid_export_exportGridData__WEBPACK_IMPORTED_MODULE_7__["default"],
  toJSON: _grid_export_exporters_toJSON__WEBPACK_IMPORTED_MODULE_8__["default"],
  ValidationErrors: _common_validation_ValidationErrors__WEBPACK_IMPORTED_MODULE_9__["default"],
  Models: {
    Grid: {
      Xhr: _grid_models_GridXhrModel__WEBPACK_IMPORTED_MODULE_10__["default"],
      Collection: _grid_models_GridCollectionModel__WEBPACK_IMPORTED_MODULE_11__["default"]
    },
    Events: _common_Events__WEBPACK_IMPORTED_MODULE_12__["default"],
    Form: _form_FormModel__WEBPACK_IMPORTED_MODULE_13__["default"],
    FormXhr: _form_FormXhrModel__WEBPACK_IMPORTED_MODULE_14__["default"],
    List: {
      Xhr: _list_ListXhrModel__WEBPACK_IMPORTED_MODULE_15__["default"]
    }
  },
  AbstractModels: {
    Form: _form_AbstractFormModel__WEBPACK_IMPORTED_MODULE_16__["default"],
    Grid: _grid_models_AbstractGridModel__WEBPACK_IMPORTED_MODULE_17__["default"],
    List: _list_AbstractListModel__WEBPACK_IMPORTED_MODULE_18__["default"]
  },
  Adapters: {
    Grid: {
      ToFormUpdate: _form_adapters_GridToFormUpdate__WEBPACK_IMPORTED_MODULE_19__["default"],
      ToFormCreate: _form_adapters_GridToFormCreate__WEBPACK_IMPORTED_MODULE_20__["default"]
    }
  },
  Editors: {
    Select: _editors_Select__WEBPACK_IMPORTED_MODULE_21__["default"],
    SuggestBox: _editors_SuggestBox__WEBPACK_IMPORTED_MODULE_22__["default"],
    DatePicker: _editors_DatePicker__WEBPACK_IMPORTED_MODULE_23__["default"],
    Checkbox: _editors_Checkbox__WEBPACK_IMPORTED_MODULE_24__["default"],
    Number: _editors_Number__WEBPACK_IMPORTED_MODULE_25__["default"]
  },
  ArgumentsError: _common_ArgumentsError__WEBPACK_IMPORTED_MODULE_26__["default"],
  ThrottleError: _common_ThrottleError__WEBPACK_IMPORTED_MODULE_27__["default"],
  Validators: {
    "boolean": _common_validation_rules_boolean__WEBPACK_IMPORTED_MODULE_28__["default"],
    date: _common_validation_rules_date__WEBPACK_IMPORTED_MODULE_29__["default"],
    "enum": _common_validation_rules_enum__WEBPACK_IMPORTED_MODULE_30__["default"],
    set: _common_validation_rules_set__WEBPACK_IMPORTED_MODULE_31__["default"],
    "float": _common_validation_rules_float__WEBPACK_IMPORTED_MODULE_32__["default"],
    regExp: _common_validation_rules_regExp__WEBPACK_IMPORTED_MODULE_33__["default"],
    notNull: _common_validation_rules_notNull__WEBPACK_IMPORTED_MODULE_34__["default"],
    number: _common_validation_rules_number__WEBPACK_IMPORTED_MODULE_35__["default"],
    notEmpty: _common_validation_rules_notEmpty__WEBPACK_IMPORTED_MODULE_36__["default"]
  },
  Mixins: {
    Form: _form_mixin__WEBPACK_IMPORTED_MODULE_37__["default"]
  },
  _get: _common_variables__WEBPACK_IMPORTED_MODULE_1__["default"].get,
  _set: _common_variables__WEBPACK_IMPORTED_MODULE_1__["default"].set
};
/* harmony default export */ __webpack_exports__["default"] = (UIKernel);

/***/ }),

/***/ "./src/common/ArgumentsError.js":
/*!**************************************!*\
  !*** ./src/common/ArgumentsError.js ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ "./src/common/utils.js");
/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */


function ArgumentsError(message) {
  Error.call(this, message);
  this.name = 'ArgumentsError';
  this.message = message;
  this.status = this.statusCode = 422;
  this.stack = Object(_utils__WEBPACK_IMPORTED_MODULE_0__["getStack"])();
}

ArgumentsError.prototype = Object.create(Error.prototype);
ArgumentsError.prototype.constructor = ArgumentsError;
/* harmony default export */ __webpack_exports__["default"] = (ArgumentsError);

/***/ }),

/***/ "./src/common/Events.js":
/*!******************************!*\
  !*** ./src/common/Events.js ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/typeof */ "@babel/runtime/helpers/typeof");
/* harmony import */ var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "@babel/runtime/helpers/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ "@babel/runtime/helpers/createClass");
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils */ "./src/common/utils.js");




/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */

/**
 * Events control model
 */

var EventsModel =
/*#__PURE__*/
function () {
  function EventsModel() {
    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this, EventsModel);

    this._subscribers = {};
  }
  /**
   * Subscribe to inner model event
   *
   * @param {string}      event   Event ID
   * @param {Function}    cb      CallBack function
   */


  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default()(EventsModel, [{
    key: "on",
    value: function on(event, cb) {
      if (_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default()(this._subscribers[event]) !== 'object') {
        this._subscribers[event] = [];
      }

      this._subscribers[event].push(cb);
    }
    /**
     * Unsubscribe from inner model event
     *
     * @param {number}      event   Event ID
     * @param {Function}    cb      CallBack function
     */

  }, {
    key: "off",
    value: function off(event, cb) {
      if (this._subscribers[event]) {
        this._subscribers[event] = Object(_utils__WEBPACK_IMPORTED_MODULE_3__["without"])(this._subscribers[event], cb);
      }
    }
    /**
     * Trigger inner model event
     *
     * @param {number}  event   Event ID
     * @param {...*}    params
     */

  }, {
    key: "trigger",
    value: function trigger(event) {
      if (!this._subscribers[event] || !this._subscribers[event].length) {
        return;
      }

      for (var _len = arguments.length, params = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
        params[_key - 1] = arguments[_key];
      }

      var _iteratorNormalCompletion = true;
      var _didIteratorError = false;
      var _iteratorError = undefined;

      try {
        for (var _iterator = this._subscribers[event][Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
          var subscriber = _step.value;
          subscriber.apply(void 0, params);
        }
      } catch (err) {
        _didIteratorError = true;
        _iteratorError = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion && _iterator["return"] != null) {
            _iterator["return"]();
          }
        } finally {
          if (_didIteratorError) {
            throw _iteratorError;
          }
        }
      }
    }
    /**
     * Returns the number of listeners listening to the event
     *
     * @param {string} event name
     */

  }, {
    key: "listenerCount",
    value: function listenerCount(event) {
      return this._subscribers[event] ? this._subscribers[event].length : 0;
    }
    /**
     * Removes all listeners of the specified event
     *
     * @param {string} event name
     */

  }, {
    key: "removeAllListeners",
    value: function removeAllListeners(event) {
      this._subscribers[event] = [];
    }
  }]);

  return EventsModel;
}();

/* harmony default export */ __webpack_exports__["default"] = (EventsModel);

/***/ }),

/***/ "./src/common/Portal.js":
/*!******************************!*\
  !*** ./src/common/Portal.js ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "@babel/runtime/helpers/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ "@babel/runtime/helpers/createClass");
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ "@babel/runtime/helpers/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ "@babel/runtime/helpers/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/assertThisInitialized */ "@babel/runtime/helpers/assertThisInitialized");
/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ "@babel/runtime/helpers/inherits");
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-dom */ "react-dom");
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! prop-types */ "prop-types");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./utils */ "./src/common/utils.js");







/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */




var portalClass = '__portal';

var Portal =
/*#__PURE__*/
function (_React$Component) {
  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5___default()(Portal, _React$Component);

  function Portal(props) {
    var _this;

    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, Portal);

    _this = _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3___default()(Portal).call(this, props));
    _this._onDocumentMouseDown = _this._onDocumentMouseDown.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this));
    _this._onDocumentMouseScroll = _this._onDocumentMouseScroll.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this));
    return _this;
  }

  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default()(Portal, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      document.addEventListener('mousedown', this._onDocumentMouseDown, false);
      document.addEventListener('scroll', this._onDocumentMouseScroll, true);
      var portal = document.createElement('div');
      document.body.appendChild(portal);
      portal.className = portalClass;
      this.portal = portal;
      this.renderPortal();
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      document.removeEventListener('mousedown', this._onDocumentMouseDown, false);
      document.removeEventListener('scroll', this._onDocumentMouseScroll, true);
      react_dom__WEBPACK_IMPORTED_MODULE_6___default.a.unmountComponentAtNode(this.portal);
      document.body.removeChild(this.portal);
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate() {
      this.renderPortal();
    }
  }, {
    key: "_isDocumentEventOwner",
    value: function _isDocumentEventOwner(target) {
      return target === this.portal || this.portal.contains(target);
    }
  }, {
    key: "_onDocumentMouseDown",
    value: function _onDocumentMouseDown(e) {
      if (this.props.onDocumentMouseDown) {
        this.props.onDocumentMouseDown(e, this._isDocumentEventOwner(e.target));
      }
    }
  }, {
    key: "_onDocumentMouseScroll",
    value: function _onDocumentMouseScroll(e) {
      if (this.props.onDocumentMouseScroll) {
        this.props.onDocumentMouseScroll(e, this._isDocumentEventOwner(e.target));
      }
    }
  }, {
    key: "renderPortal",
    value: function renderPortal() {
      react_dom__WEBPACK_IMPORTED_MODULE_6___default.a.render(react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", Object(_utils__WEBPACK_IMPORTED_MODULE_9__["omit"])(this.props, ['onDocumentMouseDown', 'onDocumentMouseScroll']), this.props.children), this.portal);
    }
  }, {
    key: "render",
    value: function render() {
      return null;
    }
  }]);

  return Portal;
}(react__WEBPACK_IMPORTED_MODULE_7___default.a.Component);

Portal.propTypes = {
  children: prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.node,
  onDocumentMouseDown: prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.func,
  onDocumentMouseScroll: prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.func
};
/* harmony default export */ __webpack_exports__["default"] = (Portal);

/***/ }),

/***/ "./src/common/ThrottleError.js":
/*!*************************************!*\
  !*** ./src/common/ThrottleError.js ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ "./src/common/utils.js");
/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */


function ThrottleError() {
  Error.call(this);
  this.name = 'ThrottleError';
  this.message = 'Too many function call';
  this.stack = Object(_utils__WEBPACK_IMPORTED_MODULE_0__["getStack"])();
}

ThrottleError.prototype = Object.create(Error.prototype);
ThrottleError.prototype.constructor = ThrottleError;

ThrottleError.createWithParentStack = function (stack) {
  var err = new ThrottleError();
  err.stack += '\n' + stack;
  return err;
};

/* harmony default export */ __webpack_exports__["default"] = (ThrottleError);

/***/ }),

/***/ "./src/common/callbackify.js":
/*!***********************************!*\
  !*** ./src/common/callbackify.js ***!
  \***********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/utils */ "./src/common/utils.js");
/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */

var functionsNames = [];
/* harmony default export */ __webpack_exports__["default"] = (function (func) {
  var hideWarning = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
  var funcName = func.name;
  return function () {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    var lastArgumentIndex = args.length - 1;
    var cb = args[lastArgumentIndex];

    if (typeof cb === 'function' && !cb.__ignoreUIKernelWarning) {
      if (!functionsNames.includes(funcName) && !hideWarning) {
        Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__["warn"])("You are using callback in: '".concat(funcName, "'. Use promise instead.\n").concat(JSON.stringify(args)));
        functionsNames.push(funcName);
      }

      var result = func.apply(this, args);

      if (result && result.then) {
        result.then(function (data) {
          cb(null, data);
        })["catch"](function (err) {
          cb(err);
        });
      }
    } else {
      return func.apply(this, args);
    }
  };
});

/***/ }),

/***/ "./src/common/defaultXhr.js":
/*!**********************************!*\
  !*** ./src/common/defaultXhr.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _variables__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./variables */ "./src/common/variables.js");
/* harmony import */ var xhr__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! xhr */ "xhr");
/* harmony import */ var xhr__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(xhr__WEBPACK_IMPORTED_MODULE_1__);
/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */



function defaultXhr(settings) {
  return new Promise(function (resolve, reject) {
    xhr__WEBPACK_IMPORTED_MODULE_1___default()(settings, function (err, response, body) {
      if (response.statusCode === 200) {
        resolve(body);
        return;
      }

      if (!err) {
        err = new Error();
        err.statusCode = response.statusCode;
        err.message = 'Status Code: ' + err.statusCode;
      }

      if (body) {
        try {
          var parsedBody = JSON.parse(body);
          err.message = parsedBody.message || body;
        } catch (e) {
          err.message = body;
        }
      }

      reject(err);
    });
  });
}

if (!_variables__WEBPACK_IMPORTED_MODULE_0__["default"].get('xhr')) {
  _variables__WEBPACK_IMPORTED_MODULE_0__["default"].set('xhr', defaultXhr);
}

/* harmony default export */ __webpack_exports__["default"] = (function (settings) {
  return _variables__WEBPACK_IMPORTED_MODULE_0__["default"].get('xhr')(settings);
});

/***/ }),

/***/ "./src/common/setImmediate.js":
/*!************************************!*\
  !*** ./src/common/setImmediate.js ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */
if (typeof window !== 'undefined' && typeof window.setImmediate !== 'function') {
  window.setImmediate = function () {
    var head = {};
    var tail = head;
    var ID = Math.random();

    function onMessage(e) {
      if (e.data !== ID) {
        return;
      }

      head = head.next;
      var func = head.func;
      delete head.func;
      func();
    }

    if (window.addEventListener) {
      window.addEventListener('message', onMessage, false);
    } else {
      window.attachEvent('onmessage', onMessage);
    }

    return window.postMessage ? function (func) {
      tail = tail.next = {
        func: func
      };
      window.postMessage(ID, '*');
    } : function (func) {
      setTimeout(func, 0);
    };
  }();
}

/***/ }),

/***/ "./src/common/toPromise.js":
/*!*********************************!*\
  !*** ./src/common/toPromise.js ***!
  \*********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/utils */ "./src/common/utils.js");
/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */

var functionsNames = [];

function toPromise(func, hideWarning) {
  var funcName = func.name;

  function promiseWarn(text) {
    if (!hideWarning) {
      if (!functionsNames.includes(funcName)) {
        Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__["warn"])(text);
        functionsNames.push(funcName);
      }
    }
  }

  return function () {
    for (var _len = arguments.length, mainArguments = new Array(_len), _key = 0; _key < _len; _key++) {
      mainArguments[_key] = arguments[_key];
    }

    var promise;
    var callbackPromise = new Promise(function (resolve, reject) {
      function toPromiseCallback(err, data) {
        if (err) {
          return reject(err);
        }

        resolve(data);
      }

      toPromiseCallback.__ignoreUIKernelWarning = true;
      mainArguments.push(toPromiseCallback);
      promise = func.apply(void 0, mainArguments);
    });

    if (promise) {
      if (promise.then && promise["catch"]) {
        return promise;
      }

      promiseWarn("The return value is not a Promise in '".concat(funcName, "'.\n") + "Arguments: ".concat(JSON.stringify(mainArguments), "\n") + "Returns: ".concat(JSON.stringify(promise)));
      return callbackPromise;
    } else {
      promiseWarn("You are using callback in: '".concat(funcName, "'. Use promise instead.\n") + "Arguments: ".concat(JSON.stringify(mainArguments)));
      return callbackPromise;
    }
  };
}

/* harmony default export */ __webpack_exports__["default"] = (toPromise);

/***/ }),

/***/ "./src/common/utils.js":
/*!*****************************!*\
  !*** ./src/common/utils.js ***!
  \*****************************/
/*! exports provided: isIntersection, size, indexOf, throttle, parseValueFromEvent, Decorator, decorate, isEqual, clone, cloneDeep, isEmpty, isDefined, forEach, pluck, find, findIndex, omit, escape, zipObject, pick, mapKeys, reduce, union, at, pairs, toDate, without, last, getRecordChanges, getStack, warn, toEncodedString, asyncHandler, parents, parseJson */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isIntersection", function() { return isIntersection; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "size", function() { return size; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "indexOf", function() { return indexOf; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "throttle", function() { return throttle; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseValueFromEvent", function() { return parseValueFromEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Decorator", function() { return Decorator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "decorate", function() { return decorate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isEqual", function() { return isEqual; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "clone", function() { return clone; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cloneDeep", function() { return cloneDeep; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isEmpty", function() { return isEmpty; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isDefined", function() { return isDefined; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "forEach", function() { return forEach; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "pluck", function() { return pluck; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "find", function() { return find; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "findIndex", function() { return findIndex; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "omit", function() { return omit; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "escape", function() { return escape; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "zipObject", function() { return zipObject; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "pick", function() { return pick; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mapKeys", function() { return mapKeys; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "reduce", function() { return reduce; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "union", function() { return union; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "at", function() { return at; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "pairs", function() { return pairs; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "toDate", function() { return toDate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "without", function() { return without; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "last", function() { return last; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getRecordChanges", function() { return getRecordChanges; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getStack", function() { return getStack; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "warn", function() { return warn; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "toEncodedString", function() { return toEncodedString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "asyncHandler", function() { return asyncHandler; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parents", function() { return parents; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseJson", function() { return parseJson; });
/* harmony import */ var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/typeof */ "@babel/runtime/helpers/typeof");
/* harmony import */ var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _ThrottleError__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ThrottleError */ "./src/common/ThrottleError.js");
/* harmony import */ var _ArgumentsError__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ArgumentsError */ "./src/common/ArgumentsError.js");



/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */



function baseClone(obj, isDeep) {
  var cloned;
  var es6types = ['[object Set]', '[object WeakSet]', '[object Map]', '[object WeakMap]'];

  if (!(obj instanceof Object) || obj instanceof Date || obj instanceof Function || obj instanceof RegExp) {
    return obj;
  }

  if (Array.isArray(obj)) {
    cloned = [];
    var _iteratorNormalCompletion = true;
    var _didIteratorError = false;
    var _iteratorError = undefined;

    try {
      for (var _iterator = obj[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
        var el = _step.value;
        cloned.push(isDeep ? baseClone(el, true) : el);
      }
    } catch (err) {
      _didIteratorError = true;
      _iteratorError = err;
    } finally {
      try {
        if (!_iteratorNormalCompletion && _iterator["return"] != null) {
          _iterator["return"]();
        }
      } finally {
        if (_didIteratorError) {
          throw _iteratorError;
        }
      }
    }
  } else if (es6types.includes(obj.toString())) {
    cloned = new obj.constructor(obj);
  } else {
    cloned = {};

    for (var _i = 0, _Object$entries = Object.entries(obj); _i < _Object$entries.length; _i++) {
      var _Object$entries$_i = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_Object$entries[_i], 2),
          field = _Object$entries$_i[0],
          value = _Object$entries$_i[1];

      cloned[field] = isDeep ? baseClone(value, true) : value;
    }
  }

  return cloned;
}
/**
 * Check if two arrays intersection exists
 */


function isIntersection(a, b) {
  var c;

  if (a.length > b.length) {
    c = a;
    a = b;
    b = c;
  }

  var _iteratorNormalCompletion2 = true;
  var _didIteratorError2 = false;
  var _iteratorError2 = undefined;

  try {
    for (var _iterator2 = a[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
      var el = _step2.value;

      if (indexOf(b, el) > -1) {
        return true;
      }
    }
  } catch (err) {
    _didIteratorError2 = true;
    _iteratorError2 = err;
  } finally {
    try {
      if (!_iteratorNormalCompletion2 && _iterator2["return"] != null) {
        _iterator2["return"]();
      }
    } finally {
      if (_didIteratorError2) {
        throw _iteratorError2;
      }
    }
  }

  return false;
}
/**
 * Define object size
 *
 * @param   {Object}    obj     Object
 * @return  {number}    Object size
 */

function size(obj) {
  return Object.keys(obj).length;
}
/**
 * Element position (isEqual checking)
 *
 * @param   {Array}   arr   Array
 * @param   {*}       item  Element item
 * @return  {number}
 */

function indexOf(arr, item) {
  for (var i = 0; i < arr.length; i++) {
    if (isEqual(arr[i], item)) {
      return i;
    }
  }

  return -1;
}
function throttle(func) {
  var worked = false;
  var nextArguments;
  var nextResolve;
  var nextReject;
  return function () {
    if (typeof arguments[arguments.length - 1] === 'function') {
      return throttleCallback(func).apply(this, arguments);
    } else {
      return throttlePromise(func).apply(this, arguments);
    }
  }; // it is still used in FormMixin._validateForm so we can't remove it yet

  function throttleCallback(func) {
    return function run() {
      var ctx = this; // Function context

      var cb = arguments[arguments.length - 1];
      var argumentsArray = [].slice.call(arguments);

      if (worked) {
        // Set as the next call
        nextArguments = arguments;
        return;
      }

      worked = true;

      var cbWrapper = function cbWrapper() {
        if (!nextWorker() && typeof cb === 'function') {
          cb.apply(null, arguments);
        }
      };

      if (typeof cb === 'function') {
        argumentsArray[argumentsArray.length - 1] = cbWrapper;
        func.apply(this, argumentsArray.concat(nextWorker));
      } else {
        func.apply(this, argumentsArray.concat(cbWrapper, nextWorker));
      }

      function nextWorker() {
        worked = false;

        if (nextArguments) {
          var args = nextArguments;
          nextArguments = null;
          run.apply(ctx, args);
          return true;
        }

        return false;
      }
    };
  }

  function throttlePromise(func) {
    /**
     * @throws {ThrottleError} Too many function call
     */
    return function run() {
      var _this = this;

      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }

      var parentStack = getStack(2);
      return new Promise(function (resolve, reject) {
        if (worked) {
          if (nextArguments) {
            nextReject(_ThrottleError__WEBPACK_IMPORTED_MODULE_2__["default"].createWithParentStack(parentStack));
          }

          nextArguments = args;
          nextResolve = resolve;
          nextReject = reject;
          return;
        }

        worked = true;
        func.apply(_this, args).then(function (result) {
          worked = false;

          if (nextArguments) {
            nextResolve(run.apply(_this, nextArguments));
            nextArguments = null;
            reject(_ThrottleError__WEBPACK_IMPORTED_MODULE_2__["default"].createWithParentStack(parentStack));
            return;
          }

          resolve(result);
        })["catch"](function (err) {
          worked = false;
          reject(err);
        });
      });
    };
  }
}
function parseValueFromEvent(event) {
  if (event && _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default()(event) === 'object' && event.target && ['INPUT', 'TEXTAREA', 'SELECT'].indexOf(event.target.tagName) >= 0) {
    switch (event.target.type) {
      case 'checkbox':
        return event.target.checked;
    }

    return event.target.value;
  }

  return event;
}
function Decorator(obj, decor) {
  Object.assign(this, decor);

  for (var i in obj) {
    if (typeof obj[i] === 'function' && !decor[i]) {
      this[i] = obj[i].bind(obj);
    }
  }
}
function decorate(obj, decor) {
  Decorator.prototype = obj;
  return new Decorator(obj, decor);
}
/**
 * Checking at equals params
 *
 * @param a
 * @param b
 * @returns {boolean}
 */

function isEqual(a, b) {
  if (a === null || b === null || a === undefined || b === undefined || typeof a === 'function' || typeof b === 'function' || a instanceof RegExp || b instanceof RegExp) {
    return a === b;
  }

  if (a === b || a.valueOf() === b.valueOf() || a !== a && b !== b) {
    return true;
  }

  if (Array.isArray(a) && (!Array.isArray(b) || a.length !== b.length) || _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default()(a) !== 'object' || _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default()(b) !== 'object') {
    return false;
  }

  if (typeof File === 'function' && a instanceof File && b instanceof File) {
    return a.size === b.size && a.name === b.name;
  }

  var keys = Object.keys(a);
  return Object.keys(b).every(function (key) {
    return keys.includes(key);
  }) && keys.every(function (key) {
    return isEqual(a[key], b[key]);
  });
}
/**
 * Clone object
 *
 * @param obj
 * @returns {*}
 */

function clone(obj) {
  return baseClone(obj, false);
}
function cloneDeep(obj) {
  return baseClone(obj, true);
}
function isEmpty(value) {
  if (!value) {
    return true;
  }

  if (Array.isArray(value)) {
    return value.length === 0;
  }

  if (_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default()(value) === 'object') {
    return Object.keys(value).length === 0;
  }

  if (typeof value === 'string') {
    return value.trim().length === 0;
  }

  return false;
}
function isDefined(value) {
  return value !== null && value !== undefined;
}
function forEach(obj, func, ctx) {
  for (var i in obj) {
    func.call(ctx, obj[i], i);
  }
}
function pluck(arr, field) {
  return arr.map(function (item) {
    return item[field];
  });
}
function find(arr, func) {
  for (var i in arr) {
    if (func(arr[i], i)) {
      return arr[i];
    }
  }

  return null;
}
function findIndex(obj, func) {
  for (var i in obj) {
    if (func(obj[i], i)) {
      return i;
    }
  }

  return -1;
}
function omit(obj, predicate) {
  var result = {};

  for (var _i2 = 0, _Object$entries2 = Object.entries(obj); _i2 < _Object$entries2.length; _i2++) {
    var _Object$entries2$_i = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_Object$entries2[_i2], 2),
        field = _Object$entries2$_i[0],
        value = _Object$entries2$_i[1];

    if (typeof predicate === 'string' && predicate !== field || Array.isArray(predicate) && !predicate.includes(field) || typeof predicate === 'function' && !predicate(value, field)) {
      result[field] = value;
    }
  }

  return result;
}
function escape(string) {
  var reUnescaped = /[&<>"'`]/g;
  var escapes = {
    '&': '&amp;',
    '<': '&lt;',
    '>': '&gt;',
    '"': '&quot;',
    '\'': '&#39;',
    '`': '&#96;'
  };
  string = "".concat(string === null ? '' : string.toString());

  if (string && reUnescaped.test(string)) {
    return string.replace(reUnescaped, function (chr) {
      return escapes[chr];
    });
  }

  return string;
}
function zipObject(keys, values) {
  var result = {};

  for (var i = 0; i < keys.length; i++) {
    result[keys[i]] = values[i];
  }

  return result;
}
function pick(obj, keys, defaultValue) {
  return keys.reduce(function (result, key) {
    if (obj.hasOwnProperty(key)) {
      result[key] = obj[key];
    } else if (defaultValue !== undefined) {
      result[key] = defaultValue;
    }

    return result;
  }, {});
}
function mapKeys(object, iteratee) {
  var result = {};

  for (var _i3 = 0, _Object$entries3 = Object.entries(object); _i3 < _Object$entries3.length; _i3++) {
    var _Object$entries3$_i = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_Object$entries3[_i3], 2),
        key = _Object$entries3$_i[0],
        value = _Object$entries3$_i[1];

    result[iteratee(value, key)] = value;
  }

  return result;
}
function reduce(obj, func, value) {
  for (var i in obj) {
    value = func(value, obj[i], i);
  }

  return value;
}
function union() {
  var elements = {};

  for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
    args[_key2] = arguments[_key2];
  }

  for (var _i4 = 0, _args = args; _i4 < _args.length; _i4++) {
    var arg = _args[_i4];
    var _iteratorNormalCompletion3 = true;
    var _didIteratorError3 = false;
    var _iteratorError3 = undefined;

    try {
      for (var _iterator3 = arg[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
        var el = _step3.value;
        elements[el] = el;
      }
    } catch (err) {
      _didIteratorError3 = true;
      _iteratorError3 = err;
    } finally {
      try {
        if (!_iteratorNormalCompletion3 && _iterator3["return"] != null) {
          _iterator3["return"]();
        }
      } finally {
        if (_didIteratorError3) {
          throw _iteratorError3;
        }
      }
    }
  }

  return Object.values(elements);
}
function at(obj, keys) {
  var result = [];

  if (!Array.isArray(keys)) {
    return [obj[keys]];
  }

  var _iteratorNormalCompletion4 = true;
  var _didIteratorError4 = false;
  var _iteratorError4 = undefined;

  try {
    for (var _iterator4 = keys[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {
      var key = _step4.value;
      result.push(obj[key]);
    }
  } catch (err) {
    _didIteratorError4 = true;
    _iteratorError4 = err;
  } finally {
    try {
      if (!_iteratorNormalCompletion4 && _iterator4["return"] != null) {
        _iterator4["return"]();
      }
    } finally {
      if (_didIteratorError4) {
        throw _iteratorError4;
      }
    }
  }

  return result;
}
function pairs(obj) {
  var result = [];

  for (var i in obj) {
    result.push([i, obj[i]]);
  }

  return result;
}
function toDate(value) {
  var date;

  if (typeof value === 'number') {
    return new Date(value);
  }

  if (typeof value === 'string') {
    date = new Date(value);
    date.setTime(date.getTime() + date.getTimezoneOffset() * 60 * 1000); // Convert UTC to local time

    return date;
  }

  return new Date(value);
}
function without(arr, el) {
  var result = [];

  for (var i = 0; i < arr.length; i++) {
    if (Array.isArray(el) ? indexOf(el, arr[i]) > -1 : isEqual(arr[i], el)) {
      continue;
    }

    result.push(arr[i]);
  }

  return result;
}
function last(arr) {
  return arr[arr.length - 1];
}
function getRecordChanges(model, data, changes, newChanges) {
  var result = Object.assign({}, changes, newChanges);

  for (var i in result) {
    if (isEqual(data[i], result[i])) {
      delete result[i];
    }
  }

  Object.assign(result, pick(data, model.getValidationDependency(Object.keys(result))));
  return result;
}
function getStack() {
  var deep = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
  // We add here try..catch because in IE Error.stack is available only
  // for thrown errors: https://msdn.microsoft.com/ru-ru/library/windows/apps/hh699850.aspx
  var stack = '';
  var stackTraceLimitDefault = Error.stackTraceLimit;
  Error.stackTraceLimit = deep + 12;

  try {
    throw new Error();
  } catch (e) {
    if (e.stack) {
      // Error.stack is unavailable in old browsers
      stack = e.stack.split('\n').slice(2 + deep) // Here we delete rows 'Error' and 'at getStack(utils.js:427)'
      .join('\n');
    }
  }

  Error.stackTraceLimit = stackTraceLimitDefault;
  return stack;
}
function warn(message) {
  console.warn(message, '\n', getStack(1));
}
function toEncodedString(value) {
  return encodeURIComponent(typeof value === 'string' ? value : JSON.stringify(value));
}
function asyncHandler(router) {
  return function (req, res, next) {
    var promise = router(req, res, next);

    if (promise && promise.then) {
      return promise["catch"](next);
    }

    next(new Error('asyncHandler expected to take async function.'));
  };
}
function parents(element, selector) {
  var result = [];

  while (element = element.parentElement) {
    if (element.matches(selector)) {
      result.push(element);
    }
  }

  return result;
}
function parseJson(json) {
  var errorMessage = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'Incorrect JSON';
  var result;

  try {
    result = JSON.parse(json);
  } catch (err) {
    throw new _ArgumentsError__WEBPACK_IMPORTED_MODULE_3__["default"](errorMessage);
  }

  return result;
}

/***/ }),

/***/ "./src/common/validation/ValidationErrors.js":
/*!***************************************************!*\
  !*** ./src/common/validation/ValidationErrors.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ "@babel/runtime/helpers/toConsumableArray");
/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "@babel/runtime/helpers/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ "@babel/runtime/helpers/createClass");
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "@babel/runtime/helpers/defineProperty");
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4__);






/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */
var ValidationErrors =
/*#__PURE__*/
function () {
  /**
   * Field errors control manager
   * @constructor
   */
  function ValidationErrors() {
    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default()(this, ValidationErrors);

    this._fields = new Map();
  }
  /**
   * Convert JSON to ValidationErrors object
   *
   * @param   {{:string[]}}      jsonObject
   * @return  {ValidationErrors}
   * @static
   */


  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default()(ValidationErrors, [{
    key: "add",

    /**
     * Add an error
     *
     * @param {string}                  field       Field name
     * @param {string|{string message}} error       Error text
     * @return {ValidationErrors}
     */
    value: function add(field, error) {
      error = this._formErrorValue(error);

      if (!this._fields.has(field)) {
        this._fields.set(field, [error]);

        return this;
      }

      var fieldErrors = this._fields.get(field);

      if (!fieldErrors.includes(error)) {
        fieldErrors.push(error);
      }

      return this;
    }
    /**
     * Field has error flag
     *
     * @param   {string}      field     Field name
     * @returns {boolean}
     */

  }, {
    key: "hasError",
    value: function hasError(field) {
      return this._fields.has(field);
    }
    /**
     * Get field errors
     *
     * @param   {string}      field     Field name
     * @returns {Array|null}  Errors array or null
     */

  }, {
    key: "getFieldErrors",
    value: function getFieldErrors(field) {
      return this._fields.get(field) || null;
    }
    /**
     * Get field errors message
     *
     * @param   {string}      field     Field name
     * @returns {Array|null}  Errors array or null
     */

  }, {
    key: "getFieldErrorMessages",
    value: function getFieldErrorMessages(field) {
      var fieldErrors = this._fields.get(field);

      if (fieldErrors) {
        return fieldErrors.map(function (error) {
          return error.message;
        });
      }

      return null;
    }
    /**
     * Get field names array, that contain errors
     *
     * @returns {string[]|null}
     */

  }, {
    key: "getFailedFields",
    value: function getFailedFields() {
      var fields = _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(this._fields.keys());

      return fields.length ? fields : null;
    }
    /**
     * Errors absence check
     *
     * @returns {boolean} Errors presence
     */

  }, {
    key: "isEmpty",
    value: function isEmpty() {
      return this._fields.size === 0;
    }
    /**
     * Clear specific field errors
     *
     * @param   {string}  field  Field name
     * @returns {ValidationErrors}
     */

  }, {
    key: "clearField",
    value: function clearField(field) {
      this._fields["delete"](field);

      return this;
    }
    /**
     * Clear errors list
     *
     * @return {ValidationErrors}
     */

  }, {
    key: "clear",
    value: function clear() {
      this._fields = new Map();
      return this;
    }
    /**
     * Convert errors to JSON
     *
     * @return {{[string]: Array<string>}}
     */

  }, {
    key: "toJSON",
    value: function toJSON() {
      var json = {};
      var _iteratorNormalCompletion = true;
      var _didIteratorError = false;
      var _iteratorError = undefined;

      try {
        for (var _iterator = this._fields[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
          var _step$value = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_step.value, 2),
              key = _step$value[0],
              value = _step$value[1];

          json[key] = value;
        }
      } catch (err) {
        _didIteratorError = true;
        _iteratorError = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion && _iterator["return"] != null) {
            _iterator["return"]();
          }
        } finally {
          if (_didIteratorError) {
            throw _iteratorError;
          }
        }
      }

      return json;
    }
    /**
     * Clone object
     *
     * @return {ValidationErrors}
     */

  }, {
    key: "clone",
    value: function clone() {
      return ValidationErrors.createFromJSON(this.toJSON());
    }
    /**
     * Merge object
     *
     * @return {ValidationErrors}
     */

  }, {
    key: "merge",
    value: function merge(validationErrors) {
      var _iteratorNormalCompletion2 = true;
      var _didIteratorError2 = false;
      var _iteratorError2 = undefined;

      try {
        for (var _iterator2 = validationErrors.getErrors()[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
          var _errors;

          var _step2$value = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_step2.value, 2),
              field = _step2$value[0],
              newErrors = _step2$value[1];

          var errors = this._fields.get(field);

          if (!errors) {
            errors = [];

            this._fields.set(field, errors);
          }

          (_errors = errors).push.apply(_errors, _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(newErrors));
        }
      } catch (err) {
        _didIteratorError2 = true;
        _iteratorError2 = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion2 && _iterator2["return"] != null) {
            _iterator2["return"]();
          }
        } finally {
          if (_didIteratorError2) {
            throw _iteratorError2;
          }
        }
      }

      return this;
    }
    /**
     * Get errors iterator
     *
     * @return {[string, string[]][]}
     */

  }, {
    key: "getErrors",
    value: function getErrors() {
      return this._fields;
    }
  }, {
    key: "_formErrorValue",
    value: function _formErrorValue(error) {
      if (typeof error === 'string') {
        return {
          message: error
        };
      }

      if (!error.message) {
        throw new Error('Invalid error value. Error must be string or object with "message" property.');
      }

      return error;
    }
  }], [{
    key: "createFromJSON",
    value: function createFromJSON(jsonObject) {
      var validationErrors = new ValidationErrors();

      var _loop = function _loop() {
        var _Object$entries$_i = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_Object$entries[_i], 2),
            key = _Object$entries$_i[0],
            value = _Object$entries$_i[1];

        value.forEach(function (errMessage) {
          return validationErrors.add(key, errMessage);
        });
      };

      for (var _i = 0, _Object$entries = Object.entries(jsonObject); _i < _Object$entries.length; _i++) {
        _loop();
      }

      return validationErrors;
    }
    /**
     * Create ValidationErrors object with one error
     *
     * @param {string}                  field
     * @param {string|{error: string}}  error
     * @return {ValidationErrors}
     */

  }, {
    key: "createWithError",
    value: function createWithError(field, error) {
      var validationErrors = new ValidationErrors();
      validationErrors.add(field, error);
      return validationErrors;
    }
  }]);

  return ValidationErrors;
}();

_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4___default()(ValidationErrors, "merge", function () {
  var jsonErrors = [{}];

  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
    args[_key] = arguments[_key];
  }

  for (var _i2 = 0, _args = args; _i2 < _args.length; _i2++) {
    var arg = _args[_i2];
    jsonErrors.push(arg.toJSON());
  } // TODO Need deep merge


  return ValidationErrors.createFromJSON(Object.assign.apply(Object, jsonErrors));
});

/* harmony default export */ __webpack_exports__["default"] = (ValidationErrors);

/***/ }),

/***/ "./src/common/validation/Validator.js":
/*!********************************************!*\
  !*** ./src/common/validation/Validator.js ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "@babel/runtime/helpers/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ "@babel/runtime/helpers/createClass");
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _ValidationErrors__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ValidationErrors */ "./src/common/validation/ValidationErrors.js");
/* harmony import */ var _ArgumentsError__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../ArgumentsError */ "./src/common/ArgumentsError.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils */ "./src/common/utils.js");






/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */




var Validator =
/*#__PURE__*/
function () {
  /**
   * Validation check model
   *
   * @constructor
   */
  function Validator() {
    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_3___default()(this, Validator);

    this._settings = {
      validators: {},
      groupValidators: [],
      asyncValidators: {},
      asyncGroupValidators: [],
      asyncDependenies: []
    };
  }

  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4___default()(Validator, [{
    key: "field",

    /**
     * Add field sync validators
     *
     * @param {string}      field       Field name
     * @param {...Function} validators  Field validators
     * @returns {Validator} validator
     */
    value: function field(_field) {
      if (!this._settings.validators[_field]) {
        this._settings.validators[_field] = [];
      }

      for (var _len = arguments.length, validators = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
        validators[_key - 1] = arguments[_key];
      }

      this._settings.validators[_field] = this._settings.validators[_field].concat(validators);
      return this;
    }
    /**
     * Specify multiple sync validators for fields group
     *
     * @param {Array}      fields              Fields array
     * @param {Function}   validatorFunction   Validator function
     * @returns {Validator} validator
     */

  }, {
    key: "fields",
    value: function fields(_fields, validatorFunction) {
      this._settings.groupValidators.push({
        fields: _fields,
        fn: validatorFunction
      });

      return this;
    }
    /**
     * Point which fields server validation needs
     *
     * @param {Array}   fields   Fields array
     * @returns {Validator} validator
     */

  }, {
    key: "asyncDependence",
    value: function asyncDependence(fields) {
      this._settings.asyncDependenies.push(fields);

      return this;
    }
    /**
     * Add field async validators
     *
     * @param {string}     field               Field name
     * @param {Function}   validatorFunction   Validator function
     * @returns {Validator} validator
     */

  }, {
    key: "asyncField",
    value: function asyncField(field, validatorFunction) {
      if (!this._settings.asyncValidators[field]) {
        this._settings.asyncValidators[field] = [];
      }

      this._settings.asyncValidators[field].push(validatorFunction);

      return this;
    }
    /**
     * Specify multiple async validators for fields group
     *
     * @param {Array}      fields              Fields array
     * @param {Function}   validatorFunction   Validator function
     * @returns {Validator} validator
     */

  }, {
    key: "asyncFields",
    value: function asyncFields(fields, validatorFunction) {
      this._settings.asyncGroupValidators.push({
        fields: fields,
        fn: validatorFunction
      });

      return this;
    }
    /**
     * Get all dependent fields validation needs
     *
     * @param {Array}   fields    Fields array
     * @returns {Array} fields
     */

  }, {
    key: "getValidationDependency",
    value: function getValidationDependency(fields) {
      var result = [];
      var length;
      var groups = Object(_utils__WEBPACK_IMPORTED_MODULE_7__["pluck"])(this._settings.groupValidators.concat(this._settings.asyncGroupValidators), 'fields').concat(this._settings.asyncDependenies);

      while (length !== result.length) {
        length = result.length;

        for (var i = 0; i < groups.length; i++) {
          if (!Object(_utils__WEBPACK_IMPORTED_MODULE_7__["isIntersection"])(groups[i], fields) && !Object(_utils__WEBPACK_IMPORTED_MODULE_7__["isIntersection"])(groups[i], result)) {
            continue;
          }

          for (var j = 0; j < groups[i].length; j++) {
            var field = groups[i][j];

            if (fields.indexOf(field) >= 0 || result.indexOf(field) >= 0) {
              continue;
            }

            result.push(field);
          }
        }
      }

      return result;
    }
    /**
     * Check client record validity
     *
     * @param {Object}  record   Record
     * @returns {ValidationErrors|null} Record validity
     */

  }, {
    key: "isValidRecord",
    value: function () {
      var _isValidRecord = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(record) {
        var fields, errors, awaitStack, promises, dependentFields, _i, _Object$entries, _Object$entries$_i, _field2, value, validators, _iteratorNormalCompletion3, _didIteratorError3, _iteratorError3, _iterator3, _step3, validator, _error, asyncValidators, _iteratorNormalCompletion4, _didIteratorError4, _iteratorError4, _iterator4, _step4, asyncValidator, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, groupValidator, _iteratorNormalCompletion2, _didIteratorError2, _iteratorError2, _iterator2, _step2, asyncGroupValidator, asyncErrors, error, field;

        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                fields = Object.keys(record);
                errors = new _ValidationErrors__WEBPACK_IMPORTED_MODULE_5__["default"]();
                awaitStack = [];
                promises = [];
                dependentFields = this.getValidationDependency(fields);

                if (!dependentFields.length) {
                  _context.next = 7;
                  break;
                }

                throw new _ArgumentsError__WEBPACK_IMPORTED_MODULE_6__["default"]('Not enough fields for validator: ' + dependentFields.join(', '));

              case 7:
                _i = 0, _Object$entries = Object.entries(record);

              case 8:
                if (!(_i < _Object$entries.length)) {
                  _context.next = 66;
                  break;
                }

                _Object$entries$_i = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_Object$entries[_i], 2), _field2 = _Object$entries$_i[0], value = _Object$entries$_i[1];
                validators = this._settings.validators[_field2];

                if (!validators) {
                  _context.next = 31;
                  break;
                }

                _iteratorNormalCompletion3 = true;
                _didIteratorError3 = false;
                _iteratorError3 = undefined;
                _context.prev = 15;

                for (_iterator3 = validators[Symbol.iterator](); !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
                  validator = _step3.value;
                  _error = validator(value);

                  if (_error) {
                    errors.add(_field2, _error);
                  }
                }

                _context.next = 23;
                break;

              case 19:
                _context.prev = 19;
                _context.t0 = _context["catch"](15);
                _didIteratorError3 = true;
                _iteratorError3 = _context.t0;

              case 23:
                _context.prev = 23;
                _context.prev = 24;

                if (!_iteratorNormalCompletion3 && _iterator3["return"] != null) {
                  _iterator3["return"]();
                }

              case 26:
                _context.prev = 26;

                if (!_didIteratorError3) {
                  _context.next = 29;
                  break;
                }

                throw _iteratorError3;

              case 29:
                return _context.finish(26);

              case 30:
                return _context.finish(23);

              case 31:
                asyncValidators = this._settings.asyncValidators[_field2];

                if (!asyncValidators) {
                  _context.next = 63;
                  break;
                }

                _iteratorNormalCompletion4 = true;
                _didIteratorError4 = false;
                _iteratorError4 = undefined;
                _context.prev = 36;
                _iterator4 = asyncValidators[Symbol.iterator]();

              case 38:
                if (_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done) {
                  _context.next = 49;
                  break;
                }

                asyncValidator = _step4.value;
                awaitStack.push(_field2);
                _context.t1 = promises;
                _context.next = 44;
                return asyncValidator(value);

              case 44:
                _context.t2 = _context.sent;

                _context.t1.push.call(_context.t1, _context.t2);

              case 46:
                _iteratorNormalCompletion4 = true;
                _context.next = 38;
                break;

              case 49:
                _context.next = 55;
                break;

              case 51:
                _context.prev = 51;
                _context.t3 = _context["catch"](36);
                _didIteratorError4 = true;
                _iteratorError4 = _context.t3;

              case 55:
                _context.prev = 55;
                _context.prev = 56;

                if (!_iteratorNormalCompletion4 && _iterator4["return"] != null) {
                  _iterator4["return"]();
                }

              case 58:
                _context.prev = 58;

                if (!_didIteratorError4) {
                  _context.next = 61;
                  break;
                }

                throw _iteratorError4;

              case 61:
                return _context.finish(58);

              case 62:
                return _context.finish(55);

              case 63:
                _i++;
                _context.next = 8;
                break;

              case 66:
                // Add sync and async group validators
                _iteratorNormalCompletion = true;
                _didIteratorError = false;
                _iteratorError = undefined;
                _context.prev = 69;

                for (_iterator = this._settings.groupValidators[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                  groupValidator = _step.value;

                  if (Object(_utils__WEBPACK_IMPORTED_MODULE_7__["isIntersection"])(groupValidator.fields, fields)) {
                    groupValidator.fn(record, errors);
                  }
                }

                _context.next = 77;
                break;

              case 73:
                _context.prev = 73;
                _context.t4 = _context["catch"](69);
                _didIteratorError = true;
                _iteratorError = _context.t4;

              case 77:
                _context.prev = 77;
                _context.prev = 78;

                if (!_iteratorNormalCompletion && _iterator["return"] != null) {
                  _iterator["return"]();
                }

              case 80:
                _context.prev = 80;

                if (!_didIteratorError) {
                  _context.next = 83;
                  break;
                }

                throw _iteratorError;

              case 83:
                return _context.finish(80);

              case 84:
                return _context.finish(77);

              case 85:
                _iteratorNormalCompletion2 = true;
                _didIteratorError2 = false;
                _iteratorError2 = undefined;
                _context.prev = 88;
                _iterator2 = this._settings.asyncGroupValidators[Symbol.iterator]();

              case 90:
                if (_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done) {
                  _context.next = 102;
                  break;
                }

                asyncGroupValidator = _step2.value;

                if (!Object(_utils__WEBPACK_IMPORTED_MODULE_7__["isIntersection"])(asyncGroupValidator.fields, fields)) {
                  _context.next = 99;
                  break;
                }

                awaitStack.push(null);
                _context.t5 = promises;
                _context.next = 97;
                return asyncGroupValidator.fn(record, errors);

              case 97:
                _context.t6 = _context.sent;

                _context.t5.push.call(_context.t5, _context.t6);

              case 99:
                _iteratorNormalCompletion2 = true;
                _context.next = 90;
                break;

              case 102:
                _context.next = 108;
                break;

              case 104:
                _context.prev = 104;
                _context.t7 = _context["catch"](88);
                _didIteratorError2 = true;
                _iteratorError2 = _context.t7;

              case 108:
                _context.prev = 108;
                _context.prev = 109;

                if (!_iteratorNormalCompletion2 && _iterator2["return"] != null) {
                  _iterator2["return"]();
                }

              case 111:
                _context.prev = 111;

                if (!_didIteratorError2) {
                  _context.next = 114;
                  break;
                }

                throw _iteratorError2;

              case 114:
                return _context.finish(111);

              case 115:
                return _context.finish(108);

              case 116:
                _context.next = 118;
                return Promise.all(promises);

              case 118:
                asyncErrors = _context.sent;

                while (asyncErrors.length) {
                  error = asyncErrors.pop();
                  field = awaitStack.pop();

                  if (error && field) {
                    errors.add(field, error);
                  }
                }

                return _context.abrupt("return", errors);

              case 121:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this, [[15, 19, 23, 31], [24,, 26, 30], [36, 51, 55, 63], [56,, 58, 62], [69, 73, 77, 85], [78,, 80, 84], [88, 104, 108, 116], [109,, 111, 115]]);
      }));

      function isValidRecord(_x) {
        return _isValidRecord.apply(this, arguments);
      }

      return isValidRecord;
    }()
  }], [{
    key: "create",
    value: function create() {
      return new Validator();
    }
  }]);

  return Validator;
}();

/* harmony default export */ __webpack_exports__["default"] = (Validator);

/***/ }),

/***/ "./src/common/validation/rules/boolean.js":
/*!************************************************!*\
  !*** ./src/common/validation/rules/boolean.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils */ "./src/common/utils.js");
/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */


function baseValidator(notNull, error, value) {
  error = error || 'Not boolean';

  if (!Object(_utils__WEBPACK_IMPORTED_MODULE_0__["isDefined"])(value)) {
    if (notNull) {
      return error;
    }

    return;
  }

  if (typeof value !== 'boolean') {
    return error;
  }
}
/**
 * Create boolean validator
 *
 * @param {string} error Error message
 * @returns {Function} Validator
 */


var validator = function validator(error) {
  return baseValidator.bind(null, false, error);
};

validator.notNull = function (error) {
  return baseValidator.bind(null, true, error);
};

/* harmony default export */ __webpack_exports__["default"] = (validator);

/***/ }),

/***/ "./src/common/validation/rules/date.js":
/*!*********************************************!*\
  !*** ./src/common/validation/rules/date.js ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/typeof */ "@babel/runtime/helpers/typeof");
/* harmony import */ var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils */ "./src/common/utils.js");


/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */


function baseValidator(notNull, min, max, error, value) {
  error = error || 'Invalid date';

  if (!Object(_utils__WEBPACK_IMPORTED_MODULE_1__["isDefined"])(value)) {
    if (notNull) {
      return error;
    }

    return;
  }

  var typeOfValue = _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default()(value);

  if (typeOfValue !== 'number' && typeOfValue !== 'string' && !(value instanceof Date)) {
    return error;
  }

  value = Object(_utils__WEBPACK_IMPORTED_MODULE_1__["toDate"])(value);

  if (isNaN(value)) {
    return error;
  }

  if (min && Object(_utils__WEBPACK_IMPORTED_MODULE_1__["toDate"])(min) > value) {
    return error;
  }

  if (max && Object(_utils__WEBPACK_IMPORTED_MODULE_1__["toDate"])(max) < value) {
    return error;
  }
}
/**
 * Create date validator
 *
 * @param {Date}    [min]   Min date
 * @param {Date}    [max]   Max date
 * @param {string}  error   Error message
 * @returns {Function} Validator
 */


var validator = function validator(min, max, error) {
  return baseValidator.bind(null, false, min, max, error);
};

validator.notNull = function (min, max, error) {
  return baseValidator.bind(null, true, min, max, error);
};

/* harmony default export */ __webpack_exports__["default"] = (validator);

/***/ }),

/***/ "./src/common/validation/rules/enum.js":
/*!*********************************************!*\
  !*** ./src/common/validation/rules/enum.js ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils */ "./src/common/utils.js");
/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */


function baseValidator(notNull, variants, error, value) {
  error = error || 'Not in variants';

  if (!Object(_utils__WEBPACK_IMPORTED_MODULE_0__["isDefined"])(value)) {
    if (notNull) {
      return error;
    }

    return;
  }

  if (variants.indexOf(value) < 0) {
    return error;
  }
}
/**
 * Create enum validator
 *
 * @param variants
 * @param {string} error Error message
 * @returns {Function}
 */


var validator = function validator(variants, error) {
  return baseValidator.bind(null, false, variants, error);
};

validator.notNull = function (variants, error) {
  return baseValidator.bind(null, true, variants, error);
};

/* harmony default export */ __webpack_exports__["default"] = (validator);

/***/ }),

/***/ "./src/common/validation/rules/float.js":
/*!**********************************************!*\
  !*** ./src/common/validation/rules/float.js ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils */ "./src/common/utils.js");
/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */


function baseValidator(notNull, min, max, error, value) {
  error = error || 'Invalid float';

  if (!Object(_utils__WEBPACK_IMPORTED_MODULE_0__["isDefined"])(value)) {
    if (notNull) {
      return error;
    }

    return;
  }

  if (typeof value !== 'number' || isNaN(value) || !isFinite(value) || typeof min === 'number' && value < min || typeof max === 'number' && value > max) {
    return error;
  }
}
/**
 * Create float validator
 *
 * @param min
 * @param max
 * @param {string} error Error message
 * @returns {Function}
 */


var validator = function validator(min, max, error) {
  return baseValidator.bind(null, false, min, max, error);
};

validator.notNull = function (min, max, error) {
  return baseValidator.bind(null, true, min, max, error);
};

/* harmony default export */ __webpack_exports__["default"] = (validator);

/***/ }),

/***/ "./src/common/validation/rules/notEmpty.js":
/*!*************************************************!*\
  !*** ./src/common/validation/rules/notEmpty.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils */ "./src/common/utils.js");
/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */

/**
 * Check if value is not empty string, array and object. Not null, undefined, 0
 *
 * @param {string} [error="Can not be empty"] Error message
 * @returns {Function}
 */

/* harmony default export */ __webpack_exports__["default"] = (function (error) {
  error = error || 'Can not be empty';
  return function (value) {
    if (Object(_utils__WEBPACK_IMPORTED_MODULE_0__["isEmpty"])(value) || typeof value === 'number' && (isNaN(value) || !isFinite(value))) {
      return error;
    }
  };
});

/***/ }),

/***/ "./src/common/validation/rules/notNull.js":
/*!************************************************!*\
  !*** ./src/common/validation/rules/notNull.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils */ "./src/common/utils.js");
/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */

/**
 * Create NULL validator
 *
 * @param {string} [error = "Can not be empty"] Error message
 * @returns {Function}
 */

/* harmony default export */ __webpack_exports__["default"] = (function (error) {
  error = error || 'Can not be empty';
  return function (value) {
    if (!Object(_utils__WEBPACK_IMPORTED_MODULE_0__["isDefined"])(value) || value === '' || typeof value === 'number' && (isNaN(value) || !isFinite(value))) {
      return error;
    }
  };
});

/***/ }),

/***/ "./src/common/validation/rules/number.js":
/*!***********************************************!*\
  !*** ./src/common/validation/rules/number.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils */ "./src/common/utils.js");
/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */


function baseValidator(notNull, min, max, error, value) {
  error = error || 'Invalid number';

  if (!Object(_utils__WEBPACK_IMPORTED_MODULE_0__["isDefined"])(value)) {
    if (notNull) {
      return error;
    }

    return;
  }

  if (typeof value !== 'number' || isNaN(value) || parseInt(value, 10).toString() !== value.toString() || typeof min === 'number' && value < min || typeof max === 'number' && value > max) {
    return error;
  }
}
/**
 * Create range Number validator
 *
 * @param min
 * @param max
 * @param {string} error Error message
 * @returns {Function}
 */


var validator = function validator(min, max, error) {
  return baseValidator.bind(null, false, min, max, error);
};

validator.notNull = function (min, max, error) {
  return baseValidator.bind(null, true, min, max, error);
};

/* harmony default export */ __webpack_exports__["default"] = (validator);

/***/ }),

/***/ "./src/common/validation/rules/regExp.js":
/*!***********************************************!*\
  !*** ./src/common/validation/rules/regExp.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils */ "./src/common/utils.js");
/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */


function baseValidator(notNull, regExp, error, value) {
  error = error || 'Invalid value';

  if (!Object(_utils__WEBPACK_IMPORTED_MODULE_0__["isDefined"])(value) || value === '') {
    if (notNull) {
      return error;
    }

    return;
  }

  if (typeof value !== 'string' || !regExp.test(value)) {
    return error;
  }
}
/**
 * Create RegEx validator
 *
 * @param regExp
 * @param {string} error Error message
 * @returns {Function}
 */


var validator = function validator(regExp, error) {
  return baseValidator.bind(null, false, regExp, error);
};

validator.notNull = function (regExp, error) {
  return baseValidator.bind(null, true, regExp, error);
};

/* harmony default export */ __webpack_exports__["default"] = (validator);

/***/ }),

/***/ "./src/common/validation/rules/set.js":
/*!********************************************!*\
  !*** ./src/common/validation/rules/set.js ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils */ "./src/common/utils.js");
/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */


function baseValidator(notNull, variants, error, values) {
  error = error || 'Not in variants';

  if (!Object(_utils__WEBPACK_IMPORTED_MODULE_0__["isDefined"])(values) || !values.length) {
    if (notNull) {
      return error;
    }

    return;
  }

  var _iteratorNormalCompletion = true;
  var _didIteratorError = false;
  var _iteratorError = undefined;

  try {
    for (var _iterator = values[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
      var value = _step.value;

      if (variants.indexOf(value) < 0) {
        return error;
      }
    }
  } catch (err) {
    _didIteratorError = true;
    _iteratorError = err;
  } finally {
    try {
      if (!_iteratorNormalCompletion && _iterator["return"] != null) {
        _iterator["return"]();
      }
    } finally {
      if (_didIteratorError) {
        throw _iteratorError;
      }
    }
  }
}
/**
 * Create set validator
 *
 * @param variants
 * @param {string} error Error message
 * @returns {Function}
 */


var validator = function validator(variants, error) {
  return baseValidator.bind(null, false, variants, error);
};

validator.notNull = function (variants, error) {
  return baseValidator.bind(null, true, variants, error);
};

/* harmony default export */ __webpack_exports__["default"] = (validator);

/***/ }),

/***/ "./src/common/variables.js":
/*!*********************************!*\
  !*** ./src/common/variables.js ***!
  \*********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */
var variables = {};
/* harmony default export */ __webpack_exports__["default"] = ({
  get: function get(key) {
    return variables[key];
  },
  set: function set(key, value) {
    variables[key] = value;
  }
});

/***/ }),

/***/ "./src/editors/Checkbox.js":
/*!*********************************!*\
  !*** ./src/editors/Checkbox.js ***!
  \*********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/extends */ "@babel/runtime/helpers/extends");
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/objectWithoutProperties */ "@babel/runtime/helpers/objectWithoutProperties");
/* harmony import */ var _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! prop-types */ "prop-types");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__);



/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */



function Checkbox(props) {
  var indeterminate = props.indeterminate,
      otherProps = _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1___default()(props, ["indeterminate"]);

  return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("input", _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, otherProps, {
    type: "checkbox",
    ref: function ref(input) {
      if (input) {
        input.indeterminate = indeterminate;
      }
    }
  }));
}

Checkbox.propTypes = {
  indeterminate: prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.bool
};
/* harmony default export */ __webpack_exports__["default"] = (Checkbox);

/***/ }),

/***/ "./src/editors/DatePicker.js":
/*!***********************************!*\
  !*** ./src/editors/DatePicker.js ***!
  \***********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/extends */ "@babel/runtime/helpers/extends");
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "@babel/runtime/helpers/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ "@babel/runtime/helpers/createClass");
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ "@babel/runtime/helpers/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ "@babel/runtime/helpers/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ "@babel/runtime/helpers/inherits");
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "@babel/runtime/helpers/defineProperty");
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var react_datepicker__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react-datepicker */ "react-datepicker");
/* harmony import */ var react_datepicker__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react_datepicker__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! moment */ "moment");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! prop-types */ "prop-types");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../common/utils */ "./src/common/utils.js");








/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */






var DatePickerEditor =
/*#__PURE__*/
function (_React$Component) {
  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5___default()(DatePickerEditor, _React$Component);

  function DatePickerEditor() {
    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this, DatePickerEditor);

    return _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default()(DatePickerEditor).apply(this, arguments));
  }

  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default()(DatePickerEditor, [{
    key: "onChange",
    value: function onChange(date) {
      if (date) {
        date = date.format(this.props.format);
      }

      this.props.onChange(date);
    }
  }, {
    key: "render",
    value: function render() {
      var otherProps = Object(_common_utils__WEBPACK_IMPORTED_MODULE_11__["omit"])(this.props, ['textFormat', 'value', 'onChange', 'min', 'max']);
      return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(react_datepicker__WEBPACK_IMPORTED_MODULE_8___default.a, _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, otherProps, {
        dateFormat: this.props.textFormat,
        selected: this.props.value && moment__WEBPACK_IMPORTED_MODULE_9___default()(this.props.value),
        onChange: this.onChange.bind(this),
        minDate: this.props.min && moment__WEBPACK_IMPORTED_MODULE_9___default()(this.props.min),
        maxDate: this.props.max && moment__WEBPACK_IMPORTED_MODULE_9___default()(this.props.max),
        todayButton: 'Today'
      }));
    }
  }]);

  return DatePickerEditor;
}(react__WEBPACK_IMPORTED_MODULE_7___default.a.Component);

_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(DatePickerEditor, "propTypes", {
  format: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.string,
  textFormat: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.string,
  min: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.any,
  max: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.any,
  value: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.any,
  show: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.bool,
  onBlur: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.func,
  onChange: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.func.isRequired
});

_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(DatePickerEditor, "defaultProps", {
  textFormat: 'YYYY-MM-DD'
});

/* harmony default export */ __webpack_exports__["default"] = (DatePickerEditor);

/***/ }),

/***/ "./src/editors/Number.js":
/*!*******************************!*\
  !*** ./src/editors/Number.js ***!
  \*******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/extends */ "@babel/runtime/helpers/extends");
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "@babel/runtime/helpers/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ "@babel/runtime/helpers/createClass");
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ "@babel/runtime/helpers/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ "@babel/runtime/helpers/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ "@babel/runtime/helpers/inherits");
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "@babel/runtime/helpers/defineProperty");
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _common_validation_rules_float__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../common/validation/rules/float */ "./src/common/validation/rules/float.js");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../common/utils */ "./src/common/utils.js");
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react-dom */ "react-dom");
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! prop-types */ "prop-types");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_11__);








/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */





var isInvalidFloat = Object(_common_validation_rules_float__WEBPACK_IMPORTED_MODULE_7__["default"])(null, null, true);

var NumberEditor =
/*#__PURE__*/
function (_React$Component) {
  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5___default()(NumberEditor, _React$Component);

  function NumberEditor(props) {
    var _this;

    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this, NumberEditor);

    _this = _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default()(NumberEditor).call(this, props));
    _this.state = {
      value: props.value
    };
    return _this;
  }

  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default()(NumberEditor, [{
    key: "componentWillReceiveProps",
    value: function componentWillReceiveProps(nextProps) {
      if (!Object(_common_utils__WEBPACK_IMPORTED_MODULE_8__["isEqual"])(this.state.value, nextProps.value)) {
        Object(react_dom__WEBPACK_IMPORTED_MODULE_9__["findDOMNode"])(this.input).value = this.state.value = nextProps.value;
      }
    }
  }, {
    key: "_onChangeHandler",
    value: function _onChangeHandler(e) {
      var target = e.target;
      var valueAsNumber = parseFloat(target.value); // Edge doesn't support "target.valueAsNumber"

      if (target.value === '' && target.validity.valid) {
        // Invalid number set empty string and valid=false to event
        this.state.value = null;
      } else if (isInvalidFloat(valueAsNumber)) {
        this.state.value = '';
      } else {
        this.state.value = valueAsNumber;
      }

      this.props.onChange(this.state.value);
    }
  }, {
    key: "render",
    value: function render() {
      var _this2 = this;

      return react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement("input", _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({
        step: "any"
      }, Object(_common_utils__WEBPACK_IMPORTED_MODULE_8__["omit"])(this.props, 'value'), {
        type: "number",
        ref: function ref(input) {
          return _this2.input = input;
        },
        onChange: this._onChangeHandler.bind(this),
        defaultValue: this.props.value
      }));
    }
  }]);

  return NumberEditor;
}(react__WEBPACK_IMPORTED_MODULE_10___default.a.Component);

_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(NumberEditor, "propTypes", {
  onChange: prop_types__WEBPACK_IMPORTED_MODULE_11___default.a.func.isRequired,
  value: prop_types__WEBPACK_IMPORTED_MODULE_11___default.a.oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_11___default.a.number, // String should be allowed, because when we start typing negative number,
  // there is appearing a warning in console after '-' symbol
  prop_types__WEBPACK_IMPORTED_MODULE_11___default.a.string])
});

/* harmony default export */ __webpack_exports__["default"] = (NumberEditor);

/***/ }),

/***/ "./src/editors/Select.js":
/*!*******************************!*\
  !*** ./src/editors/Select.js ***!
  \*******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/extends */ "@babel/runtime/helpers/extends");
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "@babel/runtime/helpers/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ "@babel/runtime/helpers/createClass");
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ "@babel/runtime/helpers/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ "@babel/runtime/helpers/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ "@babel/runtime/helpers/inherits");
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "@babel/runtime/helpers/defineProperty");
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! prop-types */ "prop-types");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../common/utils */ "./src/common/utils.js");








/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */




var SelectEditor =
/*#__PURE__*/
function (_React$Component) {
  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5___default()(SelectEditor, _React$Component);

  function SelectEditor(props) {
    var _this;

    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this, SelectEditor);

    _this = _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default()(SelectEditor).call(this, props));
    _this.state = {
      options: props.options,
      loading: Boolean(props.model)
    };
    return _this;
  }

  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default()(SelectEditor, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      var _this2 = this;

      if (this.props.model) {
        this.props.model.read('').then(function (data) {
          data.unshift([null, '']);

          _this2.setState({
            options: data,
            loading: false
          });
        })["catch"](function (err) {
          console.error(err);
        });
      }
    }
  }, {
    key: "getOptions",
    value: function getOptions() {
      return this.props.model ? this.state.options : this.props.options;
    }
  }, {
    key: "handleChange",
    value: function handleChange(e) {
      var option = this.getOptions()[e.target.value];

      if (!(option instanceof Array)) {
        option = [option, option];
      }

      this.props.onChange(option[0]);

      if (this.props.onLabelChange) {
        this.props.onLabelChange(option[1]);
      }
    }
  }, {
    key: "render",
    value: function render() {
      var _this3 = this;

      var options = this.getOptions();
      var valueIndex = Object(_common_utils__WEBPACK_IMPORTED_MODULE_9__["findIndex"])(options, function (option) {
        return Object(_common_utils__WEBPACK_IMPORTED_MODULE_9__["isEqual"])(option instanceof Array ? option[0] : option, _this3.props.value);
      });
      return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("select", _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, Object(_common_utils__WEBPACK_IMPORTED_MODULE_9__["omit"])(this.props, ['value', 'options']), {
        value: valueIndex,
        onChange: this.handleChange.bind(this),
        disabled: this.props.disabled || this.state.loading
      }), options.map(function (item, index) {
        var optionProps = item instanceof Array && item[2] instanceof Object ? item[2] : {};
        return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("option", _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({
          key: index,
          value: index
        }, optionProps), item instanceof Array ? item[1] : item);
      }));
    }
  }]);

  return SelectEditor;
}(react__WEBPACK_IMPORTED_MODULE_7___default.a.Component);

_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(SelectEditor, "propTypes", {
  options: prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.array,
  // shape: [[value, label, props], ...] or [label1, label2, ...]
  //                           `props` will be passed to each corresponding <option />
  model: prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.shape({
    read: prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.func
  }),
  disabled: prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.bool,
  onChange: prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.func.isRequired,
  onLabelChange: prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.func,
  value: prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.any
});

_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(SelectEditor, "defaultProps", {
  options: []
});

/* harmony default export */ __webpack_exports__["default"] = (SelectEditor);

/***/ }),

/***/ "./src/editors/SuggestBox.js":
/*!***********************************!*\
  !*** ./src/editors/SuggestBox.js ***!
  \***********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/extends */ "@babel/runtime/helpers/extends");
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "@babel/runtime/helpers/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ "@babel/runtime/helpers/createClass");
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ "@babel/runtime/helpers/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ "@babel/runtime/helpers/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/assertThisInitialized */ "@babel/runtime/helpers/assertThisInitialized");
/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ "@babel/runtime/helpers/inherits");
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "@babel/runtime/helpers/defineProperty");
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _common_toPromise__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../common/toPromise */ "./src/common/toPromise.js");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../common/utils */ "./src/common/utils.js");
/* harmony import */ var _common_Portal__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../common/Portal */ "./src/common/Portal.js");
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! react-dom */ "react-dom");
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! prop-types */ "prop-types");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var _common_ThrottleError__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../common/ThrottleError */ "./src/common/ThrottleError.js");











/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */







var popupId = '__suggestBoxPopUp';
var classes = {
  option: '__suggestBoxPopUp-option',
  optionFocused: '__suggestBoxPopUp-option-focused',
  optionSelectable: '__suggestBoxPopUp-option-selectable',
  optionTypes: {
    group: '__suggestBoxPopUp-option-group',
    header: '__suggestBoxPopUp-option-header',
    subitem: '__suggestBoxPopUp-option-subitem',
    empty: '__suggestBoxPopUp-option-empty'
  },
  searchBlock: '__suggestBox-search',
  selectBtn: '__suggestBox-select-btn',
  arrow: '__suggestBox-arrow',
  up: '__suggestBox-up'
};
var TAB_KEY = 9;
var ENTER_KEY = 13;
var ESCAPE_KEY = 27;
var ARROW_UP_KEY = 38;
var ARROW_DOWN_KEY = 40;
var MIN_POPUP_HEIGHT = 100;

var SuggestBoxEditor =
/*#__PURE__*/
function (_React$Component) {
  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_8___default()(SuggestBoxEditor, _React$Component);

  function SuggestBoxEditor(props) {
    var _this;

    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_3___default()(this, SuggestBoxEditor);

    _this = _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(SuggestBoxEditor).call(this, props));
    _this._loadData = Object(_common_utils__WEBPACK_IMPORTED_MODULE_11__["throttle"])(_this._loadData);
    _this.state = {
      isOpened: false,
      options: [],
      selectedOptionKey: null,
      lastValidLabel: '',
      label: '',
      popupStyles: {}
    };
    _this._onInputFocus = _this._onInputFocus.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7___default()(_this));
    _this._onInputKeyDown = _this._onInputKeyDown.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7___default()(_this));
    _this._onInputValueChange = _this._onInputValueChange.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7___default()(_this));
    _this._focusOption = _this._focusOption.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7___default()(_this));
    _this._onDocumentMouseDown = _this._onDocumentMouseDown.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7___default()(_this));
    _this._onDocumentMouseScroll = _this._onDocumentMouseScroll.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7___default()(_this));
    _this._toggleList = _this._toggleList.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7___default()(_this));
    _this._openList = _this._openList.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7___default()(_this));
    return _this;
  }

  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4___default()(SuggestBoxEditor, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      this._isMounted = true;

      if (this.props.defaultLabel) {
        this._setLabelTo(this.props.defaultLabel, true);
      } else if (this.props.hasOwnProperty('label')) {
        this._setLabelTo(this.props.label, true);
      } else {
        this._getLabelFromModel(this.props.model, this.props.value);
      }
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      this._isMounted = false;
    }
  }, {
    key: "shouldComponentUpdate",
    value: function shouldComponentUpdate(nextProps, nextState) {
      return this.state !== nextState || !Object(_common_utils__WEBPACK_IMPORTED_MODULE_11__["isEqual"])(this.props.value, nextProps.value) || this.props.disabled !== nextProps.disabled;
    }
  }, {
    key: "componentWillReceiveProps",
    value: function componentWillReceiveProps(nextProps) {
      if (!Object(_common_utils__WEBPACK_IMPORTED_MODULE_11__["isEqual"])(this.props.value, nextProps.value)) {
        if (!this.props.hasOwnProperty('label')) {
          this._getLabelFromModel(nextProps.model, nextProps.value);
        }
      }

      if (this.props.label !== nextProps.label) {
        this._setLabelTo(nextProps.label, true);
      }
    }
  }, {
    key: "_getOptionLabel",
    value: function _getOptionLabel(option) {
      return Array.isArray(option.label) ? option.label[option.label.length - 1] : option.label;
    }
  }, {
    key: "_setLabelTo",
    value: function _setLabelTo(label, markAsValid) {
      if (label === null || label === undefined) {
        label = '';
      }

      this.setState({
        label: label,
        lastValidLabel: markAsValid ? label : this.state.lastValidLabel
      });
    }
  }, {
    key: "_getLabelFromModel",
    value: function _getLabelFromModel(model, id) {
      var _this2 = this;

      if (id === null || id === undefined) {
        return this._setLabelTo('', true);
      }

      model.getLabel(id).then(function (label) {
        if (!_this2._isMounted) {
          return;
        }

        _this2._setLabelTo(label, true);
      })["catch"](function (err) {
        if (err) {
          console.error(err);
          throw err;
        }
      });
    }
  }, {
    key: "_updateList",
    value: function () {
      var _updateList2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee(searchPattern) {
        var options, content;
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.prev = 0;
                _context.next = 3;
                return this._loadData(searchPattern);

              case 3:
                options = _context.sent;
                _context.next = 11;
                break;

              case 6:
                _context.prev = 6;
                _context.t0 = _context["catch"](0);

                if (_context.t0 instanceof _common_ThrottleError__WEBPACK_IMPORTED_MODULE_16__["default"]) {
                  _context.next = 10;
                  break;
                }

                throw _context.t0;

              case 10:
                return _context.abrupt("return");

              case 11:
                if (options.length && this.props.withEmptyOption) {
                  options.unshift({
                    id: null,
                    label: "\xA0" // Use this symbol for save line height

                  });
                }

                if (!this._isMounted) {
                  _context.next = 15;
                  break;
                }

                _context.next = 15;
                return this.setState({
                  options: options,
                  selectedOptionKey: null,
                  loading: false
                });

              case 15:
                content = document.querySelector("".concat(popupId, " .__suggestBoxPopUp-content"));

                if (content) {
                  content.style = {
                    bottom: 'auto',
                    position: 'static'
                  };
                }

                this._scrollListTo();

              case 18:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this, [[0, 6]]);
      }));

      function _updateList(_x) {
        return _updateList2.apply(this, arguments);
      }

      return _updateList;
    }()
  }, {
    key: "_loadData",
    value: function _loadData(searchPattern) {
      return this.props.model.read(searchPattern || '');
    }
  }, {
    key: "_openList",
    value: function () {
      var _openList2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee2(searchPattern) {
        var _this3 = this;

        var focusFirstOption,
            popupStyles,
            key,
            selectedOptionKey,
            _args2 = arguments;
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                focusFirstOption = _args2.length > 1 && _args2[1] !== undefined ? _args2[1] : false;

                if (!(this.props.disabled || this.state.isOpened)) {
                  _context2.next = 3;
                  break;
                }

                return _context2.abrupt("return");

              case 3:
                popupStyles = this._getComputedPopupStyles();

                if (popupStyles) {
                  _context2.next = 6;
                  break;
                }

                return _context2.abrupt("return");

              case 6:
                _context2.next = 8;
                return Object(_common_toPromise__WEBPACK_IMPORTED_MODULE_10__["default"])(this.setState.bind(this), true)({
                  isOpened: true,
                  loading: true,
                  popupStyles: popupStyles
                });

              case 8:
                Object(react_dom__WEBPACK_IMPORTED_MODULE_13__["findDOMNode"])(this.input).select();
                _context2.next = 11;
                return this._updateList(searchPattern);

              case 11:
                if (this.state.options.length) {
                  _context2.next = 13;
                  break;
                }

                return _context2.abrupt("return");

              case 13:
                if (!focusFirstOption) {
                  _context2.next = 18;
                  break;
                }

                key = this.state.options[0].type !== 'group' ? 0 : 1;
                _context2.next = 17;
                return this._focusOption(key, true);

              case 17:
                return _context2.abrupt("return");

              case 18:
                selectedOptionKey = Object(_common_utils__WEBPACK_IMPORTED_MODULE_11__["findIndex"])(this.state.options, function (option) {
                  return Object(_common_utils__WEBPACK_IMPORTED_MODULE_11__["isEqual"])(option.id, _this3.props.value);
                });

                if (selectedOptionKey !== -1) {
                  this._focusOptionAndScrollIntoView(Number(selectedOptionKey));
                }

              case 20:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this);
      }));

      function _openList(_x2) {
        return _openList2.apply(this, arguments);
      }

      return _openList;
    }()
  }, {
    key: "_onInputFocus",
    value: function () {
      var _onInputFocus2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee3(e) {
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee3$(_context3) {
          while (1) {
            switch (_context3.prev = _context3.next) {
              case 0:
                _context3.next = 2;
                return this._openList();

              case 2:
                if (this._isMounted) {
                  _context3.next = 4;
                  break;
                }

                return _context3.abrupt("return");

              case 4:
                Object(react_dom__WEBPACK_IMPORTED_MODULE_13__["findDOMNode"])(this.input).select();

                if (this.props.onFocus) {
                  this.props.onFocus(e);
                }

              case 6:
              case "end":
                return _context3.stop();
            }
          }
        }, _callee3, this);
      }));

      function _onInputFocus(_x3) {
        return _onInputFocus2.apply(this, arguments);
      }

      return _onInputFocus;
    }()
  }, {
    key: "_closeList",
    value: function _closeList(shouldBlur) {
      if (shouldBlur) {
        Object(react_dom__WEBPACK_IMPORTED_MODULE_13__["findDOMNode"])(this.input).blur();
      }

      if (!this.state.isOpened || !this._isMounted) {
        return;
      }

      this.setState({
        options: [],
        selectedOptionKey: null,
        isOpened: false
      });
    }
  }, {
    key: "_toggleList",
    value: function () {
      var _toggleList2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee4() {
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee4$(_context4) {
          while (1) {
            switch (_context4.prev = _context4.next) {
              case 0:
                if (!this.state.isOpened) {
                  _context4.next = 4;
                  break;
                }

                this._closeList();

                _context4.next = 6;
                break;

              case 4:
                _context4.next = 6;
                return this._openList();

              case 6:
              case "end":
                return _context4.stop();
            }
          }
        }, _callee4, this);
      }));

      function _toggleList() {
        return _toggleList2.apply(this, arguments);
      }

      return _toggleList;
    }()
  }, {
    key: "_selectOption",
    value: function _selectOption(option) {
      option = option || {
        id: null,
        label: '',
        metadata: {}
      };
      this.props.onChange(option.id, option);

      if (this.props.onLabelChange) {
        this.props.onLabelChange(option.label);
      }

      if (this.props.onMetadataChange) {
        this.props.onMetadataChange(option.metadata);
      }

      Object(react_dom__WEBPACK_IMPORTED_MODULE_13__["findDOMNode"])(this.input).select();
    }
  }, {
    key: "_focusOption",
    value: function () {
      var _focusOption2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee5(key, shouldSetLabel) {
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee5$(_context5) {
          while (1) {
            switch (_context5.prev = _context5.next) {
              case 0:
                if (shouldSetLabel === true) {
                  this._setLabelTo(this.state.options[key].label);
                }

                if (!this.state.isOpened) {
                  _context5.next = 5;
                  break;
                }

                this._focusOptionAndScrollIntoView(key);

                _context5.next = 8;
                break;

              case 5:
                _context5.next = 7;
                return this._openList(null);

              case 7:
                this._focusOptionAndScrollIntoView(key);

              case 8:
              case "end":
                return _context5.stop();
            }
          }
        }, _callee5, this);
      }));

      function _focusOption(_x4, _x5) {
        return _focusOption2.apply(this, arguments);
      }

      return _focusOption;
    }()
  }, {
    key: "_focusOptionAndScrollIntoView",
    value: function _focusOptionAndScrollIntoView(key) {
      this.state.selectedOptionKey = key;
      var focusedItems = document.querySelector(".".concat(classes.optionFocused));
      var currentItem = document.querySelector(".".concat(classes.option, "[data-key=\"").concat(key, "\"]"));

      if (focusedItems) {
        focusedItems.classList.remove(classes.optionFocused);
      }

      if (currentItem) {
        currentItem.classList.add(classes.optionFocused);
      }

      var domOption = document.querySelectorAll("#".concat(popupId, " li[data-key=\"").concat(key, "\"]"))[0];

      this._scrollListTo(domOption);
    }
  }, {
    key: "_focusNextOption",
    value: function _focusNextOption() {
      if (!this.state.options.length) {
        return;
      }

      if (this.state.selectedOptionKey === null) {
        this.state.selectedOptionKey = 0;
        return this._focusOption(this.state.selectedOptionKey, true);
      }

      var key;

      for (key = this.state.selectedOptionKey + 1; key < this.state.options.length; key++) {
        if (this.state.options[key].id) {
          return this._focusOption(key, true);
        }
      }

      for (key = 0; key < this.state.selectedOptionKey + 1; key++) {
        if (this.state.options[key].id) {
          return this._focusOption(key, true);
        }
      }
    }
  }, {
    key: "_focusPrevOption",
    value: function _focusPrevOption() {
      if (this.state.selectedOptionKey === null) {
        this.state.selectedOptionKey = 0;
        return this._focusOption(this.state.selectedOptionKey);
      }

      var key;

      for (key = this.state.selectedOptionKey - 1; key >= 0; key--) {
        if (this.state.options[key].id) {
          return this._focusOption(key, true);
        }
      }

      for (key = this.state.options.length - 1; key > this.state.selectedOptionKey - 1; key--) {
        if (this.state.options[key].id) {
          return this._focusOption(key, true);
        }
      }
    }
  }, {
    key: "_scrollListTo",
    value: function _scrollListTo(target) {
      var container = document.querySelector("#".concat(popupId, ":first-child"));

      if (!container) {
        return;
      }

      if (!target) {
        container.scrollTop = 0;
        return;
      }

      if (target.offsetTop - container.scrollTop >= container.clientHeight - target.clientHeight) {
        container.scrollTop = target.offsetTop - container.clientHeight + target.clientHeight;
      } else if (target.offsetTop - container.scrollTop < 0) {
        container.scrollTop = target.offsetTop;
      }
    }
  }, {
    key: "_isParentOf",
    value: function _isParentOf(child) {
      while (child) {
        child = child.parentNode;

        if (child === Object(react_dom__WEBPACK_IMPORTED_MODULE_13__["findDOMNode"])(this)) {
          return true;
        }
      }

      return false;
    }
  }, {
    key: "_onDocumentMouseDown",
    value: function _onDocumentMouseDown(e, isOwner) {
      if (e.button !== 0) {
        return;
      }

      var target = e.target;

      if (isOwner) {
        if (!target.classList.contains(classes.option)) {
          target = target.parentNode;
        }

        if (target.classList.contains(classes.optionSelectable) && this.state.isOpened) {
          this._selectOption(this.state.options[target.getAttribute('data-key')]);

          this._closeList(true);
        }
      } else {
        // q where to test
        if (!Object(_common_utils__WEBPACK_IMPORTED_MODULE_11__["parents"])(target, ".".concat(classes.searchBlock)).length) {
          if (!Object(react_dom__WEBPACK_IMPORTED_MODULE_13__["findDOMNode"])(this.input).value) {
            this._selectOption(null);
          } else {
            this._setLabelTo(this.state.lastValidLabel);
          }
        }

        if (!this._isParentOf(e.target)) {
          this._closeList(true);
        }
      }
    }
  }, {
    key: "_onDocumentMouseScroll",
    value: function _onDocumentMouseScroll(e, isOwner) {
      if (!isOwner && this.state.isOpened) {
        var popupStyles = this._getComputedPopupStyles();

        if (popupStyles) {
          this.setState({
            popupStyles: this._getComputedPopupStyles()
          });
        } else {
          this._setLabelTo(this.state.lastValidLabel);

          this._closeList(true);
        }
      }
    }
  }, {
    key: "_onInputKeyDown",
    value: function _onInputKeyDown(e) {
      if (this.props.disabled) {
        return;
      }

      switch (e.keyCode) {
        case ARROW_DOWN_KEY:
          e.preventDefault();

          if (!this.state.isOpened) {
            return this._openList('', true);
          }

          this._focusNextOption();

          break;

        case ARROW_UP_KEY:
          e.preventDefault();

          if (!this.state.isOpened) {
            return this._openList();
          }

          this._focusPrevOption();

          break;

        case ENTER_KEY:
          e.preventDefault();

          if (this.state.selectedOptionKey === null) {
            this._selectOption(null);
          } else {
            this._selectOption(this.state.options[this.state.selectedOptionKey]);
          }

          this._closeList();

          break;

        case TAB_KEY:
        case ESCAPE_KEY:
          if (e.keyCode === ESCAPE_KEY) {
            e.preventDefault();
          }

          if (!e.target.value || !this.props.value) {
            this._setLabelTo('');

            this._selectOption(null);
          } else {
            this._setLabelTo(this.state.lastValidLabel);
          }

          this._closeList();

          break;
      }
    }
  }, {
    key: "_onInputValueChange",
    value: function () {
      var _onInputValueChange2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee6(e) {
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee6$(_context6) {
          while (1) {
            switch (_context6.prev = _context6.next) {
              case 0:
                this._setLabelTo(e.target.value);

                if (!this.state.isOpened) {
                  _context6.next = 6;
                  break;
                }

                _context6.next = 4;
                return this._updateList(e.target.value);

              case 4:
                _context6.next = 8;
                break;

              case 6:
                _context6.next = 8;
                return this._openList(e.target.value);

              case 8:
              case "end":
                return _context6.stop();
            }
          }
        }, _callee6, this);
      }));

      function _onInputValueChange(_x6) {
        return _onInputValueChange2.apply(this, arguments);
      }

      return _onInputValueChange;
    }()
  }, {
    key: "_getComputedPopupStyles",
    value: function _getComputedPopupStyles() {
      var inputStyles = window.getComputedStyle(Object(react_dom__WEBPACK_IMPORTED_MODULE_13__["findDOMNode"])(this.input));
      var popupStyle = {};
      var inputOffset = Object(react_dom__WEBPACK_IMPORTED_MODULE_13__["findDOMNode"])(this.input).getBoundingClientRect();
      var inputWidth = inputStyles.width;
      var inputHeight = parseInt(inputStyles.height);

      if (inputOffset.top + inputHeight <= 0 || inputOffset.top >= window.innerHeight) {
        return null;
      }

      var offsetTop = inputOffset.top + inputHeight;
      var offsetLeft = inputOffset.left;

      if (typeof window !== 'undefined') {
        var availableSpace = window.innerHeight - offsetTop;

        if (availableSpace < MIN_POPUP_HEIGHT) {
          popupStyle.maxHeight = inputOffset.top;
          popupStyle.bottom = -inputOffset.top;
        } else {
          popupStyle.maxHeight = availableSpace;
          popupStyle.top = offsetTop;
        }
      }

      popupStyle.minWidth = inputWidth;
      popupStyle.left = offsetLeft;
      return popupStyle;
    }
  }, {
    key: "focus",
    value: function focus() {
      Object(react_dom__WEBPACK_IMPORTED_MODULE_13__["findDOMNode"])(this.input).focus();
    }
  }, {
    key: "render",
    value: function render() {
      var _this4 = this;

      var arrowClasses = [classes.arrow];
      var options;
      var optionsPopup = null;

      if (this.state.isOpened) {
        arrowClasses.push(classes.up);

        if (this.state.loading) {
          options = react__WEBPACK_IMPORTED_MODULE_14___default.a.createElement("li", {
            className: [classes.option, classes.optionTypes.empty].join(' ')
          }, this.props.loadingElement);
        } else {
          if (!this.state.options.length) {
            options = react__WEBPACK_IMPORTED_MODULE_14___default.a.createElement("li", {
              className: [classes.option, classes.optionTypes.empty].join(' ')
            }, this.props.notFoundElement);
          } else {
            options = this.state.options.map(function (option, key) {
              var optionClassNames = [classes.option];

              if (key === _this4.state.selectedOptionKey) {
                optionClassNames.push(classes.optionFocused);
              }

              if (option.id !== undefined) {
                optionClassNames.push(classes.optionSelectable);
              }

              if (option.type) {
                optionClassNames.push(classes.optionTypes[option.type] || option.type);
              }

              return react__WEBPACK_IMPORTED_MODULE_14___default.a.createElement("li", {
                key: key,
                "data-key": key,
                onMouseOver: _this4._focusOption.bind(_this4, key),
                className: optionClassNames.join(' ')
              }, Array.isArray(option.label) ? option.label.map(function (label, columnKey) {
                return react__WEBPACK_IMPORTED_MODULE_14___default.a.createElement("div", {
                  key: columnKey
                }, label);
              }) : react__WEBPACK_IMPORTED_MODULE_14___default.a.createElement("div", null, option.label));
            });
          }
        }

        optionsPopup = react__WEBPACK_IMPORTED_MODULE_14___default.a.createElement(_common_Portal__WEBPACK_IMPORTED_MODULE_12__["default"], {
          id: popupId,
          style: this.state.popupStyles,
          onDocumentMouseDown: this._onDocumentMouseDown,
          onDocumentMouseScroll: this._onDocumentMouseScroll,
          className: "__suggestBoxPopUp"
        }, react__WEBPACK_IMPORTED_MODULE_14___default.a.createElement("div", {
          className: "__suggestBoxPopUp-content"
        }, react__WEBPACK_IMPORTED_MODULE_14___default.a.createElement("ul", null, options)));
      }

      return react__WEBPACK_IMPORTED_MODULE_14___default.a.createElement("div", {
        className: "__suggestBox"
      }, react__WEBPACK_IMPORTED_MODULE_14___default.a.createElement("div", {
        className: classes.searchBlock
      }, react__WEBPACK_IMPORTED_MODULE_14___default.a.createElement("input", _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, Object(_common_utils__WEBPACK_IMPORTED_MODULE_11__["omit"])(this.props, ['model', 'value', 'onChange', 'onLabelChange', 'onFocus', 'select', 'notFoundElement', 'loadingElement', 'defaultLabel', 'onMetadataChange', 'withEmptyOption']), {
        ref: function ref(input) {
          return _this4.input = input;
        },
        type: "text",
        onClick: this._openList,
        onFocus: this._onInputFocus,
        onKeyDown: this._onInputKeyDown,
        onChange: this._onInputValueChange,
        value: this.state.label
      })), react__WEBPACK_IMPORTED_MODULE_14___default.a.createElement("div", {
        onClick: this._toggleList,
        className: classes.selectBtn
      }, react__WEBPACK_IMPORTED_MODULE_14___default.a.createElement("div", {
        className: arrowClasses.join(' ')
      }))), optionsPopup);
    }
  }]);

  return SuggestBoxEditor;
}(react__WEBPACK_IMPORTED_MODULE_14___default.a.Component);

_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(SuggestBoxEditor, "propTypes", {
  disabled: prop_types__WEBPACK_IMPORTED_MODULE_15___default.a.bool,
  model: prop_types__WEBPACK_IMPORTED_MODULE_15___default.a.shape({
    read: prop_types__WEBPACK_IMPORTED_MODULE_15___default.a.func,
    getLabel: prop_types__WEBPACK_IMPORTED_MODULE_15___default.a.func
  }),
  onChange: prop_types__WEBPACK_IMPORTED_MODULE_15___default.a.func.isRequired,
  onLabelChange: prop_types__WEBPACK_IMPORTED_MODULE_15___default.a.func,
  onMetadataChange: prop_types__WEBPACK_IMPORTED_MODULE_15___default.a.func,
  value: prop_types__WEBPACK_IMPORTED_MODULE_15___default.a.any,
  defaultLabel: prop_types__WEBPACK_IMPORTED_MODULE_15___default.a.string,
  label: prop_types__WEBPACK_IMPORTED_MODULE_15___default.a.string,
  notFoundElement: prop_types__WEBPACK_IMPORTED_MODULE_15___default.a.element,
  loadingElement: prop_types__WEBPACK_IMPORTED_MODULE_15___default.a.element,
  onFocus: prop_types__WEBPACK_IMPORTED_MODULE_15___default.a.func,
  withEmptyOption: prop_types__WEBPACK_IMPORTED_MODULE_15___default.a.bool
});

_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(SuggestBoxEditor, "defaultProps", {
  disabled: false,
  notFoundElement: react__WEBPACK_IMPORTED_MODULE_14___default.a.createElement("div", null, "Nothing found"),
  loadingElement: react__WEBPACK_IMPORTED_MODULE_14___default.a.createElement("div", null, "Loading..."),
  value: null,
  withEmptyOption: false
});

/* harmony default export */ __webpack_exports__["default"] = (SuggestBoxEditor);

/***/ }),

/***/ "./src/form/AbstractFormModel.js":
/*!***************************************!*\
  !*** ./src/form/AbstractFormModel.js ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "@babel/runtime/helpers/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ "@babel/runtime/helpers/createClass");
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ "@babel/runtime/helpers/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ "@babel/runtime/helpers/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ "@babel/runtime/helpers/inherits");
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _common_validation_ValidationErrors__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/validation/ValidationErrors */ "./src/common/validation/ValidationErrors.js");
/* harmony import */ var _common_Events__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common/Events */ "./src/common/Events.js");






/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */



var AbstractFormModel =
/*#__PURE__*/
function (_EventsModel) {
  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_4___default()(AbstractFormModel, _EventsModel);

  /**
   * Abstract form model
   *
   * @constructor
   */
  function AbstractFormModel() {
    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, AbstractFormModel);

    return _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3___default()(AbstractFormModel).call(this));
  }
  /**
   * Get data
   *
   * @param {Array} fields     Required fields
   * @returns {Object}  Promise
   * @abstract
   */


  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default()(AbstractFormModel, [{
    key: "getData",
    value: function getData()
    /*fields*/
    {
      return Promise.resolve({});
    }
    /**
     * Process form data
     *
     * @param   {Object}      changes     Form data
     * @returns {Object}  Promise
     * @abstract
     */

  }, {
    key: "submit",
    value: function submit()
    /*changes*/
    {
      return Promise.resolve();
    }
    /**
     * Record validity check
     *
     * @param {Object}      record  Record object
     * @returns {Object}  Promise
     * @abstract
     */

  }, {
    key: "isValidRecord",
    value: function isValidRecord()
    /*record*/
    {
      return Promise.resolve(new _common_validation_ValidationErrors__WEBPACK_IMPORTED_MODULE_5__["default"]());
    }
    /**
     * Get all dependent fields, that are required for validation
     *
     * @param   {Array}  fields  Fields list
     * @returns {Array}  Dependencies
     * @abstract
     */

  }, {
    key: "getValidationDependency",
    value: function getValidationDependency()
    /*fields*/
    {
      return [];
    }
  }]);

  return AbstractFormModel;
}(_common_Events__WEBPACK_IMPORTED_MODULE_6__["default"]);

/* harmony default export */ __webpack_exports__["default"] = (AbstractFormModel);

/***/ }),

/***/ "./src/form/FormExpressApi.js":
/*!************************************!*\
  !*** ./src/form/FormExpressApi.js ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "@babel/runtime/helpers/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ "@babel/runtime/helpers/createClass");
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _common_validation_ValidationErrors__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/validation/ValidationErrors */ "./src/common/validation/ValidationErrors.js");
/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! express */ "express");
/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(express__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common/utils */ "./src/common/utils.js");





/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */




var FormExpressApi =
/*#__PURE__*/
function () {
  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default()(FormExpressApi, null, [{
    key: "create",
    value: function create() {
      return new FormExpressApi();
    }
  }]);

  function FormExpressApi() {
    var _this = this;

    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default()(this, FormExpressApi);

    this.middlewares = {
      getData: [Object(_common_utils__WEBPACK_IMPORTED_MODULE_6__["asyncHandler"])(
      /*#__PURE__*/
      function () {
        var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()(
        /*#__PURE__*/
        _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(req, res, next) {
          var fields, model, data;
          return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
            while (1) {
              switch (_context.prev = _context.next) {
                case 0:
                  fields = req.query.fields ? JSON.parse(req.query.fields) : null;
                  model = _this._getModel(req, res);
                  _context.prev = 2;
                  _context.next = 5;
                  return model.getData(fields);

                case 5:
                  data = _context.sent;

                  _this._result(null, data, req, res, next);

                  _context.next = 12;
                  break;

                case 9:
                  _context.prev = 9;
                  _context.t0 = _context["catch"](2);

                  _this._result(_context.t0, null, req, res, next);

                case 12:
                case "end":
                  return _context.stop();
              }
            }
          }, _callee, null, [[2, 9]]);
        }));

        return function (_x, _x2, _x3) {
          return _ref.apply(this, arguments);
        };
      }())],
      submit: [Object(_common_utils__WEBPACK_IMPORTED_MODULE_6__["asyncHandler"])(
      /*#__PURE__*/
      function () {
        var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()(
        /*#__PURE__*/
        _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(req, res, next) {
          var model, data;
          return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
            while (1) {
              switch (_context2.prev = _context2.next) {
                case 0:
                  model = _this._getModel(req, res);
                  _context2.prev = 1;
                  _context2.next = 4;
                  return model.submit(req.body);

                case 4:
                  data = _context2.sent;

                  _this._result(null, {
                    data: data,
                    error: null
                  }, req, res, next);

                  _context2.next = 14;
                  break;

                case 8:
                  _context2.prev = 8;
                  _context2.t0 = _context2["catch"](1);

                  if (!(_context2.t0 && !(_context2.t0 instanceof _common_validation_ValidationErrors__WEBPACK_IMPORTED_MODULE_4__["default"]))) {
                    _context2.next = 13;
                    break;
                  }

                  _this._result(_context2.t0, null, req, res, next);

                  return _context2.abrupt("return");

                case 13:
                  _this._result(null, {
                    data: null,
                    error: _context2.t0
                  }, req, res, next);

                case 14:
                case "end":
                  return _context2.stop();
              }
            }
          }, _callee2, null, [[1, 8]]);
        }));

        return function (_x4, _x5, _x6) {
          return _ref2.apply(this, arguments);
        };
      }())],
      validate: [Object(_common_utils__WEBPACK_IMPORTED_MODULE_6__["asyncHandler"])(
      /*#__PURE__*/
      function () {
        var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()(
        /*#__PURE__*/
        _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3(req, res, next) {
          var model, data;
          return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3) {
            while (1) {
              switch (_context3.prev = _context3.next) {
                case 0:
                  model = _this._getModel(req, res);
                  _context3.prev = 1;
                  _context3.next = 4;
                  return model.isValidRecord(req.body);

                case 4:
                  data = _context3.sent;

                  _this._result(null, data, req, res, next);

                  _context3.next = 11;
                  break;

                case 8:
                  _context3.prev = 8;
                  _context3.t0 = _context3["catch"](1);

                  _this._result(_context3.t0, null, req, res, next);

                case 11:
                case "end":
                  return _context3.stop();
              }
            }
          }, _callee3, null, [[1, 8]]);
        }));

        return function (_x7, _x8, _x9) {
          return _ref3.apply(this, arguments);
        };
      }())]
    };
  }

  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default()(FormExpressApi, [{
    key: "model",
    value: function model(_model) {
      if (typeof _model === 'function') {
        this._getModel = _model;
      } else {
        this._getModel = function () {
          return _model;
        };
      }

      return this;
    }
  }, {
    key: "getRouter",
    value: function getRouter() {
      return new express__WEBPACK_IMPORTED_MODULE_5___default.a.Router().get('/', this.middlewares.getData).post('/', this.middlewares.submit).post('/validation', this.middlewares.validate);
    }
  }, {
    key: "getData",
    value: function getData(middlewares) {
      return this._addMidelwares('getData', middlewares);
    }
  }, {
    key: "submit",
    value: function submit(middlewares) {
      return this._addMidelwares('submit', middlewares);
    }
  }, {
    key: "validate",
    value: function validate(middlewares) {
      return this._addMidelwares('validate', middlewares);
    }
  }, {
    key: "_addMidelwares",
    value: function _addMidelwares(method, middlewares) {
      if (!Array.isArray(middlewares)) {
        middlewares = [middlewares];
      }

      this.middlewares[method] = middlewares.concat(this.middlewares[method]);
      return this;
    } // Default implementation

  }, {
    key: "_getModel",
    value: function _getModel() {
      throw Error('Model is not defined.');
    }
  }, {
    key: "_result",
    value: function _result(err, data, req, res, next) {
      if (err) {
        next(err);
      } else {
        res.json(data);
      }
    }
  }]);

  return FormExpressApi;
}();

/* harmony default export */ __webpack_exports__["default"] = (FormExpressApi);

/***/ }),

/***/ "./src/form/FormModel.js":
/*!*******************************!*\
  !*** ./src/form/FormModel.js ***!
  \*******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "@babel/runtime/helpers/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ "@babel/runtime/helpers/createClass");
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ "@babel/runtime/helpers/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ "@babel/runtime/helpers/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ "@babel/runtime/helpers/inherits");
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _common_validation_Validator__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../common/validation/Validator */ "./src/common/validation/Validator.js");
/* harmony import */ var _AbstractFormModel__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./AbstractFormModel */ "./src/form/AbstractFormModel.js");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../common/utils */ "./src/common/utils.js");








/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */




var FormModel =
/*#__PURE__*/
function (_AbstractFormModel) {
  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_6___default()(FormModel, _AbstractFormModel);

  /**
   * Simple form model
   *
   * @param {Object}    defaultValues Default form field values
   * @param {Validator} validation    Validation
   * @constructor
   */
  function FormModel(defaultValues, validation) {
    var _this;

    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default()(this, FormModel);

    _this = _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default()(FormModel).call(this));
    _this._validation = validation || new _common_validation_Validator__WEBPACK_IMPORTED_MODULE_7__["default"]();
    _this._data = defaultValues ? Object(_common_utils__WEBPACK_IMPORTED_MODULE_9__["clone"])(defaultValues) : {};
    return _this;
  }
  /**
   * Get data
   *
   * @param {Array}    fields     Required fields
   */


  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default()(FormModel, [{
    key: "getData",
    value: function () {
      var _getData = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(fields) {
        var record, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, field;

        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                record = {};

                if (!fields) {
                  _context.next = 23;
                  break;
                }

                _iteratorNormalCompletion = true;
                _didIteratorError = false;
                _iteratorError = undefined;
                _context.prev = 5;

                for (_iterator = fields[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                  field = _step.value;
                  record[field] = this._data[field];
                }

                _context.next = 13;
                break;

              case 9:
                _context.prev = 9;
                _context.t0 = _context["catch"](5);
                _didIteratorError = true;
                _iteratorError = _context.t0;

              case 13:
                _context.prev = 13;
                _context.prev = 14;

                if (!_iteratorNormalCompletion && _iterator["return"] != null) {
                  _iterator["return"]();
                }

              case 16:
                _context.prev = 16;

                if (!_didIteratorError) {
                  _context.next = 19;
                  break;
                }

                throw _iteratorError;

              case 19:
                return _context.finish(16);

              case 20:
                return _context.finish(13);

              case 21:
                _context.next = 24;
                break;

              case 23:
                record = Object(_common_utils__WEBPACK_IMPORTED_MODULE_9__["clone"])(this._data);

              case 24:
                return _context.abrupt("return", record);

              case 25:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this, [[5, 9, 13, 21], [14,, 16, 20]]);
      }));

      function getData(_x) {
        return _getData.apply(this, arguments);
      }

      return getData;
    }()
    /**
     * Process form data
     *
     * @param {Object}      changes     Form data
     */

  }, {
    key: "submit",
    value: function () {
      var _submit = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(changes) {
        var validErrors;
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                _context2.next = 2;
                return this.isValidRecord(changes);

              case 2:
                validErrors = _context2.sent;

                if (validErrors.isEmpty()) {
                  _context2.next = 5;
                  break;
                }

                throw validErrors;

              case 5:
                Object.assign(this._data, changes);
                this.trigger('update', changes);
                return _context2.abrupt("return", changes);

              case 8:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this);
      }));

      function submit(_x2) {
        return _submit.apply(this, arguments);
      }

      return submit;
    }()
    /**
     * Validation check
     *
     * @param {Object}      record
     */

  }, {
    key: "isValidRecord",
    value: function () {
      var _isValidRecord = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3(record) {
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3) {
          while (1) {
            switch (_context3.prev = _context3.next) {
              case 0:
                _context3.next = 2;
                return this._validation.isValidRecord(record);

              case 2:
                return _context3.abrupt("return", _context3.sent);

              case 3:
              case "end":
                return _context3.stop();
            }
          }
        }, _callee3, this);
      }));

      function isValidRecord(_x3) {
        return _isValidRecord.apply(this, arguments);
      }

      return isValidRecord;
    }()
    /**
     * Get all dependent fields, that are required for validation
     *
     * @param   {Array}  fields   Fields list
     * @returns {Array}  Dependencies
     */

  }, {
    key: "getValidationDependency",
    value: function getValidationDependency(fields) {
      return this._validation.getValidationDependency(fields);
    }
  }]);

  return FormModel;
}(_AbstractFormModel__WEBPACK_IMPORTED_MODULE_8__["default"]);

/* harmony default export */ __webpack_exports__["default"] = (FormModel);

/***/ }),

/***/ "./src/form/FormService.js":
/*!*********************************!*\
  !*** ./src/form/FormService.js ***!
  \*********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/objectSpread */ "@babel/runtime/helpers/objectSpread");
/* harmony import */ var _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ "@babel/runtime/helpers/toConsumableArray");
/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "@babel/runtime/helpers/defineProperty");
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "@babel/runtime/helpers/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ "@babel/runtime/helpers/createClass");
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _common_Events__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../common/Events */ "./src/common/Events.js");
/* harmony import */ var _common_validation_Validator__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../common/validation/Validator */ "./src/common/validation/Validator.js");
/* harmony import */ var _common_validation_ValidationErrors__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../common/validation/ValidationErrors */ "./src/common/validation/ValidationErrors.js");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../common/utils */ "./src/common/utils.js");
/* harmony import */ var _common_ThrottleError__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../common/ThrottleError */ "./src/common/ThrottleError.js");








/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */






var FormService =
/*#__PURE__*/
function () {
  function FormService() {
    var fields = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;

    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_5___default()(this, FormService);

    this._data = null;
    this._changes = null;
    this._errors = new _common_validation_ValidationErrors__WEBPACK_IMPORTED_MODULE_9__["default"]();
    this._warnings = new _common_validation_ValidationErrors__WEBPACK_IMPORTED_MODULE_9__["default"]();
    this._warningsValidator = null;
    this._eventEmitter = new _common_Events__WEBPACK_IMPORTED_MODULE_7__["default"]();
    this._isNotInitialized = true;
    this.fields = fields;
    this._validateForm = Object(_common_utils__WEBPACK_IMPORTED_MODULE_10__["throttle"])(this._validateForm.bind(this));
    this.validateForm = this.validateForm.bind(this);
    this._onModelChange = this._onModelChange.bind(this);
    this.clearChanges = this.clearChanges.bind(this);
    this.clearError = this.clearError.bind(this);
    this.clearValidation = this.clearValidation.bind(this);
    this.updateField = this.updateField.bind(this);
    this.validateField = this.validateField.bind(this);
    this._getData = this._getData.bind(this);
    this._getChanges = this._getChanges.bind(this);
  }
  /**
   * Initialize form
   *
   * @param {Object}            settings                                Configuration
   * @param {Array}             settings.fields                         Fields list, that are required to display
   * @param {FormModel}         settings.model                          Model of form
   * @param {Object}            [settings.data]                         Preset data
   * @param {Object}            [settings.changes                       Preset changes
   * @param {bool}              [settings.submitAll=false]              Send all form for validity check
   * @param {bool}              [settings.partialErrorChecking=false]   Activate partial gradual form validation
   * @param {bool}              [settings.showDependentFields=false]    Mark the fields which are involved in the group validation
   * @param {Validator}         [settings.warningsValidator]            Warnings validator for fields
   */


  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_6___default()(FormService, [{
    key: "init",
    value: function () {
      var _init = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.mark(function _callee(settings) {
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                if (settings.model) {
                  _context.next = 2;
                  break;
                }

                throw Error('You must specify the model');

              case 2:
                this._data = settings.data || null;
                this._changes = settings.changes || {};
                this._isSubmitting = false;
                this.showDependentFields = settings.showDependentFields || false;
                this._partialErrorChecking = settings.partialErrorChecking; // Current mode

                this._partialErrorCheckingDefault = settings.partialErrorChecking; // Default mode

                this.model = settings.model; // FormModel

                this.submitAll = settings.submitAll;
                this._warningsValidator = settings.warningsValidator || new _common_validation_Validator__WEBPACK_IMPORTED_MODULE_8__["default"]();
                this.validating = false;
                this._hiddenValidationFields = [];
                this.submitting = false;
                this._isNotInitialized = false;

                if (settings.hasOwnProperty('fields')) {
                  this.fields = settings.fields;
                }

                if (this._data) {
                  _context.next = 20;
                  break;
                }

                _context.next = 19;
                return settings.model.getData(this.fields);

              case 19:
                this._data = _context.sent;

              case 20:
                this.model.on('update', this._onModelChange);

                this._setState();

                if (settings.partialErrorChecking) {
                  _context.next = 25;
                  break;
                }

                _context.next = 25;
                return this.validateForm();

              case 25:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function init(_x) {
        return _init.apply(this, arguments);
      }

      return init;
    }()
  }, {
    key: "getAll",
    value: function getAll() {
      var isLoaded = this._isLoaded();

      if (!isLoaded) {
        var emptyData = {
          isLoaded: isLoaded,
          data: {},
          originalData: {},
          changes: {},
          errors: new _common_validation_ValidationErrors__WEBPACK_IMPORTED_MODULE_9__["default"](),
          warnings: new _common_validation_ValidationErrors__WEBPACK_IMPORTED_MODULE_9__["default"](),
          isSubmitting: false
        };
        emptyData.fields = this._getFields(emptyData.data, emptyData.changes, emptyData.errors, emptyData.warnings);
        return emptyData;
      }

      var data = this._getData();

      var changes = this._getChangesFields();

      var errors = this._getDisplayedErrors(this._errors);

      var warnings = this._getDisplayedErrors(this._warnings);

      return {
        isLoaded: isLoaded,
        data: data,
        originalData: this._data,
        changes: changes,
        errors: errors,
        warnings: warnings,
        // Note that we return errors and warnings both in bunch as a property and for each field separately
        // - it is redundantly, but handy :)
        fields: this._getFields(data, changes, errors, warnings),
        isSubmitting: this._isSubmitting
      };
    }
    /**
     * Update form value. Is used as the Editors onChange handler
     *
     * @param {string}  field  Parameter
     * @param {*}       value  Event or data
     */

  }, {
    key: "updateField",
    value: function () {
      var _updateField = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.mark(function _callee2(field, value) {
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                _context2.next = 2;
                return this.set(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()({}, field, Object(_common_utils__WEBPACK_IMPORTED_MODULE_10__["parseValueFromEvent"])(value)));

              case 2:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this);
      }));

      function updateField(_x2, _x3) {
        return _updateField.apply(this, arguments);
      }

      return updateField;
    }()
  }, {
    key: "addChangeListener",
    value: function addChangeListener(func) {
      this._eventEmitter.on('update', func);
    }
  }, {
    key: "removeChangeListener",
    value: function removeChangeListener(func) {
      this._eventEmitter.off('update', func);

      if (this._eventEmitter.listenerCount('update') === 0 && !this._isNotInitialized) {
        this.model.off('update', this._onModelChange);
      }
    }
  }, {
    key: "removeAllListeners",
    value: function removeAllListeners() {
      this._eventEmitter.removeAllListeners('update');

      this.model.off('update', this._onModelChange);
    }
    /**
     * @param {string|string[]} fields
     */

  }, {
    key: "clearValidation",
    value: function clearValidation(fields) {
      if (this._isNotInitialized) {
        return;
      } // We keep info about _hiddenValidationFields for cases when clearValidation was called while validateForm was
      // called and haven't finished, so then old validation result shouldn't show errors for _hiddenValidationFields
      // fields, but the next called validations will clear _hiddenValidationFields so the fields will get errors again.
      // Use case: a user changed field 'name', a validation started, the user focused field 'age' so we called
      // clearValidation('age'), the validation finished and returned errors for fields 'name' and 'age', but we
      // shouldn't show error for field 'age' because the user has just focused it. Then user blured field 'age', a new
      // validation stated and it should show errors for field 'age'.


      if (Array.isArray(fields)) {
        var _this$_hiddenValidati;

        (_this$_hiddenValidati = this._hiddenValidationFields).push.apply(_this$_hiddenValidati, _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(fields));
      } else {
        this._hiddenValidationFields.push(fields);
      }

      this._setState();
    }
  }, {
    key: "clearError",
    value: function clearError(field) {
      console.warn('Deprecated: FormService method "clearError" renamed to "clearValidation"');
      this.clearValidation(field);
    }
  }, {
    key: "validateField",
    value: function () {
      var _validateField = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.mark(function _callee3(field, value) {
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.wrap(function _callee3$(_context3) {
          while (1) {
            switch (_context3.prev = _context3.next) {
              case 0:
                _context3.next = 2;
                return this.set(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()({}, field, Object(_common_utils__WEBPACK_IMPORTED_MODULE_10__["parseValueFromEvent"])(value)), true);

              case 2:
              case "end":
                return _context3.stop();
            }
          }
        }, _callee3, this);
      }));

      function validateField(_x4, _x5) {
        return _validateField.apply(this, arguments);
      }

      return validateField;
    }()
    /**
     * Set data in the form
     *
     * @param {Object}    data              Data
     * @param {bool}      [validate=false]  Validate form
     */

  }, {
    key: "set",
    value: function () {
      var _set = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.mark(function _callee4(data, validate) {
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.wrap(function _callee4$(_context4) {
          while (1) {
            switch (_context4.prev = _context4.next) {
              case 0:
                if (this._isLoaded()) {
                  _context4.next = 2;
                  break;
                }

                return _context4.abrupt("return");

              case 2:
                this._changes = Object(_common_utils__WEBPACK_IMPORTED_MODULE_10__["getRecordChanges"])(this.model, this._data, this._changes, data);

                this._setState();

                if (!validate) {
                  _context4.next = 14;
                  break;
                }

                _context4.prev = 5;
                _context4.next = 8;
                return this.validateForm();

              case 8:
                _context4.next = 14;
                break;

              case 10:
                _context4.prev = 10;
                _context4.t0 = _context4["catch"](5);

                if (_context4.t0 instanceof _common_ThrottleError__WEBPACK_IMPORTED_MODULE_11__["default"]) {
                  _context4.next = 14;
                  break;
                }

                throw _context4.t0;

              case 14:
              case "end":
                return _context4.stop();
            }
          }
        }, _callee4, this, [[5, 10]]);
      }));

      function set(_x6, _x7) {
        return _set.apply(this, arguments);
      }

      return set;
    }()
  }, {
    key: "submitData",
    value: function () {
      var _submitData = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.mark(function _callee5(data) {
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.wrap(function _callee5$(_context5) {
          while (1) {
            switch (_context5.prev = _context5.next) {
              case 0:
                if (!this._isNotInitialized) {
                  _context5.next = 2;
                  break;
                }

                return _context5.abrupt("return");

              case 2:
                _context5.next = 4;
                return this.set(data);

              case 4:
                _context5.next = 6;
                return this.submit();

              case 6:
                return _context5.abrupt("return", _context5.sent);

              case 7:
              case "end":
                return _context5.stop();
            }
          }
        }, _callee5, this);
      }));

      function submitData(_x8) {
        return _submitData.apply(this, arguments);
      }

      return submitData;
    }()
    /**
     * Send form data to the model
     */

  }, {
    key: "submit",
    value: function () {
      var _submit = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.mark(function _callee6() {
        var changes, countOfHiddenValidationFieldsToRemove, data, validationErrors, newChanges, actualChanges;
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.wrap(function _callee6$(_context6) {
          while (1) {
            switch (_context6.prev = _context6.next) {
              case 0:
                if (!(this._isNotInitialized || this._isSubmitting)) {
                  _context6.next = 2;
                  break;
                }

                return _context6.abrupt("return");

              case 2:
                changes = this._getChanges();
                this._isSubmitting = true;
                this._partialErrorChecking = false;
                countOfHiddenValidationFieldsToRemove = this._hiddenValidationFields.length;

                this._setState(); // Send changes to model


                _context6.prev = 7;
                _context6.next = 10;
                return this.model.submit(changes);

              case 10:
                data = _context6.sent;
                _context6.next = 20;
                break;

              case 13:
                _context6.prev = 13;
                _context6.t0 = _context6["catch"](7);

                if (_context6.t0 instanceof _common_validation_ValidationErrors__WEBPACK_IMPORTED_MODULE_9__["default"]) {
                  _context6.next = 19;
                  break;
                }

                this._isSubmitting = false;

                this._setState();

                throw _context6.t0;

              case 19:
                validationErrors = _context6.t0;

              case 20:
                this._isSubmitting = false;
                newChanges = this._getChanges();
                actualChanges = Object(_common_utils__WEBPACK_IMPORTED_MODULE_10__["isEqual"])(changes, newChanges);

                if (actualChanges) {
                  if (validationErrors) {
                    this._errors = validationErrors;
                  } else {
                    this._errors = new _common_validation_ValidationErrors__WEBPACK_IMPORTED_MODULE_9__["default"]();
                    this._changes = {};
                  }
                }

                this._hiddenValidationFields.splice(0, countOfHiddenValidationFieldsToRemove);

                this._setState();

                if (!validationErrors) {
                  _context6.next = 28;
                  break;
                }

                throw validationErrors;

              case 28:
                return _context6.abrupt("return", data);

              case 29:
              case "end":
                return _context6.stop();
            }
          }
        }, _callee6, this, [[7, 13]]);
      }));

      function submit() {
        return _submit.apply(this, arguments);
      }

      return submit;
    }()
  }, {
    key: "clearFieldChanges",
    value: function clearFieldChanges(field) {
      if (this._isNotInitialized) {
        return;
      }

      this._errors.clearField(field);

      this._warnings.clearField(field);

      delete this._changes[field];

      this._setState();
    }
  }, {
    key: "clearChanges",
    value: function clearChanges() {
      if (this._isNotInitialized) {
        return;
      }

      this._errors.clear();

      this._warnings.clear();

      this._changes = {};
      this._partialErrorChecking = this._partialErrorCheckingDefault;

      this._setState();
    }
  }, {
    key: "setPartialErrorChecking",
    value: function setPartialErrorChecking(value) {
      this._partialErrorChecking = value;

      this._setState();
    }
  }, {
    key: "getPartialErrorChecking",
    value: function getPartialErrorChecking() {
      return this._partialErrorChecking;
    }
  }, {
    key: "validateForm",
    value: function () {
      var _validateForm2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.mark(function _callee7() {
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.wrap(function _callee7$(_context7) {
          while (1) {
            switch (_context7.prev = _context7.next) {
              case 0:
                _context7.prev = 0;
                _context7.next = 3;
                return this._validateForm();

              case 3:
                return _context7.abrupt("return", _context7.sent);

              case 6:
                _context7.prev = 6;
                _context7.t0 = _context7["catch"](0);

                if (_context7.t0 instanceof _common_ThrottleError__WEBPACK_IMPORTED_MODULE_11__["default"]) {
                  _context7.next = 10;
                  break;
                }

                throw _context7.t0;

              case 10:
              case "end":
                return _context7.stop();
            }
          }
        }, _callee7, this, [[0, 6]]);
      }));

      function validateForm() {
        return _validateForm2.apply(this, arguments);
      }

      return validateForm;
    }()
  }, {
    key: "_validateForm",
    value: function () {
      var _validateForm3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.mark(function _callee8() {
        var countOfHiddenValidationFieldsToRemove, displayedErrors, displayedWarning;
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.wrap(function _callee8$(_context8) {
          while (1) {
            switch (_context8.prev = _context8.next) {
              case 0:
                if (!this._isNotInitialized) {
                  _context8.next = 2;
                  break;
                }

                return _context8.abrupt("return");

              case 2:
                // We should remove only those hiddenValidationFields that were present before validation started and keep those
                // that were added after validation started (so it is possible and ok that field 'name' may be present 2 times:
                // 1 for old validation call and 1 for the new).
                // Take into account that _validateForm is throttled, so next calls will be skipped or scheduled after current call
                // finishes. It means we don't need to care about parallel calls because they are impossible.
                countOfHiddenValidationFieldsToRemove = this._hiddenValidationFields.length;
                this.validating = true;
                _context8.prev = 4;
                _context8.next = 7;
                return Promise.all([this._runValidator(this.model, this._getChanges, '_errors'), this._runValidator(this._warningsValidator, this._getData, '_warnings')]);

              case 7:
                _context8.prev = 7;
                this.validating = false;

                this._hiddenValidationFields.splice(0, countOfHiddenValidationFieldsToRemove);

                this._setState();

                return _context8.finish(7);

              case 12:
                displayedErrors = this._getDisplayedErrors(this._errors);
                displayedWarning = this._getDisplayedErrors(this._warnings);
                return _context8.abrupt("return", {
                  errors: !displayedErrors.isEmpty() ? displayedErrors : null,
                  warnings: !displayedWarning.isEmpty() ? displayedWarning : null
                });

              case 15:
              case "end":
                return _context8.stop();
            }
          }
        }, _callee8, this, [[4,, 7, 12]]);
      }));

      function _validateForm() {
        return _validateForm3.apply(this, arguments);
      }

      return _validateForm;
    }()
  }, {
    key: "_getFields",
    value: function _getFields(data, changes, errors, warnings) {
      var proxy = new Proxy({}, {
        get: function get(target, fieldName) {
          return {
            value: data[fieldName],
            isChanged: changes.hasOwnProperty(fieldName),
            errors: errors.getFieldErrorMessages(fieldName),
            warnings: warnings.getFieldErrorMessages(fieldName)
          };
        }
      }); // Explicit declaration of fields in an object

      if (this.fields) {
        var _iteratorNormalCompletion = true;
        var _didIteratorError = false;
        var _iteratorError = undefined;

        try {
          for (var _iterator = this.fields[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
            var field = _step.value;
            proxy[field] = proxy[field];
          }
        } catch (err) {
          _didIteratorError = true;
          _iteratorError = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion && _iterator["return"] != null) {
              _iterator["return"]();
            }
          } finally {
            if (_didIteratorError) {
              throw _iteratorError;
            }
          }
        }
      }

      return proxy;
    }
    /**
     * Check is data loaded
     *
     * @returns {boolean}
     */

  }, {
    key: "_isLoaded",
    value: function _isLoaded() {
      return this._data !== null;
    }
    /**
     * Get form changes
     *
     * @return {{}}
     */

  }, {
    key: "_getChangesFields",
    value: function _getChangesFields() {
      // TODO _getChanges
      var changes = {};

      for (var field in this._changes) {
        if (!this._isDependentField(field)) {
          changes[field] = this._changes[field];
        }
      }

      return changes;
    }
    /**
     * Filter errors depending on the partialErrorChecking mode and clearValidation method
     *
     * @param {ValidationErrors}  validationErrors
     * @returns {ValidationErrors} Form fields
     */

  }, {
    key: "_getDisplayedErrors",
    value: function _getDisplayedErrors(validationErrors) {
      var filteredErrors = validationErrors.clone();
      var _iteratorNormalCompletion2 = true;
      var _didIteratorError2 = false;
      var _iteratorError2 = undefined;

      try {
        for (var _iterator2 = validationErrors.getErrors().keys()[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
          var field = _step2.value;
          var isFieldPristine = !this._changes.hasOwnProperty(field) || Object(_common_utils__WEBPACK_IMPORTED_MODULE_10__["isEqual"])(this._changes[field], this._data[field]);

          if (this._hiddenValidationFields.includes(field) || this._partialErrorChecking && isFieldPristine) {
            filteredErrors.clearField(field);
          }
        }
      } catch (err) {
        _didIteratorError2 = true;
        _iteratorError2 = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion2 && _iterator2["return"] != null) {
            _iterator2["return"]();
          }
        } finally {
          if (_didIteratorError2) {
            throw _iteratorError2;
          }
        }
      }

      return filteredErrors;
    }
  }, {
    key: "_setState",
    value: function _setState() {
      this._eventEmitter.trigger('update', this.getAll());
    }
    /**
     * Model records changes handler
     *
     * @param {Object} changes  Changes
     * @private
     */

  }, {
    key: "_onModelChange",
    value: function _onModelChange(changes) {
      this._data = _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_0___default()({}, this._data, changes);

      this._setState();
    }
  }, {
    key: "_getData",
    value: function _getData() {
      return Object.assign({}, this._data, this._changes);
    }
  }, {
    key: "_getChanges",
    value: function _getChanges() {
      // Send all data or just changed fields in addiction of form configuration
      if (this.submitAll) {
        return this._getData();
      }

      return this._changes;
    }
  }, {
    key: "_isDependentField",
    value: function _isDependentField(field) {
      return this._changes.hasOwnProperty(field) && Object(_common_utils__WEBPACK_IMPORTED_MODULE_10__["isEqual"])(this._changes[field], this._data[field]);
    }
  }, {
    key: "_runValidator",
    value: function () {
      var _runValidator2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.mark(function _callee9(validator, getData, output) {
        var data, validErrors;
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.wrap(function _callee9$(_context9) {
          while (1) {
            switch (_context9.prev = _context9.next) {
              case 0:
                data = getData();

                if (!Object(_common_utils__WEBPACK_IMPORTED_MODULE_10__["isEmpty"])(data)) {
                  _context9.next = 4;
                  break;
                }

                this[output].clear();
                return _context9.abrupt("return");

              case 4:
                _context9.prev = 4;
                _context9.next = 7;
                return validator.isValidRecord(data);

              case 7:
                validErrors = _context9.sent;
                _context9.next = 14;
                break;

              case 10:
                _context9.prev = 10;
                _context9.t0 = _context9["catch"](4);
                this[output].clear();
                throw _context9.t0;

              case 14:
                if (Object(_common_utils__WEBPACK_IMPORTED_MODULE_10__["isEqual"])(data, getData())) {
                  this[output] = validErrors;
                }

              case 15:
              case "end":
                return _context9.stop();
            }
          }
        }, _callee9, this, [[4, 10]]);
      }));

      function _runValidator(_x9, _x10, _x11) {
        return _runValidator2.apply(this, arguments);
      }

      return _runValidator;
    }()
  }]);

  return FormService;
}();

/* harmony default export */ __webpack_exports__["default"] = (FormService);

/***/ }),

/***/ "./src/form/FormXhrModel.js":
/*!**********************************!*\
  !*** ./src/form/FormXhrModel.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "@babel/runtime/helpers/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ "@babel/runtime/helpers/createClass");
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ "@babel/runtime/helpers/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ "@babel/runtime/helpers/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ "@babel/runtime/helpers/inherits");
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _common_validation_ValidationErrors__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../common/validation/ValidationErrors */ "./src/common/validation/ValidationErrors.js");
/* harmony import */ var _common_validation_Validator__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../common/validation/Validator */ "./src/common/validation/Validator.js");
/* harmony import */ var _common_defaultXhr__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../common/defaultXhr */ "./src/common/defaultXhr.js");
/* harmony import */ var _common_Events__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../common/Events */ "./src/common/Events.js");
/* harmony import */ var url__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! url */ "url");
/* harmony import */ var url__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(url__WEBPACK_IMPORTED_MODULE_11__);








/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */






var FormXhrModel =
/*#__PURE__*/
function (_EventsModel) {
  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_6___default()(FormXhrModel, _EventsModel);

  function FormXhrModel(settings) {
    var _this;

    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default()(this, FormXhrModel);

    _this = _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default()(FormXhrModel).call(this));

    if (!settings.api) {
      throw Error('Initialization problem: \'api\' must be specified.');
    }

    _this._validator = settings.validator || new _common_validation_Validator__WEBPACK_IMPORTED_MODULE_8__["default"]();
    _this._xhr = settings.xhr || _common_defaultXhr__WEBPACK_IMPORTED_MODULE_9__["default"];
    _this._apiUrl = settings.api.replace(/([^/])\?/, '$1/?') // Add "/" before "?"
    .replace(/^[^?]*[^/]$/, '$&/'); // Add "/" to the end

    return _this;
  }

  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default()(FormXhrModel, [{
    key: "getData",
    value: function () {
      var _getData = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(fields) {
        var parsedUrl, response;
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                parsedUrl = url__WEBPACK_IMPORTED_MODULE_11___default.a.parse(this._apiUrl, true);
                parsedUrl.query.fields = JSON.stringify(fields);
                delete parsedUrl.search;
                _context.next = 5;
                return this._xhr({
                  method: 'GET',
                  uri: url__WEBPACK_IMPORTED_MODULE_11___default.a.format(parsedUrl)
                });

              case 5:
                response = _context.sent;
                return _context.abrupt("return", JSON.parse(response));

              case 7:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function getData(_x) {
        return _getData.apply(this, arguments);
      }

      return getData;
    }()
  }, {
    key: "submit",
    value: function () {
      var _submit = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(changes) {
        var body;
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                _context2.next = 2;
                return this._xhr({
                  method: 'POST',
                  headers: {
                    'Content-type': 'application/json'
                  },
                  uri: this._apiUrl,
                  body: JSON.stringify(changes)
                });

              case 2:
                body = _context2.sent;
                body = JSON.parse(body);

                if (!body.error) {
                  _context2.next = 6;
                  break;
                }

                throw _common_validation_ValidationErrors__WEBPACK_IMPORTED_MODULE_7__["default"].createFromJSON(body.error);

              case 6:
                this.trigger('update', body.data);
                return _context2.abrupt("return", body.data);

              case 8:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this);
      }));

      function submit(_x2) {
        return _submit.apply(this, arguments);
      }

      return submit;
    }()
    /**
     * Validation check
     *
     * @param {Object}      record
     */

  }, {
    key: "isValidRecord",
    value: function isValidRecord(record) {
      return this._validator.isValidRecord(record);
    }
    /**
     * Get all dependent fields, that are required for validation
     *
     * @param   {Array}  fields   Fields list
     * @returns {Array}  Dependencies
     */

  }, {
    key: "getValidationDependency",
    value: function getValidationDependency(fields) {
      return this._validator.getValidationDependency(fields);
    }
  }]);

  return FormXhrModel;
}(_common_Events__WEBPACK_IMPORTED_MODULE_10__["default"]);

/* harmony default export */ __webpack_exports__["default"] = (FormXhrModel);

/***/ }),

/***/ "./src/form/adapters/GridToFormCreate.js":
/*!***********************************************!*\
  !*** ./src/form/adapters/GridToFormCreate.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "@babel/runtime/helpers/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ "@babel/runtime/helpers/createClass");
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ "@babel/runtime/helpers/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ "@babel/runtime/helpers/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ "@babel/runtime/helpers/inherits");
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _common_Events__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../common/Events */ "./src/common/Events.js");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../common/utils */ "./src/common/utils.js");








/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */



var GridToFormCreate =
/*#__PURE__*/
function (_Events) {
  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_6___default()(GridToFormCreate, _Events);

  /**
   * Adapter allows to use Grid model as a model for new form record creation
   *
   * @param {AbstractGridModel}   model           Grid model
   * @param {Object}              [initialData]   Default field values
   * @constructor
   */
  function GridToFormCreate(model, initialData) {
    var _this;

    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default()(this, GridToFormCreate);

    _this = _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default()(GridToFormCreate).call(this));
    _this._adapter = {
      model: model,
      initialData: initialData || {}
    };
    return _this;
  }
  /**
   * Get data
   *
   * @param {Array}     fields     Required fields
   */


  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default()(GridToFormCreate, [{
    key: "getData",
    value: function () {
      var _getData = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(fields) {
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                if (!(fields && fields.length)) {
                  _context.next = 2;
                  break;
                }

                return _context.abrupt("return", Object(_common_utils__WEBPACK_IMPORTED_MODULE_8__["pick"])(this._adapter.initialData, fields));

              case 2:
                return _context.abrupt("return", this._adapter.initialData);

              case 3:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function getData(_x) {
        return _getData.apply(this, arguments);
      }

      return getData;
    }()
    /**
     * Create new record
     *
     * @param   {Object}      data      Record
     */

  }, {
    key: "submit",
    value: function () {
      var _submit = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(data) {
        var model;
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                model = this._adapter.model;
                _context2.next = 3;
                return model.create(data);

              case 3:
                return _context2.abrupt("return", _context2.sent);

              case 4:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this);
      }));

      function submit(_x2) {
        return _submit.apply(this, arguments);
      }

      return submit;
    }()
    /**
     * Validation checking
     *
     * @param {Object}      record  Record object
     */

  }, {
    key: "isValidRecord",
    value: function () {
      var _isValidRecord = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3(record) {
        var model;
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3) {
          while (1) {
            switch (_context3.prev = _context3.next) {
              case 0:
                model = this._adapter.model;
                _context3.next = 3;
                return model.isValidRecord(record, null);

              case 3:
                return _context3.abrupt("return", _context3.sent);

              case 4:
              case "end":
                return _context3.stop();
            }
          }
        }, _callee3, this);
      }));

      function isValidRecord(_x3) {
        return _isValidRecord.apply(this, arguments);
      }

      return isValidRecord;
    }()
    /**
     * Get all dependent fields, that are required for validation
     *
     * @param   {Array}  fields
     * @returns {Array}  Dependencies
     */

  }, {
    key: "getValidationDependency",
    value: function getValidationDependency(fields) {
      return this._adapter.model.getValidationDependency(fields);
    }
  }]);

  return GridToFormCreate;
}(_common_Events__WEBPACK_IMPORTED_MODULE_7__["default"]);

/* harmony default export */ __webpack_exports__["default"] = (GridToFormCreate);

/***/ }),

/***/ "./src/form/adapters/GridToFormUpdate.js":
/*!***********************************************!*\
  !*** ./src/form/adapters/GridToFormUpdate.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "@babel/runtime/helpers/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ "@babel/runtime/helpers/createClass");
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ "@babel/runtime/helpers/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ "@babel/runtime/helpers/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ "@babel/runtime/helpers/inherits");
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _common_validation_ValidationErrors__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../common/validation/ValidationErrors */ "./src/common/validation/ValidationErrors.js");
/* harmony import */ var _common_Events__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../common/Events */ "./src/common/Events.js");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../common/utils */ "./src/common/utils.js");








/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */




var GridToFormUpdate =
/*#__PURE__*/
function (_Events) {
  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_6___default()(GridToFormUpdate, _Events);

  /**
   * Adapter that allows us to use Grid model record as a form model
   *
   * @param {AbstractGridModel} model   Grid model
   * @param {number|string}     id      Record ID
   * @constructor
   */
  function GridToFormUpdate(model, id) {
    var _this;

    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default()(this, GridToFormUpdate);

    _this = _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default()(GridToFormUpdate).call(this));
    _this._adapter = {
      model: model,
      id: id
    };
    _this._onUpdateHandlers = [];
    return _this;
  }
  /**
   * Subscribe to inner model event
   *
   * @param {string}      event   Event ID
   * @param {Function}    cb      CallBack function
   */


  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default()(GridToFormUpdate, [{
    key: "on",
    value: function on(event, cb) {
      var ctx = this;

      if (event !== 'update') {
        _common_Events__WEBPACK_IMPORTED_MODULE_8__["default"].prototype.on.call(this, event, cb);
        return;
      } // onChange filters out table events, that do not regard to our record


      function onChange(changes) {
        for (var i = 0; i < changes.length; i++) {
          if (Object(_common_utils__WEBPACK_IMPORTED_MODULE_9__["isEqual"])(changes[i][0], ctx._adapter.id)) {
            cb(changes[i][1]);
            return;
          }
        }
      }

      this._onUpdateHandlers.push({
        originalCallback: cb,
        wrappedCallback: onChange
      });

      this._adapter.model.on('update', onChange);
    }
    /**
     * Unsubscribe from inner model event
     *
     * @param {string}      event   Event ID
     * @param {Function}    cb      CallBack function
     */

  }, {
    key: "off",
    value: function off(event, cb) {
      var ctx = this;
      var newOnUpdateHandlers = [];

      if (event !== 'update') {
        _common_Events__WEBPACK_IMPORTED_MODULE_8__["default"].prototype.off.call(this, event, cb);
        return;
      }

      this._onUpdateHandlers.forEach(function (handler) {
        if (handler.originalCallback === cb) {
          ctx._adapter.model.off('update', handler.wrappedCallback);
        } else {
          newOnUpdateHandlers.push(handler);
        }
      });

      this._onUpdateHandlers = newOnUpdateHandlers;
    }
  }, {
    key: "listenerCount",
    value: function listenerCount(event) {
      return this._adapter.model.listenerCount(event);
    }
    /**
     * Get data
     *
     * @param {Array}     fields     Required fields
     */

  }, {
    key: "getData",
    value: function () {
      var _getData = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(fields) {
        var model;
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                model = this._adapter.model;
                _context.next = 3;
                return model.getRecord(this._adapter.id, fields);

              case 3:
                return _context.abrupt("return", _context.sent);

              case 4:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function getData(_x) {
        return _getData.apply(this, arguments);
      }

      return getData;
    }()
    /**
     * Apply changes
     *
     * @param   {Object}      changes     Form data
     */

  }, {
    key: "submit",
    value: function () {
      var _submit = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(changes) {
        var record, model, result;
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                record = Object(_common_utils__WEBPACK_IMPORTED_MODULE_9__["clone"])(changes);
                model = this._adapter.model;
                _context2.next = 4;
                return model.update([[this._adapter.id, record]]);

              case 4:
                result = _context2.sent;
                result = result[0][1];

                if (!(result instanceof Error || result instanceof _common_validation_ValidationErrors__WEBPACK_IMPORTED_MODULE_7__["default"])) {
                  _context2.next = 8;
                  break;
                }

                throw result;

              case 8:
                return _context2.abrupt("return", result);

              case 9:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this);
      }));

      function submit(_x2) {
        return _submit.apply(this, arguments);
      }

      return submit;
    }()
    /**
     * Record validity check
     *
     * @param {Object}      record  Record object
     */

  }, {
    key: "isValidRecord",
    value: function () {
      var _isValidRecord = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3(record) {
        var model;
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3) {
          while (1) {
            switch (_context3.prev = _context3.next) {
              case 0:
                model = this._adapter.model;
                _context3.next = 3;
                return model.isValidRecord(record, this._adapter.id);

              case 3:
                return _context3.abrupt("return", _context3.sent);

              case 4:
              case "end":
                return _context3.stop();
            }
          }
        }, _callee3, this);
      }));

      function isValidRecord(_x3) {
        return _isValidRecord.apply(this, arguments);
      }

      return isValidRecord;
    }()
    /**
     * Get all dependent fields, that are required for validation
     *
     * @param   {Array}  fields  Fields list
     * @returns {Array}  Dependencies
     */

  }, {
    key: "getValidationDependency",
    value: function getValidationDependency(fields) {
      return this._adapter.model.getValidationDependency(fields);
    }
  }]);

  return GridToFormUpdate;
}(_common_Events__WEBPACK_IMPORTED_MODULE_8__["default"]);

/* harmony default export */ __webpack_exports__["default"] = (GridToFormUpdate);

/***/ }),

/***/ "./src/form/connectForm.js":
/*!*********************************!*\
  !*** ./src/form/connectForm.js ***!
  \*********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/extends */ "@babel/runtime/helpers/extends");
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "@babel/runtime/helpers/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ "@babel/runtime/helpers/createClass");
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ "@babel/runtime/helpers/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ "@babel/runtime/helpers/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/assertThisInitialized */ "@babel/runtime/helpers/assertThisInitialized");
/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ "@babel/runtime/helpers/inherits");
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _FormService__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./FormService */ "./src/form/FormService.js");










/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */



function connectForm() {
  var fields = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
  return function (Component) {
    return (
      /*#__PURE__*/
      function (_React$Component) {
        _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_8___default()(ComponentWithFormService, _React$Component);

        function ComponentWithFormService() {
          var _this;

          _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_3___default()(this, ComponentWithFormService);

          _this = _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(ComponentWithFormService).call(this));
          _this.form = new _FormService__WEBPACK_IMPORTED_MODULE_10__["default"](fields);
          _this.state = _this.form.getAll();
          _this.onFormChange = _this.onFormChange.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7___default()(_this));
          return _this;
        }

        _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4___default()(ComponentWithFormService, [{
          key: "componentDidMount",
          value: function () {
            var _componentDidMount = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()(
            /*#__PURE__*/
            _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee() {
              var state;
              return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee$(_context) {
                while (1) {
                  switch (_context.prev = _context.next) {
                    case 0:
                      state = this.form.getAll();

                      if (state.isLoaded) {
                        this.setState(state);
                      }

                      this.form.addChangeListener(this.onFormChange);

                    case 3:
                    case "end":
                      return _context.stop();
                  }
                }
              }, _callee, this);
            }));

            function componentDidMount() {
              return _componentDidMount.apply(this, arguments);
            }

            return componentDidMount;
          }()
        }, {
          key: "componentWillUnmount",
          value: function componentWillUnmount() {
            this.form.removeChangeListener(this.onFormChange);
          }
        }, {
          key: "onFormChange",
          value: function onFormChange(newFormState) {
            this.setState(newFormState);
          }
        }, {
          key: "render",
          value: function render() {
            return react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(Component, _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, this.props, {
              formData: this.state,
              formService: this.form
            }));
          }
        }]);

        return ComponentWithFormService;
      }(react__WEBPACK_IMPORTED_MODULE_9___default.a.Component)
    );
  };
}

/* harmony default export */ __webpack_exports__["default"] = (connectForm);

/***/ }),

/***/ "./src/form/mixin.js":
/*!***************************!*\
  !*** ./src/form/mixin.js ***!
  \***************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "@babel/runtime/helpers/defineProperty");
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/utils */ "./src/common/utils.js");
/* harmony import */ var _common_toPromise__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/toPromise */ "./src/common/toPromise.js");
/* harmony import */ var _common_validation_Validator__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/validation/Validator */ "./src/common/validation/Validator.js");
/* harmony import */ var _common_validation_ValidationErrors__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common/validation/ValidationErrors */ "./src/common/validation/ValidationErrors.js");
/* harmony import */ var _common_callbackify__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../common/callbackify */ "./src/common/callbackify.js");




/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */





/**
 * Grid form mixin
 * @mixin
 */

var FormMixin = {
  getInitialState: function getInitialState() {
    this._validateForm = Object(_common_utils__WEBPACK_IMPORTED_MODULE_3__["throttle"])(this._validateForm);

    if (this._handleModelChange.name.indexOf('bound ') !== 0) {
      // Support React.createClass and mixin-decorators
      this._handleModelChange = this._handleModelChange.bind(this);
      this._getData = this._getData.bind(this);
      this._getChanges = this._getChanges.bind(this);
      this.validateForm = this.validateForm.bind(this);
    }

    return {
      _formMixin: null
    };
  },
  componentWillMount: function componentWillMount() {
    this._isUnmounted = false;
  },
  componentWillUnmount: function componentWillUnmount() {
    this._isUnmounted = true;

    if (!this._isNotInitialized()) {
      this.state._formMixin.model.off('update', this._handleModelChange);
    }
  },

  /**
   * Initialize form
   *
   * @param {Object}            settings                                Configuration
   * @param {Array}             settings.fields                         Fields list, that are required to display
   * @param {FormModel}         settings.model                          Model of form
   * @param {Object}            [settings.data]                         Preset data
   * @param {Object}            [settings.changes                       Preset changes
   * @param {bool}              [settings.submitAll=false]              Send all form for validity check
   * @param {bool}              [settings.partialErrorChecking=false]   Activate partial gradual form validation
   * @param {bool}              [settings.showDependentFields=false]    Mark the fields which are involved in the group validation
   * @param {bool}              [settings.autoSubmit]                   Automatic submit before updateField
   * @param {Function}          [settings.autoSubmitHandler]            Automatic submit handler
   * @param {Validator}         [settings.warningsValidator]            Warningss validator for fields
   * @param {Function}          [cb]                                    CallBack function
   */
  initForm: Object(_common_callbackify__WEBPACK_IMPORTED_MODULE_7__["default"])(
  /*#__PURE__*/
  function () {
    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()(
    /*#__PURE__*/
    _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee(settings) {
      var data, err;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              this._initState(settings);

              if (this.state._formMixin.data) {
                _context.next = 19;
                break;
              }

              _context.prev = 2;
              _context.next = 5;
              return settings.model.getData(settings.fields);

            case 5:
              data = _context.sent;
              _context.next = 11;
              break;

            case 8:
              _context.prev = 8;
              _context.t0 = _context["catch"](2);
              err = _context.t0;

            case 11:
              if (!this._isUnmounted) {
                _context.next = 13;
                break;
              }

              return _context.abrupt("return");

            case 13:
              if (!err) {
                _context.next = 18;
                break;
              }

              this.state._formMixin.globalError = err;
              _context.next = 17;
              return Object(_common_toPromise__WEBPACK_IMPORTED_MODULE_4__["default"])(this.setState.bind(this), true)(this.state);

            case 17:
              throw err;

            case 18:
              this.state._formMixin.data = data;

            case 19:
              this.state._formMixin.model.on('update', this._handleModelChange);

              _context.next = 22;
              return Object(_common_toPromise__WEBPACK_IMPORTED_MODULE_4__["default"])(this.setState.bind(this), true)(this.state);

            case 22:
              if (settings.partialErrorChecking) {
                _context.next = 25;
                break;
              }

              _context.next = 25;
              return this.validateForm();

            case 25:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, this, [[2, 8]]);
    }));

    return function (_x) {
      return _ref.apply(this, arguments);
    };
  }(), true),

  /**
   * Check is data loaded
   *
   * @returns {boolean}
   */
  isLoaded: function isLoaded() {
    return this.state && this.state._formMixin && Boolean(this.state._formMixin.data || this.state._formMixin.globalError);
  },

  /**
   * Get form changes
   *
   * @return {{}}
   */
  getChanges: function getChanges() {
    var changes = {};

    for (var field in this.state._formMixin.changes) {
      if (!this._isDependentField(field)) {
        changes[field] = this.state._formMixin.changes[field];
      }
    }

    return changes;
  },

  /**
   * Check if form field (or entire form) is changed
   *
   * @param  {string}   field  Field name
   * @return {boolean}
   */
  hasChanges: function hasChanges(field) {
    if (this._isNotInitialized()) {
      return false;
    }

    var state = this.state._formMixin;

    if (field === undefined) {
      return !Object(_common_utils__WEBPACK_IMPORTED_MODULE_3__["isEmpty"])(state.changes);
    }

    if (!state.showDependentFields && this._isDependentField(field)) {
      return false;
    }

    return state.changes.hasOwnProperty(field);
  },

  /**
   * Check if form field has validity errors
   *
   * @param  {string|string[]}   field  Field name or array of names
   * @return {boolean}
   */
  hasError: function hasError(field) {
    if (this._isNotInitialized()) {
      return false;
    }

    var state = this.state._formMixin; // Check group of fields

    if (Array.isArray(field)) {
      var _iteratorNormalCompletion = true;
      var _didIteratorError = false;
      var _iteratorError = undefined;

      try {
        for (var _iterator = field[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
          var entry = _step.value;

          if (this.hasError(entry)) {
            return true;
          }
        }
      } catch (err) {
        _didIteratorError = true;
        _iteratorError = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion && _iterator["return"] != null) {
            _iterator["return"]();
          }
        } finally {
          if (_didIteratorError) {
            throw _iteratorError;
          }
        }
      }

      return false;
    } // If partial check is on and field is changed,
    // do not display an error


    if (state.partialErrorChecking) {
      if (!state.changes.hasOwnProperty(field) || Object(_common_utils__WEBPACK_IMPORTED_MODULE_3__["isEqual"])(state.changes[field], state.data[field])) {
        return false;
      }
    }

    return this.state._formMixin.errors.hasError(field) || this.state._formMixin.warnings.hasError(field);
  },
  clearError: function clearError(field, cb) {
    if (this._isNotInitialized()) {
      return;
    }

    if (this.state._formMixin.validating) {
      this.state._formMixin.pendingClearErrors.push(field);
    }

    if (Array.isArray(field)) {
      field.forEach(function (oneField) {
        this.state._formMixin.errors.clearField(oneField);

        this.state._formMixin.warnings.clearField(oneField);
      }, this);
    } else {
      this.state._formMixin.errors.clearField(field);

      this.state._formMixin.warnings.clearField(field);
    }

    this.setState(this.state, typeof cb === 'function' ? cb : null);
  },

  /**
   * Get form data without changes
   *
   * @return {Object|null}
   */
  getOriginalData: function getOriginalData() {
    if (this._isNotInitialized()) {
      return {};
    }

    return this.state._formMixin.data || null;
  },

  /**
   * Get form data
   *
   * @return {Object|null}
   */
  getData: function getData() {
    if (this._isNotInitialized()) {
      return {};
    }

    return Object(_common_utils__WEBPACK_IMPORTED_MODULE_3__["cloneDeep"])(this._getData());
  },

  /**
   * Get form errors
   *
   * @returns {ValidationErrors} Form errors
   */
  getValidationErrors: function getValidationErrors() {
    if (this._isNotInitialized()) {
      return new _common_validation_ValidationErrors__WEBPACK_IMPORTED_MODULE_6__["default"]();
    }

    var field;
    var errors = _common_validation_ValidationErrors__WEBPACK_IMPORTED_MODULE_6__["default"].merge(this.state._formMixin.errors, this.state._formMixin.warnings); // If gradual validation is on, we need
    // to remove unchanged records from errors object

    if (this.state._formMixin.partialErrorChecking) {
      errors = this.state._formMixin.errors.clone(); // Look through all form fields

      for (field in this.state._formMixin.data) {
        // If field is unchanged, remove errors, that regard to this field
        if (!this.state._formMixin.changes.hasOwnProperty(field) || Object(_common_utils__WEBPACK_IMPORTED_MODULE_3__["isEqual"])(this.state._formMixin.changes[field], this.state._formMixin.data[field])) {
          errors.clearField(field);
        }
      }
    }

    return errors;
  },
  getFieldErrors: function getFieldErrors(field) {
    if (this._isNotInitialized()) {
      return false;
    } // If partial check is on and field is changed,
    // do not display an error


    if (this.state._formMixin.partialErrorChecking && !this.state._formMixin.changes.hasOwnProperty(field)) {
      return null;
    }

    var errors = this.state._formMixin.errors.getFieldErrorMessages(field) || [];
    var warnings = this.state._formMixin.warnings.getFieldErrorMessages(field) || [];
    return errors.concat(warnings);
  },

  /**
   * Get global error data, if it's present
   *
   * @returns {Error|null}
   */
  getGlobalError: function getGlobalError() {
    if (this._isNotInitialized()) {
      return null;
    }

    return this.state._formMixin.globalError;
  },

  /**
   * Update form value. Is used as the Editors onChange handler.
   * Causes component redraw.
   *
   * @param {string}           field   Parameter
   * @param {*}                value   Event or data
   */
  updateField: function updateField(field, value) {
    if (this._isNotInitialized()) {
      return;
    }

    this.set(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()({}, field, Object(_common_utils__WEBPACK_IMPORTED_MODULE_3__["parseValueFromEvent"])(value)));
  },
  validateField: function validateField(field, value, cb) {
    this.set(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()({}, field, Object(_common_utils__WEBPACK_IMPORTED_MODULE_3__["parseValueFromEvent"])(value)), true, cb);
  },
  validateForm: function validateForm(cb) {
    this._validateForm(function (err) {
      if (typeof cb === 'function') {
        return cb(err);
      } else if (err) {
        if (!(err instanceof _common_validation_ValidationErrors__WEBPACK_IMPORTED_MODULE_6__["default"])) {
          console.error(err);
        }
      }
    });
  },

  /**
   * Set data in the form
   *
   * @param {Object}    data              Data
   * @param {boolean}      [validate=false]  Validate form
   * @param {Function}  [cb]              CallBack
   */
  set: function set(data, validate, cb) {
    var _this = this;

    if (!this.isLoaded()) {
      return;
    }

    if (typeof validate === 'function' && !cb) {
      cb = validate;
      validate = false;
    }

    var state = this.state._formMixin;
    state.changes = Object(_common_utils__WEBPACK_IMPORTED_MODULE_3__["getRecordChanges"])(state.model, state.data, state.changes, data);

    if (this.state._formMixin.autoSubmit) {
      this.submit(function (err, result) {
        _this.state._formMixin.autoSubmitHandler(err, result);

        if (typeof cb === 'function') {
          cb(err, result);
        }
      });
      return;
    }

    if (validate) {
      this.setState(this.state, function () {
        return _this.validateForm(cb);
      });
      return;
    }

    this.setState(this.state, typeof cb === 'function' ? cb : null);
  },
  submitData: function submitData(data, cb) {
    if (this._isNotInitialized()) {
      return;
    }

    this.set(data);
    this.submit(cb);
  },

  /**
   * Send form data to the model
   *
   * @param {Function}  [cb]  CallBack function
   */
  submit: Object(_common_callbackify__WEBPACK_IMPORTED_MODULE_7__["default"])(
  /*#__PURE__*/
  _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()(
  /*#__PURE__*/
  _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee2() {
    var changes, data, err, newChanges, actualChanges, validationError;
    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee2$(_context2) {
      while (1) {
        switch (_context2.prev = _context2.next) {
          case 0:
            if (!this._isNotInitialized()) {
              _context2.next = 2;
              break;
            }

            return _context2.abrupt("return");

          case 2:
            if (!(!this.state._formMixin.autoSubmit && this.isSubmitting())) {
              _context2.next = 4;
              break;
            }

            return _context2.abrupt("return");

          case 4:
            this.state._formMixin.submitting = true;
            changes = this._getChanges();
            this.state._formMixin.globalError = null;
            this.state._formMixin.partialErrorChecking = false;
            this.setState(this.state); // Send changes to model

            _context2.prev = 9;
            _context2.next = 12;
            return this.state._formMixin.model.submit(changes);

          case 12:
            data = _context2.sent;
            _context2.next = 18;
            break;

          case 15:
            _context2.prev = 15;
            _context2.t0 = _context2["catch"](9);
            err = _context2.t0;

          case 18:
            if (!this._isUnmounted) {
              _context2.next = 20;
              break;
            }

            return _context2.abrupt("return");

          case 20:
            this.state._formMixin.submitting = false;
            newChanges = this._getChanges();
            actualChanges = Object(_common_utils__WEBPACK_IMPORTED_MODULE_3__["isEqual"])(changes, newChanges);
            validationError = err instanceof _common_validation_ValidationErrors__WEBPACK_IMPORTED_MODULE_6__["default"]; // Replacing empty error to null

            if (validationError && err.isEmpty()) {
              err = null;
            }

            if (err) {
              if (validationError) {
                if (actualChanges) {
                  this.state._formMixin.errors = err;
                }
              } else {
                this.state._formMixin.globalError = err;
              }
            } else if (actualChanges) {
              this.state._formMixin.errors = new _common_validation_ValidationErrors__WEBPACK_IMPORTED_MODULE_6__["default"]();
              this.state._formMixin.changes = {};
            } else {
              Object(_common_utils__WEBPACK_IMPORTED_MODULE_3__["forEach"])(changes, function (value, field) {
                if (Object(_common_utils__WEBPACK_IMPORTED_MODULE_3__["isEqual"])(value, newChanges[field])) {
                  delete this.state._formMixin.changes[field];
                }
              }, this);
            }

            _context2.next = 28;
            return Object(_common_toPromise__WEBPACK_IMPORTED_MODULE_4__["default"])(this.setState.bind(this), true)(this.state);

          case 28:
            if (!err) {
              _context2.next = 30;
              break;
            }

            throw err;

          case 30:
            return _context2.abrupt("return", data);

          case 31:
          case "end":
            return _context2.stop();
        }
      }
    }, _callee2, this, [[9, 15]]);
  }))),
  clearFieldChanges: function clearFieldChanges(field, cb) {
    if (this._isNotInitialized()) {
      return;
    }

    this.state._formMixin.errors.clearField(field);

    this.state._formMixin.warnings.clearField(field);

    delete this.state._formMixin.changes[field];
    this.setState(this.state, typeof cb === 'function' ? cb : null);
  },
  clearChanges: function clearChanges(cb) {
    if (this._isNotInitialized()) {
      return;
    }

    this.state._formMixin.errors.clear();

    this.state._formMixin.warnings.clear();

    this.state._formMixin.changes = {};
    this.state._formMixin.globalError = false;
    this.state._formMixin.partialErrorChecking = this.state._formMixin.partialErrorCheckingDefault;
    this.setState(this.state, typeof cb === 'function' ? cb : null);
  },
  setPartialErrorChecking: function setPartialErrorChecking(value, cb) {
    this.state._formMixin.partialErrorChecking = value;
    this.setState(this.state, typeof cb === 'function' ? cb : null);
  },
  isSubmitting: function isSubmitting() {
    if (this._isNotInitialized()) {
      return false;
    }

    return this.state._formMixin.submitting;
  },

  /**
   * Model records changes handler
   *
   * @param {Object} changes  Changes
   * @private
   */
  _handleModelChange: function _handleModelChange(changes) {
    Object.assign(this.state._formMixin.data, Object(_common_utils__WEBPACK_IMPORTED_MODULE_3__["cloneDeep"])(changes));

    if (!this._isUnmounted) {
      this.setState(this.state);
    }
  },
  _initState: function _initState(settings) {
    if (!settings.model) {
      throw Error('You must specify the model form in this.initForm()');
    }

    this.state._formMixin = {
      data: settings.data,
      changes: settings.changes || {},
      errors: new _common_validation_ValidationErrors__WEBPACK_IMPORTED_MODULE_6__["default"](),
      warnings: new _common_validation_ValidationErrors__WEBPACK_IMPORTED_MODULE_6__["default"](),
      globalError: null,
      validating: false,
      pendingClearErrors: [],
      submitting: false,
      showDependentFields: settings.showDependentFields || false,
      warningsValidator: settings.warningsValidator || new _common_validation_Validator__WEBPACK_IMPORTED_MODULE_5__["default"](),
      partialErrorChecking: settings.partialErrorChecking,
      // Current mode
      partialErrorCheckingDefault: settings.partialErrorChecking,
      // Default mode
      model: settings.model,
      // FormModel
      fields: settings.fields,
      submitAll: settings.submitAll,
      autoSubmit: settings.autoSubmit,
      autoSubmitHandler: settings.autoSubmitHandler
    };
  },
  _isNotInitialized: function _isNotInitialized() {
    return !this.state || !this.state._formMixin;
  },
  _validateForm: function _validateForm(cb, stop) {
    if (this._isNotInitialized()) {
      return stop();
    }

    var completed = 0;
    var completeError;

    var onComplete = function (err) {
      var field;

      if (this._isUnmounted) {
        if (err) {
          console.error(err);
        }

        return;
      }

      if (err) {
        completeError = err;
      }

      if (++completed < 2) {
        // Wait two callbacks
        return;
      }

      this.state._formMixin.validating = false;

      while (field = this.state._formMixin.pendingClearErrors.pop()) {
        this.state._formMixin.warnings.clearField(field);

        this.state._formMixin.errors.clearField(field);
      }

      this.setState(this.state, function () {
        if (completeError) {
          cb(completeError);
          return;
        }

        var errorsWithPartialChecking = this.getValidationErrors();
        cb(errorsWithPartialChecking.isEmpty() ? null : errorsWithPartialChecking);
      });
    }.bind(this);

    this.state._formMixin.validating = true;

    this._runValidator(this.state._formMixin.model, this._getChanges, 'errors', onComplete);

    this._runValidator(this.state._formMixin.warningsValidator, this._getData, 'warnings', onComplete);
  },
  _runValidator: function _runValidator(validator, getData, output, cb) {
    var _this2 = this;

    var data = getData();
    validator.isValidRecord(data).then(function (validErrors) {
      if (!_this2._isUnmounted && Object(_common_utils__WEBPACK_IMPORTED_MODULE_3__["isEqual"])(data, getData())) {
        _this2.state._formMixin[output] = validErrors;
      }

      cb();
    })["catch"](function (err) {
      if (!_this2._isUnmounted && Object(_common_utils__WEBPACK_IMPORTED_MODULE_3__["isEqual"])(data, getData())) {
        _this2.state._formMixin[output].clear();
      }

      cb(err);
    });
  },
  _getData: function _getData() {
    if (!this.state._formMixin.data) {
      return null;
    }

    return Object.assign({}, this.state._formMixin.data, this.state._formMixin.changes);
  },
  _getChanges: function _getChanges() {
    // Send all data or just changed fields in addiction of form configuration
    if (this.state._formMixin.submitAll) {
      return this._getData();
    }

    return Object(_common_utils__WEBPACK_IMPORTED_MODULE_3__["clone"])(this.state._formMixin.changes);
  },
  _isDependentField: function _isDependentField(field) {
    var state = this.state._formMixin;
    return state.changes.hasOwnProperty(field) && Object(_common_utils__WEBPACK_IMPORTED_MODULE_3__["isEqual"])(state.changes[field], state.data[field]);
  }
};
/* harmony default export */ __webpack_exports__["default"] = (FormMixin);

/***/ }),

/***/ "./src/grid/Component.js":
/*!*******************************!*\
  !*** ./src/grid/Component.js ***!
  \*******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/extends */ "@babel/runtime/helpers/extends");
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ "@babel/runtime/helpers/toConsumableArray");
/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/objectSpread */ "@babel/runtime/helpers/objectSpread");
/* harmony import */ var _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! prop-types */ "prop-types");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var create_react_class__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! create-react-class */ "create-react-class");
/* harmony import */ var create_react_class__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(create_react_class__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common/utils */ "./src/common/utils.js");
/* harmony import */ var _mixins_columns__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./mixins/columns */ "./src/grid/mixins/columns.js");
/* harmony import */ var _mixins_pagination__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./mixins/pagination */ "./src/grid/mixins/pagination.js");
/* harmony import */ var _mixins_statuses__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./mixins/statuses */ "./src/grid/mixins/statuses.js");
/* harmony import */ var _mixins_sorting__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./mixins/sorting */ "./src/grid/mixins/sorting.js");
/* harmony import */ var _mixins_data__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./mixins/data */ "./src/grid/mixins/data.js");
/* harmony import */ var _mixins_editor__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./mixins/editor */ "./src/grid/mixins/editor.js");
/* harmony import */ var _mixins_ui__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./mixins/ui */ "./src/grid/mixins/ui.js");
/* harmony import */ var _mixins_select__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./mixins/select */ "./src/grid/mixins/select.js");
/* harmony import */ var _common_ThrottleError__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../common/ThrottleError */ "./src/common/ThrottleError.js");




/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */

/**
 * React table component
 */













var RESET_MODEL = 1 << 0;
var RESET_VIEW_COLUMNS = 1 << 1;
var RESET_SORT = 1 << 2;
var RESET_VIEW_COUNT = 1 << 3;
var RESET_SELECTED_COLUMNS = 1 << 4;
var RESET_BLACK_LIST_MODE = 1 << 5;

var propTypes = function () {
  var sortElementProp = prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.shape({
    column: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.string,
    direction: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.any
  });
  var sortProp = prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.oneOfType([sortElementProp, prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.arrayOf(sortElementProp)]);
  return {
    className: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.string,
    model: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.shape({
      read: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.func.isRequired,
      update: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.func,
      isValidRecord: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.func,
      getValidationDependency: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.func,
      on: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.func,
      off: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.func
    }),
    cols: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.object,
    viewColumns: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.string), prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.object]),
    selected: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.array,
    // sort: PropTypes.object,
    page: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.number,
    defaultViewCount: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.number,
    viewCount: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.number,
    viewVariants: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.number),
    onChangeViewCount: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.func,
    onChange: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.func,
    onError: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.func,
    onPageLoad: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.func,
    onInit: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.func,
    onDestroy: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.func,
    autoSubmit: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.bool,
    height: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.number,
    onSelectedChange: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.func,
    onSorting: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.func,
    multipleSorting: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.bool,
    selectAllStatus: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.any,
    onToggleSelected: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.func,
    onToggleSelectAll: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.func,
    defaultSort: function defaultSort(props, propName) {
      if (!props.defaultSort) {
        return;
      }

      for (var _len = arguments.length, rest = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {
        rest[_key - 2] = arguments[_key];
      }

      var validProp = sortProp.apply(void 0, [props, propName].concat(rest));

      if (validProp) {
        return validProp;
      }

      if (props.hasOwnProperty('sort')) {
        return Error('You can not set "defaultSort" when the "sort" prop is specified');
      }
    },
    sort: function sort(props, propName) {
      if (!props.sort) {
        return;
      }

      for (var _len2 = arguments.length, rest = new Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {
        rest[_key2 - 2] = arguments[_key2];
      }

      var validProp = sortProp.apply(void 0, [props, propName].concat(rest));

      if (validProp) {
        return validProp;
      }

      if (!props.onSorting) {
        return Error('You need to define the "onSorting" prop when "sort" is set');
      }
    },
    saveFullRecord: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.bool,
    partialErrorChecking: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.bool,
    warningsValidator: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.shape({
      isValidRecord: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.func,
      getValidationDependency: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.func
    })
  };
}();

var GridComponent = create_react_class__WEBPACK_IMPORTED_MODULE_5___default()(_babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_2___default()({
  displayName: "GridComponent"
}, _mixins_columns__WEBPACK_IMPORTED_MODULE_7__["default"], _mixins_pagination__WEBPACK_IMPORTED_MODULE_8__["default"], _mixins_statuses__WEBPACK_IMPORTED_MODULE_9__["default"], _mixins_sorting__WEBPACK_IMPORTED_MODULE_10__["default"], _mixins_data__WEBPACK_IMPORTED_MODULE_11__["default"], _mixins_editor__WEBPACK_IMPORTED_MODULE_12__["default"], _mixins_ui__WEBPACK_IMPORTED_MODULE_13__["default"], _mixins_select__WEBPACK_IMPORTED_MODULE_14__["default"], {
  getDefaultProps: function getDefaultProps() {
    return {
      page: 0,
      defaultViewCount: 0,
      partialErrorChecking: false,
      selected: []
    };
  },
  getInitialState: function getInitialState() {
    this._throttledUpdateTable = Object(_common_utils__WEBPACK_IMPORTED_MODULE_6__["throttle"])(this.updateTable);
    this._validateRow = Object(_common_utils__WEBPACK_IMPORTED_MODULE_6__["throttle"])(this._validateRow);

    if (this.props.onInit) {
      this.props.onInit();
    }

    return {
      page: this.props.page,
      viewCount: this.props.defaultViewCount,
      count: 0,
      statusMap: {
        "new": 1 << 0
      },
      statuses: {},
      sort: this._getDefaultSort(),
      data: null,
      changes: {},
      warnings: {},
      errors: {},
      totals: {},
      recordsInfo: {},
      mainIds: [],
      partialErrorChecking: this.props.partialErrorChecking,
      editor: {},
      colsWithEscapeErrors: {},
      selectBlackListMode: false,
      selected: _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(this.props.selected),
      showLoader: false
    };
  },
  componentDidMount: function componentDidMount() {
    this._isMounted = true;

    if (this.props.model) {
      this.props.model.on('create', this._onRecordsCreated);
      this.props.model.on('update', this._setData);
      this.props.model.on('delete', this.updateTable);
    }

    this.updateTable();
  },
  componentWillUnmount: function componentWillUnmount() {
    this._isMounted = false;

    if (this.props.model) {
      this.props.model.off('create', this._onRecordsCreated);
      this.props.model.off('update', this._setData);
      this.props.model.off('delete', this.updateTable);
    }

    if (this.props.onDestroy) {
      this.props.onDestroy();
    }
  },
  componentWillReceiveProps: function componentWillReceiveProps(nextProps) {
    var oldProps = this.props;
    var reset = 0;

    if (!Object(_common_utils__WEBPACK_IMPORTED_MODULE_6__["isEqual"])(this.props.model, nextProps.model)) {
      reset |= RESET_MODEL;
    }

    if (!Object(_common_utils__WEBPACK_IMPORTED_MODULE_6__["isEqual"])(this.props.viewColumns, nextProps.viewColumns)) {
      reset |= RESET_VIEW_COLUMNS;
    }

    if (!Object(_common_utils__WEBPACK_IMPORTED_MODULE_6__["isEqual"])(this.props.sort, nextProps.sort)) {
      reset |= RESET_SORT;
    }

    if (this.props.viewCount !== nextProps.viewCount) {
      reset |= RESET_VIEW_COUNT;
    }

    if (!Object(_common_utils__WEBPACK_IMPORTED_MODULE_6__["isEqual"])(this.props.selected, nextProps.selected) || this.props.selectBlackListMode !== nextProps.selectBlackListMode) {
      reset |= RESET_SELECTED_COLUMNS;
    }

    if (!Object(_common_utils__WEBPACK_IMPORTED_MODULE_6__["isEqual"])(this.props.blackListMode, nextProps.blackListMode)) {
      reset |= RESET_BLACK_LIST_MODE;
    }

    if (!reset) {
      return;
    }

    if (nextProps.selected) {
      this.state.selected = _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(nextProps.selected);
    }

    this.setState({}, function () {
      if (reset & RESET_SORT || reset & RESET_MODEL || reset & RESET_VIEW_COUNT) {
        if (reset & RESET_MODEL) {
          this.state.data = null;

          if (oldProps.model) {
            oldProps.model.off('create', this._onRecordsCreated);
            oldProps.model.off('update', this._setData);
          }

          if (this.props.model) {
            this.props.model.on('create', this._onRecordsCreated);
            this.props.model.on('update', this._setData);
          }

          this._setPage(0);
        }

        this._throttledUpdateTable()["catch"](function (err) {
          if (!(err instanceof _common_ThrottleError__WEBPACK_IMPORTED_MODULE_15__["default"])) {
            console.error(err);
          }
        });
      } else if (reset & RESET_VIEW_COLUMNS || reset & RESET_SELECTED_COLUMNS || reset & RESET_BLACK_LIST_MODE) {
        this._renderBody();
      }
    });
  },
  renderScrollableGrid: function renderScrollableGrid(gridClassNames) {
    var _this = this;

    var header = this._formHeader();

    return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", {
      className: gridClassNames.join(' ')
    }, react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", {
      className: "wrapper-dgrid-header"
    }, react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("table", {
      cellSpacing: "0",
      className: "dgrid-header"
    }, react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("colgroup", null, header.colGroup), react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("thead", null, header.cols.map(function (row, colKey) {
      return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("tr", {
        key: colKey
      }, row.map(function (col, rowKey) {
        var header = _this._getHeaderCellHTML(col.hasOwnProperty('name') ? col.name : col.id);

        var props = {
          key: rowKey,
          className: col.className,
          onClick: col.sort ? _this._sortCol.bind(_this, col.field) : _this._handleHeaderCellClick.bind(_this, col),
          colSpan: col.cols,
          rowSpan: col.rows
        };
        return typeof header === 'string' ? react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("th", _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, props, {
          dangerouslySetInnerHTML: {
            __html: header
          }
        })) : react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("th", props, header);
      }));
    })))), react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", {
      style: {
        maxHeight: this.props.height,
        height: this.props.height
      },
      className: "dgrid-body-wrapper dgrid-scrollable"
    }, react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", {
      className: "dgrid-body"
    }, react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", {
      className: this.state.showLoader ? 'dgrid-loader' : '',
      ref: function ref(loader) {
        return _this.loader = loader;
      }
    }), react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("table", {
      cellSpacing: "0",
      ref: function ref(body) {
        return _this.body = body;
      },
      onClick: this._handleBodyClick
    }, react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("colgroup", null, header.colGroup), react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("tbody", {
      className: "dgrid-body-table",
      ref: function ref(tbody) {
        return _this.tBody = tbody;
      }
    })))), react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", {
      className: "wrapper-totals"
    }, this._renderTotals(this.props.height)), this._renderPagination());
  },
  renderGrid: function renderGrid(gridClassNames) {
    var _this2 = this;

    var header = this._formHeader();

    gridClassNames = gridClassNames.concat('dgrid-not-scrollable');
    return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", {
      className: gridClassNames.join(' ')
    }, react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", {
      className: this.state.showLoader ? 'dgrid-loader' : '',
      ref: function ref(loader) {
        return _this2.loader = loader;
      }
    }), react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("table", {
      cellSpacing: "0",
      className: "dgrid-body-table",
      ref: function ref(body) {
        return _this2.body = body;
      },
      onClick: this._handleBodyClick
    }, react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("colgroup", null, header.colGroup), react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("thead", null, header.cols.map(function (row, colKey) {
      return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("tr", {
        key: colKey
      }, row.map(function (col, rowKey) {
        var header = _this2._getHeaderCellHTML(col.hasOwnProperty('name') ? col.name : col.id);

        var props = {
          key: rowKey,
          className: col.className,
          onClick: col.sort ? _this2._sortCol.bind(_this2, col.field) : _this2._handleHeaderCellClick.bind(_this2, col),
          colSpan: col.cols,
          rowSpan: col.rows
        };
        return typeof header === 'string' ? react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("th", _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, props, {
          dangerouslySetInnerHTML: {
            __html: header
          }
        })) : react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("th", props, header);
      }));
    })), react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("tbody", {
      className: "dgrid-body-table",
      ref: function ref(tbody) {
        return _this2.tBody = tbody;
      }
    }), this._renderTotals(this.props.height)), this._renderPagination());
  },
  render: function render() {
    var gridClassNames = ['data-grid'];

    if (this.props.className) {
      gridClassNames.push(this.props.className);
    }

    if (!this.props.height) {
      return this.renderGrid(gridClassNames);
    }

    return this.renderScrollableGrid(gridClassNames);
  }
}));
GridComponent.propTypes = propTypes;
/* harmony default export */ __webpack_exports__["default"] = (GridComponent);

/***/ }),

/***/ "./src/grid/export/exportGridData.js":
/*!*******************************************!*\
  !*** ./src/grid/export/exportGridData.js ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _common_ArgumentsError__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/ArgumentsError */ "./src/common/ArgumentsError.js");



/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */


function formatColumns(columns, viewColumns) {
  var formattedColumns = {};
  var columnId;
  var i;

  for (i = 0; i < viewColumns.length; i++) {
    columnId = viewColumns[i];
    formattedColumns[columnId] = "".concat(columns[columnId].parent ? columns[columnId].parent + ' ' : '').concat(columns[columnId].name);
  }

  return formattedColumns;
}

function formatRecord(record, columns, viewColumns) {
  var formattedRecord = {};
  var _iteratorNormalCompletion = true;
  var _didIteratorError = false;
  var _iteratorError = undefined;

  try {
    for (var _iterator = viewColumns[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
      var viewColumn = _step.value;
      var column = columns[viewColumn];
      formattedRecord[viewColumn] = column.render[column.render.length - 1](record);
    }
  } catch (err) {
    _didIteratorError = true;
    _iteratorError = err;
  } finally {
    try {
      if (!_iteratorNormalCompletion && _iterator["return"] != null) {
        _iterator["return"]();
      }
    } finally {
      if (_didIteratorError) {
        throw _iteratorError;
      }
    }
  }

  return formattedRecord;
}

function formatData(records, totals, columns, viewColumns) {
  var formatted = {
    columns: formatColumns(columns, viewColumns),
    records: records.map(function (record) {
      return formatRecord(record[1], columns, viewColumns);
    })
  };

  if (totals) {
    formatted.totals = formatRecord(totals, columns, viewColumns);
  }

  return formatted;
}

function getFields(columns, viewColumns) {
  var fields = {};
  var _iteratorNormalCompletion2 = true;
  var _didIteratorError2 = false;
  var _iteratorError2 = undefined;

  try {
    for (var _iterator2 = viewColumns[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
      var columnId = _step2.value;

      for (var i = 0; i < columns[columnId].render.length - 1; i++) {
        fields[columns[columnId].render[i]] = true;
      }
    }
  } catch (err) {
    _didIteratorError2 = true;
    _iteratorError2 = err;
  } finally {
    try {
      if (!_iteratorNormalCompletion2 && _iterator2["return"] != null) {
        _iterator2["return"]();
      }
    } finally {
      if (_didIteratorError2) {
        throw _iteratorError2;
      }
    }
  }

  return Object.keys(fields);
}
/**
 * @param {{}} columns
 * @param {string[]} viewColumns
 */


function assertValidViewColumns(columns, viewColumns) {
  if (!viewColumns || !viewColumns.length) {
    throw new _common_ArgumentsError__WEBPACK_IMPORTED_MODULE_2__["default"]('"viewColumns" can`t be empty');
  }

  var notExistColumns = [];
  var _iteratorNormalCompletion3 = true;
  var _didIteratorError3 = false;
  var _iteratorError3 = undefined;

  try {
    for (var _iterator3 = viewColumns[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
      var columnId = _step3.value;

      if (!columns[columnId]) {
        notExistColumns.push(columnId);
      }
    }
  } catch (err) {
    _didIteratorError3 = true;
    _iteratorError3 = err;
  } finally {
    try {
      if (!_iteratorNormalCompletion3 && _iterator3["return"] != null) {
        _iterator3["return"]();
      }
    } finally {
      if (_didIteratorError3) {
        throw _iteratorError3;
      }
    }
  }

  if (notExistColumns.length) {
    throw new _common_ArgumentsError__WEBPACK_IMPORTED_MODULE_2__["default"]("You trying to get not exist columns: ".concat(notExistColumns.join(', ')));
  }
}
/**
 * @param {{}}                    gridModel
 * @param {{}}                    columns
 * @param {string[]}              viewColumns
 * @param {Function}              exporter
 * @param {{}}                    settings
 * @param {[string, string][]}      settings.sort
 * @param {number}                  settings.limit
 * @param {number}                  settings.offset
 * @param {string[]}                settings.viewColumns
 */


function exportGridData(_x, _x2, _x3, _x4, _x5) {
  return _exportGridData.apply(this, arguments);
}

function _exportGridData() {
  _exportGridData = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()(
  /*#__PURE__*/
  _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(gridModel, columns, viewColumns, exporter, settings) {
    var result, data;
    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            assertValidViewColumns(columns, viewColumns);
            _context.next = 3;
            return gridModel.read({
              fields: getFields(columns, viewColumns),
              sort: settings.sort ? [[settings.sort.column, settings.sort.direction]] : null,
              limit: settings.limit,
              offset: settings.offset
            });

          case 3:
            result = _context.sent;
            data = formatData(result.records, result.totals, columns, viewColumns);
            _context.next = 7;
            return exporter(data);

          case 7:
            return _context.abrupt("return", _context.sent);

          case 8:
          case "end":
            return _context.stop();
        }
      }
    }, _callee);
  }));
  return _exportGridData.apply(this, arguments);
}

/* harmony default export */ __webpack_exports__["default"] = (exportGridData);

/***/ }),

/***/ "./src/grid/export/exporters/toCSV.js":
/*!********************************************!*\
  !*** ./src/grid/export/exporters/toCSV.js ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _common_toPromise__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../common/toPromise */ "./src/common/toPromise.js");
/* harmony import */ var csv_stringify__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! csv-stringify */ "csv-stringify");
/* harmony import */ var csv_stringify__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(csv_stringify__WEBPACK_IMPORTED_MODULE_3__);



/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */



function toCSV(_x) {
  return _toCSV.apply(this, arguments);
}

function _toCSV() {
  _toCSV = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()(
  /*#__PURE__*/
  _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(data) {
    var csvData;
    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            _context.next = 2;
            return Object(_common_toPromise__WEBPACK_IMPORTED_MODULE_2__["default"])(csv_stringify__WEBPACK_IMPORTED_MODULE_3___default.a, true)(data.records.concat([data.totals]), {
              header: true,
              columns: data.columns
            });

          case 2:
            csvData = _context.sent;
            return _context.abrupt("return", {
              mime: 'text/csv',
              data: csvData
            });

          case 4:
          case "end":
            return _context.stop();
        }
      }
    }, _callee);
  }));
  return _toCSV.apply(this, arguments);
}

/* harmony default export */ __webpack_exports__["default"] = (toCSV);

/***/ }),

/***/ "./src/grid/export/exporters/toJSON.js":
/*!*********************************************!*\
  !*** ./src/grid/export/exporters/toJSON.js ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);



/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */
function toJSON(_x) {
  return _toJSON.apply(this, arguments);
}

function _toJSON() {
  _toJSON = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()(
  /*#__PURE__*/
  _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(data) {
    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            return _context.abrupt("return", {
              mime: 'application/json',
              data: {
                records: data.records,
                totals: data.totals
              }
            });

          case 1:
          case "end":
            return _context.stop();
        }
      }
    }, _callee);
  }));
  return _toJSON.apply(this, arguments);
}

/* harmony default export */ __webpack_exports__["default"] = (toJSON);

/***/ }),

/***/ "./src/grid/mixins/columns.js":
/*!************************************!*\
  !*** ./src/grid/mixins/columns.js ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ "@babel/runtime/helpers/toConsumableArray");
/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/utils */ "./src/common/utils.js");
/* harmony import */ var react_dom_factories__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-dom-factories */ "react-dom-factories");
/* harmony import */ var react_dom_factories__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_dom_factories__WEBPACK_IMPORTED_MODULE_3__);



/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */


var GridColumnsMixin = {
  /**
   * Column visibility flag
   *
   * @param   {string}    id  Column ID
   * @returns {boolean}   Column visibility
   * @private
   */
  _isViewColumn: function _isViewColumn(id) {
    if (!this.props.viewColumns) {
      return true;
    }

    if (Array.isArray(this.props.viewColumns)) {
      return this.props.viewColumns.indexOf(id) > -1;
    }

    return this.props.viewColumns[id];
  },

  /**
   * Collect data for table header display
   *
   * @returns {Object} Formed data
   * @private
   */
  _formHeader: function _formHeader() {
    var rows = [[
      /* top */
    ], [
      /* bottom */
    ]];
    var colGroup = [];
    var lastParent = {
      name: ''
    };

    for (var columnId in this.props.cols) {
      // Skip column if it's invisible
      if (!this._isViewColumn(columnId)) {
        continue;
      }

      colGroup.push(react_dom_factories__WEBPACK_IMPORTED_MODULE_3___default.a.col({
        key: columnId,
        width: this.props.cols[columnId].width,
        className: this._getColumnClass(columnId)
      }));
      var classNames = [this._getColumnClass(columnId)];
      var addInfo = {
        id: columnId,
        name: this.props.cols[columnId].name,
        onClick: this.props.cols[columnId].onClick,
        onClickRefs: this.props.cols[columnId].onClickRefs,
        cols: 1,
        rows: 1
      };

      var sortParams = this._getSortParams(columnId);

      if (sortParams) {
        classNames.push("dgrid-".concat(sortParams.direction));
        addInfo.field = sortParams.column;
        addInfo.sort = sortParams.direction;
      }

      addInfo.className = classNames.join(' ');

      if (this.props.cols[columnId].parent) {
        if (this.props.cols[columnId].parent !== lastParent.name) {
          lastParent = rows[0][rows[0].push({
            name: this.props.cols[columnId].parent,
            cols: 1,
            rows: 1
          }) - 1];
        } else {
          lastParent.cols++;
        }

        rows[1].push(addInfo);
      } else {
        lastParent = {
          name: ''
        };
        addInfo.rows = 2;
        rows[0].push(addInfo);
      }
    }

    return {
      cols: rows,
      colGroup: colGroup
    };
  },

  /**
   * Get the names of the parameters that are required to display the grid
   *
   * @return {string[]}
   * @private
   */
  _getFieldsToRender: function _getFieldsToRender() {
    var i;
    var cols = this.props.cols;
    var columns = [];

    for (i in cols) {
      columns = Object(_common_utils__WEBPACK_IMPORTED_MODULE_2__["union"])(columns, cols[i].render.slice(0, cols[i].render.length - 1));
    }

    return columns;
  },

  /**
   * Does the parameters to display grid
   *
   * @param   {string}  field
   * @return  {boolean}
   * @private
   */
  _isFieldAffectsRender: function _isFieldAffectsRender(field) {
    var i;
    var cols = this.props.cols;

    for (i in cols) {
      if (cols[i].render.indexOf(field) >= 0) {
        return true;
      }
    }

    return false;
  },

  /**
   * Get dependent columns
   *
   * @param   {string}    field
   * @return  {string[]}
   * @private
   */
  _getDependentColumns: function _getDependentColumns(field) {
    var dependentColumns = [];
    var dependencyFields = [field].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(this.props.model.getValidationDependency([field])));

    for (var _i = 0, _Object$entries = Object.entries(this.props.cols); _i < _Object$entries.length; _i++) {
      var _Object$entries$_i = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_Object$entries[_i], 2),
          columnName = _Object$entries$_i[0],
          render = _Object$entries$_i[1].render;

      if (render.some(function (renderField) {
        return dependencyFields.includes(renderField);
      })) {
        dependentColumns.push(columnName);
      }
    }

    return dependentColumns;
  },
  _getColumnClass: function _getColumnClass(id) {
    return this.props.cols[id].className;
  }
};
/* harmony default export */ __webpack_exports__["default"] = (GridColumnsMixin);

/***/ }),

/***/ "./src/grid/mixins/data.js":
/*!*********************************!*\
  !*** ./src/grid/mixins/data.js ***!
  \*********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _common_validation_ValidationErrors__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/validation/ValidationErrors */ "./src/common/validation/ValidationErrors.js");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/utils */ "./src/common/utils.js");
/* harmony import */ var _common_ThrottleError__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../common/ThrottleError */ "./src/common/ThrottleError.js");




/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */



var GridDataMixin = {
  /**
   * Change table record
   * This method marks changed fields and validates them
   *
   * @param {*}         recordId    Record ID
   * @param {Object}    data        Changed data
   * @param {Function}  cb          CallBack function
   */
  set: function set(recordId, data, cb) {
    //TODO cb does't used
    var row = this._getRowID(recordId);

    this._setRowChanges(row, Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["cloneDeep"])(data), cb);

    if (this.props.autoSubmit || this.props.realtime) {
      if (this.props.realtime) {
        console.warn('Deprecated: Grid prop "realtime" renamed to "autoSubmit"');
      }

      this.save(this.props.onRealtimeSubmit);
    } else if (this.props.onChange) {
      this.props.onChange(this.state.changes, this.state.data);
    }
  },

  /**
   * Get record data
   *
   * @param recordId
   * @return {Object}
   */
  getRecord: function getRecord(recordId) {
    var row = this._getRowID(recordId);

    return Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["cloneDeep"])(this._getRecordWithChanges(row));
  },

  /**
   * Get record changes object
   *
   * @param   {*} recordId Record ID
   * @return  {Object}
   */
  getRecordChanges: function getRecordChanges(recordId) {
    var row = this._getRowID(recordId);

    return this._getRecordChanges(row);
  },

  /**
   * Get record warnings object
   *
   * @param   {*} recordId  Record ID
   * @return  {ValidationErrors}
   * @private
   */
  getRecordWarnings: function getRecordWarnings(recordId) {
    var row = this._getRowID(recordId);

    return this.state.warnings[row] || new _common_validation_ValidationErrors__WEBPACK_IMPORTED_MODULE_3__["default"]();
  },

  /**
   * Get validation warnings
   *
   * @return {Array|null}
   */
  getWarnings: function getWarnings() {
    var result = [];

    for (var i in this.state.warnings) {
      result.push([this.state.recordsInfo[i].id, this.state.warnings[i]]);
    }

    return result.length ? result : null;
  },

  /**
   * Get record errors object
   *
   * @param   {*} recordId  Record ID
   * @return  {ValidationErrors}
   * @private
   */
  getRecordErrors: function getRecordErrors(recordId) {
    var row = this._getRowID(recordId);

    return this._getRecordErrors(row);
  },

  /**
   * Get validation errors
   *
   * @return {Array|null}
   */
  getErrors: function getErrors() {
    var result = [];

    for (var i in this.state.errors) {
      result.push([this.state.recordsInfo[i].id, this.state.errors[i]]);
    }

    return result.length ? result : null;
  },

  /**
   * Get table model
   *
   * @returns {AbstractGridModel}
   */
  getModel: function getModel() {
    return this.props.model;
  },

  /**
   * Save grid changes
   */
  save: function () {
    var _save = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()(
    /*#__PURE__*/
    _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee() {
      var _this = this,
          _context;

      var errors, changes, data, unhandledErrors, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _loop, _iterator, _step, _ret, errorHandler;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              errors = this.getErrors(); // Collect all valid changes

              changes = Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["reduce"])(this.state.changes, function (result, rowChanges, row) {
                if (!errors || !errors[row]) {
                  if (_this.props.saveFullRecord) {
                    result[row] = _this._getRecordWithChanges(row);
                  } else {
                    result[row] = {};
                    Object.assign(result[row], rowChanges, Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["pick"])(_this.state.data[row], _this.props.model.getValidationDependency(Object.keys(result[row]))));
                  }
                }

                return result;
              }, {}); // Cancel new record display

              this.removeRecordStatusAll('new'); // Pass changes to table model processing

              _context2.next = 5;
              return this.props.model.update(this._dataObjectToArray(changes));

            case 5:
              data = _context2.sent;

              if (this._isMounted) {
                _context2.next = 8;
                break;
              }

              return _context2.abrupt("return");

            case 8:
              this.state.partialErrorChecking = false;
              unhandledErrors = [];
              _iteratorNormalCompletion = true;
              _didIteratorError = false;
              _iteratorError = undefined;
              _context2.prev = 13;

              _loop = function _loop() {
                var record = _step.value;

                var row = _this._getRowID(record[0]); // Skip records that are user changed while data processing


                if (!Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["isEqual"])(_this.state.changes[row], changes[row])) {
                  return "continue";
                }

                if (record[1] instanceof Error) {
                  unhandledErrors.push(record[1]);
                  return "continue";
                } // Process validation errors


                if (record[1] instanceof _common_validation_ValidationErrors__WEBPACK_IMPORTED_MODULE_3__["default"]) {
                  _this.state.errors[row] = record[1];
                  return "continue";
                } // Cancel changed data status of the parameters, that are changed


                Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["forEach"])(changes[row], function (value, field) {
                  if (Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["isEqual"])(value, this.state.changes[row][field])) {
                    delete this.state.changes[row][field];
                  }
                }, _this); // Clear changed data row if it's empty

                if (Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["isEmpty"])(_this.state.changes[row])) {
                  delete _this.state.changes[row];

                  if (!_this._isMainRow(row)) {
                    _this._removeRecord(row);
                  }
                }
              };

              _iterator = data[Symbol.iterator]();

            case 16:
              if (_iteratorNormalCompletion = (_step = _iterator.next()).done) {
                _context2.next = 23;
                break;
              }

              _ret = _loop();

              if (!(_ret === "continue")) {
                _context2.next = 20;
                break;
              }

              return _context2.abrupt("continue", 20);

            case 20:
              _iteratorNormalCompletion = true;
              _context2.next = 16;
              break;

            case 23:
              _context2.next = 29;
              break;

            case 25:
              _context2.prev = 25;
              _context2.t0 = _context2["catch"](13);
              _didIteratorError = true;
              _iteratorError = _context2.t0;

            case 29:
              _context2.prev = 29;
              _context2.prev = 30;

              if (!_iteratorNormalCompletion && _iterator["return"] != null) {
                _iterator["return"]();
              }

            case 32:
              _context2.prev = 32;

              if (!_didIteratorError) {
                _context2.next = 35;
                break;
              }

              throw _iteratorError;

            case 35:
              return _context2.finish(32);

            case 36:
              return _context2.finish(29);

            case 37:
              this._renderBody();

              if (this.props.onChange) {
                this.props.onChange(this.state.changes, this.state.data);
              }

              errorHandler = this.props.onError || (_context = console).error.bind(_context);
              unhandledErrors.forEach(function (error) {
                return errorHandler(error);
              });
              return _context2.abrupt("return", data);

            case 42:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee, this, [[13, 25, 29, 37], [30,, 32, 36]]);
    }));

    function save() {
      return _save.apply(this, arguments);
    }

    return save;
  }(),

  /**
   * Clear record changes
   *
   * @param {*} recordId Record ID
   */
  clearRecordChanges: function clearRecordChanges(recordId) {
    var row = this._getRowID(recordId);

    delete this.state.changes[row];
    delete this.state.warnings[row];
    delete this.state.errors[row];

    this._updateRow(row);

    if (this.props.onChange) {
      this.props.onChange(this.state.changes, this.state.data);
    }
  },

  /**
   * Clear all table changes
   */
  clearAllChanges: function clearAllChanges() {
    var i;

    for (i in this.state.data) {
      if (!this._isMainRow(i)) {
        delete this.state.data[i];
        delete this.state.recordsInfo[i];
      }
    }

    this.state.changes = {};
    this.state.statuses = {};
    this.state.warnings = {};
    this.state.errors = {};
    this.state.partialErrorChecking = this.props.partialErrorChecking;

    this._renderBody();

    if (this.props.onChange) {
      this.props.onChange(this.state.changes, this.state.data);
    }
  },

  /**
   * Reset to initial table state
   */
  reset: function reset() {
    this._setPage(0);

    if (!this._isSortingPropsMode()) {
      this._resetSorting();
    }

    this.updateTable();
  },

  /**
   * Get record changes object
   *
   * @param   {string}        row     Row ID
   * @return  {Object}
   */
  _getRecordChanges: function _getRecordChanges(row) {
    if (this.state.changes.hasOwnProperty(row)) {
      return Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["cloneDeep"])(this.state.changes[row]);
    }

    return {};
  },

  /**
   * Set record data
   *
   * @param {*}       recordId  Record ID
   * @param {Object}  data      Data
   * @private
   */
  _setRecordData: function _setRecordData(recordId, data) {
    if (!this._isRecordLoaded(recordId)) {
      return;
    } // TODO done through _dataArrayToObject


    var row = this._getRowID(recordId); // Apply and redraw all record changes


    for (var field in data) {
      this.state.data[row][field] = Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["cloneDeep"])(data[field]);

      this._renderBinds(row, field);
    }
  },

  /**
   * Table row has warning flag
   *
   * @param   {string}        row     Row ID
   * @param   {Array|string}  fields
   * @returns {boolean}
   * @private
   */
  _hasWarning: function _hasWarning(row, fields) {
    return this._checkFieldInValidation(row, fields, this.state.warnings);
  },

  /**
   * Table row has error flag
   *
   * @param   {string}        row     Row ID
   * @param   {Array|string}  fields
   * @returns {boolean}
   * @private
   */
  _hasError: function _hasError(row, fields) {
    return this._checkFieldInValidation(row, fields, this.state.errors);
  },

  /**
   * Table row has error in "validation" object
   *
   * @param   {string}        row
   * @param   {Array|string}  fields
   * @param   {Validation}    validation
   * @returns {boolean}
   * @private
   */
  _checkFieldInValidation: function _checkFieldInValidation(row, fields, validation) {
    var i;

    if (!validation[row]) {
      return false;
    }

    if (this.state.partialErrorChecking && !this.state.changes.hasOwnProperty(row)) {
      return false;
    }

    if (!Array.isArray(fields)) {
      fields = [fields];
    }

    for (i = 0; i < fields.length; i++) {
      if (validation[row].hasError(fields[i])) {
        return true;
      }
    }

    return false;
  },

  /**
   * Table row changed flag
   *
   * @param   {string}        row         Row ID
   * @param   {Array|string}  [fields]
   * @return  {boolean}
   * @private
   */
  _isChanged: function _isChanged(row, fields) {
    var i;

    if (!this.state.changes[row]) {
      return false;
    }

    if (fields) {
      if (!Array.isArray(fields)) {
        fields = [fields];
      }

      for (i = 0; i < fields.length; i++) {
        if (this.state.changes[row].hasOwnProperty(fields[i])) {
          return true;
        }
      }

      return false;
    }

    return true;
  },

  /**
   * Get table row errors object
   *
   * @param   {string} row  Row ID
   * @return  {ValidationErrors}
   * @private
   */
  _getRecordErrors: function _getRecordErrors(row) {
    return this.state.errors[row] || new _common_validation_ValidationErrors__WEBPACK_IMPORTED_MODULE_3__["default"]();
  },

  /**
   * Pass changes to the table
   * This method marks changed fields
   *
   * @param {string}      row         Row ID
   * @param {Object}      data        Changed data
   * @private
   */
  _setRowChanges: function _setRowChanges(row, data) {
    var changes = this.state.changes;

    if (!changes[row]) {
      changes[row] = {};
    }

    changes[row] = Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["getRecordChanges"])(this.props.model, this.state.data[row], changes[row], data);

    if (Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["isEmpty"])(changes[row])) {
      delete changes[row];
    }

    for (var _i = 0, _Object$keys = Object.keys(data); _i < _Object$keys.length; _i++) {
      var column = _Object$keys[_i];

      this._renderBinds(row, column);
    }

    if (this.props.onChange) {
      this.props.onChange(this.state.changes, this.state.data);
    }
  },

  /**
   * Get table record with changes
   *
   * @param {string} row Row ID
   * @returns {Object} Required table data record
   * @private
   */
  _getRecordWithChanges: function _getRecordWithChanges(row) {
    if (this.state.data[row]) {
      return Object.assign({}, this.state.data[row], this.state.changes[row]);
    }

    return null;
  },

  /**
   * Set table data
   *
   * @param {Array}  changes  Changes
   * @private
   */
  _setData: function () {
    var _setData2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()(
    /*#__PURE__*/
    _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee2(changes) {
      var _iteratorNormalCompletion2, _didIteratorError2, _iteratorError2, _iterator2, _step2, _step2$value, id, data;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee2$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              // Apply all changes
              _iteratorNormalCompletion2 = true;
              _didIteratorError2 = false;
              _iteratorError2 = undefined;
              _context3.prev = 3;
              _iterator2 = changes[Symbol.iterator]();

            case 5:
              if (_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done) {
                _context3.next = 20;
                break;
              }

              _step2$value = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_step2.value, 2), id = _step2$value[0], data = _step2$value[1];

              // Firstly we update the state
              this._setRecordData(id, data); // Then we validate the updated data in state


              _context3.prev = 8;
              _context3.next = 11;
              return this._checkWarnings(id);

            case 11:
              _context3.next = 17;
              break;

            case 13:
              _context3.prev = 13;
              _context3.t0 = _context3["catch"](8);

              if (_context3.t0 instanceof _common_ThrottleError__WEBPACK_IMPORTED_MODULE_5__["default"]) {
                _context3.next = 17;
                break;
              }

              throw _context3.t0;

            case 17:
              _iteratorNormalCompletion2 = true;
              _context3.next = 5;
              break;

            case 20:
              _context3.next = 26;
              break;

            case 22:
              _context3.prev = 22;
              _context3.t1 = _context3["catch"](3);
              _didIteratorError2 = true;
              _iteratorError2 = _context3.t1;

            case 26:
              _context3.prev = 26;
              _context3.prev = 27;

              if (!_iteratorNormalCompletion2 && _iterator2["return"] != null) {
                _iterator2["return"]();
              }

            case 29:
              _context3.prev = 29;

              if (!_didIteratorError2) {
                _context3.next = 32;
                break;
              }

              throw _iteratorError2;

            case 32:
              return _context3.finish(29);

            case 33:
              return _context3.finish(26);

            case 34:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee2, this, [[3, 22, 26, 34], [8, 13], [27,, 29, 33]]);
    }));

    function _setData(_x) {
      return _setData2.apply(this, arguments);
    }

    return _setData;
  }(),

  /**
   * Get record field title that changes column Editor
   *
   * @param       {string}        id  Column ID
   * @returns     {Array|string}     Fields that change Editor
   * @private
   */
  _getBindParam: function _getBindParam(id) {
    return this.props.cols[id].editorField || id;
  },

  /**
   * This method converts data array to the object with keys presented as record ID hash
   *
   * @param   {Array}    arr     Data array
   * @returns {Object}    Object result
   * @private
   */
  _dataArrayToObject: function _dataArrayToObject(arr) {
    var i;
    var records = {};
    var info = {};
    var row;

    for (i = 0; i < arr.length; i++) {
      row = Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["toEncodedString"])(arr[i][0]);
      records[row] = arr[i][1];
      info[row] = {
        id: arr[i][0],
        index: i // Sort index

      };
    }

    return {
      records: records,
      info: info
    };
  },

  /**
   * This method converts data object to the array with keys presented as record ID hash
   *
   * @param   {Object}  obj     Data object
   * @returns {Array}   Array result
   * @private
   */
  _dataObjectToArray: function _dataObjectToArray(obj) {
    var i;
    var arr = [];

    for (i in obj) {
      arr.push([this.state.recordsInfo[i].id, Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["clone"])(obj[i])]);
    }

    return arr;
  },

  /**
   * Is main table row flag
   *
   * @param   {string}    row     Row ID
   * @return  {boolean}
   * @private
   */
  _isMainRow: function _isMainRow(row) {
    return this.state.mainIds.indexOf(row) >= 0;
  },
  _isRecordLoaded: function _isRecordLoaded(recordId) {
    // TODO Can be optimized
    var row = Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["toEncodedString"])(recordId);
    return this.state.data.hasOwnProperty(row);
  },

  /**
   * Get table row ID having record ID
   *
   * @param   {*}       recordId    Record ID
   * @return  {string}  Row ID
   * @private
   */
  _getRowID: function _getRowID(recordId) {
    var row = Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["toEncodedString"])(recordId);

    if (!this.state.data.hasOwnProperty(row)) {
      throw Error('Record with the ID is not contained in the table.');
    }

    return row;
  },

  /**
   * Load model data
   *
   * @param {Object}      settings    Request parameters
   * @private
   */
  _loadData: function () {
    var _loadData2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()(
    /*#__PURE__*/
    _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee3(settings) {
      var data;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee3$(_context4) {
        while (1) {
          switch (_context4.prev = _context4.next) {
            case 0:
              _context4.prev = 0;
              _context4.next = 3;
              return this.props.model.read(settings);

            case 3:
              data = _context4.sent;
              _context4.next = 10;
              break;

            case 6:
              _context4.prev = 6;
              _context4.t0 = _context4["catch"](0);

              if (_context4.t0 && this.props.onError) {
                this.props.onError(_context4.t0);
              }

              throw _context4.t0;

            case 10:
              if (this.props.onPageLoad) {
                this.props.onPageLoad(data);
              }

              return _context4.abrupt("return", data);

            case 12:
            case "end":
              return _context4.stop();
          }
        }
      }, _callee3, this, [[0, 6]]);
    }));

    function _loadData(_x2) {
      return _loadData2.apply(this, arguments);
    }

    return _loadData;
  }(),

  /**
   * Find record IDs that need to be displayed additionally
   *
   * @return {Array} Additional IDs array
   * @private
   */
  _getAdditionalIds: function _getAdditionalIds() {
    var additionalIds = this._getRecordsWithStatus();

    var id;

    for (var row in this.state.changes) {
      id = this.state.recordsInfo[row].id;

      if (additionalIds.indexOf(id) < 0) {
        additionalIds.push(id);
      }
    }

    return additionalIds;
  },
  _removeRecord: function _removeRecord(rowId, cb) {
    var touchedChanges = this.state.changes[rowId];

    this._removeTR(rowId); // this.unselectRecord(recordId, true); // TODO Make unselectRecord by rowId method


    delete this.state.data[rowId];
    delete this.state.recordsInfo[rowId];
    delete this.state.changes[rowId];
    delete this.state.warnings[rowId];
    delete this.state.errors[rowId];
    delete this.state.editor[rowId];
    this.setState(this.state, cb ? cb.bind(this) : null);

    if (touchedChanges && this.props.onChange) {
      this.props.onChange(this.state.changes, this.state.data);
    }
  },
  _checkWarnings: function () {
    var _checkWarnings2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()(
    /*#__PURE__*/
    _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee4(row) {
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee4$(_context5) {
        while (1) {
          switch (_context5.prev = _context5.next) {
            case 0:
              if (this.props.warningsValidator) {
                _context5.next = 2;
                break;
              }

              return _context5.abrupt("return");

            case 2:
              return _context5.abrupt("return", this._checkValidatorErrors(row, this.props.warningsValidator, this._getRecordWithChanges, this.state.warnings));

            case 3:
            case "end":
              return _context5.stop();
          }
        }
      }, _callee4, this);
    }));

    function _checkWarnings(_x3) {
      return _checkWarnings2.apply(this, arguments);
    }

    return _checkWarnings;
  }(),
  _validateRow: function () {
    var _validateRow2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()(
    /*#__PURE__*/
    _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee5(row) {
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee5$(_context6) {
        while (1) {
          switch (_context6.prev = _context6.next) {
            case 0:
              _context6.next = 2;
              return this._checkValidatorErrors(row, this.props.model, this._getRecordChanges, this.state.errors);

            case 2:
              return _context6.abrupt("return", _context6.sent);

            case 3:
            case "end":
              return _context6.stop();
          }
        }
      }, _callee5, this);
    }));

    function _validateRow(_x4) {
      return _validateRow2.apply(this, arguments);
    }

    return _validateRow;
  }(),

  /**
   * Check errors in "validator" object
   *
   * @param {string}        row         Row ID
   * @param {Validator}     validator   Validator object
   * @param {Function}      getData     Data provider function
   * @param {{}}            result      Validation result object
   * @private
   */
  _checkValidatorErrors: function () {
    var _checkValidatorErrors2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()(
    /*#__PURE__*/
    _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee6(row, validator, getData, result) {
      var recordId, record, validErrors;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee6$(_context7) {
        while (1) {
          switch (_context7.prev = _context7.next) {
            case 0:
              recordId = this.state.recordsInfo[row].id;
              record = getData(row);
              _context7.next = 4;
              return validator.isValidRecord(record, recordId);

            case 4:
              validErrors = _context7.sent;

              if (!Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["isEqual"])(record, getData(row))) {
                _context7.next = 9;
                break;
              }

              if (validErrors.isEmpty()) {
                delete result[row];
              } else {
                result[row] = validErrors;
              }

              _context7.next = 9;
              return this._updateRow(row);

            case 9:
            case "end":
              return _context7.stop();
          }
        }
      }, _callee6, this);
    }));

    function _checkValidatorErrors(_x5, _x6, _x7, _x8) {
      return _checkValidatorErrors2.apply(this, arguments);
    }

    return _checkValidatorErrors;
  }(),

  /**
   * Handler for "create" event of GridModel
   *
   * @param {*[]|*} recordIds
   * @return {void}
   * @private
   */
  _onRecordsCreated: function _onRecordsCreated(recordIds) {
    var _this2 = this;

    if (!Array.isArray(recordIds)) {
      Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["warn"])('Not array recordsIds in "create" event is deprecated');
      recordIds = [recordIds];
    }

    this.updateTable().then(Promise.all(recordIds.map(
    /*#__PURE__*/
    function () {
      var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee7(recordId) {
        var rowId;
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee7$(_context8) {
          while (1) {
            switch (_context8.prev = _context8.next) {
              case 0:
                if (_this2._isRecordLoaded(recordId)) {
                  _context8.next = 2;
                  break;
                }

                return _context8.abrupt("return");

              case 2:
                rowId = _this2._getRowID(recordId);
                _context8.prev = 3;
                _context8.next = 6;
                return _this2._checkWarnings(rowId);

              case 6:
                _context8.next = 12;
                break;

              case 8:
                _context8.prev = 8;
                _context8.t0 = _context8["catch"](3);

                if (_context8.t0 instanceof _common_ThrottleError__WEBPACK_IMPORTED_MODULE_5__["default"]) {
                  _context8.next = 12;
                  break;
                }

                throw _context8.t0;

              case 12:
              case "end":
                return _context8.stop();
            }
          }
        }, _callee7, null, [[3, 8]]);
      }));

      return function (_x9) {
        return _ref.apply(this, arguments);
      };
    }())));
  }
};
/* harmony default export */ __webpack_exports__["default"] = (GridDataMixin);

/***/ }),

/***/ "./src/grid/mixins/editor.js":
/*!***********************************!*\
  !*** ./src/grid/mixins/editor.js ***!
  \***********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "@babel/runtime/helpers/defineProperty");
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-dom */ "react-dom");
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../common/utils */ "./src/common/utils.js");
/* harmony import */ var _common_ThrottleError__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../common/ThrottleError */ "./src/common/ThrottleError.js");




/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */
 // eslint-disable-line no-unused-vars




var findDOMNode = react_dom__WEBPACK_IMPORTED_MODULE_4___default.a.findDOMNode;
var ENTER_KEY = 13;
var ESCAPE_KEY = 27;
var GridEditorMixin = {
  /**
   * Display Editor in a table cell
   *
   * @param {HTMLElement} element     Cell DOM element
   * @param {string}      row         Row ID
   * @param {string}      column      Column ID
   * @private
   */
  _renderEditor: function _renderEditor(element, row, column) {
    var _this = this;

    var binds = this._getBindParam(column);

    var record = this._getRecordWithChanges(row);

    var value = Object(_common_utils__WEBPACK_IMPORTED_MODULE_5__["at"])(record, binds);
    var focusDone = false;

    if (!Array.isArray(binds)) {
      value = value[0];
    } // Prevent recreate of the opened Editor


    if (this._isEditorVisible(row, column)) {
      return;
    }

    var editorContext = {
      updateField: function updateField(field, nextValue) {
        var data = {};
        data[field] = nextValue;

        _this._setRowChanges(row, data);
      }
    };
    var props = {
      onChange: function onChange(values) {
        _this._onChangeEditor(row, column, values, editorContext, element);
      },
      onFocus: function onFocus() {
        _this._onFocusEditor(row, column);
      },
      onBlur: function onBlur() {
        // Remove Editor
        if (focusDone) {
          _this._unmountEditor(element, row, column);

          _this._onBlurEditor(row);
        }
      },
      onKeyUp: function onKeyUp(e) {
        if (focusDone && [ENTER_KEY, ESCAPE_KEY].includes(e.keyCode)) {
          if (e.keyCode === ESCAPE_KEY) {
            _this._setRowChanges(row, _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()({}, column, value));
          }

          _this._unmountEditor(element, row, column);

          _this._onBlurEditor(row);
        }
      },
      value: value
    };
    editorContext.props = props; // Display Editor

    var Component = this.props.cols[column].editor.call(editorContext, record, this);

    if (!Component) {
      return;
    }

    this.state.editor["".concat(row, "_").concat(column)] = react_dom__WEBPACK_IMPORTED_MODULE_4___default.a.render(Component, element, function () {
      element.classList.add('dgrid-input-wrapper');

      if (typeof this.focus === 'function') {
        this.focus();
      } else {
        findDOMNode(this).focus();
      }

      focusDone = true;
    });
  },
  _unmountEditor: function _unmountEditor(element, row, column) {
    react_dom__WEBPACK_IMPORTED_MODULE_4___default.a.unmountComponentAtNode(element);
    delete this.state.editor["".concat(row, "_").concat(column)];
    element.classList.remove('dgrid-input-wrapper');
    var selected = this.isSelected(this.state.recordsInfo[row].id);

    this._renderCell(row, column, selected);
  },
  _onChangeEditor: function _onChangeEditor(row, column, values, editorContext, element) {
    var binds = this._getBindParam(column);

    values = Object(_common_utils__WEBPACK_IMPORTED_MODULE_5__["cloneDeep"])(Object(_common_utils__WEBPACK_IMPORTED_MODULE_5__["parseValueFromEvent"])(values));

    var record = this._getRecordWithChanges(row);

    var context = Object(_common_utils__WEBPACK_IMPORTED_MODULE_5__["cloneDeep"])(editorContext);
    context.props.value = values;
    var Component = this.props.cols[column].editor.call(context, record, this);
    this.state.editor["".concat(row, "_").concat(column)] = react_dom__WEBPACK_IMPORTED_MODULE_4___default.a.render(Component, element);

    if (!Array.isArray(binds)) {
      binds = [binds];
      values = [values];
    }

    this._setRowChanges(row, Object(_common_utils__WEBPACK_IMPORTED_MODULE_5__["zipObject"])(binds, values));
  },
  _onFocusEditor: function _onFocusEditor(row, column) {
    if (!this.state.errors[row]) {
      return;
    }

    var binds = this._getBindParam(column);

    if (!Array.isArray(binds)) {
      binds = [binds];
    }

    binds.forEach(function (field) {
      this.state.errors[row].clearField(field);
    }, this);

    if (this.state.errors[row].isEmpty()) {
      delete this.state.errors[row];
    }
  },
  _onBlurEditor: function () {
    var _onBlurEditor2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()(
    /*#__PURE__*/
    _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(row) {
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return this._checkWarnings(row);

            case 3:
              _context.next = 9;
              break;

            case 5:
              _context.prev = 5;
              _context.t0 = _context["catch"](0);

              if (_context.t0 instanceof _common_ThrottleError__WEBPACK_IMPORTED_MODULE_6__["default"]) {
                _context.next = 9;
                break;
              }

              throw _context.t0;

            case 9:
              if (!(this.props.autoSubmit || this.props.realtime)) {
                _context.next = 14;
                break;
              }

              if (this.props.realtime) {
                console.warn('Deprecated: Grid prop "realtime" renamed to "autoSubmit"');
              }

              this.save(this.props.onRealtimeSubmit);
              _context.next = 23;
              break;

            case 14:
              _context.prev = 14;
              _context.next = 17;
              return this._validateRow(row);

            case 17:
              _context.next = 23;
              break;

            case 19:
              _context.prev = 19;
              _context.t1 = _context["catch"](14);

              if (_context.t1 instanceof _common_ThrottleError__WEBPACK_IMPORTED_MODULE_6__["default"]) {
                _context.next = 23;
                break;
              }

              throw _context.t1;

            case 23:
              if (this.props.onChange) {
                this.props.onChange(this.state.changes, this.state.data);
              }

            case 24:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, this, [[0, 5], [14, 19]]);
    }));

    function _onBlurEditor(_x) {
      return _onBlurEditor2.apply(this, arguments);
    }

    return _onBlurEditor;
  }(),
  _isEditorVisible: function _isEditorVisible(row, column) {
    return Boolean(this.state.editor["".concat(row, "_").concat(column)]);
  }
};
/* harmony default export */ __webpack_exports__["default"] = (GridEditorMixin);

/***/ }),

/***/ "./src/grid/mixins/pagination.js":
/*!***************************************!*\
  !*** ./src/grid/mixins/pagination.js ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */

var GridPaginationMixin = {
  /**
   * Change event handler of displayed rows count in a table
   *
   * @param {Event} event
   */
  handleChangeViewCount: function handleChangeViewCount(event) {
    var count = this.props.viewVariants[event.target.value];

    if (this._isViewCountPropsMode()) {
      this.props.onChangeViewCount(count);
      return;
    }

    this.setViewCount(count);
  },

  /**
   * Move to first page event handler
   *
   * @param {Event} event
   */
  handleFirstPage: function handleFirstPage(event) {
    event.preventDefault();
    this.setPage(0);
  },

  /**
   * Move to last page event handler
   *
   * @param {Event} event
   */
  handleLastPage: function handleLastPage(event) {
    event.preventDefault();
    this.setPage(this.getPagesCount() - 1);
  },

  /**
   * Move to previous page event handler
   *
   * @param {Event} event
   */
  handlePrevPage: function handlePrevPage(event) {
    event.preventDefault();
    this.setPage(this.state.page - 1);
  },

  /**
   * Move to next page event handler
   *
   * @param {Event} event
   */
  handleNextPage: function handleNextPage(event) {
    event.preventDefault();
    this.setPage(this.state.page + 1);
  },

  /**
   * Refresh table handler
   *
   */
  handleRefreshTable: function handleRefreshTable(event) {
    event.preventDefault();
    this.updateTable();
  },

  /**
   * Get current page index number
   *
   * @return {number}
   */
  getCurrentPage: function getCurrentPage() {
    return this.state.page;
  },
  getCountRecords: function getCountRecords() {
    return this.state.count;
  },

  /**
   * Move to other page
   *
   * @param {number}  page     Page index number
   */
  setPage: function setPage(page) {
    this._setPage(page);

    this.updateTable();
  },

  /**
   * Set displayed elements count
   *
   * @param {number} viewCount
   */
  setViewCount: function setViewCount(viewCount) {
    if (this._isViewCountPropsMode()) {
      throw Error('You can not use function "setViewCount" when set prop "viewCount"');
    }

    this.state.viewCount = viewCount;
    this.state.page = this._checkPage(this.state.page, viewCount, this.state.count);
    this.updateTable();
  },

  /**
   * Get pages count
   *
   * @return {number}
   */
  getPagesCount: function getPagesCount() {
    var viewCount = this.getViewCount();
    return viewCount ? Math.ceil(this.state.count / viewCount) : 1;
  },
  getViewCount: function getViewCount() {
    if (this._isViewCountPropsMode()) {
      return this.props.viewCount;
    }

    return this.state.viewCount;
  },
  _setPage: function _setPage(page) {
    this.state.page = this._checkPage(page, this.state.viewCount, this.state.count);
  },
  _checkPage: function _checkPage(page, view, count) {
    if (page * view >= count) {
      page = view ? Math.ceil(count / view) - 1 : 0;
    }

    return Math.max(0, page);
  },
  _isViewCountPropsMode: function _isViewCountPropsMode() {
    return this.props.hasOwnProperty('viewCount');
  },
  _renderPagination: function _renderPagination() {
    var viewCount = this.getViewCount();
    return Boolean(viewCount) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
      className: "dgrid-footer"
    }, Boolean(this.props.viewVariants) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0__["Fragment"], null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
      key: "0",
      className: "dgrid-pagination-page-size"
    }, " Page Size "), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
      key: "1",
      className: "dgrid-pagination-view-variants"
    }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("select", {
      className: "dgrid-pagination-view-variants-select",
      value: this.props.viewVariants.indexOf(viewCount),
      onChange: this.handleChangeViewCount
    }, this.props.viewVariants.map(function (option, key) {
      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("option", {
        key: key,
        value: key
      }, option);
    }, this)))), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("a", {
      href: "#",
      className: "btn-first-page",
      onClick: this.handleFirstPage
    }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("a", {
      href: "#",
      className: "btn-prev-page",
      onClick: this.handlePrevPage
    }), Boolean(this.state.count) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, this.state.page * viewCount + 1, ' - ', Math.min((this.state.page + 1) * viewCount, this.state.count), ' of ', this.state.count), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("a", {
      href: "#",
      className: "btn-next-page",
      onClick: this.handleNextPage
    }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("a", {
      href: "#",
      className: "btn-last-page",
      onClick: this.handleLastPage
    }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("a", {
      href: "#",
      className: "btn-refresh-page",
      onClick: this.handleRefreshTable
    }));
  }
};
/* harmony default export */ __webpack_exports__["default"] = (GridPaginationMixin);

/***/ }),

/***/ "./src/grid/mixins/select.js":
/*!***********************************!*\
  !*** ./src/grid/mixins/select.js ***!
  \***********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/utils */ "./src/common/utils.js");
/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */

/**
 * Grid mixin, responsible for rows Select
 */

var GridSelectMixin = {
  /**
   * Select only these records
   *
   * @param {Array}   selectedIds       Record IDs
   * @param {boolean} [blackListMode]   Is black list mode
   */
  setSelectedRecords: function setSelectedRecords(selectedIds, blackListMode) {
    this.state.selected = Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__["clone"])(selectedIds);

    if (typeof blackListMode === 'boolean') {
      this.state.selectBlackListMode = blackListMode;
    }

    this.forceUpdate();

    this._renderBody();

    this._emitChangeSelectedNum();
  },

  /**
   * Select a record
   *
   * @param {*}    recordId       Record ID
   * @param {boolean}             [ignoreBlackList=false]     Ignore BlackList mode
   */
  selectRecord: function selectRecord(recordId, ignoreBlackList) {
    var _this = this;

    var row = Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__["toEncodedString"])(recordId);

    if (this.state.selectBlackListMode && !ignoreBlackList) {
      return this.unselectRecord(recordId, true);
    }

    if (Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__["indexOf"])(this.state.selected, recordId) < 0) {
      this.state.selected.push(recordId);

      if (this.state.selected.length === this.state.count) {
        if (this.state.selectBlackListMode) {
          this.unselectAll();
        } else {
          this.selectAll();
        }

        return;
      }
    }

    this._updateRow(row).then(function () {
      _this._emitChangeSelectedNum();
    });
  },

  /**
   * Unselect record
   *
   * @param {number|string}   recordId                    Record ID
   * @param {boolean}         [ignoreBlackList=false]     Ignore BlackList mode
   */
  unselectRecord: function unselectRecord(recordId, ignoreBlackList) {
    var _this2 = this;

    var row = Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__["toEncodedString"])(recordId);

    if (this.state.selectBlackListMode && !ignoreBlackList) {
      return this.selectRecord(recordId, true);
    }

    var pos = Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__["indexOf"])(this.state.selected, recordId);

    if (pos >= 0) {
      this.state.selected.splice(pos, 1);
    }

    this._updateRow(row).then(function () {
      _this2._emitChangeSelectedNum();
    });
  },

  /**
   * Is selected row flag in accordance with
   * current select mode (whitelist/blacklist).
   *
   * @param   {number|string}     recordId    Record ID
   * @returns {boolean}           Is selected row flag
   */
  isSelected: function isSelected(recordId) {
    var selected = Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__["indexOf"])(this.state.selected, recordId) >= 0;

    if (this.state.selectBlackListMode) {
      return !selected;
    }

    return selected;
  },

  /**
   * Switch "select"
   *
   * @param {*}   recordId  Record ID
   */
  toggleSelected: function toggleSelected(recordId) {
    if (this.props.onToggleSelected) {
      return this.props.onToggleSelected(recordId);
    }

    if (this.isSelected(recordId)) {
      this.unselectRecord(recordId);
    } else {
      this.selectRecord(recordId);
    }
  },

  /**
   * Switch records selection mode
   */
  toggleSelectAll: function toggleSelectAll() {
    if (this.props.onToggleSelectAll) {
      return this.props.onToggleSelectAll();
    }

    if (this.state.selectBlackListMode) {
      this.unselectAll();
    } else {
      this.selectAll();
    }
  },

  /**
   * Select all records
   * Switches records selection mode to "blacklist"
   */
  selectAll: function selectAll() {
    this.state.selectBlackListMode = true;
    this.state.selected = [];

    this._renderBody();

    this._emitChangeSelectedNum();
  },

  /**
   * Unselect all records status
   * Switches records selection mode to "whitelist"
   */
  unselectAll: function unselectAll() {
    this.state.selectBlackListMode = false;
    this.state.selected = [];

    this._renderBody();

    this._emitChangeSelectedNum();
  },

  /**
   * Get current records selection mode
   *
   * @returns {boolean} Records selection mode. true - Blacklist; false - Whitelist
   */
  isSelectBlackMode: function isSelectBlackMode() {
    return this.state.selectBlackListMode;
  },

  /**
   * Get all selected records
   *
   * @returns {Array}   Record IDs array
   */
  getAllSelected: function getAllSelected() {
    return Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__["clone"])(this.state.selected);
  },
  getSelectAllStatus: function getSelectAllStatus() {
    return this.props.selectAllStatus;
  },

  /**
   * Trigger selected records count change handler
   *
   * @private
   */
  _emitChangeSelectedNum: function _emitChangeSelectedNum() {
    if (this.props.onSelectedChange) {
      var selectedCount = this.state.selected.length;

      if (this.state.selectBlackListMode) {
        selectedCount = this.getCountRecords() - selectedCount;
      }

      this.props.onSelectedChange(this.getAllSelected(), selectedCount);
    }
  }
};
/* harmony default export */ __webpack_exports__["default"] = (GridSelectMixin);

/***/ }),

/***/ "./src/grid/mixins/sorting.js":
/*!************************************!*\
  !*** ./src/grid/mixins/sorting.js ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/utils */ "./src/common/utils.js");
/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */

var GridSortingMixin = {
  /**
   * Sort by column
   *
   * @param {string} column
   * @param {string} direction
   */
  sort: function sort(column, direction) {
    if (this._isSortingPropsMode()) {
      throw Error('You can not use function "sort" when set prop "sort"');
    }

    var sort = {
      column: column,
      direction: direction
    };

    if (this.props.multipleSorting) {
      this.state.sort.push(sort);
    } else {
      this.state.sort = sort;
    }

    this.setPage(0);

    if (this.props.onSorting) {
      this.props.onSorting(this.state.sort, column, direction);
    }
  },

  /**
   * Get sort direction
   *
   * @return {object|object[]}
   */
  getSortDirection: function getSortDirection() {
    if (this._isSortingPropsMode()) {
      return this.props.sort;
    }

    return this.state.sort;
  },

  /**
   * Reset to default sort parameters
   */
  resetSorting: function resetSorting() {
    if (this._isSortingPropsMode()) {
      throw Error('You can not use function "resetSorting" when set prop "sort"');
    }

    this._resetSorting();

    this.forceUpdate();
  },

  /**
   * Reset to default sort parameters
   * @private
   */
  _resetSorting: function _resetSorting() {
    var sort = this._getDefaultSort();

    if (this._isSortingPropsMode()) {
      this.onSorting(sort);
      return;
    }

    this.state.sort = sort;
  },

  /**
   * Use column name for table sort
   *
   * @param {string} column  Column name
   * @private
   */
  _sortCol: function _sortCol(column) {
    var newOrder;
    var cycle = this.props.cols[column].sortCycle;
    var newSorts = Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__["clone"])(this.getSortDirection());
    var sortElement = {
      column: column
    };
    var currentSortIndex;
    var currentSort;

    if (this.props.multipleSorting) {
      // Find an element among the other sorts
      currentSortIndex = Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__["findIndex"])(newSorts, function (sort) {
        return sort.column === column;
      });

      if (currentSortIndex >= 0) {
        currentSort = newSorts[currentSortIndex]; // Determine the direction of sorting

        if (currentSortIndex < newSorts.length - 1) {
          newOrder = cycle[0];
        } else {
          // If the item is the last one, select the next direction of sorting
          newOrder = cycle[(cycle.indexOf(currentSort.direction) + 1) % cycle.length];
        }

        if (newOrder === 'default') {
          // Remove item from the sorts
          newSorts.splice(currentSortIndex, 1);
        } else if (currentSortIndex === newSorts.length - 1) {
          // Set new direction, if the last element
          currentSort.direction = newOrder;
        } else {
          // Move the item to the end, if it is already in sorts
          newSorts.splice(currentSortIndex, 1);
          sortElement.direction = newOrder;
          newSorts.push(sortElement);
        }
      } else {
        // Add new element
        sortElement.direction = newOrder = cycle[0];
        newSorts.push(sortElement);
      }
    } else {
      if (newSorts && newSorts.column === column) {
        // Select the next direction of sorting
        newOrder = cycle[(cycle.indexOf(newSorts.direction) + 1) % cycle.length];
      } else {
        newOrder = cycle[0];
      }

      if (newOrder === 'default') {
        newSorts = null;
      } else {
        sortElement.direction = newOrder;
        newSorts = sortElement;
      }
    }

    if (this.props.onSorting) {
      this.props.onSorting(newSorts, column, newOrder);
    }

    if (!this._isSortingPropsMode()) {
      this.state.sort = newSorts;
      this.setPage(0);
    }
  },

  /**
   * Get initial sort state
   *
   * @returns {Array} Initial sort state
   * @private
   */
  _getDefaultSort: function _getDefaultSort() {
    if (this.props.defaultSort) {
      return Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__["cloneDeep"])(this.props.defaultSort);
    }

    return null;
  },

  /**
   * Get current mode and column sort parameter
   *
   * @param   column                                  Column ID
   * @returns {{field: {string}, sort: {string}}|{}}  Sort parameter and mode
   * @private
   */
  _getSortParams: function _getSortParams(column) {
    var params = {
      column: column
    };
    var sorts = this.getSortDirection();
    var sortIndex;

    if (!this.props.cols[column].sortCycle) {
      return null;
    }

    if (!sorts) {
      params.direction = 'default';
      return params;
    }

    if (this.props.multipleSorting) {
      sortIndex = Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__["findIndex"])(sorts, function (sort) {
        return sort.column === params.column;
      });

      if (sortIndex < 0 || sortIndex < sorts.length - 1) {
        params.direction = 'default';
      } else {
        params.direction = sorts[sortIndex].direction;
      }

      return params;
    }

    if (sorts.column === column) {
      params.direction = sorts.direction;
    } else {
      params.direction = 'default';
    }

    return params;
  },

  /**
   * Does sorting using props
   *
   * @return {boolean}
   * @private
   */
  _isSortingPropsMode: function _isSortingPropsMode() {
    return this.props.hasOwnProperty('sort');
  },

  /**
   * Convert sorting to array
   *
   * @return {Object[]|Object} sorts
   * @private
   */
  _sortingToArray: function _sortingToArray() {
    function toArray(sort) {
      return [sort.column, sort.direction];
    }

    var direction = this.getSortDirection();

    if (!direction) {
      return null;
    }

    if (this.props.multipleSorting) {
      if (!direction.length) {
        return null;
      }

      return direction.map(toArray);
    }

    return [toArray(direction)];
  }
};
/* harmony default export */ __webpack_exports__["default"] = (GridSortingMixin);

/***/ }),

/***/ "./src/grid/mixins/statuses.js":
/*!*************************************!*\
  !*** ./src/grid/mixins/statuses.js ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/utils */ "./src/common/utils.js");
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-dom */ "react-dom");
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_1__);
/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */


/**
 * Grid mixin, responsible for row statuses processing
 */

var GridStatusesMixin = {
  /**
   * Add record status
   *
   * @param {*}    recordId    Record ID
   * @param {string}           status      Record status
   */
  addRecordStatus: function addRecordStatus(recordId, status) {
    var row = Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__["toEncodedString"])(recordId); // If list does not contain the record, mark its status as empty

    if (!this.state.statuses.hasOwnProperty(row)) {
      this.state.statuses[row] = {
        id: recordId,
        sum: 0
      };
    }

    this.state.statuses[row].sum |= this._getStatusBit(status);
    var elem = Object(react_dom__WEBPACK_IMPORTED_MODULE_1__["findDOMNode"])(this.body).querySelector("tr[key=\"".concat(row, "\"]"));

    if (elem) {
      elem.classList.add(status);
    } else {
      this.updateTable();
    }
  },

  /**
   * Add status to records group
   *
   * @param {Array}      recordIds   Record IDs array
   * @param {string}     status      Status
   */
  addRecordStatusGroup: function addRecordStatusGroup(recordIds, status) {
    var bit = this._getStatusBit(status);

    var needTableUpdate;
    var _iteratorNormalCompletion = true;
    var _didIteratorError = false;
    var _iteratorError = undefined;

    try {
      for (var _iterator = recordIds[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
        var id = _step.value;
        var row = Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__["toEncodedString"])(id);

        if (!this.state.statuses.hasOwnProperty(row)) {
          this.state.statuses[row] = {
            id: id,
            sum: 0
          };
        }

        this.state.statuses[row].sum |= bit;

        if (this.state.data[row]) {
          this._updateRow(row);

          continue;
        }

        needTableUpdate = true;
      }
    } catch (err) {
      _didIteratorError = true;
      _iteratorError = err;
    } finally {
      try {
        if (!_iteratorNormalCompletion && _iterator["return"] != null) {
          _iterator["return"]();
        }
      } finally {
        if (_didIteratorError) {
          throw _iteratorError;
        }
      }
    }

    if (needTableUpdate) {
      this.updateTable();
    }
  },

  /**
   * Remove record status
   *
   * @param {*}       recordId    Record ID
   * @param {string}  status      Record status
   */
  removeRecordStatus: function removeRecordStatus(recordId, status) {
    var bit = this._getStatusBit(status);

    var rowId = Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__["toEncodedString"])(recordId); // Cancel method execution if record has no statuses

    if (!this.state.statuses[rowId]) {
      return;
    } // Remove status if record has it


    if (this.state.statuses[rowId].sum & bit) {
      this.state.statuses[rowId].sum ^= bit;

      if (!this.state.statuses[rowId].sum) {
        // Remove table record if it's extra
        if (!this._isMainRow(rowId)) {
          this._removeRecord(rowId);
        }

        delete this.state.statuses[rowId];
      }
    } // Remove element's class


    var elem = Object(react_dom__WEBPACK_IMPORTED_MODULE_1__["findDOMNode"])(this.body).querySelector("tr[key=\"".concat(rowId, "\"]"));

    if (elem) {
      elem.classList.remove(status);
    }
  },

  /**
   * Check record status presence
   *
   * @param   {*}       recordId    Record ID
   * @param   {number}  status      Record status
   * @returns {boolean} Record has status flag
   */
  hasRecordStatus: function hasRecordStatus(recordId, status) {
    var row = Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__["toEncodedString"])(recordId);

    if (this.state.statuses[row]) {
      return (this.state.statuses[row].sum & this._getStatusBit(status)) > 0;
    }

    return false;
  },

  /**
   * Get all record IDs that have the status
   *
   * @param {number}  status  Status
   * @returns {Array} Record IDs array
   */
  getAllWithStatus: function getAllWithStatus(status) {
    var i;
    var records = [];

    var bit = this._getStatusBit(status);

    for (i in this.state.statuses) {
      if (this.state.statuses[i].sum & bit) {
        records.push(this.state.statuses[i].id);
      }
    }

    return records;
  },

  /**
   * Remove records status
   *
   * @param {string}      status  Status
   */
  removeRecordStatusAll: function removeRecordStatusAll(status) {
    var i;

    var bit = this._getStatusBit(status);

    for (i in this.state.statuses) {
      if (this.state.statuses[i].sum & bit) {
        this.state.statuses[i].sum ^= bit;
      }

      if (!this.state.statuses[i].sum) {
        if (!this._isMainRow(i) && !this._isChanged(i)) {
          this._removeRecord(i);
        }

        delete this.state.statuses[i];
      }
    }

    var elem = Object(react_dom__WEBPACK_IMPORTED_MODULE_1__["findDOMNode"])(this.body).querySelector(".dgrid-body tr.".concat(status));

    if (elem) {
      elem.classList.remove(status);
    }
  },

  /**
   * Get all status names that are applied to the row
   *
   * @param   {string}    row    Row ID
   * @return  {Array}  Status names array
   * @private
   */
  _getRowStatusNames: function _getRowStatusNames(row) {
    var names = [];
    var statuses = this.state.statuses[row] && this.state.statuses[row].sum;

    if (!statuses) {
      return [];
    }

    for (var i in this.state.statusMap) {
      if (statuses & this.state.statusMap[i]) {
        names.push(i);
      }
    }

    return names;
  },

  /**
   * Get status as a bit using its text name
   *
   * @param       {string}    statusName  Status name
   * @return      {number}    Bit
   * @private
   */
  _getStatusBit: function _getStatusBit(statusName) {
    var status;
    var offset;

    if (this.state.statusMap.hasOwnProperty(statusName)) {
      status = this.state.statusMap[statusName];
    } else {
      // TODO offset stored in the state, I remove the utils.size
      offset = Object(_common_utils__WEBPACK_IMPORTED_MODULE_0__["size"])(this.state.statusMap);

      if (offset > 30) {
        throw Error('Status quantity exceeds 30');
      }

      status = this.state.statusMap[statusName] = 1 << offset;
    }

    return status;
  },

  /**
   * Get record IDs that have a status
   *
   * @return {Array}
   * @private
   */
  _getRecordsWithStatus: function _getRecordsWithStatus() {
    var ids = [];
    var i;

    for (i in this.state.statuses) {
      ids.push(this.state.statuses[i].id);
    }

    return ids;
  }
};
/* harmony default export */ __webpack_exports__["default"] = (GridStatusesMixin);

/***/ }),

/***/ "./src/grid/mixins/ui.js":
/*!*******************************!*\
  !*** ./src/grid/mixins/ui.js ***!
  \*******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/typeof */ "@babel/runtime/helpers/typeof");
/* harmony import */ var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _common_toPromise__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/toPromise */ "./src/common/toPromise.js");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/utils */ "./src/common/utils.js");
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-dom */ "react-dom");
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _common_ThrottleError__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../common/ThrottleError */ "./src/common/ThrottleError.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! classnames */ "classnames");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_8__);




/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */






var GridUIMixin = {
  /**
   * Table content click event handler
   *
   * @param {Event} event
   */
  _handleBodyClick: function _handleBodyClick(event) {
    var target = event.target;
    var refParent = Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["parents"])(target, '[ref]')[0];
    var element;

    if (target.classList.contains('dgrid-cell')) {
      element = event.target;
    } else {
      element = Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["parents"])(target, 'td.dgrid-cell')[0];
    }

    if (element && !(refParent && refParent.hasAttribute('disabled'))) {
      this._handleCellClick(event, element, (refParent || event.target).getAttribute('ref'));
    }
  },

  /**
   * Cell click handler
   *
   * @param {Event}           event       Event object
   * @param {HTMLElement}     element     Cell DOM element
   * @param {string}          ref         Click handler name in the table configuration
   */
  _handleCellClick: function _handleCellClick(event, element, ref) {
    var colId = element.getAttribute('key');
    var row = element.parentNode.getAttribute('key');
    var columnConfig = this.props.cols[colId];
    var recordId = this.state.recordsInfo[row].id;

    var record = this._getRecordWithChanges(row); // Trigger click handler on the table configuration


    if (ref) {
      columnConfig.onClickRefs[ref](event, recordId, record, this);
    } else if (columnConfig.onClick) {
      columnConfig.onClick(event, recordId, record, this);
    } // Open cell editor


    if (this.props.cols[colId].editor) {
      this._renderEditor(element, row, colId);
    }
  },
  // TODO Deprecated
  _handleHeaderCellClick: function _handleHeaderCellClick(col, event) {
    var target = event.target;
    var refParent = Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["parents"])(target, '[ref]')[0];
    var ref = (refParent || target).getAttribute('ref');
    var handler;

    if (ref && col.onClickRefs) {
      handler = col.onClickRefs[ref];

      if (handler) {
        return handler(event, this);
      }
    }

    if (col.onClick) {
      col.onClick(event, this);
    }
  },

  /**
   * Fetch server data
   */
  updateTable: function () {
    var _updateTable = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()(
    /*#__PURE__*/
    _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee() {
      var viewCount, obj, page, data, extra, recordIds;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              this.setState({
                showLoader: true
              });

              if (this.props.model) {
                _context.next = 3;
                break;
              }

              return _context.abrupt("return");

            case 3:
              viewCount = this.getViewCount();
              _context.prev = 4;
              _context.next = 7;
              return this._loadData({
                limit: viewCount,
                offset: this.state.page * viewCount,
                sort: this._sortingToArray(),
                fields: this._getFieldsToRender(),
                extra: this._getAdditionalIds()
              });

            case 7:
              obj = _context.sent;
              _context.next = 15;
              break;

            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](4);

              if (_context.t0 instanceof _common_ThrottleError__WEBPACK_IMPORTED_MODULE_7__["default"]) {
                _context.next = 14;
                break;
              }

              throw _context.t0;

            case 14:
              return _context.abrupt("return");

            case 15:
              if (this._isMounted) {
                _context.next = 17;
                break;
              }

              return _context.abrupt("return");

            case 17:
              if (!(this.getViewCount() && !obj.hasOwnProperty('count'))) {
                _context.next = 19;
                break;
              }

              throw new Error('Incorrect response from GridModel. "response.count" not defined');

            case 19:
              // If required page is not included in the range of existing pages,
              // request existing in a moment page
              page = this._checkPage(this.state.page, this.getViewCount(), obj.count);

              if (!(page !== this.state.page)) {
                _context.next = 24;
                break;
              }

              this.state.page = page;
              this.updateTable();
              return _context.abrupt("return");

            case 24:
              data = this._dataArrayToObject(obj.records);
              extra = this._dataArrayToObject(obj.extraRecords || []);
              recordIds = Object.keys(data.records).concat(Object.keys(extra.records));
              _context.next = 29;
              return Object(_common_toPromise__WEBPACK_IMPORTED_MODULE_3__["default"])(this.setState.bind(this), true)({
                data: Object.assign({}, data.records, extra.records),
                mainIds: Object.keys(data.records),
                count: obj.count,
                totals: obj.totals,
                recordsInfo: Object.assign({}, extra.info, data.info),
                errors: Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["pick"])(this.state.errors, recordIds),
                changes: Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["pick"])(this.state.changes, recordIds),
                statuses: Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["pick"])(this.state.statuses, recordIds)
              });

            case 29:
              this._renderBody();

              this.setState({
                showLoader: false
              });

            case 31:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, this, [[4, 10]]);
    }));

    function updateTable() {
      return _updateTable.apply(this, arguments);
    }

    return updateTable;
  }(),
  _getHeaderCellHTML: function _getHeaderCellHTML(columnName) {
    var cellHtml = typeof columnName === 'function' ? columnName(this) : columnName;

    if (cellHtml === undefined) {
      return '';
    }

    return cellHtml;
  },
  _escapeRecord: function _escapeRecord(columnId, record) {
    var field;
    var type;
    var i;
    var escapedRecord = {};
    var column = this.props.cols[columnId];
    var needEscaping = !column.hasOwnProperty('escape') || column.escape;
    var fields = column.render.slice(0, -1);

    for (i = 0; i < fields.length; i++) {
      field = fields[i];
      type = _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default()(record[field]);

      if (needEscaping) {
        if (type === 'string') {
          escapedRecord[field] = Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["escape"])(record[field]);
          continue;
        }

        if (type === 'object' && record[field] && !this.state.colsWithEscapeErrors[columnId]) {
          this.state.colsWithEscapeErrors[columnId] = true;
          console.error("UIKernel.Grid warning: " + "You send record with fields of Object type in escaped column \"".concat(columnId, "\". ") + "To use Objects, set column config \"escape\" to false, " + "and escape \"".concat(columnId, "\" field in render function by yourself"));
        }
      }

      escapedRecord[field] = record[field];
    }

    return escapedRecord;
  },

  /**
   * Get table cell HTML
   *
   * @param   {number}   columnId       Column ID
   * @param   {Object}   record         Table record (initial record + changes)
   * @param   {boolean}  selected       "Selected" row status
   * @param   {Object}   initialRecord  Initial record
   * @returns {string}   Table cell HTML
   * @private
   */
  _getCellHTML: function _getCellHTML(columnId, record, selected, initialRecord) {
    var render = Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["last"])(this.props.cols[columnId].render);
    var cellHtml = render(this._escapeRecord(columnId, record), selected, this._escapeRecord(columnId, initialRecord), this);
    return "".concat(Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["isDefined"])(cellHtml) ? cellHtml : '');
  },

  /**
   * Get table row HTML
   *
   * @param       {number}    rowId         Row ID
   * @param       {string}    className   <TR> class attribute
   * @returns     {string}    Table row HTML
   * @private
   */
  _getRowHTML: function _getRowHTML(rowId, className) {
    var colId;

    var record = this._getRecordWithChanges(rowId);

    var initialRecord = this.state.data[rowId] || null;
    var selected = this.isSelected(this.state.recordsInfo[rowId].id);
    var gridRowClass = classnames__WEBPACK_IMPORTED_MODULE_8___default()(className, this._getRowStatusNames(rowId).join(' '), {
      'dgrid__row_selected': selected
    });
    var html = "<tr key=\"".concat(rowId, "\" class=\"").concat(gridRowClass, "\">");

    for (var _i = 0, _Object$keys = Object.keys(this.props.cols); _i < _Object$keys.length; _i++) {
      colId = _Object$keys[_i];

      if (this._isViewColumn(colId)) {
        var gridCellClass = classnames__WEBPACK_IMPORTED_MODULE_8___default()(this._getColumnClass(colId), {
          'dgrid-cell': true,
          'dgrid-changed': this._isChanged(rowId, this._getBindParam(colId)),
          'dgrid-error': this._hasError(rowId, this._getBindParam(colId)),
          'dgrid-warning': this._hasWarning(rowId, this._getBindParam(colId))
        });
        html += "\n          <td key=\"".concat(colId, "\" class=\"").concat(gridCellClass, "\">\n            ").concat(this._getCellHTML(colId, record, selected, initialRecord), "\n          </td>");
      }
    }

    return "".concat(html, "</tr>");
  },

  /**
   * Redraw table content totally
   *
   * @private
   */
  _renderBody: function _renderBody() {
    if (!this.state.data) {
      return;
    }

    var i;
    var row;
    var htmlExtra = '';
    var htmlBody = '';
    var sorted = Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__["pairs"])(this.state.recordsInfo).sort(function (a, b) {
      return a[1].index - b[1].index;
    });

    for (i = 0; i < sorted.length; i++) {
      row = sorted[i][0];

      if (this._isMainRow(row)) {
        htmlBody += this._getRowHTML(row);
      } else if (this._isChanged(row) || this._getRowStatusNames(row).length) {
        htmlExtra += this._getRowHTML(row, 'others');
      }
    }

    this.tBody.innerHTML = htmlExtra + htmlBody;
  },

  /**
   * Display model changes
   *
   * @param {string} row      Row ID
   * @param {string} param    Model parameter
   * @private
   */
  _renderBinds: function _renderBinds(row, param) {
    // If parameter does not affect on the redraw, do nothing
    if (!this._isFieldAffectsRender(param)) {
      return;
    }

    var selected = this.isSelected(this.state.recordsInfo[row].id); // Update column dependencies

    var _iteratorNormalCompletion = true;
    var _didIteratorError = false;
    var _iteratorError = undefined;

    try {
      for (var _iterator = this._getDependentColumns(param)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
        var column = _step.value;

        if (this._isViewColumn(column) && !this._isEditorVisible(row, column)) {
          this._renderCell(row, column, selected);
        }
      }
    } catch (err) {
      _didIteratorError = true;
      _iteratorError = err;
    } finally {
      try {
        if (!_iteratorNormalCompletion && _iterator["return"] != null) {
          _iterator["return"]();
        }
      } finally {
        if (_didIteratorError) {
          throw _iteratorError;
        }
      }
    }
  },
  _removeTR: function _removeTR(rowId) {
    Object(react_dom__WEBPACK_IMPORTED_MODULE_5__["findDOMNode"])(this.body).removeRow(rowId);
  },
  _renderTotals: function _renderTotals(isScrollable) {
    var totalsDisplayed = false;
    var i;
    var className;
    var totalsRowHTML = '';

    var header = this._formHeader(); // If data for result line display exists, form it


    if (this.state.totals) {
      for (var _i2 = 0, _Object$keys2 = Object.keys(this.props.cols); _i2 < _Object$keys2.length; _i2++) {
        i = _Object$keys2[_i2];

        if (!this._isViewColumn(i)) {
          continue;
        }

        className = this.props.cols[i].className;

        if (className) {
          totalsRowHTML += "<td class=\"".concat(className, "\">");
        } else {
          totalsRowHTML += '<td>';
        }

        if (this.state.totals.hasOwnProperty(i)) {
          totalsRowHTML += this._getCellHTML(i, this.state.totals, false, this.state.totals);
          totalsDisplayed = true;
        }

        totalsRowHTML += '</td>';
      }
    }

    if (!totalsDisplayed) {
      return null;
    }

    if (isScrollable) {
      return react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("table", {
        cellSpacing: "0",
        className: "dgrid-totals"
      }, react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("colgroup", null, header.colGroup), react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("tr", {
        dangerouslySetInnerHTML: {
          __html: totalsRowHTML
        }
      }));
    }

    return react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("tfoot", {
      className: "dgrid-totals"
    }, react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("tr", {
      dangerouslySetInnerHTML: {
        __html: totalsRowHTML
      }
    }));
  },
  _renderCell: function _renderCell(rowId, column, isSelected) {
    var _cell$classList;

    var cell = Object(react_dom__WEBPACK_IMPORTED_MODULE_5__["findDOMNode"])(this.body).querySelector("tr[key=\"".concat(rowId, "\"] td[key=").concat(column, "]"));
    var initialRecord = this.state.data[rowId] || null;

    var cellHTML = this._getCellHTML(column, this._getRecordWithChanges(rowId), isSelected, initialRecord);

    try {
      cell.innerHTML = cellHTML;
    } catch (e) {// Sometimes it is possible a situation when rerendering of the cell is called in the middle of performing of an
      // event in that cell which may cause an error like "DOMException: The node to be removed is no longer a child
      // of this node", so just ignore it
    }

    cell.classList.remove('dgrid-changed', 'dgrid-error', 'dgrid-warning');
    var cellClassList = [];

    if (this._isChanged(rowId, this._getBindParam(column))) {
      cellClassList.push('dgrid-changed');
    }

    if (this._hasError(rowId, this._getBindParam(column))) {
      cellClassList.push('dgrid-error');
    }

    if (this._hasWarning(rowId, this._getBindParam(column))) {
      cellClassList.push('dgrid-warning');
    }

    (_cell$classList = cell.classList).add.apply(_cell$classList, cellClassList);
  },
  _updateRow: function () {
    var _updateRow2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()(
    /*#__PURE__*/
    _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee2(row) {
      var selected, viewColumns, _iteratorNormalCompletion2, _didIteratorError2, _iteratorError2, _iterator2, _step2, viewColumn;

      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              if (this.state.data) {
                _context2.next = 2;
                break;
              }

              return _context2.abrupt("return");

            case 2:
              if (!this.state.data[row]) {
                _context2.next = 26;
                break;
              }

              selected = this.isSelected(this.state.recordsInfo[row].id);
              viewColumns = Object.keys(this.props.cols).filter(this._isViewColumn);
              _iteratorNormalCompletion2 = true;
              _didIteratorError2 = false;
              _iteratorError2 = undefined;
              _context2.prev = 8;

              for (_iterator2 = viewColumns[Symbol.iterator](); !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                viewColumn = _step2.value;

                if (!this._isEditorVisible(row, viewColumn)) {
                  this._renderCell(row, viewColumn, selected);
                }
              }

              _context2.next = 16;
              break;

            case 12:
              _context2.prev = 12;
              _context2.t0 = _context2["catch"](8);
              _didIteratorError2 = true;
              _iteratorError2 = _context2.t0;

            case 16:
              _context2.prev = 16;
              _context2.prev = 17;

              if (!_iteratorNormalCompletion2 && _iterator2["return"] != null) {
                _iterator2["return"]();
              }

            case 19:
              _context2.prev = 19;

              if (!_didIteratorError2) {
                _context2.next = 22;
                break;
              }

              throw _iteratorError2;

            case 22:
              return _context2.finish(19);

            case 23:
              return _context2.finish(16);

            case 24:
              _context2.next = 28;
              break;

            case 26:
              _context2.next = 28;
              return this.updateTable();

            case 28:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, this, [[8, 12, 16, 24], [17,, 19, 23]]);
    }));

    function _updateRow(_x) {
      return _updateRow2.apply(this, arguments);
    }

    return _updateRow;
  }()
};
/* harmony default export */ __webpack_exports__["default"] = (GridUIMixin);

/***/ }),

/***/ "./src/grid/models/AbstractGridModel.js":
/*!**********************************************!*\
  !*** ./src/grid/models/AbstractGridModel.js ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "@babel/runtime/helpers/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ "@babel/runtime/helpers/createClass");
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ "@babel/runtime/helpers/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ "@babel/runtime/helpers/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ "@babel/runtime/helpers/inherits");
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _common_validation_ValidationErrors__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../common/validation/ValidationErrors */ "./src/common/validation/ValidationErrors.js");
/* harmony import */ var _common_Events__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../common/Events */ "./src/common/Events.js");






/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */


/**
 * Grid model abstraction
 *
 * @constructor
 * @extends EventsModel
 */

var AbstractGridModel =
/*#__PURE__*/
function (_EventsModel) {
  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_4___default()(AbstractGridModel, _EventsModel);

  function AbstractGridModel() {
    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, AbstractGridModel);

    return _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3___default()(AbstractGridModel).call(this));
  }
  /**
   * Add a record
   *
   * @param {Object}      record  Record object
   * @abstract
   */


  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default()(AbstractGridModel, [{
    key: "create",
    value: function create()
    /*record*/
    {
      return Promise.resolve();
    }
    /**
     * Get records list
     *
     * @param {Object}      settings                Request
     * @param {Array}       settings.fields         Fields
     * @param {number}      [settings.limit]        Limit
     * @param {number}      [settings.offset]       Offset
     * @param {Object}      [settings.filters]      Filter values object
     * @param {Array}       [settings.sort]         Sort parameters
     * @param {Array}       [settings.extra]        Record IDs, we need to get for sure
     * @abstract
     */

  }, {
    key: "read",
    value: function read()
    /*settings*/
    {
      return Promise.resolve({
        records: [],
        // Primary records
        ids: [],
        // Extra records
        extraRecords: 0 // In all records count

      });
    }
    /**
     * Get the particular record
     *
     * @param {*}         id      Record ID
     * @param {Array}     fields  Required fields
     * @abstract
     */

  }, {
    key: "getRecord",
    value: function getRecord()
    /*id, fields*/
    {
      return Promise.resolve();
    }
    /**
     * Apply record changes
     *
     * @param {Array}       changes     Changes array
     * @abstract
     */

  }, {
    key: "update",
    value: function update()
    /*changes*/
    {
      return Promise.resolve([]);
    }
    /**
     * Validation check
     *
     * @param {Object}      record
     * @param {*|null}      recordId
     * @abstract
     */

  }, {
    key: "isValidRecord",
    value: function isValidRecord()
    /*record, recordId*/
    {
      return Promise.resolve(new _common_validation_ValidationErrors__WEBPACK_IMPORTED_MODULE_5__["default"]());
    }
    /**
     * Get all dependent fields, that are required for validation
     *
     * @param   {Array}  fields   Fields list
     * @returns {Array}  Dependencies
     * @abstract
     */

  }, {
    key: "getValidationDependency",
    value: function getValidationDependency() {
      return [];
    }
  }]);

  return AbstractGridModel;
}(_common_Events__WEBPACK_IMPORTED_MODULE_6__["default"]);

/* harmony default export */ __webpack_exports__["default"] = (AbstractGridModel);

/***/ }),

/***/ "./src/grid/models/GridCollectionModel.js":
/*!************************************************!*\
  !*** ./src/grid/models/GridCollectionModel.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ "@babel/runtime/helpers/toConsumableArray");
/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "@babel/runtime/helpers/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ "@babel/runtime/helpers/createClass");
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ "@babel/runtime/helpers/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ "@babel/runtime/helpers/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ "@babel/runtime/helpers/inherits");
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _common_validation_Validator__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../common/validation/Validator */ "./src/common/validation/Validator.js");
/* harmony import */ var _AbstractGridModel__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./AbstractGridModel */ "./src/grid/models/AbstractGridModel.js");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../common/utils */ "./src/common/utils.js");










/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */




var GridCollectionModel =
/*#__PURE__*/
function (_AbstractGridModel) {
  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_8___default()(GridCollectionModel, _AbstractGridModel);

  /**
   * Specifies a grid model that will work with array data passed to it as a parameter.
   *
   * @param {Object}    [options]
   * @param {Object[]}  [options.data]              Data array
   * @param {Function}  [options.filtersHandler]
   * @param {Validator} [options.validator]
   * @param {string[]}  [options.requiredFields]
   * @param {bool}      [options.validateOnCreate]
   * @constructor
   */
  function GridCollectionModel() {
    var _this;

    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4___default()(this, GridCollectionModel);

    _this = _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default()(GridCollectionModel).call(this));
    _this._data = Object(_common_utils__WEBPACK_IMPORTED_MODULE_11__["cloneDeep"])(options.data) || [];
    _this._id = 1;
    _this._filtersHandler = options.filtersHandler;

    if (options.validation) {
      Object(_common_utils__WEBPACK_IMPORTED_MODULE_11__["warn"])('Property "validation" is deprecated, use "validator" instead');
    }

    _this._validator = options.validator || options.validation || new _common_validation_Validator__WEBPACK_IMPORTED_MODULE_9__["default"]();
    _this._requiredFields = options.requiredFields || [];
    return _this;
  }
  /**
   * Set data array in model
   *
   * @param {Object[]} data
   */


  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5___default()(GridCollectionModel, [{
    key: "setData",
    value: function setData(data) {
      var currentData = this._data.reduce(function (result, _ref) {
        var _ref2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(_ref, 2),
            recordId = _ref2[0],
            record = _ref2[1];

        result[JSON.stringify(recordId)] = record;
        return result;
      }, {});

      var createdRecordsIds = [];
      var updatedRecords = [];
      var recordIds = [];
      var _iteratorNormalCompletion = true;
      var _didIteratorError = false;
      var _iteratorError = undefined;

      try {
        for (var _iterator = data[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
          var _step$value = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(_step.value, 2),
              recordId = _step$value[0],
              record = _step$value[1];

          var id = JSON.stringify(recordId);
          recordIds.push(id);

          if (!currentData[id]) {
            createdRecordsIds.push(recordId);
            continue;
          }

          if (!Object(_common_utils__WEBPACK_IMPORTED_MODULE_11__["isEqual"])(record, currentData[id])) {
            updatedRecords.push(record);
          }
        }
      } catch (err) {
        _didIteratorError = true;
        _iteratorError = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion && _iterator["return"] != null) {
            _iterator["return"]();
          }
        } finally {
          if (_didIteratorError) {
            throw _iteratorError;
          }
        }
      }

      var deletedRecordsIds = Object(_common_utils__WEBPACK_IMPORTED_MODULE_11__["without"])(Object.keys(currentData), recordIds).map(JSON.parse);
      this._data = Object(_common_utils__WEBPACK_IMPORTED_MODULE_11__["cloneDeep"])(data);

      if (createdRecordsIds.length) {
        this.trigger('create', [createdRecordsIds]);
      }

      if (deletedRecordsIds.length) {
        this.trigger('delete', deletedRecordsIds);
      }

      if (updatedRecords.length) {
        this.trigger('update', updatedRecords);
      }
    }
  }, {
    key: "getData",
    value: function getData() {
      return this._data;
    }
    /**
     * Remove field by record id from data
     *
     * @param   {Number}  recordId   record id for remove
     * @returns {Number}  recordId   return id of deleted record
     */

  }, {
    key: "delete",
    value: function () {
      var _delete2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee(recordId) {
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                this._data = this._data.filter(function (record) {
                  return record[0] !== recordId;
                });
                this.trigger('delete', recordId);
                return _context.abrupt("return", recordId);

              case 3:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function _delete(_x) {
        return _delete2.apply(this, arguments);
      }

      return _delete;
    }()
    /**
     * Add a record to local collection
     *
     * @param {Object}      record  Record object
     */

  }, {
    key: "create",
    value: function () {
      var _create2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee2(record) {
        var id, clonedRecord, _iteratorNormalCompletion2, _didIteratorError2, _iteratorError2, _iterator2, _step2, field, validationErrors;

        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                id = this._getID();
                clonedRecord = Object(_common_utils__WEBPACK_IMPORTED_MODULE_11__["clone"])(record); // Create record with definite id

                if (Array.isArray(clonedRecord) && clonedRecord.length === 2) {
                  id = clonedRecord[0];
                  clonedRecord = clonedRecord[1];
                }

                _iteratorNormalCompletion2 = true;
                _didIteratorError2 = false;
                _iteratorError2 = undefined;
                _context2.prev = 6;

                for (_iterator2 = this._requiredFields[Symbol.iterator](); !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                  field = _step2.value;

                  if (!clonedRecord.hasOwnProperty(field)) {
                    clonedRecord[field] = null;
                  }
                }

                _context2.next = 14;
                break;

              case 10:
                _context2.prev = 10;
                _context2.t0 = _context2["catch"](6);
                _didIteratorError2 = true;
                _iteratorError2 = _context2.t0;

              case 14:
                _context2.prev = 14;
                _context2.prev = 15;

                if (!_iteratorNormalCompletion2 && _iterator2["return"] != null) {
                  _iterator2["return"]();
                }

              case 17:
                _context2.prev = 17;

                if (!_didIteratorError2) {
                  _context2.next = 20;
                  break;
                }

                throw _iteratorError2;

              case 20:
                return _context2.finish(17);

              case 21:
                return _context2.finish(14);

              case 22:
                _context2.next = 24;
                return this.isValidRecord(clonedRecord);

              case 24:
                validationErrors = _context2.sent;

                if (validationErrors.isEmpty()) {
                  _context2.next = 27;
                  break;
                }

                throw validationErrors;

              case 27:
                return _context2.abrupt("return", this._create(clonedRecord, id));

              case 28:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this, [[6, 10, 14, 22], [15,, 17, 21]]);
      }));

      function create(_x2) {
        return _create2.apply(this, arguments);
      }

      return create;
    }()
    /**
     * Get records list
     *
     * @param {Object}      settings                Request
     * @param {string[]}    settings.fields         Fields
     * @param {number}      [settings.limit]        Limit
     * @param {number}      [settings.offset=0]     Offset
     * @param {Object}      [settings.filters]      Filter values object
     * @param {Array}       [settings.sort]         Sort parameters
     * @param {Array}       [settings.ids]          Record IDs, we need to get for sure
     */

  }, {
    key: "read",
    value: function read(settings) {
      var data = Object(_common_utils__WEBPACK_IMPORTED_MODULE_11__["cloneDeep"])(this._data);
      var result = {}; // Get extra records

      if (settings.extra && settings.extra.length > 0) {
        result.extraRecords = data.filter(function (record) {
          return settings.extra.indexOf(record[0]) >= 0;
        });
      } // Delete unnecessary fields


      if (settings.fields) {
        Object(_common_utils__WEBPACK_IMPORTED_MODULE_11__["forEach"])(result.extraRecords, function (record) {
          Object(_common_utils__WEBPACK_IMPORTED_MODULE_11__["forEach"])(record[1], function (value, key) {
            if (settings.fields.indexOf(key) === -1) {
              delete record[1][key];
            }
          });
        });
      } // Sorting


      if (settings.sort && settings.sort.length > 0) {
        var sortField = settings.sort[0][0];
        var sortMode = settings.sort[0][1];
        data = data.sort(function (prev, next) {
          if (prev[1][sortField] < next[1][sortField]) {
            return sortMode === 'asc' ? -1 : 1;
          } else if (prev[1][sortField] > next[1][sortField]) {
            return sortMode === 'asc' ? 1 : -1;
          } else {
            return 0;
          }
        });
      } // Apply filters


      if (this._filtersHandler && settings.filters) {
        data = Object(_common_utils__WEBPACK_IMPORTED_MODULE_11__["cloneDeep"])(this._filtersHandler(data, settings.filters));
      }

      result.count = data.length; // Offset and limit

      if (settings.offset || settings.limit) {
        var start = settings.offset || 0;
        var end = settings.offset + settings.limit || data.length;
        data = data.slice(start, end);
      } // Delete unnecessary fields


      if (settings.fields) {
        Object(_common_utils__WEBPACK_IMPORTED_MODULE_11__["forEach"])(data, function (record) {
          Object(_common_utils__WEBPACK_IMPORTED_MODULE_11__["forEach"])(record[1], function (value, key) {
            if (settings.fields.indexOf(key) === -1) {
              delete record[1][key];
            }
          });
        });
      }

      result.records = data;
      return Promise.resolve(result);
    }
    /**
     * Get the particular record
     *
     * @param {number|string}   id      Record ID
     * @param {Array}           fields  Required fields
     */

  }, {
    key: "getRecord",
    value: function getRecord(id, fields) {
      var record = Object(_common_utils__WEBPACK_IMPORTED_MODULE_11__["cloneDeep"])(this._getRecordByID(id));

      if (!record) {
        return Promise.reject(new Error('Record not found.'));
      }

      var returnRecord = record[1]; // Deleting unused fields

      if (fields) {
        Object(_common_utils__WEBPACK_IMPORTED_MODULE_11__["forEach"])(returnRecord, function (value, key) {
          if (fields.indexOf(key) === -1) {
            delete returnRecord[key];
          }
        });
      }

      return Promise.resolve(returnRecord);
    }
    /**
     * Apply record changes
     *
     * @param {Array}       changes     Changes array
     * @abstract
     */

  }, {
    key: "update",
    value: function () {
      var _update = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee4(changes) {
        var _this2 = this;

        var appliedChanges, result, _i, _appliedChanges, _appliedChanges$_i, recordId, _changes;

        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee4$(_context4) {
          while (1) {
            switch (_context4.prev = _context4.next) {
              case 0:
                if (changes.length) {
                  _context4.next = 2;
                  break;
                }

                return _context4.abrupt("return", []);

              case 2:
                appliedChanges = [];
                _context4.next = 5;
                return Promise.all(changes.map(
                /*#__PURE__*/
                function () {
                  var _ref4 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()(
                  /*#__PURE__*/
                  _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee3(_ref3) {
                    var _ref5, recordId, changes, validErrors;

                    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee3$(_context3) {
                      while (1) {
                        switch (_context3.prev = _context3.next) {
                          case 0:
                            _ref5 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(_ref3, 2), recordId = _ref5[0], changes = _ref5[1];
                            _context3.next = 3;
                            return _this2.isValidRecord(changes);

                          case 3:
                            validErrors = _context3.sent;

                            if (validErrors.isEmpty()) {
                              _context3.next = 6;
                              break;
                            }

                            return _context3.abrupt("return", [recordId, validErrors]);

                          case 6:
                            appliedChanges.push([recordId, changes]);
                            return _context3.abrupt("return", [recordId, changes]);

                          case 8:
                          case "end":
                            return _context3.stop();
                        }
                      }
                    }, _callee3);
                  }));

                  return function (_x4) {
                    return _ref4.apply(this, arguments);
                  };
                }()));

              case 5:
                result = _context4.sent;

                if (appliedChanges.length) {
                  // Apply changes
                  for (_i = 0, _appliedChanges = appliedChanges; _i < _appliedChanges.length; _i++) {
                    _appliedChanges$_i = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(_appliedChanges[_i], 2), recordId = _appliedChanges$_i[0], _changes = _appliedChanges$_i[1];
                    Object.assign(this._getRecordByID(recordId)[1], _changes);
                  }

                  this.trigger('update', appliedChanges);
                }

                return _context4.abrupt("return", result);

              case 8:
              case "end":
                return _context4.stop();
            }
          }
        }, _callee4, this);
      }));

      function update(_x3) {
        return _update.apply(this, arguments);
      }

      return update;
    }()
    /**
     * Validation check
     *
     * @param {Object}      record
     */

  }, {
    key: "isValidRecord",
    value: function isValidRecord(record) {
      return this._validator.isValidRecord(record);
    }
    /**
     * Get all dependent fields, that are required for validation
     *
     * @param   {Array}  fields   Fields list
     * @returns {Array}  Dependencies
     */

  }, {
    key: "getValidationDependency",
    value: function getValidationDependency(fields) {
      return this._validator.getValidationDependency(fields);
    }
  }, {
    key: "_getID",
    value: function _getID() {
      while (this._getRecordByID(this._id)) {
        this._id++;
      }

      return this._id++;
    }
  }, {
    key: "_getRecordByID",
    value: function _getRecordByID(id) {
      return Object(_common_utils__WEBPACK_IMPORTED_MODULE_11__["find"])(this._data, function (record) {
        return record[0] === id;
      });
    }
  }, {
    key: "_create",
    value: function _create(record, id) {
      this._data = [].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(this._data), [[id, record]]);
      this.trigger('create', [id]);
      return id;
    }
  }]);

  return GridCollectionModel;
}(_AbstractGridModel__WEBPACK_IMPORTED_MODULE_10__["default"]);

/* harmony default export */ __webpack_exports__["default"] = (GridCollectionModel);

/***/ }),

/***/ "./src/grid/models/GridExpressApi.js":
/*!*******************************************!*\
  !*** ./src/grid/models/GridExpressApi.js ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/objectSpread */ "@babel/runtime/helpers/objectSpread");
/* harmony import */ var _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ "@babel/runtime/helpers/toConsumableArray");
/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "@babel/runtime/helpers/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ "@babel/runtime/helpers/createClass");
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! express */ "express");
/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(express__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _common_validation_ValidationErrors__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../common/validation/ValidationErrors */ "./src/common/validation/ValidationErrors.js");
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../common/utils */ "./src/common/utils.js");
/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! multer */ "multer");
/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(multer__WEBPACK_IMPORTED_MODULE_10__);








/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */




var DEFAULT_MAX_FILE_SIZE = 104857600; // 100 MB

/**
 * Form Express API for Grid model interaction
 *
 * @return {GridExpressApi}
 * @constructor
 */

var GridExpressApi =
/*#__PURE__*/
function () {
  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_6___default()(GridExpressApi, null, [{
    key: "create",
    value: function create(multipartFormData, maxFileSize) {
      return new GridExpressApi(multipartFormData, maxFileSize);
    }
  }]);

  function GridExpressApi() {
    var _this = this;

    var multipartFormData = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
    var maxFileSize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_MAX_FILE_SIZE;

    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_5___default()(this, GridExpressApi);

    var upload = multer__WEBPACK_IMPORTED_MODULE_10___default()({
      limits: {
        fileSize: maxFileSize
      }
    });
    this.middlewares = {
      readGet: [Object(_common_utils__WEBPACK_IMPORTED_MODULE_9__["asyncHandler"])(
      /*#__PURE__*/
      function () {
        var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()(
        /*#__PURE__*/
        _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.mark(function _callee(req, res, next) {
          var settings;
          return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.wrap(function _callee$(_context) {
            while (1) {
              switch (_context.prev = _context.next) {
                case 0:
                  settings = {};

                  if (req.query.limit) {
                    settings.limit = parseInt(req.query.limit);
                  }

                  if (req.query.offset) {
                    settings.offset = parseInt(req.query.offset);
                  }

                  if (req.query.sort) {
                    settings.sort = JSON.parse(req.query.sort);
                  }

                  if (req.query.fields) {
                    settings.fields = JSON.parse(req.query.fields);
                  }

                  if (req.query.extra) {
                    settings.extra = JSON.parse(req.query.extra);
                  }

                  if (req.query.filters) {
                    settings.filters = JSON.parse(req.query.filters);
                  }

                  _context.next = 9;
                  return _this._commonReadMiddleware(req, res, next, settings);

                case 9:
                case "end":
                  return _context.stop();
              }
            }
          }, _callee);
        }));

        return function (_x, _x2, _x3) {
          return _ref.apply(this, arguments);
        };
      }())],
      readPost: [Object(_common_utils__WEBPACK_IMPORTED_MODULE_9__["asyncHandler"])(
      /*#__PURE__*/
      function () {
        var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()(
        /*#__PURE__*/
        _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.mark(function _callee2(req, res, next) {
          var settings;
          return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.wrap(function _callee2$(_context2) {
            while (1) {
              switch (_context2.prev = _context2.next) {
                case 0:
                  settings = {};

                  if (req.body.limit) {
                    settings.limit = parseInt(req.body.limit);
                  }

                  if (req.body.offset) {
                    settings.offset = parseInt(req.body.offset);
                  }

                  if (req.body.sort) {
                    settings.sort = req.body.sort;
                  }

                  if (req.body.fields) {
                    settings.fields = req.body.fields;
                  }

                  if (req.body.extra) {
                    settings.extra = req.body.extra;
                  }

                  if (req.body.filters) {
                    settings.filters = req.body.filters;
                  }

                  _context2.next = 9;
                  return _this._commonReadMiddleware(req, res, next, settings);

                case 9:
                case "end":
                  return _context2.stop();
              }
            }
          }, _callee2);
        }));

        return function (_x4, _x5, _x6) {
          return _ref2.apply(this, arguments);
        };
      }())],
      validate: [Object(_common_utils__WEBPACK_IMPORTED_MODULE_9__["asyncHandler"])(
      /*#__PURE__*/
      function () {
        var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()(
        /*#__PURE__*/
        _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.mark(function _callee3(req, res, next) {
          var model, result, errors;
          return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.wrap(function _callee3$(_context3) {
            while (1) {
              switch (_context3.prev = _context3.next) {
                case 0:
                  model = _this._getModel(req, res);
                  result = _this._result('validate');
                  _context3.prev = 2;
                  _context3.next = 5;
                  return model.isValidRecord(req.body.record, req.body.id);

                case 5:
                  errors = _context3.sent;
                  result(null, errors, req, res, next);
                  _context3.next = 12;
                  break;

                case 9:
                  _context3.prev = 9;
                  _context3.t0 = _context3["catch"](2);
                  result(_context3.t0, null, req, res, next);

                case 12:
                case "end":
                  return _context3.stop();
              }
            }
          }, _callee3, null, [[2, 9]]);
        }));

        return function (_x7, _x8, _x9) {
          return _ref3.apply(this, arguments);
        };
      }())],
      getRecord: [Object(_common_utils__WEBPACK_IMPORTED_MODULE_9__["asyncHandler"])(
      /*#__PURE__*/
      function () {
        var _ref4 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()(
        /*#__PURE__*/
        _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.mark(function _callee4(req, res, next) {
          var cols, recordId, model, result, response;
          return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.wrap(function _callee4$(_context4) {
            while (1) {
              switch (_context4.prev = _context4.next) {
                case 0:
                  cols = req.query.cols ? JSON.parse(req.query.cols) : null;
                  recordId = req.params.recordId ? JSON.parse(req.params.recordId) : null;
                  model = _this._getModel(req, res);
                  result = _this._result('getRecord');
                  _context4.prev = 4;
                  _context4.next = 7;
                  return model.getRecord(recordId, cols);

                case 7:
                  response = _context4.sent;
                  result(null, response, req, res, next);
                  _context4.next = 14;
                  break;

                case 11:
                  _context4.prev = 11;
                  _context4.t0 = _context4["catch"](4);
                  result(_context4.t0, null, req, res, next);

                case 14:
                case "end":
                  return _context4.stop();
              }
            }
          }, _callee4, null, [[4, 11]]);
        }));

        return function (_x10, _x11, _x12) {
          return _ref4.apply(this, arguments);
        };
      }())],
      update: [].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2___default()(multipartFormData ? [upload.any()] : []), [Object(_common_utils__WEBPACK_IMPORTED_MODULE_9__["asyncHandler"])(
      /*#__PURE__*/
      function () {
        var _ref5 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()(
        /*#__PURE__*/
        _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.mark(function _callee5(req, res, next) {
          var model, result, body, filesByRecordId, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, _step$value, fieldname, buffer, _parseJson, recordId, field, data;

          return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.wrap(function _callee5$(_context5) {
            while (1) {
              switch (_context5.prev = _context5.next) {
                case 0:
                  model = _this._getModel(req, res);
                  result = _this._result('update');
                  body = req.body;

                  if (!multipartFormData) {
                    _context5.next = 25;
                    break;
                  }

                  filesByRecordId = {};
                  _iteratorNormalCompletion = true;
                  _didIteratorError = false;
                  _iteratorError = undefined;
                  _context5.prev = 8;

                  for (_iterator = req.files[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                    _step$value = _step.value, fieldname = _step$value.fieldname, buffer = _step$value.buffer;
                    _parseJson = Object(_common_utils__WEBPACK_IMPORTED_MODULE_9__["parseJson"])(decodeURI(fieldname), 'Incorrect name for field containing file data'), recordId = _parseJson.recordId, field = _parseJson.field;

                    if (!filesByRecordId[recordId]) {
                      filesByRecordId[recordId] = {};
                    }

                    filesByRecordId[recordId][field] = buffer;
                  }

                  _context5.next = 16;
                  break;

                case 12:
                  _context5.prev = 12;
                  _context5.t0 = _context5["catch"](8);
                  _didIteratorError = true;
                  _iteratorError = _context5.t0;

                case 16:
                  _context5.prev = 16;
                  _context5.prev = 17;

                  if (!_iteratorNormalCompletion && _iterator["return"] != null) {
                    _iterator["return"]();
                  }

                case 19:
                  _context5.prev = 19;

                  if (!_didIteratorError) {
                    _context5.next = 22;
                    break;
                  }

                  throw _iteratorError;

                case 22:
                  return _context5.finish(19);

                case 23:
                  return _context5.finish(16);

                case 24:
                  body = Object(_common_utils__WEBPACK_IMPORTED_MODULE_9__["parseJson"])(body.rest, 'Incorrect "rest" json').map(function (_ref6) {
                    var _ref7 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_ref6, 2),
                        recordId = _ref7[0],
                        record = _ref7[1];

                    return [recordId, _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_0___default()({}, record, filesByRecordId[recordId])];
                  });

                case 25:
                  _context5.prev = 25;
                  _context5.next = 28;
                  return model.update(body);

                case 28:
                  data = _context5.sent;
                  result(null, data, req, res, next);
                  _context5.next = 35;
                  break;

                case 32:
                  _context5.prev = 32;
                  _context5.t1 = _context5["catch"](25);
                  result(_context5.t1, null, req, res, next);

                case 35:
                case "end":
                  return _context5.stop();
              }
            }
          }, _callee5, null, [[8, 12, 16, 24], [17,, 19, 23], [25, 32]]);
        }));

        return function (_x13, _x14, _x15) {
          return _ref5.apply(this, arguments);
        };
      }())]),
      create: [].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2___default()(multipartFormData ? [upload.any()] : []), [Object(_common_utils__WEBPACK_IMPORTED_MODULE_9__["asyncHandler"])(
      /*#__PURE__*/
      function () {
        var _ref8 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()(
        /*#__PURE__*/
        _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.mark(function _callee6(req, res, next) {
          var model, result, body, _iteratorNormalCompletion2, _didIteratorError2, _iteratorError2, _iterator2, _step2, _step2$value, fieldname, buffer, data;

          return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.wrap(function _callee6$(_context6) {
            while (1) {
              switch (_context6.prev = _context6.next) {
                case 0:
                  model = _this._getModel(req, res);
                  result = _this._result('create');
                  body = req.body;

                  if (!multipartFormData) {
                    _context6.next = 24;
                    break;
                  }

                  body = Object(_common_utils__WEBPACK_IMPORTED_MODULE_9__["parseJson"])(body.rest);
                  _iteratorNormalCompletion2 = true;
                  _didIteratorError2 = false;
                  _iteratorError2 = undefined;
                  _context6.prev = 8;

                  for (_iterator2 = req.files[Symbol.iterator](); !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                    _step2$value = _step2.value, fieldname = _step2$value.fieldname, buffer = _step2$value.buffer;
                    body[JSON.parse(decodeURI(fieldname))] = buffer;
                  }

                  _context6.next = 16;
                  break;

                case 12:
                  _context6.prev = 12;
                  _context6.t0 = _context6["catch"](8);
                  _didIteratorError2 = true;
                  _iteratorError2 = _context6.t0;

                case 16:
                  _context6.prev = 16;
                  _context6.prev = 17;

                  if (!_iteratorNormalCompletion2 && _iterator2["return"] != null) {
                    _iterator2["return"]();
                  }

                case 19:
                  _context6.prev = 19;

                  if (!_didIteratorError2) {
                    _context6.next = 22;
                    break;
                  }

                  throw _iteratorError2;

                case 22:
                  return _context6.finish(19);

                case 23:
                  return _context6.finish(16);

                case 24:
                  _context6.prev = 24;
                  _context6.next = 27;
                  return model.create(body);

                case 27:
                  data = _context6.sent;
                  result(null, data, req, res, next);
                  _context6.next = 34;
                  break;

                case 31:
                  _context6.prev = 31;
                  _context6.t1 = _context6["catch"](24);
                  result(_context6.t1, null, req, res, next);

                case 34:
                case "end":
                  return _context6.stop();
              }
            }
          }, _callee6, null, [[8, 12, 16, 24], [17,, 19, 23], [24, 31]]);
        }));

        return function (_x16, _x17, _x18) {
          return _ref8.apply(this, arguments);
        };
      }())])
    };
  }
  /**
   * Specify Grid model
   *
   * @param   {Function|AbstractGridModel}  model   Grid model
   * @return  {GridExpressApi}
   */


  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_6___default()(GridExpressApi, [{
    key: "model",
    value: function model(_model) {
      if (typeof _model === 'function') {
        this._getModel = _model;
      } else {
        this._getModel = function () {
          return _model;
        };
      }

      return this;
    }
  }, {
    key: "getRouter",
    value: function getRouter() {
      var _this2 = this;

      return new express__WEBPACK_IMPORTED_MODULE_7___default.a.Router().get('/', this.middlewares.readGet).post('/read', this.middlewares.readPost).post('/validation', this.middlewares.validate).get('/:recordId', this.middlewares.getRecord).put('/', this.middlewares.update).post('/', this.middlewares.create).use(function (err, req, res, next) {
        _this2._result()(err, null, req, res, next);
      });
    }
  }, {
    key: "read",
    value: function read(middlewares) {
      this._addMidelwares('readGet', middlewares);

      this._addMidelwares('readPost', middlewares);

      return this;
    }
  }, {
    key: "validate",
    value: function validate(middlewares) {
      return this._addMidelwares('validate', middlewares);
    }
  }, {
    key: "getRecord",
    value: function getRecord(middlewares) {
      return this._addMidelwares('getRecord', middlewares);
    }
  }, {
    key: "update",
    value: function update(middlewares) {
      return this._addMidelwares('update', middlewares);
    }
  }, {
    key: "create",
    value: function create(middlewares) {
      return this._addMidelwares('create', middlewares);
    }
  }, {
    key: "_addMidelwares",
    value: function _addMidelwares(method, middlewares) {
      if (!Array.isArray(middlewares)) {
        middlewares = [middlewares];
      }

      this.middlewares[method] = middlewares.concat(this.middlewares[method]);
      return this;
    } // Default implementation

  }, {
    key: "_getModel",
    value: function _getModel() {
      throw new Error('Model is not defined.');
    }
  }, {
    key: "_result",
    value: function _result(method) {
      if (method === 'update') {
        return function (err, data, req, res, next) {
          if (err) {
            return send(err, null, req, res, next);
          }

          data = data.reduce(function (result, record) {
            if (!record) {
              return result;
            }

            if (record[1] instanceof Error) {
              result.errors.push(record);
            } else if (record[1] instanceof _common_validation_ValidationErrors__WEBPACK_IMPORTED_MODULE_8__["default"]) {
              result.validation.push(record);
            } else {
              result.changes.push(record);
            }

            return result;
          }, {
            changes: [],
            errors: [],
            validation: []
          });
          send(null, data, req, res, next);
        };
      }

      if (method === 'create') {
        return function (err, data, req, res, next) {
          if (err) {
            if (!(err instanceof _common_validation_ValidationErrors__WEBPACK_IMPORTED_MODULE_8__["default"])) {
              return send(err, null, req, res, next);
            }

            return send(null, {
              data: null,
              error: err
            }, req, res, next);
          }

          return send(null, {
            data: data,
            error: null
          }, req, res, next);
        };
      }

      return send;

      function send(err, data, req, res, next) {
        if (err) {
          next(err);
        } else {
          res.json(data);
        }
      }
    }
  }, {
    key: "_commonReadMiddleware",
    value: function () {
      var _commonReadMiddleware2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.mark(function _callee7(req, res, next, settings) {
        var model, result, response;
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.wrap(function _callee7$(_context7) {
          while (1) {
            switch (_context7.prev = _context7.next) {
              case 0:
                model = this._getModel(req, res);
                result = this._result('read');
                _context7.prev = 2;
                _context7.next = 5;
                return model.read(settings);

              case 5:
                response = _context7.sent;
                result(null, response, req, res, next);
                _context7.next = 12;
                break;

              case 9:
                _context7.prev = 9;
                _context7.t0 = _context7["catch"](2);
                result(_context7.t0, null, req, res, next);

              case 12:
              case "end":
                return _context7.stop();
            }
          }
        }, _callee7, this, [[2, 9]]);
      }));

      function _commonReadMiddleware(_x19, _x20, _x21, _x22) {
        return _commonReadMiddleware2.apply(this, arguments);
      }

      return _commonReadMiddleware;
    }()
  }]);

  return GridExpressApi;
}();

/* harmony default export */ __webpack_exports__["default"] = (GridExpressApi);

/***/ }),

/***/ "./src/grid/models/GridXhrModel.js":
/*!*****************************************!*\
  !*** ./src/grid/models/GridXhrModel.js ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ "@babel/runtime/helpers/toConsumableArray");
/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "@babel/runtime/helpers/defineProperty");
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/objectSpread */ "@babel/runtime/helpers/objectSpread");
/* harmony import */ var _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "@babel/runtime/helpers/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "@babel/runtime/helpers/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ "@babel/runtime/helpers/createClass");
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ "@babel/runtime/helpers/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ "@babel/runtime/helpers/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ "@babel/runtime/helpers/inherits");
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _common_validation_ValidationErrors__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../common/validation/ValidationErrors */ "./src/common/validation/ValidationErrors.js");
/* harmony import */ var _common_validation_Validator__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../common/validation/Validator */ "./src/common/validation/Validator.js");
/* harmony import */ var _common_defaultXhr__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../common/defaultXhr */ "./src/common/defaultXhr.js");
/* harmony import */ var _AbstractGridModel__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./AbstractGridModel */ "./src/grid/models/AbstractGridModel.js");
/* harmony import */ var url__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! url */ "url");
/* harmony import */ var url__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(url__WEBPACK_IMPORTED_MODULE_15__);












/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */





var MAX_URI_LENGTH = 2048;
/**
 * Grid model, that works with API via XHR
 *
 * @param {Object}    settings                                 Model settings
 * @param {string}    settings.api                             API address
 * @param {Validator} [settings.validator]                     General validator
 * @param {Function}  [settings.xhr]                           XHR interface
 * @param {boolean}   [settings.validateOnClient=false]        Don't send validation request to server
 * @param {boolean}   [settings.multipartFormData=false] Send form data with enctype='multipart/form-data'
 * @constructor
 */

var GridXhrModel =
/*#__PURE__*/
function (_AbstractGridModel) {
  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_10___default()(GridXhrModel, _AbstractGridModel);

  function GridXhrModel(_ref) {
    var _this;

    var api = _ref.api,
        validator = _ref.validator,
        xhr = _ref.xhr,
        validateOnClient = _ref.validateOnClient,
        multipartFormData = _ref.multipartFormData;

    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_6___default()(this, GridXhrModel);

    _this = _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_8___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_9___default()(GridXhrModel).call(this));

    if (!api) {
      throw new Error('Initialization problem: \'api\' must be specified.');
    }

    _this._validator = validator || new _common_validation_Validator__WEBPACK_IMPORTED_MODULE_12__["default"]();
    _this._xhr = xhr || _common_defaultXhr__WEBPACK_IMPORTED_MODULE_13__["default"];
    _this._validateOnClient = validateOnClient || false;
    _this._multipartFormDataEncoded = multipartFormData || false;
    _this._apiUrl = api.replace(/([^/])\?/, '$1/?') // Add "/" before "?"
    .replace(/^[^?]*[^/]$/, '$&/'); // Add "/" to the end

    return _this;
  }
  /**
   * Add a record
   *
   * @param {Object}      record  Record object
   */


  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_7___default()(GridXhrModel, [{
    key: "create",
    value: function () {
      var _create = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_5___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee(record) {
        var formData, ordinaryData, _i, _Object$entries, _Object$entries$_i, prop, value, body;

        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                formData = new FormData();

                if (this._multipartFormDataEncoded) {
                  ordinaryData = {};

                  for (_i = 0, _Object$entries = Object.entries(record); _i < _Object$entries.length; _i++) {
                    _Object$entries$_i = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_Object$entries[_i], 2), prop = _Object$entries$_i[0], value = _Object$entries$_i[1];

                    if (value instanceof File) {
                      formData.append(JSON.stringify(prop), value);
                    } else {
                      ordinaryData[prop] = value;
                    }
                  }

                  formData.append('rest', JSON.stringify(ordinaryData));
                }

                _context.next = 4;
                return this._xhr(_babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_3___default()({
                  method: 'POST',
                  uri: this._apiUrl,
                  body: this._multipartFormDataEncoded ? formData : JSON.stringify(record)
                }, !this._multipartFormDataEncoded && {
                  headers: {
                    'Content-type': 'application/json'
                  }
                }));

              case 4:
                body = _context.sent;
                body = JSON.parse(body);

                if (!body.error) {
                  _context.next = 8;
                  break;
                }

                throw _common_validation_ValidationErrors__WEBPACK_IMPORTED_MODULE_11__["default"].createFromJSON(body.error);

              case 8:
                this.trigger('create', [body.data]);
                return _context.abrupt("return", body.data);

              case 10:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function create(_x) {
        return _create.apply(this, arguments);
      }

      return create;
    }()
    /**
     * Get records list
     *
     * @param {Object}      settings                Request
     * @param {Array}       settings.fields         Fields
     * @param {number}      [settings.limit]        Limit
     * @param {number}      [settings.offset=0]     Offset
     * @param {Object}      [settings.filters]      Filter values object
     * @param {Array}       [settings.sort]         Sort parameters
     * @param {Array}       [settings.extra]        Record IDs, we need to get for sure
     */

  }, {
    key: "read",
    value: function () {
      var _read = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_5___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee2(settings) {
        var queryUrl, response;
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                queryUrl = this._getQueryUrl(settings);

                if (!(url__WEBPACK_IMPORTED_MODULE_15___default.a.format(queryUrl).length > MAX_URI_LENGTH)) {
                  _context2.next = 5;
                  break;
                }

                _context2.next = 4;
                return this._readPostRequest(settings);

              case 4:
                return _context2.abrupt("return", _context2.sent);

              case 5:
                _context2.next = 7;
                return this._xhr({
                  method: 'GET',
                  uri: url__WEBPACK_IMPORTED_MODULE_15___default.a.format(queryUrl)
                });

              case 7:
                response = _context2.sent;
                return _context2.abrupt("return", JSON.parse(response));

              case 9:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this);
      }));

      function read(_x2) {
        return _read.apply(this, arguments);
      }

      return read;
    }()
    /**
     * Get the particular record
     *
     * @param {number|string}   id      Record ID
     * @param {Array}           fields  Required fields
     */

  }, {
    key: "getRecord",
    value: function () {
      var _getRecord = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_5___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee3(id, fields) {
        var parsedUrl, body;
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee3$(_context3) {
          while (1) {
            switch (_context3.prev = _context3.next) {
              case 0:
                parsedUrl = url__WEBPACK_IMPORTED_MODULE_15___default.a.parse(this._apiUrl, true);
                parsedUrl.query.cols = JSON.stringify(fields); // TODO rename cols to fields

                parsedUrl.pathname = url__WEBPACK_IMPORTED_MODULE_15___default.a.resolve(parsedUrl.pathname, JSON.stringify(id));
                delete parsedUrl.search;
                _context3.next = 6;
                return this._xhr({
                  method: 'GET',
                  uri: url__WEBPACK_IMPORTED_MODULE_15___default.a.format(parsedUrl)
                });

              case 6:
                body = _context3.sent;
                return _context3.abrupt("return", JSON.parse(body));

              case 8:
              case "end":
                return _context3.stop();
            }
          }
        }, _callee3, this);
      }));

      function getRecord(_x3, _x4) {
        return _getRecord.apply(this, arguments);
      }

      return getRecord;
    }()
    /**
     * Apply record changes
     *
     * @param {[]}       changes     Changes array
     * @abstract
     */

  }, {
    key: "update",
    value: function () {
      var _update = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_5___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee4(changes) {
        var formDataChanges, ordinaryRecordChanges, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _loop, _iterator, _step, body, res, _iteratorNormalCompletion2, _didIteratorError2, _iteratorError2, _iterator2, _step2, error, _iteratorNormalCompletion3, _didIteratorError3, _iteratorError3, _iterator3, _step3, _error;

        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee4$(_context4) {
          while (1) {
            switch (_context4.prev = _context4.next) {
              case 0:
                formDataChanges = new FormData();

                if (!this._multipartFormDataEncoded) {
                  _context4.next = 24;
                  break;
                }

                ordinaryRecordChanges = [];
                _iteratorNormalCompletion = true;
                _didIteratorError = false;
                _iteratorError = undefined;
                _context4.prev = 6;

                _loop = function _loop() {
                  var _step$value = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_4___default()(_step.value, 2),
                      recordId = _step$value[0],
                      record = _step$value[1];

                  var fileFieldNames = [];

                  for (var _i2 = 0, _Object$keys = Object.keys(record); _i2 < _Object$keys.length; _i2++) {
                    var field = _Object$keys[_i2];

                    if (record[field] instanceof File) {
                      formDataChanges.append(JSON.stringify({
                        recordId: recordId,
                        field: field
                      }), record[field]);
                      fileFieldNames.push(field);
                    }
                  }

                  var filteredRecord = Object.keys(record).filter(function (key) {
                    return !fileFieldNames.includes(key);
                  }).reduce(function (agr, key) {
                    return _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_3___default()({}, agr, _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()({}, key, record[key]));
                  }, {});
                  ordinaryRecordChanges.push([recordId, filteredRecord]);
                };

                for (_iterator = changes[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                  _loop();
                }

                _context4.next = 15;
                break;

              case 11:
                _context4.prev = 11;
                _context4.t0 = _context4["catch"](6);
                _didIteratorError = true;
                _iteratorError = _context4.t0;

              case 15:
                _context4.prev = 15;
                _context4.prev = 16;

                if (!_iteratorNormalCompletion && _iterator["return"] != null) {
                  _iterator["return"]();
                }

              case 18:
                _context4.prev = 18;

                if (!_didIteratorError) {
                  _context4.next = 21;
                  break;
                }

                throw _iteratorError;

              case 21:
                return _context4.finish(18);

              case 22:
                return _context4.finish(15);

              case 23:
                formDataChanges.append('rest', JSON.stringify(ordinaryRecordChanges));

              case 24:
                _context4.next = 26;
                return this._xhr(_babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_3___default()({
                  method: 'PUT'
                }, !this._multipartFormDataEncoded && {
                  headers: {
                    'Content-type': 'application/json'
                  }
                }, {
                  uri: this._apiUrl,
                  body: this._multipartFormDataEncoded ? formDataChanges : JSON.stringify(changes)
                }));

              case 26:
                body = _context4.sent;
                body = JSON.parse(body);
                res = [];

                if (body.changes && body.changes.length) {
                  this.trigger('update', body.changes);
                  res.push.apply(res, _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(body.changes));
                }

                if (!(body.validation && body.validation.length)) {
                  _context4.next = 50;
                  break;
                }

                _iteratorNormalCompletion2 = true;
                _didIteratorError2 = false;
                _iteratorError2 = undefined;
                _context4.prev = 34;

                for (_iterator2 = body.validation[Symbol.iterator](); !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                  error = _step2.value;

                  if (error && error[1]) {
                    error[1] = _common_validation_ValidationErrors__WEBPACK_IMPORTED_MODULE_11__["default"].createFromJSON(error[1]);
                    res.push(error);
                  }
                }

                _context4.next = 42;
                break;

              case 38:
                _context4.prev = 38;
                _context4.t1 = _context4["catch"](34);
                _didIteratorError2 = true;
                _iteratorError2 = _context4.t1;

              case 42:
                _context4.prev = 42;
                _context4.prev = 43;

                if (!_iteratorNormalCompletion2 && _iterator2["return"] != null) {
                  _iterator2["return"]();
                }

              case 45:
                _context4.prev = 45;

                if (!_didIteratorError2) {
                  _context4.next = 48;
                  break;
                }

                throw _iteratorError2;

              case 48:
                return _context4.finish(45);

              case 49:
                return _context4.finish(42);

              case 50:
                if (!(body.errors && body.errors.length)) {
                  _context4.next = 70;
                  break;
                }

                _iteratorNormalCompletion3 = true;
                _didIteratorError3 = false;
                _iteratorError3 = undefined;
                _context4.prev = 54;

                for (_iterator3 = body.errors[Symbol.iterator](); !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
                  _error = _step3.value;

                  if (_error && _error[1]) {
                    _error[1] = Object.assign(new Error(), _error[1]); // Note, that Object spread operator won't work here

                    res.push(_error);
                  }
                }

                _context4.next = 62;
                break;

              case 58:
                _context4.prev = 58;
                _context4.t2 = _context4["catch"](54);
                _didIteratorError3 = true;
                _iteratorError3 = _context4.t2;

              case 62:
                _context4.prev = 62;
                _context4.prev = 63;

                if (!_iteratorNormalCompletion3 && _iterator3["return"] != null) {
                  _iterator3["return"]();
                }

              case 65:
                _context4.prev = 65;

                if (!_didIteratorError3) {
                  _context4.next = 68;
                  break;
                }

                throw _iteratorError3;

              case 68:
                return _context4.finish(65);

              case 69:
                return _context4.finish(62);

              case 70:
                return _context4.abrupt("return", res);

              case 71:
              case "end":
                return _context4.stop();
            }
          }
        }, _callee4, this, [[6, 11, 15, 23], [16,, 18, 22], [34, 38, 42, 50], [43,, 45, 49], [54, 58, 62, 70], [63,, 65, 69]]);
      }));

      function update(_x5) {
        return _update.apply(this, arguments);
      }

      return update;
    }()
    /**
     * Validation check
     *
     * @param {{[string]: *}} record
     * @param {Promise<*>}    recordId
     */

  }, {
    key: "isValidRecord",
    value: function () {
      var _isValidRecord = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_5___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee5(record, recordId) {
        var parsedUrl, response, validationErrors;
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee5$(_context5) {
          while (1) {
            switch (_context5.prev = _context5.next) {
              case 0:
                if (!this._validateOnClient) {
                  _context5.next = 4;
                  break;
                }

                _context5.next = 3;
                return this._validator.isValidRecord(record);

              case 3:
                return _context5.abrupt("return", _context5.sent);

              case 4:
                parsedUrl = url__WEBPACK_IMPORTED_MODULE_15___default.a.parse(this._apiUrl, true);
                parsedUrl.pathname = url__WEBPACK_IMPORTED_MODULE_15___default.a.resolve(parsedUrl.pathname, 'validation');
                _context5.prev = 6;
                _context5.next = 9;
                return this._xhr({
                  method: 'POST',
                  uri: url__WEBPACK_IMPORTED_MODULE_15___default.a.format(parsedUrl),
                  body: {
                    record: record,
                    id: recordId
                  },
                  json: true
                });

              case 9:
                response = _context5.sent;
                _context5.next = 21;
                break;

              case 12:
                _context5.prev = 12;
                _context5.t0 = _context5["catch"](6);

                if (!(_context5.t0.statusCode === 413)) {
                  _context5.next = 20;
                  break;
                }

                _context5.next = 17;
                return this._validator.isValidRecord(record);

              case 17:
                validationErrors = _context5.sent;

                if (validationErrors.isEmpty()) {
                  _context5.next = 20;
                  break;
                }

                return _context5.abrupt("return", validationErrors);

              case 20:
                throw _context5.t0;

              case 21:
                return _context5.abrupt("return", _common_validation_ValidationErrors__WEBPACK_IMPORTED_MODULE_11__["default"].createFromJSON(response));

              case 22:
              case "end":
                return _context5.stop();
            }
          }
        }, _callee5, this, [[6, 12]]);
      }));

      function isValidRecord(_x6, _x7) {
        return _isValidRecord.apply(this, arguments);
      }

      return isValidRecord;
    }()
    /**
     * Get all dependent fields, that are required for validation
     *
     * @param   {string[]}  fields   Fields list
     * @returns {string[]}  Dependencies
     */

  }, {
    key: "getValidationDependency",
    value: function getValidationDependency(fields) {
      return this._validator.getValidationDependency(fields);
    }
  }, {
    key: "_getQueryUrl",
    value: function _getQueryUrl(settings) {
      var parsedUrl = url__WEBPACK_IMPORTED_MODULE_15___default.a.parse(this._apiUrl, true);
      parsedUrl.query.fields = JSON.stringify(settings.fields);
      parsedUrl.query.offset = settings.offset || 0;

      if (settings.limit) {
        parsedUrl.query.limit = settings.limit;
      }

      if (settings.filters) {
        parsedUrl.query.filters = JSON.stringify(settings.filters);
      }

      if (settings.sort) {
        parsedUrl.query.sort = JSON.stringify(settings.sort);
      }

      if (settings.extra) {
        parsedUrl.query.extra = JSON.stringify(settings.extra);
      }

      delete parsedUrl.search;
      return parsedUrl;
    }
  }, {
    key: "_readPostRequest",
    value: function () {
      var _readPostRequest2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_5___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee6(settings) {
        var requestBody, parsedUrl;
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee6$(_context6) {
          while (1) {
            switch (_context6.prev = _context6.next) {
              case 0:
                requestBody = {};
                requestBody.fields = settings.fields;
                requestBody.offset = settings.offset || 0;

                if (settings.limit) {
                  requestBody.limit = settings.limit;
                }

                if (settings.filters) {
                  requestBody.filters = settings.filters;
                }

                if (settings.sort) {
                  requestBody.sort = settings.sort;
                }

                if (settings.extra) {
                  requestBody.extra = settings.extra;
                }

                parsedUrl = url__WEBPACK_IMPORTED_MODULE_15___default.a.parse(this._apiUrl, true);
                parsedUrl.pathname = url__WEBPACK_IMPORTED_MODULE_15___default.a.resolve(parsedUrl.pathname, 'read');
                _context6.next = 11;
                return this._xhr({
                  method: 'POST',
                  json: true,
                  uri: url__WEBPACK_IMPORTED_MODULE_15___default.a.format(parsedUrl),
                  body: requestBody
                });

              case 11:
                return _context6.abrupt("return", _context6.sent);

              case 12:
              case "end":
                return _context6.stop();
            }
          }
        }, _callee6, this);
      }));

      function _readPostRequest(_x8) {
        return _readPostRequest2.apply(this, arguments);
      }

      return _readPostRequest;
    }()
  }]);

  return GridXhrModel;
}(_AbstractGridModel__WEBPACK_IMPORTED_MODULE_14__["default"]);

/* harmony default export */ __webpack_exports__["default"] = (GridXhrModel);

/***/ }),

/***/ "./src/grid/models/applyGridFilters.js":
/*!*********************************************!*\
  !*** ./src/grid/models/applyGridFilters.js ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/objectSpread */ "@babel/runtime/helpers/objectSpread");
/* harmony import */ var _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/utils */ "./src/common/utils.js");




/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */

/**
 * Defines filter values while reading Grid model data
 *
 * @param {AbstractGridModel} model       Grid model
 * @param {Object}            filters     Filter values
 */

function applyGridFilters(model, filters) {
  return Object(_common_utils__WEBPACK_IMPORTED_MODULE_3__["decorate"])(model, {
    read: function () {
      var _read = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(options) {
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                options.filters = _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_1___default()({}, filters, options.filters);
                _context.next = 3;
                return model.read(options);

              case 3:
                return _context.abrupt("return", _context.sent);

              case 4:
              case "end":
                return _context.stop();
            }
          }
        }, _callee);
      }));

      function read(_x) {
        return _read.apply(this, arguments);
      }

      return read;
    }()
  });
}

/* harmony default export */ __webpack_exports__["default"] = (applyGridFilters);

/***/ }),

/***/ "./src/list/AbstractListModel.js":
/*!***************************************!*\
  !*** ./src/list/AbstractListModel.js ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "@babel/runtime/helpers/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ "@babel/runtime/helpers/createClass");
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__);



/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */

/**
 * Abstract List model
 */
var AbstractListModel =
/*#__PURE__*/
function () {
  function AbstractListModel() {
    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, AbstractListModel);
  }

  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default()(AbstractListModel, [{
    key: "read",

    /**
     * Get data
     *
     * @param {string}    search  Search query
     * @abstract
     */
    value: function read()
    /*search*/
    {
      return Promise.resolve([]);
    }
    /**
     * Get option name using ID
     *
     * @param {*}         id  Option ID
     * @abstract
     */

  }, {
    key: "getLabel",
    value: function getLabel()
    /*id*/
    {
      return Promise.resolve('');
    }
  }]);

  return AbstractListModel;
}();

/* harmony default export */ __webpack_exports__["default"] = (AbstractListModel);

/***/ }),

/***/ "./src/list/ListExpressApi.js":
/*!************************************!*\
  !*** ./src/list/ListExpressApi.js ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "@babel/runtime/helpers/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ "@babel/runtime/helpers/createClass");
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! express */ "express");
/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(express__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/utils */ "./src/common/utils.js");





/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */


/**
 * Form Express API for List model interaction
 *
 * @return {ListExpressApi}
 * @constructor
 */

var ListExpressApi =
/*#__PURE__*/
function () {
  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default()(ListExpressApi, null, [{
    key: "create",
    value: function create() {
      return new ListExpressApi();
    }
  }]);

  function ListExpressApi() {
    var _this = this;

    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default()(this, ListExpressApi);

    this.middlewares = {
      read: [Object(_common_utils__WEBPACK_IMPORTED_MODULE_5__["asyncHandler"])(
      /*#__PURE__*/
      function () {
        var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()(
        /*#__PURE__*/
        _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(req, res, next) {
          var model, response;
          return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
            while (1) {
              switch (_context.prev = _context.next) {
                case 0:
                  model = _this._getModel(req, res);
                  _context.prev = 1;
                  _context.next = 4;
                  return model.read(req.query.v);

                case 4:
                  response = _context.sent;

                  _this._result(null, response, req, res, next);

                  _context.next = 11;
                  break;

                case 8:
                  _context.prev = 8;
                  _context.t0 = _context["catch"](1);

                  _this._result(_context.t0, null, req, res, next);

                case 11:
                case "end":
                  return _context.stop();
              }
            }
          }, _callee, null, [[1, 8]]);
        }));

        return function (_x, _x2, _x3) {
          return _ref.apply(this, arguments);
        };
      }())],
      getLabel: [Object(_common_utils__WEBPACK_IMPORTED_MODULE_5__["asyncHandler"])(
      /*#__PURE__*/
      function () {
        var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()(
        /*#__PURE__*/
        _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(req, res, next) {
          var id, model, response;
          return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
            while (1) {
              switch (_context2.prev = _context2.next) {
                case 0:
                  id = JSON.parse(req.params.id);
                  model = _this._getModel(req, res);
                  _context2.prev = 2;
                  _context2.next = 5;
                  return model.getLabel(id);

                case 5:
                  response = _context2.sent;

                  _this._result(null, response, req, res, next);

                  _context2.next = 12;
                  break;

                case 9:
                  _context2.prev = 9;
                  _context2.t0 = _context2["catch"](2);

                  _this._result(_context2.t0, null, req, res, next);

                case 12:
                case "end":
                  return _context2.stop();
              }
            }
          }, _callee2, null, [[2, 9]]);
        }));

        return function (_x4, _x5, _x6) {
          return _ref2.apply(this, arguments);
        };
      }())]
    };
  }
  /**
   * Specify List model
   *
   * @param   {Function|AbstractListModel}  model  List model
   * @return {ListExpressApi}
   */


  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default()(ListExpressApi, [{
    key: "model",
    value: function model(_model) {
      if (typeof _model === 'function') {
        this._getModel = _model;
      } else {
        this._getModel = function () {
          return _model;
        };
      }

      return this;
    }
  }, {
    key: "getRouter",
    value: function getRouter() {
      return new express__WEBPACK_IMPORTED_MODULE_4___default.a.Router().get('/', this.middlewares.read).get('/label/:id', this.middlewares.getLabel);
    }
  }, {
    key: "read",
    value: function read(middlewares) {
      if (!Array.isArray(middlewares)) {
        middlewares = [middlewares];
      }

      this.middlewares.read = middlewares.concat(this.middlewares.read);
      return this;
    }
  }, {
    key: "getLabel",
    value: function getLabel(middlewares) {
      if (!Array.isArray(middlewares)) {
        middlewares = [middlewares];
      }

      this.middlewares.getLabel = middlewares.concat(this.middlewares.getLabel);
      return this;
    } // Default implementation

  }, {
    key: "_getModel",
    value: function _getModel() {
      throw Error('Model is not defined.');
    }
  }, {
    key: "_result",
    value: function _result(err, data, req, res, next) {
      if (err) {
        next(err);
      } else {
        if (typeof data === 'number') {
          data = data.toString();
        }

        res.json(data);
      }
    }
  }]);

  return ListExpressApi;
}();

/* harmony default export */ __webpack_exports__["default"] = (ListExpressApi);

/***/ }),

/***/ "./src/list/ListXhrModel.js":
/*!**********************************!*\
  !*** ./src/list/ListXhrModel.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "@babel/runtime/helpers/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "@babel/runtime/helpers/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ "@babel/runtime/helpers/createClass");
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _common_defaultXhr__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/defaultXhr */ "./src/common/defaultXhr.js");
/* harmony import */ var url__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! url */ "url");
/* harmony import */ var url__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(url__WEBPACK_IMPORTED_MODULE_5__);





/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */



var ListXMLHttpRequestModel =
/*#__PURE__*/
function () {
  /**
   * Simple list client model which works via XMLHttpRequest
   *
   * @param {string}    apiURL  API address for list model interaction
   * @param {Function}  [xhr]   XHR wrapper
   * @constructor
   */
  function ListXMLHttpRequestModel(apiURL, xhr) {
    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default()(this, ListXMLHttpRequestModel);

    this._apiURL = apiURL;
    this._xhr = xhr || _common_defaultXhr__WEBPACK_IMPORTED_MODULE_4__["default"];
    this._apiUrl = apiURL.replace(/([^/])\?/, '$1/?') // Add "/" before "?"
    .replace(/^[^?]*[^/]$/, '$&/'); // Add "/" to the end
  }
  /**
   * Get model data
   *
   * @param {string}    search  List search query
   */


  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default()(ListXMLHttpRequestModel, [{
    key: "read",
    value: function () {
      var _read = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(search) {
        var parsedUrl, body;
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                parsedUrl = url__WEBPACK_IMPORTED_MODULE_5___default.a.parse(this._apiUrl, true);
                delete parsedUrl.search;

                if (search) {
                  parsedUrl.query.v = search;
                }

                _context.next = 5;
                return this._xhr({
                  method: 'GET',
                  headers: {
                    'Content-type': 'application/json'
                  },
                  uri: url__WEBPACK_IMPORTED_MODULE_5___default.a.format(parsedUrl)
                });

              case 5:
                body = _context.sent;
                return _context.abrupt("return", JSON.parse(body));

              case 7:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function read(_x) {
        return _read.apply(this, arguments);
      }

      return read;
    }()
    /**
     * Get option name using ID
     *
     * @param {*}         id  Option ID
     */

  }, {
    key: "getLabel",
    value: function () {
      var _getLabel = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(id) {
        var parsedUrl, body;
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                parsedUrl = url__WEBPACK_IMPORTED_MODULE_5___default.a.parse(this._apiUrl, true);
                parsedUrl.pathname = url__WEBPACK_IMPORTED_MODULE_5___default.a.resolve(parsedUrl.pathname, "label/".concat(JSON.stringify(id)));
                _context2.next = 4;
                return this._xhr({
                  method: 'GET',
                  headers: {
                    'Content-type': 'application/json'
                  },
                  uri: url__WEBPACK_IMPORTED_MODULE_5___default.a.format(parsedUrl)
                });

              case 4:
                body = _context2.sent;
                body = JSON.parse(body);
                return _context2.abrupt("return", body);

              case 7:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this);
      }));

      function getLabel(_x2) {
        return _getLabel.apply(this, arguments);
      }

      return getLabel;
    }()
  }]);

  return ListXMLHttpRequestModel;
}();

/* harmony default export */ __webpack_exports__["default"] = (ListXMLHttpRequestModel);

/***/ }),

/***/ "./src/node.js":
/*!*********************!*\
  !*** ./src/node.js ***!
  \*********************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _browser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./browser */ "./src/browser.js");
/* harmony import */ var _grid_models_GridExpressApi__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./grid/models/GridExpressApi */ "./src/grid/models/GridExpressApi.js");
/* harmony import */ var _list_ListExpressApi__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./list/ListExpressApi */ "./src/list/ListExpressApi.js");
/* harmony import */ var _form_FormExpressApi__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./form/FormExpressApi */ "./src/form/FormExpressApi.js");
/* harmony import */ var _grid_export_exporters_toCSV__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./grid/export/exporters/toCSV */ "./src/grid/export/exporters/toCSV.js");
/*
 * Copyright (с) 2015-present, SoftIndex LLC.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree.
 */





_browser__WEBPACK_IMPORTED_MODULE_0__["default"].gridExpressApi = _grid_models_GridExpressApi__WEBPACK_IMPORTED_MODULE_1__["default"].create;
_browser__WEBPACK_IMPORTED_MODULE_0__["default"].listExpressApi = _list_ListExpressApi__WEBPACK_IMPORTED_MODULE_2__["default"].create;
_browser__WEBPACK_IMPORTED_MODULE_0__["default"].formExpressApi = _form_FormExpressApi__WEBPACK_IMPORTED_MODULE_3__["default"].create;
_browser__WEBPACK_IMPORTED_MODULE_0__["default"].toCSV = _grid_export_exporters_toCSV__WEBPACK_IMPORTED_MODULE_4__["default"];
/* harmony default export */ __webpack_exports__["default"] = (_browser__WEBPACK_IMPORTED_MODULE_0__["default"]);

/***/ }),

/***/ "@babel/polyfill/browser":
/*!******************************************!*\
  !*** external "@babel/polyfill/browser" ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babel/polyfill/browser");

/***/ }),

/***/ "@babel/runtime/helpers/assertThisInitialized":
/*!***************************************************************!*\
  !*** external "@babel/runtime/helpers/assertThisInitialized" ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babel/runtime/helpers/assertThisInitialized");

/***/ }),

/***/ "@babel/runtime/helpers/asyncToGenerator":
/*!**********************************************************!*\
  !*** external "@babel/runtime/helpers/asyncToGenerator" ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babel/runtime/helpers/asyncToGenerator");

/***/ }),

/***/ "@babel/runtime/helpers/classCallCheck":
/*!********************************************************!*\
  !*** external "@babel/runtime/helpers/classCallCheck" ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babel/runtime/helpers/classCallCheck");

/***/ }),

/***/ "@babel/runtime/helpers/createClass":
/*!*****************************************************!*\
  !*** external "@babel/runtime/helpers/createClass" ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babel/runtime/helpers/createClass");

/***/ }),

/***/ "@babel/runtime/helpers/defineProperty":
/*!********************************************************!*\
  !*** external "@babel/runtime/helpers/defineProperty" ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babel/runtime/helpers/defineProperty");

/***/ }),

/***/ "@babel/runtime/helpers/extends":
/*!*************************************************!*\
  !*** external "@babel/runtime/helpers/extends" ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babel/runtime/helpers/extends");

/***/ }),

/***/ "@babel/runtime/helpers/getPrototypeOf":
/*!********************************************************!*\
  !*** external "@babel/runtime/helpers/getPrototypeOf" ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babel/runtime/helpers/getPrototypeOf");

/***/ }),

/***/ "@babel/runtime/helpers/inherits":
/*!**************************************************!*\
  !*** external "@babel/runtime/helpers/inherits" ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babel/runtime/helpers/inherits");

/***/ }),

/***/ "@babel/runtime/helpers/objectSpread":
/*!******************************************************!*\
  !*** external "@babel/runtime/helpers/objectSpread" ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babel/runtime/helpers/objectSpread");

/***/ }),

/***/ "@babel/runtime/helpers/objectWithoutProperties":
/*!*****************************************************************!*\
  !*** external "@babel/runtime/helpers/objectWithoutProperties" ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babel/runtime/helpers/objectWithoutProperties");

/***/ }),

/***/ "@babel/runtime/helpers/possibleConstructorReturn":
/*!*******************************************************************!*\
  !*** external "@babel/runtime/helpers/possibleConstructorReturn" ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babel/runtime/helpers/possibleConstructorReturn");

/***/ }),

/***/ "@babel/runtime/helpers/slicedToArray":
/*!*******************************************************!*\
  !*** external "@babel/runtime/helpers/slicedToArray" ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babel/runtime/helpers/slicedToArray");

/***/ }),

/***/ "@babel/runtime/helpers/toConsumableArray":
/*!***********************************************************!*\
  !*** external "@babel/runtime/helpers/toConsumableArray" ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babel/runtime/helpers/toConsumableArray");

/***/ }),

/***/ "@babel/runtime/helpers/typeof":
/*!************************************************!*\
  !*** external "@babel/runtime/helpers/typeof" ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babel/runtime/helpers/typeof");

/***/ }),

/***/ "@babel/runtime/regenerator":
/*!*********************************************!*\
  !*** external "@babel/runtime/regenerator" ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babel/runtime/regenerator");

/***/ }),

/***/ "classnames":
/*!*****************************!*\
  !*** external "classnames" ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("classnames");

/***/ }),

/***/ "create-react-class":
/*!*************************************!*\
  !*** external "create-react-class" ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("create-react-class");

/***/ }),

/***/ "csv-stringify":
/*!********************************!*\
  !*** external "csv-stringify" ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("csv-stringify");

/***/ }),

/***/ "express":
/*!**************************!*\
  !*** external "express" ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("express");

/***/ }),

/***/ "moment":
/*!*************************!*\
  !*** external "moment" ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("moment");

/***/ }),

/***/ "multer":
/*!*************************!*\
  !*** external "multer" ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("multer");

/***/ }),

/***/ "prop-types":
/*!*****************************!*\
  !*** external "prop-types" ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("prop-types");

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "react" ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("react");

/***/ }),

/***/ "react-datepicker":
/*!***********************************!*\
  !*** external "react-datepicker" ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("react-datepicker");

/***/ }),

/***/ "react-dom":
/*!****************************!*\
  !*** external "react-dom" ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("react-dom");

/***/ }),

/***/ "react-dom-factories":
/*!**************************************!*\
  !*** external "react-dom-factories" ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("react-dom-factories");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("url");

/***/ }),

/***/ "xhr":
/*!**********************!*\
  !*** external "xhr" ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("xhr");

/***/ })

/******/ });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9VSUtlcm5lbC93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vVUlLZXJuZWwvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vVUlLZXJuZWwvLi9zcmMvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly9VSUtlcm5lbC8uL3NyYy9jb21tb24vQXJndW1lbnRzRXJyb3IuanMiLCJ3ZWJwYWNrOi8vVUlLZXJuZWwvLi9zcmMvY29tbW9uL0V2ZW50cy5qcyIsIndlYnBhY2s6Ly9VSUtlcm5lbC8uL3NyYy9jb21tb24vUG9ydGFsLmpzIiwid2VicGFjazovL1VJS2VybmVsLy4vc3JjL2NvbW1vbi9UaHJvdHRsZUVycm9yLmpzIiwid2VicGFjazovL1VJS2VybmVsLy4vc3JjL2NvbW1vbi9jYWxsYmFja2lmeS5qcyIsIndlYnBhY2s6Ly9VSUtlcm5lbC8uL3NyYy9jb21tb24vZGVmYXVsdFhoci5qcyIsIndlYnBhY2s6Ly9VSUtlcm5lbC8uL3NyYy9jb21tb24vc2V0SW1tZWRpYXRlLmpzIiwid2VicGFjazovL1VJS2VybmVsLy4vc3JjL2NvbW1vbi90b1Byb21pc2UuanMiLCJ3ZWJwYWNrOi8vVUlLZXJuZWwvLi9zcmMvY29tbW9uL3V0aWxzLmpzIiwid2VicGFjazovL1VJS2VybmVsLy4vc3JjL2NvbW1vbi92YWxpZGF0aW9uL1ZhbGlkYXRpb25FcnJvcnMuanMiLCJ3ZWJwYWNrOi8vVUlLZXJuZWwvLi9zcmMvY29tbW9uL3ZhbGlkYXRpb24vVmFsaWRhdG9yLmpzIiwid2VicGFjazovL1VJS2VybmVsLy4vc3JjL2NvbW1vbi92YWxpZGF0aW9uL3J1bGVzL2Jvb2xlYW4uanMiLCJ3ZWJwYWNrOi8vVUlLZXJuZWwvLi9zcmMvY29tbW9uL3ZhbGlkYXRpb24vcnVsZXMvZGF0ZS5qcyIsIndlYnBhY2s6Ly9VSUtlcm5lbC8uL3NyYy9jb21tb24vdmFsaWRhdGlvbi9ydWxlcy9lbnVtLmpzIiwid2VicGFjazovL1VJS2VybmVsLy4vc3JjL2NvbW1vbi92YWxpZGF0aW9uL3J1bGVzL2Zsb2F0LmpzIiwid2VicGFjazovL1VJS2VybmVsLy4vc3JjL2NvbW1vbi92YWxpZGF0aW9uL3J1bGVzL25vdEVtcHR5LmpzIiwid2VicGFjazovL1VJS2VybmVsLy4vc3JjL2NvbW1vbi92YWxpZGF0aW9uL3J1bGVzL25vdE51bGwuanMiLCJ3ZWJwYWNrOi8vVUlLZXJuZWwvLi9zcmMvY29tbW9uL3ZhbGlkYXRpb24vcnVsZXMvbnVtYmVyLmpzIiwid2VicGFjazovL1VJS2VybmVsLy4vc3JjL2NvbW1vbi92YWxpZGF0aW9uL3J1bGVzL3JlZ0V4cC5qcyIsIndlYnBhY2s6Ly9VSUtlcm5lbC8uL3NyYy9jb21tb24vdmFsaWRhdGlvbi9ydWxlcy9zZXQuanMiLCJ3ZWJwYWNrOi8vVUlLZXJuZWwvLi9zcmMvY29tbW9uL3ZhcmlhYmxlcy5qcyIsIndlYnBhY2s6Ly9VSUtlcm5lbC8uL3NyYy9lZGl0b3JzL0NoZWNrYm94LmpzIiwid2VicGFjazovL1VJS2VybmVsLy4vc3JjL2VkaXRvcnMvRGF0ZVBpY2tlci5qcyIsIndlYnBhY2s6Ly9VSUtlcm5lbC8uL3NyYy9lZGl0b3JzL051bWJlci5qcyIsIndlYnBhY2s6Ly9VSUtlcm5lbC8uL3NyYy9lZGl0b3JzL1NlbGVjdC5qcyIsIndlYnBhY2s6Ly9VSUtlcm5lbC8uL3NyYy9lZGl0b3JzL1N1Z2dlc3RCb3guanMiLCJ3ZWJwYWNrOi8vVUlLZXJuZWwvLi9zcmMvZm9ybS9BYnN0cmFjdEZvcm1Nb2RlbC5qcyIsIndlYnBhY2s6Ly9VSUtlcm5lbC8uL3NyYy9mb3JtL0Zvcm1FeHByZXNzQXBpLmpzIiwid2VicGFjazovL1VJS2VybmVsLy4vc3JjL2Zvcm0vRm9ybU1vZGVsLmpzIiwid2VicGFjazovL1VJS2VybmVsLy4vc3JjL2Zvcm0vRm9ybVNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vVUlLZXJuZWwvLi9zcmMvZm9ybS9Gb3JtWGhyTW9kZWwuanMiLCJ3ZWJwYWNrOi8vVUlLZXJuZWwvLi9zcmMvZm9ybS9hZGFwdGVycy9HcmlkVG9Gb3JtQ3JlYXRlLmpzIiwid2VicGFjazovL1VJS2VybmVsLy4vc3JjL2Zvcm0vYWRhcHRlcnMvR3JpZFRvRm9ybVVwZGF0ZS5qcyIsIndlYnBhY2s6Ly9VSUtlcm5lbC8uL3NyYy9mb3JtL2Nvbm5lY3RGb3JtLmpzIiwid2VicGFjazovL1VJS2VybmVsLy4vc3JjL2Zvcm0vbWl4aW4uanMiLCJ3ZWJwYWNrOi8vVUlLZXJuZWwvLi9zcmMvZ3JpZC9Db21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vVUlLZXJuZWwvLi9zcmMvZ3JpZC9leHBvcnQvZXhwb3J0R3JpZERhdGEuanMiLCJ3ZWJwYWNrOi8vVUlLZXJuZWwvLi9zcmMvZ3JpZC9leHBvcnQvZXhwb3J0ZXJzL3RvQ1NWLmpzIiwid2VicGFjazovL1VJS2VybmVsLy4vc3JjL2dyaWQvZXhwb3J0L2V4cG9ydGVycy90b0pTT04uanMiLCJ3ZWJwYWNrOi8vVUlLZXJuZWwvLi9zcmMvZ3JpZC9taXhpbnMvY29sdW1ucy5qcyIsIndlYnBhY2s6Ly9VSUtlcm5lbC8uL3NyYy9ncmlkL21peGlucy9kYXRhLmpzIiwid2VicGFjazovL1VJS2VybmVsLy4vc3JjL2dyaWQvbWl4aW5zL2VkaXRvci5qcyIsIndlYnBhY2s6Ly9VSUtlcm5lbC8uL3NyYy9ncmlkL21peGlucy9wYWdpbmF0aW9uLmpzIiwid2VicGFjazovL1VJS2VybmVsLy4vc3JjL2dyaWQvbWl4aW5zL3NlbGVjdC5qcyIsIndlYnBhY2s6Ly9VSUtlcm5lbC8uL3NyYy9ncmlkL21peGlucy9zb3J0aW5nLmpzIiwid2VicGFjazovL1VJS2VybmVsLy4vc3JjL2dyaWQvbWl4aW5zL3N0YXR1c2VzLmpzIiwid2VicGFjazovL1VJS2VybmVsLy4vc3JjL2dyaWQvbWl4aW5zL3VpLmpzIiwid2VicGFjazovL1VJS2VybmVsLy4vc3JjL2dyaWQvbW9kZWxzL0Fic3RyYWN0R3JpZE1vZGVsLmpzIiwid2VicGFjazovL1VJS2VybmVsLy4vc3JjL2dyaWQvbW9kZWxzL0dyaWRDb2xsZWN0aW9uTW9kZWwuanMiLCJ3ZWJwYWNrOi8vVUlLZXJuZWwvLi9zcmMvZ3JpZC9tb2RlbHMvR3JpZEV4cHJlc3NBcGkuanMiLCJ3ZWJwYWNrOi8vVUlLZXJuZWwvLi9zcmMvZ3JpZC9tb2RlbHMvR3JpZFhock1vZGVsLmpzIiwid2VicGFjazovL1VJS2VybmVsLy4vc3JjL2dyaWQvbW9kZWxzL2FwcGx5R3JpZEZpbHRlcnMuanMiLCJ3ZWJwYWNrOi8vVUlLZXJuZWwvLi9zcmMvbGlzdC9BYnN0cmFjdExpc3RNb2RlbC5qcyIsIndlYnBhY2s6Ly9VSUtlcm5lbC8uL3NyYy9saXN0L0xpc3RFeHByZXNzQXBpLmpzIiwid2VicGFjazovL1VJS2VybmVsLy4vc3JjL2xpc3QvTGlzdFhock1vZGVsLmpzIiwid2VicGFjazovL1VJS2VybmVsLy4vc3JjL25vZGUuanMiLCJ3ZWJwYWNrOi8vVUlLZXJuZWwvZXh0ZXJuYWwgXCJAYmFiZWwvcG9seWZpbGwvYnJvd3NlclwiIiwid2VicGFjazovL1VJS2VybmVsL2V4dGVybmFsIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hc3NlcnRUaGlzSW5pdGlhbGl6ZWRcIiIsIndlYnBhY2s6Ly9VSUtlcm5lbC9leHRlcm5hbCBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXN5bmNUb0dlbmVyYXRvclwiIiwid2VicGFjazovL1VJS2VybmVsL2V4dGVybmFsIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVja1wiIiwid2VicGFjazovL1VJS2VybmVsL2V4dGVybmFsIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzc1wiIiwid2VicGFjazovL1VJS2VybmVsL2V4dGVybmFsIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eVwiIiwid2VicGFjazovL1VJS2VybmVsL2V4dGVybmFsIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9leHRlbmRzXCIiLCJ3ZWJwYWNrOi8vVUlLZXJuZWwvZXh0ZXJuYWwgXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2dldFByb3RvdHlwZU9mXCIiLCJ3ZWJwYWNrOi8vVUlLZXJuZWwvZXh0ZXJuYWwgXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2luaGVyaXRzXCIiLCJ3ZWJwYWNrOi8vVUlLZXJuZWwvZXh0ZXJuYWwgXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL29iamVjdFNwcmVhZFwiIiwid2VicGFjazovL1VJS2VybmVsL2V4dGVybmFsIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9vYmplY3RXaXRob3V0UHJvcGVydGllc1wiIiwid2VicGFjazovL1VJS2VybmVsL2V4dGVybmFsIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuXCIiLCJ3ZWJwYWNrOi8vVUlLZXJuZWwvZXh0ZXJuYWwgXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL3NsaWNlZFRvQXJyYXlcIiIsIndlYnBhY2s6Ly9VSUtlcm5lbC9leHRlcm5hbCBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvdG9Db25zdW1hYmxlQXJyYXlcIiIsIndlYnBhY2s6Ly9VSUtlcm5lbC9leHRlcm5hbCBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvdHlwZW9mXCIiLCJ3ZWJwYWNrOi8vVUlLZXJuZWwvZXh0ZXJuYWwgXCJAYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvclwiIiwid2VicGFjazovL1VJS2VybmVsL2V4dGVybmFsIFwiY2xhc3NuYW1lc1wiIiwid2VicGFjazovL1VJS2VybmVsL2V4dGVybmFsIFwiY3JlYXRlLXJlYWN0LWNsYXNzXCIiLCJ3ZWJwYWNrOi8vVUlLZXJuZWwvZXh0ZXJuYWwgXCJjc3Ytc3RyaW5naWZ5XCIiLCJ3ZWJwYWNrOi8vVUlLZXJuZWwvZXh0ZXJuYWwgXCJleHByZXNzXCIiLCJ3ZWJwYWNrOi8vVUlLZXJuZWwvZXh0ZXJuYWwgXCJtb21lbnRcIiIsIndlYnBhY2s6Ly9VSUtlcm5lbC9leHRlcm5hbCBcIm11bHRlclwiIiwid2VicGFjazovL1VJS2VybmVsL2V4dGVybmFsIFwicHJvcC10eXBlc1wiIiwid2VicGFjazovL1VJS2VybmVsL2V4dGVybmFsIFwicmVhY3RcIiIsIndlYnBhY2s6Ly9VSUtlcm5lbC9leHRlcm5hbCBcInJlYWN0LWRhdGVwaWNrZXJcIiIsIndlYnBhY2s6Ly9VSUtlcm5lbC9leHRlcm5hbCBcInJlYWN0LWRvbVwiIiwid2VicGFjazovL1VJS2VybmVsL2V4dGVybmFsIFwicmVhY3QtZG9tLWZhY3Rvcmllc1wiIiwid2VicGFjazovL1VJS2VybmVsL2V4dGVybmFsIFwidXJsXCIiLCJ3ZWJwYWNrOi8vVUlLZXJuZWwvZXh0ZXJuYWwgXCJ4aHJcIiJdLCJuYW1lcyI6WyJnbG9iYWwiLCJfYmFiZWxQb2x5ZmlsbCIsInJlcXVpcmUiLCJVSUtlcm5lbCIsImFwcGx5R3JpZEZpbHRlcnMiLCJHcmlkIiwiR3JpZENvbXBvbmVudCIsIkZvcm0iLCJGb3JtU2VydmljZSIsImNvbm5lY3RGb3JtIiwiY3JlYXRlVmFsaWRhdG9yIiwiVmFsaWRhdG9yIiwiY3JlYXRlIiwiZXhwb3J0R3JpZERhdGEiLCJ0b0pTT04iLCJWYWxpZGF0aW9uRXJyb3JzIiwiTW9kZWxzIiwiWGhyIiwiR3JpZFhock1vZGVsIiwiQ29sbGVjdGlvbiIsIkdyaWRDb2xsZWN0aW9uTW9kZWwiLCJFdmVudHMiLCJGb3JtTW9kZWwiLCJGb3JtWGhyIiwiRm9ybVhock1vZGVsIiwiTGlzdCIsIkxpc3RYaHJNb2RlbCIsIkFic3RyYWN0TW9kZWxzIiwiQWJzdHJhY3RGb3JtTW9kZWwiLCJBYnN0cmFjdEdyaWRNb2RlbCIsIkFic3RyYWN0TGlzdE1vZGVsIiwiQWRhcHRlcnMiLCJUb0Zvcm1VcGRhdGUiLCJUb0Zvcm1DcmVhdGUiLCJFZGl0b3JzIiwiU2VsZWN0IiwiU3VnZ2VzdEJveCIsIkRhdGVQaWNrZXIiLCJDaGVja2JveCIsIk51bWJlciIsIkFyZ3VtZW50c0Vycm9yIiwiVGhyb3R0bGVFcnJvciIsIlZhbGlkYXRvcnMiLCJib29sZWFuVmFsaWRhdGlvblJ1bGUiLCJkYXRlIiwiZGF0ZVZhbGlkYXRpb25SdWxlIiwiZW51bVZhbGlkYXRpb25SdWxlIiwic2V0Iiwic2V0VmFsaWRhdGlvblJ1bGUiLCJmbG9hdFZhbGlkYXRpb25SdWxlIiwicmVnRXhwIiwicmVnRXhwVmFsaWRhdGlvblJ1bGUiLCJub3ROdWxsIiwibm90TnVsbFZhbGlkYXRpb25SdWxlIiwibnVtYmVyIiwibnVtYmVyVmFsaWRhdGlvblJ1bGUiLCJub3RFbXB0eSIsIm5vdEVtcHR5VmFsaWRhdGlvblJ1bGUiLCJNaXhpbnMiLCJGb3JtTWl4aW4iLCJfZ2V0IiwidmFyaWFibGVzIiwiZ2V0IiwiX3NldCIsIm1lc3NhZ2UiLCJFcnJvciIsImNhbGwiLCJuYW1lIiwic3RhdHVzIiwic3RhdHVzQ29kZSIsInN0YWNrIiwiZ2V0U3RhY2siLCJwcm90b3R5cGUiLCJPYmplY3QiLCJjb25zdHJ1Y3RvciIsIkV2ZW50c01vZGVsIiwiX3N1YnNjcmliZXJzIiwiZXZlbnQiLCJjYiIsInB1c2giLCJ3aXRob3V0IiwibGVuZ3RoIiwicGFyYW1zIiwic3Vic2NyaWJlciIsInBvcnRhbENsYXNzIiwiUG9ydGFsIiwicHJvcHMiLCJfb25Eb2N1bWVudE1vdXNlRG93biIsImJpbmQiLCJfb25Eb2N1bWVudE1vdXNlU2Nyb2xsIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwicG9ydGFsIiwiY3JlYXRlRWxlbWVudCIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImNsYXNzTmFtZSIsInJlbmRlclBvcnRhbCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJSZWFjdERPTSIsInVubW91bnRDb21wb25lbnRBdE5vZGUiLCJyZW1vdmVDaGlsZCIsInRhcmdldCIsImNvbnRhaW5zIiwiZSIsIm9uRG9jdW1lbnRNb3VzZURvd24iLCJfaXNEb2N1bWVudEV2ZW50T3duZXIiLCJvbkRvY3VtZW50TW91c2VTY3JvbGwiLCJyZW5kZXIiLCJvbWl0IiwiY2hpbGRyZW4iLCJSZWFjdCIsIkNvbXBvbmVudCIsInByb3BUeXBlcyIsIlByb3BUeXBlcyIsIm5vZGUiLCJmdW5jIiwiY3JlYXRlV2l0aFBhcmVudFN0YWNrIiwiZXJyIiwiZnVuY3Rpb25zTmFtZXMiLCJoaWRlV2FybmluZyIsImZ1bmNOYW1lIiwiYXJncyIsImxhc3RBcmd1bWVudEluZGV4IiwiX19pZ25vcmVVSUtlcm5lbFdhcm5pbmciLCJpbmNsdWRlcyIsIndhcm4iLCJKU09OIiwic3RyaW5naWZ5IiwicmVzdWx0IiwiYXBwbHkiLCJ0aGVuIiwiZGF0YSIsImRlZmF1bHRYaHIiLCJzZXR0aW5ncyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwieGhyIiwicmVzcG9uc2UiLCJwYXJzZWRCb2R5IiwicGFyc2UiLCJ3aW5kb3ciLCJzZXRJbW1lZGlhdGUiLCJoZWFkIiwidGFpbCIsIklEIiwiTWF0aCIsInJhbmRvbSIsIm9uTWVzc2FnZSIsIm5leHQiLCJhdHRhY2hFdmVudCIsInBvc3RNZXNzYWdlIiwic2V0VGltZW91dCIsInRvUHJvbWlzZSIsInByb21pc2VXYXJuIiwidGV4dCIsIm1haW5Bcmd1bWVudHMiLCJwcm9taXNlIiwiY2FsbGJhY2tQcm9taXNlIiwidG9Qcm9taXNlQ2FsbGJhY2siLCJiYXNlQ2xvbmUiLCJvYmoiLCJpc0RlZXAiLCJjbG9uZWQiLCJlczZ0eXBlcyIsIkRhdGUiLCJGdW5jdGlvbiIsIlJlZ0V4cCIsIkFycmF5IiwiaXNBcnJheSIsImVsIiwidG9TdHJpbmciLCJlbnRyaWVzIiwiZmllbGQiLCJ2YWx1ZSIsImlzSW50ZXJzZWN0aW9uIiwiYSIsImIiLCJjIiwiaW5kZXhPZiIsInNpemUiLCJrZXlzIiwiYXJyIiwiaXRlbSIsImkiLCJpc0VxdWFsIiwidGhyb3R0bGUiLCJ3b3JrZWQiLCJuZXh0QXJndW1lbnRzIiwibmV4dFJlc29sdmUiLCJuZXh0UmVqZWN0IiwiYXJndW1lbnRzIiwidGhyb3R0bGVDYWxsYmFjayIsInRocm90dGxlUHJvbWlzZSIsInJ1biIsImN0eCIsImFyZ3VtZW50c0FycmF5Iiwic2xpY2UiLCJjYldyYXBwZXIiLCJuZXh0V29ya2VyIiwiY29uY2F0IiwicGFyZW50U3RhY2siLCJwYXJzZVZhbHVlRnJvbUV2ZW50IiwidGFnTmFtZSIsInR5cGUiLCJjaGVja2VkIiwiRGVjb3JhdG9yIiwiZGVjb3IiLCJhc3NpZ24iLCJkZWNvcmF0ZSIsInVuZGVmaW5lZCIsInZhbHVlT2YiLCJGaWxlIiwiZXZlcnkiLCJrZXkiLCJjbG9uZSIsImNsb25lRGVlcCIsImlzRW1wdHkiLCJ0cmltIiwiaXNEZWZpbmVkIiwiZm9yRWFjaCIsInBsdWNrIiwibWFwIiwiZmluZCIsImZpbmRJbmRleCIsInByZWRpY2F0ZSIsImVzY2FwZSIsInN0cmluZyIsInJlVW5lc2NhcGVkIiwiZXNjYXBlcyIsInRlc3QiLCJyZXBsYWNlIiwiY2hyIiwiemlwT2JqZWN0IiwidmFsdWVzIiwicGljayIsImRlZmF1bHRWYWx1ZSIsInJlZHVjZSIsImhhc093blByb3BlcnR5IiwibWFwS2V5cyIsIm9iamVjdCIsIml0ZXJhdGVlIiwidW5pb24iLCJlbGVtZW50cyIsImFyZyIsImF0IiwicGFpcnMiLCJ0b0RhdGUiLCJzZXRUaW1lIiwiZ2V0VGltZSIsImdldFRpbWV6b25lT2Zmc2V0IiwibGFzdCIsImdldFJlY29yZENoYW5nZXMiLCJtb2RlbCIsImNoYW5nZXMiLCJuZXdDaGFuZ2VzIiwiZ2V0VmFsaWRhdGlvbkRlcGVuZGVuY3kiLCJkZWVwIiwic3RhY2tUcmFjZUxpbWl0RGVmYXVsdCIsInN0YWNrVHJhY2VMaW1pdCIsInNwbGl0Iiwiam9pbiIsImNvbnNvbGUiLCJ0b0VuY29kZWRTdHJpbmciLCJlbmNvZGVVUklDb21wb25lbnQiLCJhc3luY0hhbmRsZXIiLCJyb3V0ZXIiLCJyZXEiLCJyZXMiLCJwYXJlbnRzIiwiZWxlbWVudCIsInNlbGVjdG9yIiwicGFyZW50RWxlbWVudCIsIm1hdGNoZXMiLCJwYXJzZUpzb24iLCJqc29uIiwiZXJyb3JNZXNzYWdlIiwiX2ZpZWxkcyIsIk1hcCIsImVycm9yIiwiX2Zvcm1FcnJvclZhbHVlIiwiaGFzIiwiZmllbGRFcnJvcnMiLCJmaWVsZHMiLCJjcmVhdGVGcm9tSlNPTiIsInZhbGlkYXRpb25FcnJvcnMiLCJnZXRFcnJvcnMiLCJuZXdFcnJvcnMiLCJlcnJvcnMiLCJqc29uT2JqZWN0IiwiZXJyTWVzc2FnZSIsImFkZCIsImpzb25FcnJvcnMiLCJfc2V0dGluZ3MiLCJ2YWxpZGF0b3JzIiwiZ3JvdXBWYWxpZGF0b3JzIiwiYXN5bmNWYWxpZGF0b3JzIiwiYXN5bmNHcm91cFZhbGlkYXRvcnMiLCJhc3luY0RlcGVuZGVuaWVzIiwidmFsaWRhdG9yRnVuY3Rpb24iLCJmbiIsImdyb3VwcyIsImoiLCJyZWNvcmQiLCJhd2FpdFN0YWNrIiwicHJvbWlzZXMiLCJkZXBlbmRlbnRGaWVsZHMiLCJ2YWxpZGF0b3IiLCJhc3luY1ZhbGlkYXRvciIsImdyb3VwVmFsaWRhdG9yIiwiYXN5bmNHcm91cFZhbGlkYXRvciIsImFsbCIsImFzeW5jRXJyb3JzIiwicG9wIiwiYmFzZVZhbGlkYXRvciIsIm1pbiIsIm1heCIsInR5cGVPZlZhbHVlIiwiaXNOYU4iLCJ2YXJpYW50cyIsImlzRmluaXRlIiwicGFyc2VJbnQiLCJpbmRldGVybWluYXRlIiwib3RoZXJQcm9wcyIsImlucHV0IiwiYm9vbCIsIkRhdGVQaWNrZXJFZGl0b3IiLCJmb3JtYXQiLCJvbkNoYW5nZSIsInRleHRGb3JtYXQiLCJtb21lbnQiLCJhbnkiLCJzaG93Iiwib25CbHVyIiwiaXNSZXF1aXJlZCIsImlzSW52YWxpZEZsb2F0IiwiZmxvYXRWYWxpZGF0b3IiLCJOdW1iZXJFZGl0b3IiLCJzdGF0ZSIsIm5leHRQcm9wcyIsImZpbmRET01Ob2RlIiwidmFsdWVBc051bWJlciIsInBhcnNlRmxvYXQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX29uQ2hhbmdlSGFuZGxlciIsIm9uZU9mVHlwZSIsIlNlbGVjdEVkaXRvciIsIm9wdGlvbnMiLCJsb2FkaW5nIiwiQm9vbGVhbiIsInJlYWQiLCJ1bnNoaWZ0Iiwic2V0U3RhdGUiLCJvcHRpb24iLCJnZXRPcHRpb25zIiwib25MYWJlbENoYW5nZSIsInZhbHVlSW5kZXgiLCJoYW5kbGVDaGFuZ2UiLCJkaXNhYmxlZCIsImluZGV4Iiwib3B0aW9uUHJvcHMiLCJhcnJheSIsInNoYXBlIiwicG9wdXBJZCIsImNsYXNzZXMiLCJvcHRpb25Gb2N1c2VkIiwib3B0aW9uU2VsZWN0YWJsZSIsIm9wdGlvblR5cGVzIiwiZ3JvdXAiLCJoZWFkZXIiLCJzdWJpdGVtIiwiZW1wdHkiLCJzZWFyY2hCbG9jayIsInNlbGVjdEJ0biIsImFycm93IiwidXAiLCJUQUJfS0VZIiwiRU5URVJfS0VZIiwiRVNDQVBFX0tFWSIsIkFSUk9XX1VQX0tFWSIsIkFSUk9XX0RPV05fS0VZIiwiTUlOX1BPUFVQX0hFSUdIVCIsIlN1Z2dlc3RCb3hFZGl0b3IiLCJfbG9hZERhdGEiLCJpc09wZW5lZCIsInNlbGVjdGVkT3B0aW9uS2V5IiwibGFzdFZhbGlkTGFiZWwiLCJsYWJlbCIsInBvcHVwU3R5bGVzIiwiX29uSW5wdXRGb2N1cyIsIl9vbklucHV0S2V5RG93biIsIl9vbklucHV0VmFsdWVDaGFuZ2UiLCJfZm9jdXNPcHRpb24iLCJfdG9nZ2xlTGlzdCIsIl9vcGVuTGlzdCIsIl9pc01vdW50ZWQiLCJkZWZhdWx0TGFiZWwiLCJfc2V0TGFiZWxUbyIsIl9nZXRMYWJlbEZyb21Nb2RlbCIsIm5leHRTdGF0ZSIsIm1hcmtBc1ZhbGlkIiwiaWQiLCJnZXRMYWJlbCIsInNlYXJjaFBhdHRlcm4iLCJ3aXRoRW1wdHlPcHRpb24iLCJjb250ZW50IiwicXVlcnlTZWxlY3RvciIsInN0eWxlIiwiYm90dG9tIiwicG9zaXRpb24iLCJfc2Nyb2xsTGlzdFRvIiwiZm9jdXNGaXJzdE9wdGlvbiIsIl9nZXRDb21wdXRlZFBvcHVwU3R5bGVzIiwic2VsZWN0IiwiX3VwZGF0ZUxpc3QiLCJfZm9jdXNPcHRpb25BbmRTY3JvbGxJbnRvVmlldyIsIm9uRm9jdXMiLCJzaG91bGRCbHVyIiwiYmx1ciIsIl9jbG9zZUxpc3QiLCJtZXRhZGF0YSIsIm9uTWV0YWRhdGFDaGFuZ2UiLCJzaG91bGRTZXRMYWJlbCIsImZvY3VzZWRJdGVtcyIsImN1cnJlbnRJdGVtIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiZG9tT3B0aW9uIiwicXVlcnlTZWxlY3RvckFsbCIsImNvbnRhaW5lciIsInNjcm9sbFRvcCIsIm9mZnNldFRvcCIsImNsaWVudEhlaWdodCIsImNoaWxkIiwicGFyZW50Tm9kZSIsImlzT3duZXIiLCJidXR0b24iLCJfc2VsZWN0T3B0aW9uIiwiZ2V0QXR0cmlidXRlIiwiX2lzUGFyZW50T2YiLCJrZXlDb2RlIiwicHJldmVudERlZmF1bHQiLCJfZm9jdXNOZXh0T3B0aW9uIiwiX2ZvY3VzUHJldk9wdGlvbiIsImlucHV0U3R5bGVzIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsInBvcHVwU3R5bGUiLCJpbnB1dE9mZnNldCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImlucHV0V2lkdGgiLCJ3aWR0aCIsImlucHV0SGVpZ2h0IiwiaGVpZ2h0IiwidG9wIiwiaW5uZXJIZWlnaHQiLCJvZmZzZXRMZWZ0IiwibGVmdCIsImF2YWlsYWJsZVNwYWNlIiwibWF4SGVpZ2h0IiwibWluV2lkdGgiLCJmb2N1cyIsImFycm93Q2xhc3NlcyIsIm9wdGlvbnNQb3B1cCIsImxvYWRpbmdFbGVtZW50Iiwibm90Rm91bmRFbGVtZW50Iiwib3B0aW9uQ2xhc3NOYW1lcyIsImNvbHVtbktleSIsIkZvcm1FeHByZXNzQXBpIiwibWlkZGxld2FyZXMiLCJnZXREYXRhIiwicXVlcnkiLCJfZ2V0TW9kZWwiLCJfcmVzdWx0Iiwic3VibWl0IiwidmFsaWRhdGUiLCJpc1ZhbGlkUmVjb3JkIiwiZXhwcmVzcyIsIlJvdXRlciIsInBvc3QiLCJfYWRkTWlkZWx3YXJlcyIsIm1ldGhvZCIsImRlZmF1bHRWYWx1ZXMiLCJ2YWxpZGF0aW9uIiwiX3ZhbGlkYXRpb24iLCJfZGF0YSIsInZhbGlkRXJyb3JzIiwidHJpZ2dlciIsIl9jaGFuZ2VzIiwiX2Vycm9ycyIsIl93YXJuaW5ncyIsIl93YXJuaW5nc1ZhbGlkYXRvciIsIl9ldmVudEVtaXR0ZXIiLCJFdmVudEVtaXR0ZXIiLCJfaXNOb3RJbml0aWFsaXplZCIsIl92YWxpZGF0ZUZvcm0iLCJ2YWxpZGF0ZUZvcm0iLCJfb25Nb2RlbENoYW5nZSIsImNsZWFyQ2hhbmdlcyIsImNsZWFyRXJyb3IiLCJjbGVhclZhbGlkYXRpb24iLCJ1cGRhdGVGaWVsZCIsInZhbGlkYXRlRmllbGQiLCJfZ2V0RGF0YSIsIl9nZXRDaGFuZ2VzIiwiX2lzU3VibWl0dGluZyIsInNob3dEZXBlbmRlbnRGaWVsZHMiLCJfcGFydGlhbEVycm9yQ2hlY2tpbmciLCJwYXJ0aWFsRXJyb3JDaGVja2luZyIsIl9wYXJ0aWFsRXJyb3JDaGVja2luZ0RlZmF1bHQiLCJzdWJtaXRBbGwiLCJ3YXJuaW5nc1ZhbGlkYXRvciIsInZhbGlkYXRpbmciLCJfaGlkZGVuVmFsaWRhdGlvbkZpZWxkcyIsInN1Ym1pdHRpbmciLCJvbiIsIl9zZXRTdGF0ZSIsImlzTG9hZGVkIiwiX2lzTG9hZGVkIiwiZW1wdHlEYXRhIiwib3JpZ2luYWxEYXRhIiwid2FybmluZ3MiLCJpc1N1Ym1pdHRpbmciLCJfZ2V0RmllbGRzIiwiX2dldENoYW5nZXNGaWVsZHMiLCJfZ2V0RGlzcGxheWVkRXJyb3JzIiwib2ZmIiwibGlzdGVuZXJDb3VudCIsInJlbW92ZUFsbExpc3RlbmVycyIsImNvdW50T2ZIaWRkZW5WYWxpZGF0aW9uRmllbGRzVG9SZW1vdmUiLCJhY3R1YWxDaGFuZ2VzIiwic3BsaWNlIiwiY2xlYXJGaWVsZCIsImNsZWFyIiwiX3J1blZhbGlkYXRvciIsImRpc3BsYXllZEVycm9ycyIsImRpc3BsYXllZFdhcm5pbmciLCJwcm94eSIsIlByb3h5IiwiZmllbGROYW1lIiwiaXNDaGFuZ2VkIiwiZ2V0RmllbGRFcnJvck1lc3NhZ2VzIiwiX2lzRGVwZW5kZW50RmllbGQiLCJmaWx0ZXJlZEVycm9ycyIsImlzRmllbGRQcmlzdGluZSIsImdldEFsbCIsIm91dHB1dCIsImFwaSIsIl92YWxpZGF0b3IiLCJfeGhyIiwiX2FwaVVybCIsInBhcnNlZFVybCIsInVybCIsInNlYXJjaCIsInVyaSIsImhlYWRlcnMiLCJHcmlkVG9Gb3JtQ3JlYXRlIiwiaW5pdGlhbERhdGEiLCJfYWRhcHRlciIsIkdyaWRUb0Zvcm1VcGRhdGUiLCJfb25VcGRhdGVIYW5kbGVycyIsIm9yaWdpbmFsQ2FsbGJhY2siLCJ3cmFwcGVkQ2FsbGJhY2siLCJuZXdPblVwZGF0ZUhhbmRsZXJzIiwiaGFuZGxlciIsImdldFJlY29yZCIsInVwZGF0ZSIsImZvcm0iLCJvbkZvcm1DaGFuZ2UiLCJhZGRDaGFuZ2VMaXN0ZW5lciIsInJlbW92ZUNoYW5nZUxpc3RlbmVyIiwibmV3Rm9ybVN0YXRlIiwiZ2V0SW5pdGlhbFN0YXRlIiwiX2hhbmRsZU1vZGVsQ2hhbmdlIiwiX2Zvcm1NaXhpbiIsImNvbXBvbmVudFdpbGxNb3VudCIsIl9pc1VubW91bnRlZCIsImNvbXBvbmVudFdpbGxVbm1vdW50IiwiaW5pdEZvcm0iLCJjYWxsYmFja2lmeSIsIl9pbml0U3RhdGUiLCJnbG9iYWxFcnJvciIsImdldENoYW5nZXMiLCJoYXNDaGFuZ2VzIiwiaGFzRXJyb3IiLCJlbnRyeSIsInBlbmRpbmdDbGVhckVycm9ycyIsIm9uZUZpZWxkIiwiZ2V0T3JpZ2luYWxEYXRhIiwiZ2V0VmFsaWRhdGlvbkVycm9ycyIsIm1lcmdlIiwiZ2V0RmllbGRFcnJvcnMiLCJnZXRHbG9iYWxFcnJvciIsImF1dG9TdWJtaXQiLCJhdXRvU3VibWl0SGFuZGxlciIsInN1Ym1pdERhdGEiLCJ2YWxpZGF0aW9uRXJyb3IiLCJjbGVhckZpZWxkQ2hhbmdlcyIsInBhcnRpYWxFcnJvckNoZWNraW5nRGVmYXVsdCIsInNldFBhcnRpYWxFcnJvckNoZWNraW5nIiwic3RvcCIsImNvbXBsZXRlZCIsImNvbXBsZXRlRXJyb3IiLCJvbkNvbXBsZXRlIiwiZXJyb3JzV2l0aFBhcnRpYWxDaGVja2luZyIsIlJFU0VUX01PREVMIiwiUkVTRVRfVklFV19DT0xVTU5TIiwiUkVTRVRfU09SVCIsIlJFU0VUX1ZJRVdfQ09VTlQiLCJSRVNFVF9TRUxFQ1RFRF9DT0xVTU5TIiwiUkVTRVRfQkxBQ0tfTElTVF9NT0RFIiwic29ydEVsZW1lbnRQcm9wIiwiY29sdW1uIiwiZGlyZWN0aW9uIiwic29ydFByb3AiLCJhcnJheU9mIiwiY29scyIsInZpZXdDb2x1bW5zIiwic2VsZWN0ZWQiLCJwYWdlIiwiZGVmYXVsdFZpZXdDb3VudCIsInZpZXdDb3VudCIsInZpZXdWYXJpYW50cyIsIm9uQ2hhbmdlVmlld0NvdW50Iiwib25FcnJvciIsIm9uUGFnZUxvYWQiLCJvbkluaXQiLCJvbkRlc3Ryb3kiLCJvblNlbGVjdGVkQ2hhbmdlIiwib25Tb3J0aW5nIiwibXVsdGlwbGVTb3J0aW5nIiwic2VsZWN0QWxsU3RhdHVzIiwib25Ub2dnbGVTZWxlY3RlZCIsIm9uVG9nZ2xlU2VsZWN0QWxsIiwiZGVmYXVsdFNvcnQiLCJwcm9wTmFtZSIsInJlc3QiLCJ2YWxpZFByb3AiLCJzb3J0Iiwic2F2ZUZ1bGxSZWNvcmQiLCJjcmVhdGVSZWFjdENsYXNzIiwiR3JpZENvbHVtbnNNaXhpbiIsImdyaWRNaXhpblBhZ2luYXRpb24iLCJncmlkTWl4aW5TdGF0dXNlcyIsImdyaWRNaXhpblNvcnRpbmciLCJncmlkTWl4aW5EYXRhIiwiZ3JpZE1peGluRWRpdG9yIiwiZ3JpZE1peGluVUkiLCJncmlkTWl4aW5TZWxlY3QiLCJnZXREZWZhdWx0UHJvcHMiLCJfdGhyb3R0bGVkVXBkYXRlVGFibGUiLCJ1cGRhdGVUYWJsZSIsIl92YWxpZGF0ZVJvdyIsImNvdW50Iiwic3RhdHVzTWFwIiwic3RhdHVzZXMiLCJfZ2V0RGVmYXVsdFNvcnQiLCJ0b3RhbHMiLCJyZWNvcmRzSW5mbyIsIm1haW5JZHMiLCJlZGl0b3IiLCJjb2xzV2l0aEVzY2FwZUVycm9ycyIsInNlbGVjdEJsYWNrTGlzdE1vZGUiLCJzaG93TG9hZGVyIiwiY29tcG9uZW50RGlkTW91bnQiLCJfb25SZWNvcmRzQ3JlYXRlZCIsIl9zZXREYXRhIiwiY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyIsIm9sZFByb3BzIiwicmVzZXQiLCJibGFja0xpc3RNb2RlIiwiX3NldFBhZ2UiLCJfcmVuZGVyQm9keSIsInJlbmRlclNjcm9sbGFibGVHcmlkIiwiZ3JpZENsYXNzTmFtZXMiLCJfZm9ybUhlYWRlciIsImNvbEdyb3VwIiwicm93IiwiY29sS2V5IiwiY29sIiwicm93S2V5IiwiX2dldEhlYWRlckNlbGxIVE1MIiwib25DbGljayIsIl9zb3J0Q29sIiwiX2hhbmRsZUhlYWRlckNlbGxDbGljayIsImNvbFNwYW4iLCJyb3dTcGFuIiwicm93cyIsIl9faHRtbCIsImxvYWRlciIsIl9oYW5kbGVCb2R5Q2xpY2siLCJ0Ym9keSIsInRCb2R5IiwiX3JlbmRlclRvdGFscyIsIl9yZW5kZXJQYWdpbmF0aW9uIiwicmVuZGVyR3JpZCIsImZvcm1hdENvbHVtbnMiLCJjb2x1bW5zIiwiZm9ybWF0dGVkQ29sdW1ucyIsImNvbHVtbklkIiwicGFyZW50IiwiZm9ybWF0UmVjb3JkIiwiZm9ybWF0dGVkUmVjb3JkIiwidmlld0NvbHVtbiIsImZvcm1hdERhdGEiLCJyZWNvcmRzIiwiZm9ybWF0dGVkIiwiZ2V0RmllbGRzIiwiYXNzZXJ0VmFsaWRWaWV3Q29sdW1ucyIsIm5vdEV4aXN0Q29sdW1ucyIsImdyaWRNb2RlbCIsImV4cG9ydGVyIiwibGltaXQiLCJvZmZzZXQiLCJ0b0NTViIsImNzdiIsImNzdkRhdGEiLCJtaW1lIiwiX2lzVmlld0NvbHVtbiIsImxhc3RQYXJlbnQiLCJET00iLCJfZ2V0Q29sdW1uQ2xhc3MiLCJjbGFzc05hbWVzIiwiYWRkSW5mbyIsIm9uQ2xpY2tSZWZzIiwic29ydFBhcmFtcyIsIl9nZXRTb3J0UGFyYW1zIiwiX2dldEZpZWxkc1RvUmVuZGVyIiwiX2lzRmllbGRBZmZlY3RzUmVuZGVyIiwiX2dldERlcGVuZGVudENvbHVtbnMiLCJkZXBlbmRlbnRDb2x1bW5zIiwiZGVwZW5kZW5jeUZpZWxkcyIsImNvbHVtbk5hbWUiLCJzb21lIiwicmVuZGVyRmllbGQiLCJHcmlkRGF0YU1peGluIiwicmVjb3JkSWQiLCJfZ2V0Um93SUQiLCJfc2V0Um93Q2hhbmdlcyIsInJlYWx0aW1lIiwic2F2ZSIsIm9uUmVhbHRpbWVTdWJtaXQiLCJfZ2V0UmVjb3JkV2l0aENoYW5nZXMiLCJfZ2V0UmVjb3JkQ2hhbmdlcyIsImdldFJlY29yZFdhcm5pbmdzIiwiZ2V0V2FybmluZ3MiLCJnZXRSZWNvcmRFcnJvcnMiLCJfZ2V0UmVjb3JkRXJyb3JzIiwiZ2V0TW9kZWwiLCJyb3dDaGFuZ2VzIiwicmVtb3ZlUmVjb3JkU3RhdHVzQWxsIiwiX2RhdGFPYmplY3RUb0FycmF5IiwidW5oYW5kbGVkRXJyb3JzIiwiX2lzTWFpblJvdyIsIl9yZW1vdmVSZWNvcmQiLCJlcnJvckhhbmRsZXIiLCJjbGVhclJlY29yZENoYW5nZXMiLCJfdXBkYXRlUm93IiwiY2xlYXJBbGxDaGFuZ2VzIiwiX2lzU29ydGluZ1Byb3BzTW9kZSIsIl9yZXNldFNvcnRpbmciLCJfc2V0UmVjb3JkRGF0YSIsIl9pc1JlY29yZExvYWRlZCIsIl9yZW5kZXJCaW5kcyIsIl9oYXNXYXJuaW5nIiwiX2NoZWNrRmllbGRJblZhbGlkYXRpb24iLCJfaGFzRXJyb3IiLCJfaXNDaGFuZ2VkIiwiX2NoZWNrV2FybmluZ3MiLCJfZ2V0QmluZFBhcmFtIiwiZWRpdG9yRmllbGQiLCJfZGF0YUFycmF5VG9PYmplY3QiLCJpbmZvIiwiX2dldEFkZGl0aW9uYWxJZHMiLCJhZGRpdGlvbmFsSWRzIiwiX2dldFJlY29yZHNXaXRoU3RhdHVzIiwicm93SWQiLCJ0b3VjaGVkQ2hhbmdlcyIsIl9yZW1vdmVUUiIsIl9jaGVja1ZhbGlkYXRvckVycm9ycyIsInJlY29yZElkcyIsIkdyaWRFZGl0b3JNaXhpbiIsIl9yZW5kZXJFZGl0b3IiLCJiaW5kcyIsImZvY3VzRG9uZSIsIl9pc0VkaXRvclZpc2libGUiLCJlZGl0b3JDb250ZXh0IiwibmV4dFZhbHVlIiwiX29uQ2hhbmdlRWRpdG9yIiwiX29uRm9jdXNFZGl0b3IiLCJfdW5tb3VudEVkaXRvciIsIl9vbkJsdXJFZGl0b3IiLCJvbktleVVwIiwiaXNTZWxlY3RlZCIsIl9yZW5kZXJDZWxsIiwiY29udGV4dCIsIkdyaWRQYWdpbmF0aW9uTWl4aW4iLCJoYW5kbGVDaGFuZ2VWaWV3Q291bnQiLCJfaXNWaWV3Q291bnRQcm9wc01vZGUiLCJzZXRWaWV3Q291bnQiLCJoYW5kbGVGaXJzdFBhZ2UiLCJzZXRQYWdlIiwiaGFuZGxlTGFzdFBhZ2UiLCJnZXRQYWdlc0NvdW50IiwiaGFuZGxlUHJldlBhZ2UiLCJoYW5kbGVOZXh0UGFnZSIsImhhbmRsZVJlZnJlc2hUYWJsZSIsImdldEN1cnJlbnRQYWdlIiwiZ2V0Q291bnRSZWNvcmRzIiwiX2NoZWNrUGFnZSIsImdldFZpZXdDb3VudCIsImNlaWwiLCJ2aWV3IiwiR3JpZFNlbGVjdE1peGluIiwic2V0U2VsZWN0ZWRSZWNvcmRzIiwic2VsZWN0ZWRJZHMiLCJmb3JjZVVwZGF0ZSIsIl9lbWl0Q2hhbmdlU2VsZWN0ZWROdW0iLCJzZWxlY3RSZWNvcmQiLCJpZ25vcmVCbGFja0xpc3QiLCJ1bnNlbGVjdFJlY29yZCIsInVuc2VsZWN0QWxsIiwic2VsZWN0QWxsIiwicG9zIiwidG9nZ2xlU2VsZWN0ZWQiLCJ0b2dnbGVTZWxlY3RBbGwiLCJpc1NlbGVjdEJsYWNrTW9kZSIsImdldEFsbFNlbGVjdGVkIiwiZ2V0U2VsZWN0QWxsU3RhdHVzIiwic2VsZWN0ZWRDb3VudCIsIkdyaWRTb3J0aW5nTWl4aW4iLCJnZXRTb3J0RGlyZWN0aW9uIiwicmVzZXRTb3J0aW5nIiwibmV3T3JkZXIiLCJjeWNsZSIsInNvcnRDeWNsZSIsIm5ld1NvcnRzIiwic29ydEVsZW1lbnQiLCJjdXJyZW50U29ydEluZGV4IiwiY3VycmVudFNvcnQiLCJzb3J0cyIsInNvcnRJbmRleCIsIl9zb3J0aW5nVG9BcnJheSIsInRvQXJyYXkiLCJHcmlkU3RhdHVzZXNNaXhpbiIsImFkZFJlY29yZFN0YXR1cyIsInN1bSIsIl9nZXRTdGF0dXNCaXQiLCJlbGVtIiwiYWRkUmVjb3JkU3RhdHVzR3JvdXAiLCJiaXQiLCJuZWVkVGFibGVVcGRhdGUiLCJyZW1vdmVSZWNvcmRTdGF0dXMiLCJoYXNSZWNvcmRTdGF0dXMiLCJnZXRBbGxXaXRoU3RhdHVzIiwiX2dldFJvd1N0YXR1c05hbWVzIiwibmFtZXMiLCJzdGF0dXNOYW1lIiwiaWRzIiwiR3JpZFVJTWl4aW4iLCJyZWZQYXJlbnQiLCJoYXNBdHRyaWJ1dGUiLCJfaGFuZGxlQ2VsbENsaWNrIiwicmVmIiwiY29sSWQiLCJjb2x1bW5Db25maWciLCJleHRyYSIsImV4dHJhUmVjb3JkcyIsImNlbGxIdG1sIiwiX2VzY2FwZVJlY29yZCIsImVzY2FwZWRSZWNvcmQiLCJuZWVkRXNjYXBpbmciLCJfZ2V0Q2VsbEhUTUwiLCJpbml0aWFsUmVjb3JkIiwiX2dldFJvd0hUTUwiLCJncmlkUm93Q2xhc3MiLCJodG1sIiwiZ3JpZENlbGxDbGFzcyIsImh0bWxFeHRyYSIsImh0bWxCb2R5Iiwic29ydGVkIiwiaW5uZXJIVE1MIiwicGFyYW0iLCJyZW1vdmVSb3ciLCJpc1Njcm9sbGFibGUiLCJ0b3RhbHNEaXNwbGF5ZWQiLCJ0b3RhbHNSb3dIVE1MIiwiY2VsbCIsImNlbGxIVE1MIiwiY2VsbENsYXNzTGlzdCIsImZpbHRlciIsIl9pZCIsIl9maWx0ZXJzSGFuZGxlciIsImZpbHRlcnNIYW5kbGVyIiwiX3JlcXVpcmVkRmllbGRzIiwicmVxdWlyZWRGaWVsZHMiLCJjdXJyZW50RGF0YSIsImNyZWF0ZWRSZWNvcmRzSWRzIiwidXBkYXRlZFJlY29yZHMiLCJkZWxldGVkUmVjb3Jkc0lkcyIsIl9nZXRJRCIsImNsb25lZFJlY29yZCIsIl9jcmVhdGUiLCJzb3J0RmllbGQiLCJzb3J0TW9kZSIsInByZXYiLCJmaWx0ZXJzIiwic3RhcnQiLCJlbmQiLCJfZ2V0UmVjb3JkQnlJRCIsInJldHVyblJlY29yZCIsImFwcGxpZWRDaGFuZ2VzIiwiREVGQVVMVF9NQVhfRklMRV9TSVpFIiwiR3JpZEV4cHJlc3NBcGkiLCJtdWx0aXBhcnRGb3JtRGF0YSIsIm1heEZpbGVTaXplIiwidXBsb2FkIiwibXVsdGVyIiwibGltaXRzIiwiZmlsZVNpemUiLCJyZWFkR2V0IiwiX2NvbW1vblJlYWRNaWRkbGV3YXJlIiwicmVhZFBvc3QiLCJmaWxlc0J5UmVjb3JkSWQiLCJmaWxlcyIsImZpZWxkbmFtZSIsImJ1ZmZlciIsImRlY29kZVVSSSIsInB1dCIsInVzZSIsInNlbmQiLCJNQVhfVVJJX0xFTkdUSCIsInZhbGlkYXRlT25DbGllbnQiLCJfdmFsaWRhdGVPbkNsaWVudCIsIl9tdWx0aXBhcnRGb3JtRGF0YUVuY29kZWQiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwib3JkaW5hcnlEYXRhIiwicHJvcCIsImFwcGVuZCIsInF1ZXJ5VXJsIiwiX2dldFF1ZXJ5VXJsIiwiX3JlYWRQb3N0UmVxdWVzdCIsInBhdGhuYW1lIiwiZm9ybURhdGFDaGFuZ2VzIiwib3JkaW5hcnlSZWNvcmRDaGFuZ2VzIiwiZmlsZUZpZWxkTmFtZXMiLCJmaWx0ZXJlZFJlY29yZCIsImFnciIsInJlcXVlc3RCb2R5IiwiTGlzdEV4cHJlc3NBcGkiLCJ2IiwiTGlzdFhNTEh0dHBSZXF1ZXN0TW9kZWwiLCJhcGlVUkwiLCJfYXBpVVJMIiwiYnJvd3Nlck1vZHVsZSIsImdyaWRFeHByZXNzQXBpIiwibGlzdEV4cHJlc3NBcGkiLCJmb3JtRXhwcmVzc0FwaSJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELE87QUNWQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGtEQUEwQyxnQ0FBZ0M7QUFDMUU7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxnRUFBd0Qsa0JBQWtCO0FBQzFFO0FBQ0EseURBQWlELGNBQWM7QUFDL0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUF5QyxpQ0FBaUM7QUFDMUUsd0hBQWdILG1CQUFtQixFQUFFO0FBQ3JJO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsbUNBQTJCLDBCQUEwQixFQUFFO0FBQ3ZELHlDQUFpQyxlQUFlO0FBQ2hEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDhEQUFzRCwrREFBK0Q7O0FBRXJIO0FBQ0E7OztBQUdBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUNsRkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7OztBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsSUFBSSxDQUFDQSxNQUFNLENBQUNDLGNBQVosRUFBNEI7QUFDMUJDLHFCQUFPLENBQUMsd0RBQUQsQ0FBUDtBQUNEOztBQUVELElBQU1DLFFBQVEsR0FBRztBQUNmQyxrQkFBZ0IsRUFBaEJBLHFFQURlO0FBRWZDLE1BQUksRUFBRUMsdURBRlM7QUFHZkMsTUFBSSxFQUFFQyx5REFIUztBQUlmQyxhQUFXLEVBQVhBLHlEQUplO0FBS2ZDLGlCQUFlLEVBQUVDLG9FQUFTLENBQUNDLE1BTFo7QUFNZkMsZ0JBQWMsRUFBZEEsbUVBTmU7QUFPZkMsUUFBTSxFQUFOQSxxRUFQZTtBQVFmQyxrQkFBZ0IsRUFBaEJBLDJFQVJlO0FBU2ZDLFFBQU0sRUFBRTtBQUNOWCxRQUFJLEVBQUU7QUFDSlksU0FBRyxFQUFFQyxrRUFERDtBQUVKQyxnQkFBVSxFQUFFQyx5RUFBbUJBO0FBRjNCLEtBREE7QUFLTkMsVUFBTSxFQUFOQSx1REFMTTtBQU1OZCxRQUFJLEVBQUVlLHdEQU5BO0FBT05DLFdBQU8sRUFBRUMsMkRBUEg7QUFRTkMsUUFBSSxFQUFFO0FBQ0pSLFNBQUcsRUFBRVMsMkRBQVlBO0FBRGI7QUFSQSxHQVRPO0FBcUJmQyxnQkFBYyxFQUFFO0FBQ2RwQixRQUFJLEVBQUVxQixnRUFEUTtBQUVkdkIsUUFBSSxFQUFFd0IsdUVBRlE7QUFHZEosUUFBSSxFQUFFSyxnRUFBaUJBO0FBSFQsR0FyQkQ7QUEwQmZDLFVBQVEsRUFBRTtBQUNSMUIsUUFBSSxFQUFFO0FBQ0oyQixrQkFBWSxFQUFaQSx3RUFESTtBQUVKQyxrQkFBWSxFQUFaQSx3RUFBWUE7QUFGUjtBQURFLEdBMUJLO0FBZ0NmQyxTQUFPLEVBQUU7QUFDUEMsVUFBTSxFQUFOQSx3REFETztBQUVQQyxjQUFVLEVBQVZBLDREQUZPO0FBR1BDLGNBQVUsRUFBVkEsNERBSE87QUFJUEMsWUFBUSxFQUFSQSwwREFKTztBQUtQQyxVQUFNLEVBQU5BLHdEQUFNQTtBQUxDLEdBaENNO0FBdUNmQyxnQkFBYyxFQUFkQSwrREF2Q2U7QUF3Q2ZDLGVBQWEsRUFBYkEsOERBeENlO0FBeUNmQyxZQUFVLEVBQUU7QUFDVixlQUFTQyx5RUFEQztBQUVWQyxRQUFJLEVBQUVDLHNFQUZJO0FBR1YsWUFBTUMsc0VBSEk7QUFJVkMsT0FBRyxFQUFFQyxxRUFKSztBQUtWLGFBQU9DLHVFQUxHO0FBTVZDLFVBQU0sRUFBRUMsd0VBTkU7QUFPVkMsV0FBTyxFQUFFQyx5RUFQQztBQVFWQyxVQUFNLEVBQUVDLHdFQVJFO0FBU1ZDLFlBQVEsRUFBRUMsMEVBQXNCQTtBQVR0QixHQXpDRztBQW9EZkMsUUFBTSxFQUFFO0FBQ05uRCxRQUFJLEVBQUVvRCxvREFBU0E7QUFEVCxHQXBETztBQXVEZkMsTUFBSSxFQUFFQyx5REFBUyxDQUFDQyxHQXZERDtBQXdEZkMsTUFBSSxFQUFFRix5REFBUyxDQUFDZDtBQXhERCxDQUFqQjtBQTJEZTVDLHVFQUFmLEU7Ozs7Ozs7Ozs7OztBQzlHQTtBQUFBO0FBQUE7Ozs7Ozs7QUFRQTs7QUFFQSxTQUFTcUMsY0FBVCxDQUF3QndCLE9BQXhCLEVBQWlDO0FBQy9CQyxPQUFLLENBQUNDLElBQU4sQ0FBVyxJQUFYLEVBQWlCRixPQUFqQjtBQUVBLE9BQUtHLElBQUwsR0FBWSxnQkFBWjtBQUNBLE9BQUtILE9BQUwsR0FBZUEsT0FBZjtBQUNBLE9BQUtJLE1BQUwsR0FBYyxLQUFLQyxVQUFMLEdBQWtCLEdBQWhDO0FBQ0EsT0FBS0MsS0FBTCxHQUFhQyx1REFBUSxFQUFyQjtBQUNEOztBQUVEL0IsY0FBYyxDQUFDZ0MsU0FBZixHQUEyQkMsTUFBTSxDQUFDN0QsTUFBUCxDQUFjcUQsS0FBSyxDQUFDTyxTQUFwQixDQUEzQjtBQUNBaEMsY0FBYyxDQUFDZ0MsU0FBZixDQUF5QkUsV0FBekIsR0FBdUNsQyxjQUF2QztBQUVlQSw2RUFBZixFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN0QkE7Ozs7Ozs7QUFRQTtBQUVBOzs7O0lBR01tQyxXOzs7QUFDSix5QkFBYztBQUFBOztBQUNaLFNBQUtDLFlBQUwsR0FBb0IsRUFBcEI7QUFDRDtBQUVEOzs7Ozs7Ozs7O3VCQU1HQyxLLEVBQU9DLEUsRUFBSTtBQUNaLFVBQUkscUVBQU8sS0FBS0YsWUFBTCxDQUFrQkMsS0FBbEIsQ0FBUCxNQUFvQyxRQUF4QyxFQUFrRDtBQUNoRCxhQUFLRCxZQUFMLENBQWtCQyxLQUFsQixJQUEyQixFQUEzQjtBQUNEOztBQUNELFdBQUtELFlBQUwsQ0FBa0JDLEtBQWxCLEVBQXlCRSxJQUF6QixDQUE4QkQsRUFBOUI7QUFDRDtBQUVEOzs7Ozs7Ozs7d0JBTUlELEssRUFBT0MsRSxFQUFJO0FBQ2IsVUFBSSxLQUFLRixZQUFMLENBQWtCQyxLQUFsQixDQUFKLEVBQThCO0FBQzVCLGFBQUtELFlBQUwsQ0FBa0JDLEtBQWxCLElBQTJCRyxzREFBTyxDQUFDLEtBQUtKLFlBQUwsQ0FBa0JDLEtBQWxCLENBQUQsRUFBMkJDLEVBQTNCLENBQWxDO0FBQ0Q7QUFDRjtBQUVEOzs7Ozs7Ozs7NEJBTVFELEssRUFBa0I7QUFDeEIsVUFBSSxDQUFDLEtBQUtELFlBQUwsQ0FBa0JDLEtBQWxCLENBQUQsSUFBNkIsQ0FBQyxLQUFLRCxZQUFMLENBQWtCQyxLQUFsQixFQUF5QkksTUFBM0QsRUFBbUU7QUFDakU7QUFDRDs7QUFIdUIsd0NBQVJDLE1BQVE7QUFBUkEsY0FBUTtBQUFBOztBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUl4Qiw2QkFBeUIsS0FBS04sWUFBTCxDQUFrQkMsS0FBbEIsQ0FBekIsOEhBQW1EO0FBQUEsY0FBeENNLFVBQXdDO0FBQ2pEQSxvQkFBVSxNQUFWLFNBQWNELE1BQWQ7QUFDRDtBQU51QjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBT3pCO0FBRUQ7Ozs7Ozs7O2tDQUtjTCxLLEVBQU87QUFDbkIsYUFBTyxLQUFLRCxZQUFMLENBQWtCQyxLQUFsQixJQUEyQixLQUFLRCxZQUFMLENBQWtCQyxLQUFsQixFQUF5QkksTUFBcEQsR0FBNkQsQ0FBcEU7QUFDRDtBQUVEOzs7Ozs7Ozt1Q0FLbUJKLEssRUFBTztBQUN4QixXQUFLRCxZQUFMLENBQWtCQyxLQUFsQixJQUEyQixFQUEzQjtBQUNEOzs7Ozs7QUFHWUYsMEVBQWYsRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDN0VBOzs7Ozs7O0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFFQSxJQUFNUyxXQUFXLEdBQUcsVUFBcEI7O0lBRU1DLE07Ozs7O0FBQ0osa0JBQVlDLEtBQVosRUFBbUI7QUFBQTs7QUFBQTs7QUFDakIsME1BQU1BLEtBQU47QUFDQSxVQUFLQyxvQkFBTCxHQUE0QixNQUFLQSxvQkFBTCxDQUEwQkMsSUFBMUIsNEZBQTVCO0FBQ0EsVUFBS0Msc0JBQUwsR0FBOEIsTUFBS0Esc0JBQUwsQ0FBNEJELElBQTVCLDRGQUE5QjtBQUhpQjtBQUlsQjs7Ozt3Q0FFbUI7QUFDbEJFLGNBQVEsQ0FBQ0MsZ0JBQVQsQ0FBMEIsV0FBMUIsRUFBdUMsS0FBS0osb0JBQTVDLEVBQWtFLEtBQWxFO0FBQ0FHLGNBQVEsQ0FBQ0MsZ0JBQVQsQ0FBMEIsUUFBMUIsRUFBb0MsS0FBS0Ysc0JBQXpDLEVBQWlFLElBQWpFO0FBRUEsVUFBTUcsTUFBTSxHQUFHRixRQUFRLENBQUNHLGFBQVQsQ0FBdUIsS0FBdkIsQ0FBZjtBQUNBSCxjQUFRLENBQUNJLElBQVQsQ0FBY0MsV0FBZCxDQUEwQkgsTUFBMUI7QUFDQUEsWUFBTSxDQUFDSSxTQUFQLEdBQW1CWixXQUFuQjtBQUNBLFdBQUtRLE1BQUwsR0FBY0EsTUFBZDtBQUNBLFdBQUtLLFlBQUw7QUFDRDs7OzJDQUVzQjtBQUNyQlAsY0FBUSxDQUFDUSxtQkFBVCxDQUE2QixXQUE3QixFQUEwQyxLQUFLWCxvQkFBL0MsRUFBcUUsS0FBckU7QUFDQUcsY0FBUSxDQUFDUSxtQkFBVCxDQUE2QixRQUE3QixFQUF1QyxLQUFLVCxzQkFBNUMsRUFBb0UsSUFBcEU7QUFFQVUsc0RBQVEsQ0FBQ0Msc0JBQVQsQ0FBZ0MsS0FBS1IsTUFBckM7QUFDQUYsY0FBUSxDQUFDSSxJQUFULENBQWNPLFdBQWQsQ0FBMEIsS0FBS1QsTUFBL0I7QUFDRDs7O3lDQUVvQjtBQUNuQixXQUFLSyxZQUFMO0FBQ0Q7OzswQ0FFcUJLLE0sRUFBUTtBQUM1QixhQUFRQSxNQUFNLEtBQUssS0FBS1YsTUFBaEIsSUFBMEIsS0FBS0EsTUFBTCxDQUFZVyxRQUFaLENBQXFCRCxNQUFyQixDQUFsQztBQUNEOzs7eUNBRW9CRSxDLEVBQUc7QUFDdEIsVUFBSSxLQUFLbEIsS0FBTCxDQUFXbUIsbUJBQWYsRUFBb0M7QUFDbEMsYUFBS25CLEtBQUwsQ0FBV21CLG1CQUFYLENBQStCRCxDQUEvQixFQUFrQyxLQUFLRSxxQkFBTCxDQUEyQkYsQ0FBQyxDQUFDRixNQUE3QixDQUFsQztBQUNEO0FBQ0Y7OzsyQ0FFc0JFLEMsRUFBRztBQUN4QixVQUFJLEtBQUtsQixLQUFMLENBQVdxQixxQkFBZixFQUFzQztBQUNwQyxhQUFLckIsS0FBTCxDQUFXcUIscUJBQVgsQ0FBaUNILENBQWpDLEVBQW9DLEtBQUtFLHFCQUFMLENBQTJCRixDQUFDLENBQUNGLE1BQTdCLENBQXBDO0FBQ0Q7QUFDRjs7O21DQUVjO0FBQ2JILHNEQUFRLENBQUNTLE1BQVQsQ0FDRSxrRUFDTUMsbURBQUksQ0FBQyxLQUFLdkIsS0FBTixFQUFhLENBQUMscUJBQUQsRUFBd0IsdUJBQXhCLENBQWIsQ0FEVixFQUdHLEtBQUtBLEtBQUwsQ0FBV3dCLFFBSGQsQ0FERixFQU1FLEtBQUtsQixNQU5QO0FBUUQ7Ozs2QkFFUTtBQUNQLGFBQU8sSUFBUDtBQUNEOzs7O0VBM0RrQm1CLDRDQUFLLENBQUNDLFM7O0FBOEQzQjNCLE1BQU0sQ0FBQzRCLFNBQVAsR0FBbUI7QUFDakJILFVBQVEsRUFBRUksaURBQVMsQ0FBQ0MsSUFESDtBQUVqQlYscUJBQW1CLEVBQUVTLGlEQUFTLENBQUNFLElBRmQ7QUFHakJULHVCQUFxQixFQUFFTyxpREFBUyxDQUFDRTtBQUhoQixDQUFuQjtBQU1lL0IscUVBQWYsRTs7Ozs7Ozs7Ozs7O0FDbkZBO0FBQUE7QUFBQTs7Ozs7OztBQVFBOztBQUVBLFNBQVM1QyxhQUFULEdBQXlCO0FBQ3ZCd0IsT0FBSyxDQUFDQyxJQUFOLENBQVcsSUFBWDtBQUVBLE9BQUtDLElBQUwsR0FBWSxlQUFaO0FBQ0EsT0FBS0gsT0FBTCxHQUFlLHdCQUFmO0FBQ0EsT0FBS00sS0FBTCxHQUFhQyx1REFBUSxFQUFyQjtBQUNEOztBQUVEOUIsYUFBYSxDQUFDK0IsU0FBZCxHQUEwQkMsTUFBTSxDQUFDN0QsTUFBUCxDQUFjcUQsS0FBSyxDQUFDTyxTQUFwQixDQUExQjtBQUNBL0IsYUFBYSxDQUFDK0IsU0FBZCxDQUF3QkUsV0FBeEIsR0FBc0NqQyxhQUF0Qzs7QUFFQUEsYUFBYSxDQUFDNEUscUJBQWQsR0FBc0MsVUFBVS9DLEtBQVYsRUFBaUI7QUFDckQsTUFBTWdELEdBQUcsR0FBRyxJQUFJN0UsYUFBSixFQUFaO0FBQ0E2RSxLQUFHLENBQUNoRCxLQUFKLElBQWEsT0FBT0EsS0FBcEI7QUFDQSxTQUFPZ0QsR0FBUDtBQUNELENBSkQ7O0FBTWU3RSw0RUFBZixFOzs7Ozs7Ozs7Ozs7QUMzQkE7QUFBQTtBQUFBOzs7Ozs7O0FBUUE7QUFFQSxJQUFNOEUsY0FBYyxHQUFHLEVBQXZCO0FBQ2UseUVBQVVILElBQVYsRUFBcUM7QUFBQSxNQUFyQkksV0FBcUIsdUVBQVAsS0FBTztBQUNsRCxNQUFNQyxRQUFRLEdBQUdMLElBQUksQ0FBQ2pELElBQXRCO0FBRUEsU0FBTyxZQUFtQjtBQUFBLHNDQUFOdUQsSUFBTTtBQUFOQSxVQUFNO0FBQUE7O0FBQ3hCLFFBQU1DLGlCQUFpQixHQUFHRCxJQUFJLENBQUN6QyxNQUFMLEdBQWMsQ0FBeEM7QUFDQSxRQUFNSCxFQUFFLEdBQUc0QyxJQUFJLENBQUNDLGlCQUFELENBQWY7O0FBRUEsUUFBSSxPQUFPN0MsRUFBUCxLQUFjLFVBQWQsSUFBNEIsQ0FBQ0EsRUFBRSxDQUFDOEMsdUJBQXBDLEVBQTZEO0FBQzNELFVBQUksQ0FBQ0wsY0FBYyxDQUFDTSxRQUFmLENBQXdCSixRQUF4QixDQUFELElBQXNDLENBQUNELFdBQTNDLEVBQXdEO0FBQ3RETSxrRUFBSSx1Q0FBZ0NMLFFBQWhDLHNDQUFvRU0sSUFBSSxDQUFDQyxTQUFMLENBQWVOLElBQWYsQ0FBcEUsRUFBSjtBQUNBSCxzQkFBYyxDQUFDeEMsSUFBZixDQUFvQjBDLFFBQXBCO0FBQ0Q7O0FBRUQsVUFBTVEsTUFBTSxHQUFHYixJQUFJLENBQUNjLEtBQUwsQ0FBVyxJQUFYLEVBQWlCUixJQUFqQixDQUFmOztBQUNBLFVBQUlPLE1BQU0sSUFBSUEsTUFBTSxDQUFDRSxJQUFyQixFQUEyQjtBQUN6QkYsY0FBTSxDQUNIRSxJQURILENBQ1EsVUFBQUMsSUFBSSxFQUFJO0FBQ1p0RCxZQUFFLENBQUMsSUFBRCxFQUFPc0QsSUFBUCxDQUFGO0FBQ0QsU0FISCxXQUlTLFVBQUFkLEdBQUcsRUFBSTtBQUNaeEMsWUFBRSxDQUFDd0MsR0FBRCxDQUFGO0FBQ0QsU0FOSDtBQU9EO0FBQ0YsS0FoQkQsTUFnQk87QUFDTCxhQUFPRixJQUFJLENBQUNjLEtBQUwsQ0FBVyxJQUFYLEVBQWlCUixJQUFqQixDQUFQO0FBQ0Q7QUFDRixHQXZCRDtBQXdCRCxDOzs7Ozs7Ozs7Ozs7QUN0Q0Q7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7OztBQVFBO0FBQ0E7O0FBRUEsU0FBU1csVUFBVCxDQUFvQkMsUUFBcEIsRUFBOEI7QUFDNUIsU0FBTyxJQUFJQyxPQUFKLENBQVksVUFBQ0MsT0FBRCxFQUFVQyxNQUFWLEVBQXFCO0FBQ3RDQyw4Q0FBRyxDQUFDSixRQUFELEVBQVcsVUFBQ2hCLEdBQUQsRUFBTXFCLFFBQU4sRUFBZ0I3QyxJQUFoQixFQUF5QjtBQUNyQyxVQUFJNkMsUUFBUSxDQUFDdEUsVUFBVCxLQUF3QixHQUE1QixFQUFpQztBQUMvQm1FLGVBQU8sQ0FBQzFDLElBQUQsQ0FBUDtBQUNBO0FBQ0Q7O0FBRUQsVUFBSSxDQUFDd0IsR0FBTCxFQUFVO0FBQ1JBLFdBQUcsR0FBRyxJQUFJckQsS0FBSixFQUFOO0FBQ0FxRCxXQUFHLENBQUNqRCxVQUFKLEdBQWlCc0UsUUFBUSxDQUFDdEUsVUFBMUI7QUFDQWlELFdBQUcsQ0FBQ3RELE9BQUosR0FBYyxrQkFBa0JzRCxHQUFHLENBQUNqRCxVQUFwQztBQUNEOztBQUVELFVBQUl5QixJQUFKLEVBQVU7QUFDUixZQUFJO0FBQ0YsY0FBTThDLFVBQVUsR0FBR2IsSUFBSSxDQUFDYyxLQUFMLENBQVcvQyxJQUFYLENBQW5CO0FBQ0F3QixhQUFHLENBQUN0RCxPQUFKLEdBQWM0RSxVQUFVLENBQUM1RSxPQUFYLElBQXNCOEIsSUFBcEM7QUFDRCxTQUhELENBR0UsT0FBT1UsQ0FBUCxFQUFVO0FBQ1ZjLGFBQUcsQ0FBQ3RELE9BQUosR0FBYzhCLElBQWQ7QUFDRDtBQUNGOztBQUVEMkMsWUFBTSxDQUFDbkIsR0FBRCxDQUFOO0FBQ0QsS0F0QkUsQ0FBSDtBQXVCRCxHQXhCTSxDQUFQO0FBeUJEOztBQUVELElBQUksQ0FBQ3pELGtEQUFTLENBQUNDLEdBQVYsQ0FBYyxLQUFkLENBQUwsRUFBMkI7QUFDekJELG9EQUFTLENBQUNkLEdBQVYsQ0FBYyxLQUFkLEVBQXFCc0YsVUFBckI7QUFDRDs7QUFFYyx5RUFBQ0MsUUFBRDtBQUFBLFNBQWN6RSxrREFBUyxDQUFDQyxHQUFWLENBQWMsS0FBZCxFQUFxQndFLFFBQXJCLENBQWQ7QUFBQSxDQUFmLEU7Ozs7Ozs7Ozs7O0FDM0NBOzs7Ozs7O0FBUUEsSUFBSSxPQUFPUSxNQUFQLEtBQWtCLFdBQWxCLElBQWlDLE9BQU9BLE1BQU0sQ0FBQ0MsWUFBZCxLQUErQixVQUFwRSxFQUFnRjtBQUM5RUQsUUFBTSxDQUFDQyxZQUFQLEdBQXdCLFlBQU07QUFDNUIsUUFBSUMsSUFBSSxHQUFHLEVBQVg7QUFDQSxRQUFJQyxJQUFJLEdBQUdELElBQVg7QUFDQSxRQUFNRSxFQUFFLEdBQUdDLElBQUksQ0FBQ0MsTUFBTCxFQUFYOztBQUVBLGFBQVNDLFNBQVQsQ0FBbUI3QyxDQUFuQixFQUFzQjtBQUNwQixVQUFJQSxDQUFDLENBQUM0QixJQUFGLEtBQVdjLEVBQWYsRUFBbUI7QUFDakI7QUFDRDs7QUFDREYsVUFBSSxHQUFHQSxJQUFJLENBQUNNLElBQVo7QUFDQSxVQUFNbEMsSUFBSSxHQUFHNEIsSUFBSSxDQUFDNUIsSUFBbEI7QUFDQSxhQUFPNEIsSUFBSSxDQUFDNUIsSUFBWjtBQUNBQSxVQUFJO0FBQ0w7O0FBRUQsUUFBSTBCLE1BQU0sQ0FBQ25ELGdCQUFYLEVBQTZCO0FBQzNCbUQsWUFBTSxDQUFDbkQsZ0JBQVAsQ0FBd0IsU0FBeEIsRUFBbUMwRCxTQUFuQyxFQUE4QyxLQUE5QztBQUNELEtBRkQsTUFFTztBQUNMUCxZQUFNLENBQUNTLFdBQVAsQ0FBbUIsV0FBbkIsRUFBZ0NGLFNBQWhDO0FBQ0Q7O0FBQ0QsV0FBT1AsTUFBTSxDQUFDVSxXQUFQLEdBQXFCLFVBQUFwQyxJQUFJLEVBQUk7QUFDbEM2QixVQUFJLEdBQUdBLElBQUksQ0FBQ0ssSUFBTCxHQUFZO0FBQUNsQyxZQUFJLEVBQUVBO0FBQVAsT0FBbkI7QUFDQTBCLFlBQU0sQ0FBQ1UsV0FBUCxDQUFtQk4sRUFBbkIsRUFBdUIsR0FBdkI7QUFDRCxLQUhNLEdBR0gsVUFBQTlCLElBQUksRUFBSTtBQUNWcUMsZ0JBQVUsQ0FBQ3JDLElBQUQsRUFBTyxDQUFQLENBQVY7QUFDRCxLQUxEO0FBTUQsR0ExQnNCLEVBQXZCO0FBMkJELEM7Ozs7Ozs7Ozs7OztBQ3BDRDtBQUFBO0FBQUE7Ozs7Ozs7QUFRQTtBQUVBLElBQU1HLGNBQWMsR0FBRyxFQUF2Qjs7QUFFQSxTQUFTbUMsU0FBVCxDQUFtQnRDLElBQW5CLEVBQXlCSSxXQUF6QixFQUFzQztBQUNwQyxNQUFNQyxRQUFRLEdBQUdMLElBQUksQ0FBQ2pELElBQXRCOztBQUVBLFdBQVN3RixXQUFULENBQXFCQyxJQUFyQixFQUEyQjtBQUN6QixRQUFJLENBQUNwQyxXQUFMLEVBQWtCO0FBQ2hCLFVBQUksQ0FBQ0QsY0FBYyxDQUFDTSxRQUFmLENBQXdCSixRQUF4QixDQUFMLEVBQXdDO0FBQ3RDSyxrRUFBSSxDQUFDOEIsSUFBRCxDQUFKO0FBQ0FyQyxzQkFBYyxDQUFDeEMsSUFBZixDQUFvQjBDLFFBQXBCO0FBQ0Q7QUFDRjtBQUNGOztBQUVELFNBQU8sWUFBNEI7QUFBQSxzQ0FBZm9DLGFBQWU7QUFBZkEsbUJBQWU7QUFBQTs7QUFDakMsUUFBSUMsT0FBSjtBQUNBLFFBQU1DLGVBQWUsR0FBRyxJQUFJeEIsT0FBSixDQUFZLFVBQUNDLE9BQUQsRUFBVUMsTUFBVixFQUFxQjtBQUN2RCxlQUFTdUIsaUJBQVQsQ0FBMkIxQyxHQUEzQixFQUFnQ2MsSUFBaEMsRUFBc0M7QUFDcEMsWUFBSWQsR0FBSixFQUFTO0FBQ1AsaUJBQU9tQixNQUFNLENBQUNuQixHQUFELENBQWI7QUFDRDs7QUFDRGtCLGVBQU8sQ0FBQ0osSUFBRCxDQUFQO0FBQ0Q7O0FBQ0Q0Qix1QkFBaUIsQ0FBQ3BDLHVCQUFsQixHQUE0QyxJQUE1QztBQUNBaUMsbUJBQWEsQ0FBQzlFLElBQWQsQ0FBbUJpRixpQkFBbkI7QUFDQUYsYUFBTyxHQUFHMUMsSUFBSSxNQUFKLFNBQVF5QyxhQUFSLENBQVY7QUFDRCxLQVZ1QixDQUF4Qjs7QUFZQSxRQUFJQyxPQUFKLEVBQWE7QUFDWCxVQUFJQSxPQUFPLENBQUMzQixJQUFSLElBQWdCMkIsT0FBTyxTQUEzQixFQUFtQztBQUNqQyxlQUFPQSxPQUFQO0FBQ0Q7O0FBQ0RILGlCQUFXLENBQ1QsZ0RBQXlDbEMsUUFBekMsaUNBQ2NNLElBQUksQ0FBQ0MsU0FBTCxDQUFlNkIsYUFBZixDQURkLDZCQUVZOUIsSUFBSSxDQUFDQyxTQUFMLENBQWU4QixPQUFmLENBRlosQ0FEUyxDQUFYO0FBS0EsYUFBT0MsZUFBUDtBQUNELEtBVkQsTUFVTztBQUNMSixpQkFBVyxDQUNULHNDQUErQmxDLFFBQS9CLHNEQUNjTSxJQUFJLENBQUNDLFNBQUwsQ0FBZTZCLGFBQWYsQ0FEZCxDQURTLENBQVg7QUFJQSxhQUFPRSxlQUFQO0FBQ0Q7QUFDRixHQS9CRDtBQWdDRDs7QUFFY0wsd0VBQWYsRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDMURBOzs7Ozs7O0FBUUE7QUFDQTs7QUFFQSxTQUFTTyxTQUFULENBQW1CQyxHQUFuQixFQUF3QkMsTUFBeEIsRUFBZ0M7QUFDOUIsTUFBSUMsTUFBSjtBQUNBLE1BQU1DLFFBQVEsR0FBRyxDQUFDLGNBQUQsRUFBaUIsa0JBQWpCLEVBQXFDLGNBQXJDLEVBQXFELGtCQUFyRCxDQUFqQjs7QUFFQSxNQUFJLEVBQUVILEdBQUcsWUFBWXpGLE1BQWpCLEtBQTRCeUYsR0FBRyxZQUFZSSxJQUEzQyxJQUFtREosR0FBRyxZQUFZSyxRQUFsRSxJQUE4RUwsR0FBRyxZQUFZTSxNQUFqRyxFQUF5RztBQUN2RyxXQUFPTixHQUFQO0FBQ0Q7O0FBRUQsTUFBSU8sS0FBSyxDQUFDQyxPQUFOLENBQWNSLEdBQWQsQ0FBSixFQUF3QjtBQUN0QkUsVUFBTSxHQUFHLEVBQVQ7QUFEc0I7QUFBQTtBQUFBOztBQUFBO0FBRXRCLDJCQUFpQkYsR0FBakIsOEhBQXNCO0FBQUEsWUFBWFMsRUFBVztBQUNwQlAsY0FBTSxDQUFDckYsSUFBUCxDQUFZb0YsTUFBTSxHQUFHRixTQUFTLENBQUNVLEVBQUQsRUFBSyxJQUFMLENBQVosR0FBeUJBLEVBQTNDO0FBQ0Q7QUFKcUI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUt2QixHQUxELE1BS08sSUFBSU4sUUFBUSxDQUFDeEMsUUFBVCxDQUFrQnFDLEdBQUcsQ0FBQ1UsUUFBSixFQUFsQixDQUFKLEVBQXVDO0FBQzVDUixVQUFNLEdBQUcsSUFBSUYsR0FBRyxDQUFDeEYsV0FBUixDQUFvQndGLEdBQXBCLENBQVQ7QUFDRCxHQUZNLE1BRUE7QUFDTEUsVUFBTSxHQUFHLEVBQVQ7O0FBQ0EsdUNBQTZCM0YsTUFBTSxDQUFDb0csT0FBUCxDQUFlWCxHQUFmLENBQTdCLHFDQUFrRDtBQUFBO0FBQUEsVUFBdENZLEtBQXNDO0FBQUEsVUFBL0JDLEtBQStCOztBQUNoRFgsWUFBTSxDQUFDVSxLQUFELENBQU4sR0FBZ0JYLE1BQU0sR0FBR0YsU0FBUyxDQUFDYyxLQUFELEVBQVEsSUFBUixDQUFaLEdBQTRCQSxLQUFsRDtBQUNEO0FBQ0Y7O0FBQ0QsU0FBT1gsTUFBUDtBQUNEO0FBRUQ7Ozs7O0FBR08sU0FBU1ksY0FBVCxDQUF3QkMsQ0FBeEIsRUFBMkJDLENBQTNCLEVBQThCO0FBQ25DLE1BQUlDLENBQUo7O0FBQ0EsTUFBSUYsQ0FBQyxDQUFDaEcsTUFBRixHQUFXaUcsQ0FBQyxDQUFDakcsTUFBakIsRUFBeUI7QUFDdkJrRyxLQUFDLEdBQUdGLENBQUo7QUFDQUEsS0FBQyxHQUFHQyxDQUFKO0FBQ0FBLEtBQUMsR0FBR0MsQ0FBSjtBQUNEOztBQU5rQztBQUFBO0FBQUE7O0FBQUE7QUFPbkMsMEJBQWlCRixDQUFqQixtSUFBb0I7QUFBQSxVQUFUTixFQUFTOztBQUNsQixVQUFJUyxPQUFPLENBQUNGLENBQUQsRUFBSVAsRUFBSixDQUFQLEdBQWlCLENBQUMsQ0FBdEIsRUFBeUI7QUFDdkIsZUFBTyxJQUFQO0FBQ0Q7QUFDRjtBQVhrQztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQVluQyxTQUFPLEtBQVA7QUFDRDtBQUVEOzs7Ozs7O0FBTU8sU0FBU1UsSUFBVCxDQUFjbkIsR0FBZCxFQUFtQjtBQUN4QixTQUFPekYsTUFBTSxDQUFDNkcsSUFBUCxDQUFZcEIsR0FBWixFQUFpQmpGLE1BQXhCO0FBQ0Q7QUFFRDs7Ozs7Ozs7QUFPTyxTQUFTbUcsT0FBVCxDQUFpQkcsR0FBakIsRUFBc0JDLElBQXRCLEVBQTRCO0FBQ2pDLE9BQUssSUFBSUMsQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBR0YsR0FBRyxDQUFDdEcsTUFBeEIsRUFBZ0N3RyxDQUFDLEVBQWpDLEVBQXFDO0FBQ25DLFFBQUlDLE9BQU8sQ0FBQ0gsR0FBRyxDQUFDRSxDQUFELENBQUosRUFBU0QsSUFBVCxDQUFYLEVBQTJCO0FBQ3pCLGFBQU9DLENBQVA7QUFDRDtBQUNGOztBQUNELFNBQU8sQ0FBQyxDQUFSO0FBQ0Q7QUFFTSxTQUFTRSxRQUFULENBQWtCdkUsSUFBbEIsRUFBd0I7QUFDN0IsTUFBSXdFLE1BQU0sR0FBRyxLQUFiO0FBQ0EsTUFBSUMsYUFBSjtBQUNBLE1BQUlDLFdBQUo7QUFDQSxNQUFJQyxVQUFKO0FBRUEsU0FBTyxZQUFZO0FBQ2pCLFFBQUksT0FBT0MsU0FBUyxDQUFDQSxTQUFTLENBQUMvRyxNQUFWLEdBQW1CLENBQXBCLENBQWhCLEtBQTJDLFVBQS9DLEVBQTJEO0FBQ3pELGFBQU9nSCxnQkFBZ0IsQ0FBQzdFLElBQUQsQ0FBaEIsQ0FBdUJjLEtBQXZCLENBQTZCLElBQTdCLEVBQW1DOEQsU0FBbkMsQ0FBUDtBQUNELEtBRkQsTUFFTztBQUNMLGFBQU9FLGVBQWUsQ0FBQzlFLElBQUQsQ0FBZixDQUFzQmMsS0FBdEIsQ0FBNEIsSUFBNUIsRUFBa0M4RCxTQUFsQyxDQUFQO0FBQ0Q7QUFDRixHQU5ELENBTjZCLENBYzdCOztBQUNBLFdBQVNDLGdCQUFULENBQTBCN0UsSUFBMUIsRUFBZ0M7QUFDOUIsV0FBTyxTQUFTK0UsR0FBVCxHQUFlO0FBQ3BCLFVBQU1DLEdBQUcsR0FBRyxJQUFaLENBRG9CLENBQ0Y7O0FBQ2xCLFVBQU10SCxFQUFFLEdBQUdrSCxTQUFTLENBQUNBLFNBQVMsQ0FBQy9HLE1BQVYsR0FBbUIsQ0FBcEIsQ0FBcEI7QUFDQSxVQUFNb0gsY0FBYyxHQUFHLEdBQUdDLEtBQUgsQ0FBU3BJLElBQVQsQ0FBYzhILFNBQWQsQ0FBdkI7O0FBRUEsVUFBSUosTUFBSixFQUFZO0FBQ1Y7QUFDQUMscUJBQWEsR0FBR0csU0FBaEI7QUFDQTtBQUNEOztBQUVESixZQUFNLEdBQUcsSUFBVDs7QUFFQSxVQUFNVyxTQUFTLEdBQUcsU0FBWkEsU0FBWSxHQUFZO0FBQzVCLFlBQUksQ0FBQ0MsVUFBVSxFQUFYLElBQWlCLE9BQU8xSCxFQUFQLEtBQWMsVUFBbkMsRUFBK0M7QUFDN0NBLFlBQUUsQ0FBQ29ELEtBQUgsQ0FBUyxJQUFULEVBQWU4RCxTQUFmO0FBQ0Q7QUFDRixPQUpEOztBQU1BLFVBQUksT0FBT2xILEVBQVAsS0FBYyxVQUFsQixFQUE4QjtBQUM1QnVILHNCQUFjLENBQUNBLGNBQWMsQ0FBQ3BILE1BQWYsR0FBd0IsQ0FBekIsQ0FBZCxHQUE0Q3NILFNBQTVDO0FBQ0FuRixZQUFJLENBQUNjLEtBQUwsQ0FBVyxJQUFYLEVBQWlCbUUsY0FBYyxDQUFDSSxNQUFmLENBQXNCRCxVQUF0QixDQUFqQjtBQUNELE9BSEQsTUFHTztBQUNMcEYsWUFBSSxDQUFDYyxLQUFMLENBQVcsSUFBWCxFQUFpQm1FLGNBQWMsQ0FBQ0ksTUFBZixDQUFzQkYsU0FBdEIsRUFBaUNDLFVBQWpDLENBQWpCO0FBQ0Q7O0FBRUQsZUFBU0EsVUFBVCxHQUFzQjtBQUNwQlosY0FBTSxHQUFHLEtBQVQ7O0FBQ0EsWUFBSUMsYUFBSixFQUFtQjtBQUNqQixjQUFNbkUsSUFBSSxHQUFHbUUsYUFBYjtBQUNBQSx1QkFBYSxHQUFHLElBQWhCO0FBQ0FNLGFBQUcsQ0FBQ2pFLEtBQUosQ0FBVWtFLEdBQVYsRUFBZTFFLElBQWY7QUFDQSxpQkFBTyxJQUFQO0FBQ0Q7O0FBQ0QsZUFBTyxLQUFQO0FBQ0Q7QUFDRixLQXBDRDtBQXFDRDs7QUFFRCxXQUFTd0UsZUFBVCxDQUF5QjlFLElBQXpCLEVBQStCO0FBQzdCOzs7QUFHQSxXQUFPLFNBQVMrRSxHQUFULEdBQXNCO0FBQUE7O0FBQUEsd0NBQU56RSxJQUFNO0FBQU5BLFlBQU07QUFBQTs7QUFDM0IsVUFBTWdGLFdBQVcsR0FBR25JLFFBQVEsQ0FBQyxDQUFELENBQTVCO0FBRUEsYUFBTyxJQUFJZ0UsT0FBSixDQUFZLFVBQUNDLE9BQUQsRUFBVUMsTUFBVixFQUFxQjtBQUN0QyxZQUFJbUQsTUFBSixFQUFZO0FBQ1YsY0FBSUMsYUFBSixFQUFtQjtBQUNqQkUsc0JBQVUsQ0FBQ3RKLHNEQUFhLENBQUM0RSxxQkFBZCxDQUFvQ3FGLFdBQXBDLENBQUQsQ0FBVjtBQUNEOztBQUNEYix1QkFBYSxHQUFHbkUsSUFBaEI7QUFDQW9FLHFCQUFXLEdBQUd0RCxPQUFkO0FBQ0F1RCxvQkFBVSxHQUFHdEQsTUFBYjtBQUNBO0FBQ0Q7O0FBRURtRCxjQUFNLEdBQUcsSUFBVDtBQUVBeEUsWUFBSSxDQUFDYyxLQUFMLENBQVcsS0FBWCxFQUFpQlIsSUFBakIsRUFDR1MsSUFESCxDQUNRLFVBQUFGLE1BQU0sRUFBSTtBQUNkMkQsZ0JBQU0sR0FBRyxLQUFUOztBQUNBLGNBQUlDLGFBQUosRUFBbUI7QUFDakJDLHVCQUFXLENBQUNLLEdBQUcsQ0FBQ2pFLEtBQUosQ0FBVSxLQUFWLEVBQWdCMkQsYUFBaEIsQ0FBRCxDQUFYO0FBQ0FBLHlCQUFhLEdBQUcsSUFBaEI7QUFFQXBELGtCQUFNLENBQUNoRyxzREFBYSxDQUFDNEUscUJBQWQsQ0FBb0NxRixXQUFwQyxDQUFELENBQU47QUFDQTtBQUNEOztBQUNEbEUsaUJBQU8sQ0FBQ1AsTUFBRCxDQUFQO0FBQ0QsU0FYSCxXQVlTLFVBQUFYLEdBQUcsRUFBSTtBQUNac0UsZ0JBQU0sR0FBRyxLQUFUO0FBQ0FuRCxnQkFBTSxDQUFDbkIsR0FBRCxDQUFOO0FBQ0QsU0FmSDtBQWdCRCxPQTdCTSxDQUFQO0FBOEJELEtBakNEO0FBa0NEO0FBQ0Y7QUFFTSxTQUFTcUYsbUJBQVQsQ0FBNkI5SCxLQUE3QixFQUFvQztBQUN6QyxNQUNFQSxLQUFLLElBQUkscUVBQU9BLEtBQVAsTUFBaUIsUUFBMUIsSUFDQUEsS0FBSyxDQUFDeUIsTUFETixJQUNnQixDQUFDLE9BQUQsRUFBVSxVQUFWLEVBQXNCLFFBQXRCLEVBQWdDOEUsT0FBaEMsQ0FBd0N2RyxLQUFLLENBQUN5QixNQUFOLENBQWFzRyxPQUFyRCxLQUFpRSxDQUZuRixFQUdFO0FBQ0EsWUFBUS9ILEtBQUssQ0FBQ3lCLE1BQU4sQ0FBYXVHLElBQXJCO0FBQ0EsV0FBSyxVQUFMO0FBQ0UsZUFBT2hJLEtBQUssQ0FBQ3lCLE1BQU4sQ0FBYXdHLE9BQXBCO0FBRkY7O0FBSUEsV0FBT2pJLEtBQUssQ0FBQ3lCLE1BQU4sQ0FBYXlFLEtBQXBCO0FBQ0Q7O0FBQ0QsU0FBT2xHLEtBQVA7QUFDRDtBQUVNLFNBQVNrSSxTQUFULENBQW1CN0MsR0FBbkIsRUFBd0I4QyxLQUF4QixFQUErQjtBQUNwQ3ZJLFFBQU0sQ0FBQ3dJLE1BQVAsQ0FBYyxJQUFkLEVBQW9CRCxLQUFwQjs7QUFFQSxPQUFLLElBQU12QixDQUFYLElBQWdCdkIsR0FBaEIsRUFBcUI7QUFDbkIsUUFBSSxPQUFPQSxHQUFHLENBQUN1QixDQUFELENBQVYsS0FBa0IsVUFBbEIsSUFBZ0MsQ0FBQ3VCLEtBQUssQ0FBQ3ZCLENBQUQsQ0FBMUMsRUFBK0M7QUFDN0MsV0FBS0EsQ0FBTCxJQUFVdkIsR0FBRyxDQUFDdUIsQ0FBRCxDQUFILENBQU9qRyxJQUFQLENBQVkwRSxHQUFaLENBQVY7QUFDRDtBQUNGO0FBQ0Y7QUFFTSxTQUFTZ0QsUUFBVCxDQUFrQmhELEdBQWxCLEVBQXVCOEMsS0FBdkIsRUFBOEI7QUFDbkNELFdBQVMsQ0FBQ3ZJLFNBQVYsR0FBc0IwRixHQUF0QjtBQUNBLFNBQU8sSUFBSTZDLFNBQUosQ0FBYzdDLEdBQWQsRUFBbUI4QyxLQUFuQixDQUFQO0FBQ0Q7QUFFRDs7Ozs7Ozs7QUFPTyxTQUFTdEIsT0FBVCxDQUFpQlQsQ0FBakIsRUFBb0JDLENBQXBCLEVBQXVCO0FBQzVCLE1BQ0VELENBQUMsS0FBSyxJQUFOLElBQ0dDLENBQUMsS0FBSyxJQURULElBRUdELENBQUMsS0FBS2tDLFNBRlQsSUFHR2pDLENBQUMsS0FBS2lDLFNBSFQsSUFJRyxPQUFPbEMsQ0FBUCxLQUFhLFVBSmhCLElBS0csT0FBT0MsQ0FBUCxLQUFhLFVBTGhCLElBTUdELENBQUMsWUFBWVQsTUFOaEIsSUFPR1UsQ0FBQyxZQUFZVixNQVJsQixFQVNFO0FBQ0EsV0FBT1MsQ0FBQyxLQUFLQyxDQUFiO0FBQ0Q7O0FBRUQsTUFBSUQsQ0FBQyxLQUFLQyxDQUFOLElBQVdELENBQUMsQ0FBQ21DLE9BQUYsT0FBZ0JsQyxDQUFDLENBQUNrQyxPQUFGLEVBQTNCLElBQTBDbkMsQ0FBQyxLQUFLQSxDQUFOLElBQVdDLENBQUMsS0FBS0EsQ0FBL0QsRUFBa0U7QUFDaEUsV0FBTyxJQUFQO0FBQ0Q7O0FBRUQsTUFDR1QsS0FBSyxDQUFDQyxPQUFOLENBQWNPLENBQWQsTUFBcUIsQ0FBQ1IsS0FBSyxDQUFDQyxPQUFOLENBQWNRLENBQWQsQ0FBRCxJQUFxQkQsQ0FBQyxDQUFDaEcsTUFBRixLQUFhaUcsQ0FBQyxDQUFDakcsTUFBekQsQ0FBRCxJQUNHLHFFQUFPZ0csQ0FBUCxNQUFhLFFBRGhCLElBRUcscUVBQU9DLENBQVAsTUFBYSxRQUhsQixFQUlFO0FBQ0EsV0FBTyxLQUFQO0FBQ0Q7O0FBRUQsTUFBSSxPQUFPbUMsSUFBUCxLQUFnQixVQUFoQixJQUE4QnBDLENBQUMsWUFBWW9DLElBQTNDLElBQW1EbkMsQ0FBQyxZQUFZbUMsSUFBcEUsRUFBMEU7QUFDeEUsV0FBT3BDLENBQUMsQ0FBQ0ksSUFBRixLQUFXSCxDQUFDLENBQUNHLElBQWIsSUFBcUJKLENBQUMsQ0FBQzlHLElBQUYsS0FBVytHLENBQUMsQ0FBQy9HLElBQXpDO0FBQ0Q7O0FBRUQsTUFBTW1ILElBQUksR0FBRzdHLE1BQU0sQ0FBQzZHLElBQVAsQ0FBWUwsQ0FBWixDQUFiO0FBQ0EsU0FDRXhHLE1BQU0sQ0FBQzZHLElBQVAsQ0FBWUosQ0FBWixFQUFlb0MsS0FBZixDQUFxQixVQUFBQyxHQUFHO0FBQUEsV0FBSWpDLElBQUksQ0FBQ3pELFFBQUwsQ0FBYzBGLEdBQWQsQ0FBSjtBQUFBLEdBQXhCLEtBQ0dqQyxJQUFJLENBQUNnQyxLQUFMLENBQVcsVUFBQUMsR0FBRztBQUFBLFdBQUk3QixPQUFPLENBQUNULENBQUMsQ0FBQ3NDLEdBQUQsQ0FBRixFQUFTckMsQ0FBQyxDQUFDcUMsR0FBRCxDQUFWLENBQVg7QUFBQSxHQUFkLENBRkw7QUFJRDtBQUVEOzs7Ozs7O0FBTU8sU0FBU0MsS0FBVCxDQUFldEQsR0FBZixFQUFvQjtBQUN6QixTQUFPRCxTQUFTLENBQUNDLEdBQUQsRUFBTSxLQUFOLENBQWhCO0FBQ0Q7QUFFTSxTQUFTdUQsU0FBVCxDQUFtQnZELEdBQW5CLEVBQXdCO0FBQzdCLFNBQU9ELFNBQVMsQ0FBQ0MsR0FBRCxFQUFNLElBQU4sQ0FBaEI7QUFDRDtBQUVNLFNBQVN3RCxPQUFULENBQWlCM0MsS0FBakIsRUFBd0I7QUFDN0IsTUFBSSxDQUFDQSxLQUFMLEVBQVk7QUFDVixXQUFPLElBQVA7QUFDRDs7QUFDRCxNQUFJTixLQUFLLENBQUNDLE9BQU4sQ0FBY0ssS0FBZCxDQUFKLEVBQTBCO0FBQ3hCLFdBQU9BLEtBQUssQ0FBQzlGLE1BQU4sS0FBaUIsQ0FBeEI7QUFDRDs7QUFDRCxNQUFJLHFFQUFPOEYsS0FBUCxNQUFpQixRQUFyQixFQUErQjtBQUM3QixXQUFPdEcsTUFBTSxDQUFDNkcsSUFBUCxDQUFZUCxLQUFaLEVBQW1COUYsTUFBbkIsS0FBOEIsQ0FBckM7QUFDRDs7QUFDRCxNQUFJLE9BQU84RixLQUFQLEtBQWlCLFFBQXJCLEVBQStCO0FBQzdCLFdBQU9BLEtBQUssQ0FBQzRDLElBQU4sR0FBYTFJLE1BQWIsS0FBd0IsQ0FBL0I7QUFDRDs7QUFDRCxTQUFPLEtBQVA7QUFDRDtBQUVNLFNBQVMySSxTQUFULENBQW1CN0MsS0FBbkIsRUFBMEI7QUFDL0IsU0FBT0EsS0FBSyxLQUFLLElBQVYsSUFBa0JBLEtBQUssS0FBS29DLFNBQW5DO0FBQ0Q7QUFFTSxTQUFTVSxPQUFULENBQWlCM0QsR0FBakIsRUFBc0I5QyxJQUF0QixFQUE0QmdGLEdBQTVCLEVBQWlDO0FBQ3RDLE9BQUssSUFBTVgsQ0FBWCxJQUFnQnZCLEdBQWhCLEVBQXFCO0FBQ25COUMsUUFBSSxDQUFDbEQsSUFBTCxDQUFVa0ksR0FBVixFQUFlbEMsR0FBRyxDQUFDdUIsQ0FBRCxDQUFsQixFQUF1QkEsQ0FBdkI7QUFDRDtBQUNGO0FBRU0sU0FBU3FDLEtBQVQsQ0FBZXZDLEdBQWYsRUFBb0JULEtBQXBCLEVBQTJCO0FBQ2hDLFNBQU9TLEdBQUcsQ0FBQ3dDLEdBQUosQ0FBUSxVQUFBdkMsSUFBSTtBQUFBLFdBQUlBLElBQUksQ0FBQ1YsS0FBRCxDQUFSO0FBQUEsR0FBWixDQUFQO0FBQ0Q7QUFFTSxTQUFTa0QsSUFBVCxDQUFjekMsR0FBZCxFQUFtQm5FLElBQW5CLEVBQXlCO0FBQzlCLE9BQUssSUFBTXFFLENBQVgsSUFBZ0JGLEdBQWhCLEVBQXFCO0FBQ25CLFFBQUluRSxJQUFJLENBQUNtRSxHQUFHLENBQUNFLENBQUQsQ0FBSixFQUFTQSxDQUFULENBQVIsRUFBcUI7QUFDbkIsYUFBT0YsR0FBRyxDQUFDRSxDQUFELENBQVY7QUFDRDtBQUNGOztBQUNELFNBQU8sSUFBUDtBQUNEO0FBRU0sU0FBU3dDLFNBQVQsQ0FBbUIvRCxHQUFuQixFQUF3QjlDLElBQXhCLEVBQThCO0FBQ25DLE9BQUssSUFBTXFFLENBQVgsSUFBZ0J2QixHQUFoQixFQUFxQjtBQUNuQixRQUFJOUMsSUFBSSxDQUFDOEMsR0FBRyxDQUFDdUIsQ0FBRCxDQUFKLEVBQVNBLENBQVQsQ0FBUixFQUFxQjtBQUNuQixhQUFPQSxDQUFQO0FBQ0Q7QUFDRjs7QUFDRCxTQUFPLENBQUMsQ0FBUjtBQUNEO0FBRU0sU0FBUzVFLElBQVQsQ0FBY3FELEdBQWQsRUFBbUJnRSxTQUFuQixFQUE4QjtBQUNuQyxNQUFNakcsTUFBTSxHQUFHLEVBQWY7O0FBQ0EsdUNBQTZCeEQsTUFBTSxDQUFDb0csT0FBUCxDQUFlWCxHQUFmLENBQTdCLHdDQUFrRDtBQUFBO0FBQUEsUUFBdENZLEtBQXNDO0FBQUEsUUFBL0JDLEtBQStCOztBQUNoRCxRQUNHLE9BQU9tRCxTQUFQLEtBQXFCLFFBQXJCLElBQWlDQSxTQUFTLEtBQUtwRCxLQUFoRCxJQUNDTCxLQUFLLENBQUNDLE9BQU4sQ0FBY3dELFNBQWQsS0FBNEIsQ0FBQ0EsU0FBUyxDQUFDckcsUUFBVixDQUFtQmlELEtBQW5CLENBRDlCLElBRUMsT0FBT29ELFNBQVAsS0FBcUIsVUFBckIsSUFBbUMsQ0FBQ0EsU0FBUyxDQUFDbkQsS0FBRCxFQUFRRCxLQUFSLENBSGhELEVBSUU7QUFDQTdDLFlBQU0sQ0FBQzZDLEtBQUQsQ0FBTixHQUFnQkMsS0FBaEI7QUFDRDtBQUNGOztBQUNELFNBQU85QyxNQUFQO0FBQ0Q7QUFFTSxTQUFTa0csTUFBVCxDQUFnQkMsTUFBaEIsRUFBd0I7QUFDN0IsTUFBTUMsV0FBVyxHQUFHLFdBQXBCO0FBQ0EsTUFBTUMsT0FBTyxHQUFHO0FBQ2QsU0FBSyxPQURTO0FBRWQsU0FBSyxNQUZTO0FBR2QsU0FBSyxNQUhTO0FBSWQsU0FBSyxRQUpTO0FBS2QsVUFBTSxPQUxRO0FBTWQsU0FBSztBQU5TLEdBQWhCO0FBUUFGLFFBQU0sYUFBTUEsTUFBTSxLQUFLLElBQVgsR0FBa0IsRUFBbEIsR0FBdUJBLE1BQU0sQ0FBQ3hELFFBQVAsRUFBN0IsQ0FBTjs7QUFDQSxNQUFJd0QsTUFBTSxJQUFJQyxXQUFXLENBQUNFLElBQVosQ0FBaUJILE1BQWpCLENBQWQsRUFBd0M7QUFDdEMsV0FBT0EsTUFBTSxDQUFDSSxPQUFQLENBQWVILFdBQWYsRUFBNEIsVUFBQUksR0FBRztBQUFBLGFBQUlILE9BQU8sQ0FBQ0csR0FBRCxDQUFYO0FBQUEsS0FBL0IsQ0FBUDtBQUNEOztBQUNELFNBQU9MLE1BQVA7QUFDRDtBQUVNLFNBQVNNLFNBQVQsQ0FBbUJwRCxJQUFuQixFQUF5QnFELE1BQXpCLEVBQWlDO0FBQ3RDLE1BQU0xRyxNQUFNLEdBQUcsRUFBZjs7QUFDQSxPQUFLLElBQUl3RCxDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHSCxJQUFJLENBQUNyRyxNQUF6QixFQUFpQ3dHLENBQUMsRUFBbEMsRUFBc0M7QUFDcEN4RCxVQUFNLENBQUNxRCxJQUFJLENBQUNHLENBQUQsQ0FBTCxDQUFOLEdBQWtCa0QsTUFBTSxDQUFDbEQsQ0FBRCxDQUF4QjtBQUNEOztBQUNELFNBQU94RCxNQUFQO0FBQ0Q7QUFFTSxTQUFTMkcsSUFBVCxDQUFjMUUsR0FBZCxFQUFtQm9CLElBQW5CLEVBQXlCdUQsWUFBekIsRUFBdUM7QUFDNUMsU0FBT3ZELElBQUksQ0FBQ3dELE1BQUwsQ0FBWSxVQUFDN0csTUFBRCxFQUFTc0YsR0FBVCxFQUFpQjtBQUNsQyxRQUFJckQsR0FBRyxDQUFDNkUsY0FBSixDQUFtQnhCLEdBQW5CLENBQUosRUFBNkI7QUFDM0J0RixZQUFNLENBQUNzRixHQUFELENBQU4sR0FBY3JELEdBQUcsQ0FBQ3FELEdBQUQsQ0FBakI7QUFDRCxLQUZELE1BRU8sSUFBSXNCLFlBQVksS0FBSzFCLFNBQXJCLEVBQWdDO0FBQ3JDbEYsWUFBTSxDQUFDc0YsR0FBRCxDQUFOLEdBQWNzQixZQUFkO0FBQ0Q7O0FBQ0QsV0FBTzVHLE1BQVA7QUFDRCxHQVBNLEVBT0osRUFQSSxDQUFQO0FBUUQ7QUFFTSxTQUFTK0csT0FBVCxDQUFpQkMsTUFBakIsRUFBeUJDLFFBQXpCLEVBQW1DO0FBQ3hDLE1BQU1qSCxNQUFNLEdBQUcsRUFBZjs7QUFFQSx1Q0FBMkJ4RCxNQUFNLENBQUNvRyxPQUFQLENBQWVvRSxNQUFmLENBQTNCLHdDQUFtRDtBQUFBO0FBQUEsUUFBdkMxQixHQUF1QztBQUFBLFFBQWxDeEMsS0FBa0M7O0FBQ2pEOUMsVUFBTSxDQUFDaUgsUUFBUSxDQUFDbkUsS0FBRCxFQUFRd0MsR0FBUixDQUFULENBQU4sR0FBK0J4QyxLQUEvQjtBQUNEOztBQUVELFNBQU85QyxNQUFQO0FBQ0Q7QUFFTSxTQUFTNkcsTUFBVCxDQUFnQjVFLEdBQWhCLEVBQXFCOUMsSUFBckIsRUFBMkIyRCxLQUEzQixFQUFrQztBQUN2QyxPQUFLLElBQU1VLENBQVgsSUFBZ0J2QixHQUFoQixFQUFxQjtBQUNuQmEsU0FBSyxHQUFHM0QsSUFBSSxDQUFDMkQsS0FBRCxFQUFRYixHQUFHLENBQUN1QixDQUFELENBQVgsRUFBZ0JBLENBQWhCLENBQVo7QUFDRDs7QUFDRCxTQUFPVixLQUFQO0FBQ0Q7QUFFTSxTQUFTb0UsS0FBVCxHQUF3QjtBQUM3QixNQUFNQyxRQUFRLEdBQUcsRUFBakI7O0FBRDZCLHFDQUFOMUgsSUFBTTtBQUFOQSxRQUFNO0FBQUE7O0FBRTdCLDRCQUFrQkEsSUFBbEIsNkJBQXdCO0FBQW5CLFFBQU0ySCxHQUFHLGFBQVQ7QUFBbUI7QUFBQTtBQUFBOztBQUFBO0FBQ3RCLDRCQUFpQkEsR0FBakIsbUlBQXNCO0FBQUEsWUFBWDFFLEVBQVc7QUFDcEJ5RSxnQkFBUSxDQUFDekUsRUFBRCxDQUFSLEdBQWVBLEVBQWY7QUFDRDtBQUhxQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBSXZCOztBQUNELFNBQU9sRyxNQUFNLENBQUNrSyxNQUFQLENBQWNTLFFBQWQsQ0FBUDtBQUNEO0FBRU0sU0FBU0UsRUFBVCxDQUFZcEYsR0FBWixFQUFpQm9CLElBQWpCLEVBQXVCO0FBQzVCLE1BQU1yRCxNQUFNLEdBQUcsRUFBZjs7QUFDQSxNQUFJLENBQUN3QyxLQUFLLENBQUNDLE9BQU4sQ0FBY1ksSUFBZCxDQUFMLEVBQTBCO0FBQ3hCLFdBQU8sQ0FBQ3BCLEdBQUcsQ0FBQ29CLElBQUQsQ0FBSixDQUFQO0FBQ0Q7O0FBSjJCO0FBQUE7QUFBQTs7QUFBQTtBQUs1QiwwQkFBa0JBLElBQWxCLG1JQUF3QjtBQUFBLFVBQWJpQyxHQUFhO0FBQ3RCdEYsWUFBTSxDQUFDbEQsSUFBUCxDQUFZbUYsR0FBRyxDQUFDcUQsR0FBRCxDQUFmO0FBQ0Q7QUFQMkI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFRNUIsU0FBT3RGLE1BQVA7QUFDRDtBQUVNLFNBQVNzSCxLQUFULENBQWVyRixHQUFmLEVBQW9CO0FBQ3pCLE1BQU1qQyxNQUFNLEdBQUcsRUFBZjs7QUFDQSxPQUFLLElBQU13RCxDQUFYLElBQWdCdkIsR0FBaEIsRUFBcUI7QUFDbkJqQyxVQUFNLENBQUNsRCxJQUFQLENBQVksQ0FBQzBHLENBQUQsRUFBSXZCLEdBQUcsQ0FBQ3VCLENBQUQsQ0FBUCxDQUFaO0FBQ0Q7O0FBQ0QsU0FBT3hELE1BQVA7QUFDRDtBQUVNLFNBQVN1SCxNQUFULENBQWdCekUsS0FBaEIsRUFBdUI7QUFDNUIsTUFBSW5JLElBQUo7O0FBRUEsTUFBSSxPQUFPbUksS0FBUCxLQUFpQixRQUFyQixFQUErQjtBQUM3QixXQUFPLElBQUlULElBQUosQ0FBU1MsS0FBVCxDQUFQO0FBQ0Q7O0FBRUQsTUFBSSxPQUFPQSxLQUFQLEtBQWlCLFFBQXJCLEVBQStCO0FBQzdCbkksUUFBSSxHQUFHLElBQUkwSCxJQUFKLENBQVNTLEtBQVQsQ0FBUDtBQUNBbkksUUFBSSxDQUFDNk0sT0FBTCxDQUFhN00sSUFBSSxDQUFDOE0sT0FBTCxLQUFrQjlNLElBQUksQ0FBQytNLGlCQUFMLEtBQTJCLEVBQTNCLEdBQWdDLElBQS9ELEVBRjZCLENBRTBDOztBQUN2RSxXQUFPL00sSUFBUDtBQUNEOztBQUVELFNBQU8sSUFBSTBILElBQUosQ0FBU1MsS0FBVCxDQUFQO0FBQ0Q7QUFFTSxTQUFTL0YsT0FBVCxDQUFpQnVHLEdBQWpCLEVBQXNCWixFQUF0QixFQUEwQjtBQUMvQixNQUFNMUMsTUFBTSxHQUFHLEVBQWY7O0FBQ0EsT0FBSyxJQUFJd0QsQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBR0YsR0FBRyxDQUFDdEcsTUFBeEIsRUFBZ0N3RyxDQUFDLEVBQWpDLEVBQXFDO0FBQ25DLFFBQUloQixLQUFLLENBQUNDLE9BQU4sQ0FBY0MsRUFBZCxJQUFvQlMsT0FBTyxDQUFDVCxFQUFELEVBQUtZLEdBQUcsQ0FBQ0UsQ0FBRCxDQUFSLENBQVAsR0FBc0IsQ0FBQyxDQUEzQyxHQUErQ0MsT0FBTyxDQUFDSCxHQUFHLENBQUNFLENBQUQsQ0FBSixFQUFTZCxFQUFULENBQTFELEVBQXdFO0FBQ3RFO0FBQ0Q7O0FBQ0QxQyxVQUFNLENBQUNsRCxJQUFQLENBQVl3RyxHQUFHLENBQUNFLENBQUQsQ0FBZjtBQUNEOztBQUNELFNBQU94RCxNQUFQO0FBQ0Q7QUFFTSxTQUFTMkgsSUFBVCxDQUFjckUsR0FBZCxFQUFtQjtBQUN4QixTQUFPQSxHQUFHLENBQUNBLEdBQUcsQ0FBQ3RHLE1BQUosR0FBYSxDQUFkLENBQVY7QUFDRDtBQUVNLFNBQVM0SyxnQkFBVCxDQUEwQkMsS0FBMUIsRUFBaUMxSCxJQUFqQyxFQUF1QzJILE9BQXZDLEVBQWdEQyxVQUFoRCxFQUE0RDtBQUNqRSxNQUFNL0gsTUFBTSxHQUFHeEQsTUFBTSxDQUFDd0ksTUFBUCxDQUFjLEVBQWQsRUFBa0I4QyxPQUFsQixFQUEyQkMsVUFBM0IsQ0FBZjs7QUFFQSxPQUFLLElBQU12RSxDQUFYLElBQWdCeEQsTUFBaEIsRUFBd0I7QUFDdEIsUUFBSXlELE9BQU8sQ0FBQ3RELElBQUksQ0FBQ3FELENBQUQsQ0FBTCxFQUFVeEQsTUFBTSxDQUFDd0QsQ0FBRCxDQUFoQixDQUFYLEVBQWlDO0FBQy9CLGFBQU94RCxNQUFNLENBQUN3RCxDQUFELENBQWI7QUFDRDtBQUNGOztBQUVEaEgsUUFBTSxDQUFDd0ksTUFBUCxDQUFjaEYsTUFBZCxFQUFzQjJHLElBQUksQ0FDeEJ4RyxJQUR3QixFQUV4QjBILEtBQUssQ0FBQ0csdUJBQU4sQ0FBOEJ4TCxNQUFNLENBQUM2RyxJQUFQLENBQVlyRCxNQUFaLENBQTlCLENBRndCLENBQTFCO0FBS0EsU0FBT0EsTUFBUDtBQUNEO0FBRU0sU0FBUzFELFFBQVQsR0FBNEI7QUFBQSxNQUFWMkwsSUFBVSx1RUFBSCxDQUFHO0FBQ2pDO0FBQ0E7QUFFQSxNQUFJNUwsS0FBSyxHQUFHLEVBQVo7QUFDQSxNQUFNNkwsc0JBQXNCLEdBQUdsTSxLQUFLLENBQUNtTSxlQUFyQztBQUNBbk0sT0FBSyxDQUFDbU0sZUFBTixHQUF3QkYsSUFBSSxHQUFHLEVBQS9COztBQUNBLE1BQUk7QUFDRixVQUFNLElBQUlqTSxLQUFKLEVBQU47QUFDRCxHQUZELENBRUUsT0FBT3VDLENBQVAsRUFBVTtBQUNWLFFBQUlBLENBQUMsQ0FBQ2xDLEtBQU4sRUFBYTtBQUFFO0FBQ2JBLFdBQUssR0FBR2tDLENBQUMsQ0FBQ2xDLEtBQUYsQ0FDTCtMLEtBREssQ0FDQyxJQURELEVBRUwvRCxLQUZLLENBRUMsSUFBSTRELElBRkwsRUFFVztBQUZYLE9BR0xJLElBSEssQ0FHQSxJQUhBLENBQVI7QUFJRDtBQUNGOztBQUVEck0sT0FBSyxDQUFDbU0sZUFBTixHQUF3QkQsc0JBQXhCO0FBQ0EsU0FBTzdMLEtBQVA7QUFDRDtBQUVNLFNBQVN3RCxJQUFULENBQWM5RCxPQUFkLEVBQXVCO0FBQzVCdU0sU0FBTyxDQUFDekksSUFBUixDQUFhOUQsT0FBYixFQUFzQixJQUF0QixFQUE0Qk8sUUFBUSxDQUFDLENBQUQsQ0FBcEM7QUFDRDtBQUVNLFNBQVNpTSxlQUFULENBQXlCekYsS0FBekIsRUFBZ0M7QUFDckMsU0FBTzBGLGtCQUFrQixDQUFFLE9BQU8xRixLQUFQLEtBQWlCLFFBQWpCLEdBQTRCQSxLQUE1QixHQUFvQ2hELElBQUksQ0FBQ0MsU0FBTCxDQUFlK0MsS0FBZixDQUF0QyxDQUF6QjtBQUNEO0FBRU0sU0FBUzJGLFlBQVQsQ0FBc0JDLE1BQXRCLEVBQThCO0FBQ25DLFNBQU8sVUFBQ0MsR0FBRCxFQUFNQyxHQUFOLEVBQVd2SCxJQUFYLEVBQW9CO0FBQ3pCLFFBQU1RLE9BQU8sR0FBRzZHLE1BQU0sQ0FBQ0MsR0FBRCxFQUFNQyxHQUFOLEVBQVd2SCxJQUFYLENBQXRCOztBQUNBLFFBQUlRLE9BQU8sSUFBSUEsT0FBTyxDQUFDM0IsSUFBdkIsRUFBNkI7QUFDM0IsYUFBTzJCLE9BQU8sU0FBUCxDQUFjUixJQUFkLENBQVA7QUFDRDs7QUFDREEsUUFBSSxDQUFDLElBQUlyRixLQUFKLENBQVUsK0NBQVYsQ0FBRCxDQUFKO0FBQ0QsR0FORDtBQU9EO0FBRU0sU0FBUzZNLE9BQVQsQ0FBaUJDLE9BQWpCLEVBQTBCQyxRQUExQixFQUFvQztBQUN6QyxNQUFNL0ksTUFBTSxHQUFHLEVBQWY7O0FBQ0EsU0FBUThJLE9BQU8sR0FBR0EsT0FBTyxDQUFDRSxhQUExQixFQUEwQztBQUN4QyxRQUFJRixPQUFPLENBQUNHLE9BQVIsQ0FBZ0JGLFFBQWhCLENBQUosRUFBK0I7QUFDN0IvSSxZQUFNLENBQUNsRCxJQUFQLENBQVlnTSxPQUFaO0FBQ0Q7QUFDRjs7QUFDRCxTQUFPOUksTUFBUDtBQUNEO0FBRU0sU0FBU2tKLFNBQVQsQ0FBbUJDLElBQW5CLEVBQTBEO0FBQUEsTUFBakNDLFlBQWlDLHVFQUFsQixnQkFBa0I7QUFDL0QsTUFBSXBKLE1BQUo7O0FBRUEsTUFBSTtBQUNGQSxVQUFNLEdBQUdGLElBQUksQ0FBQ2MsS0FBTCxDQUFXdUksSUFBWCxDQUFUO0FBQ0QsR0FGRCxDQUVFLE9BQU85SixHQUFQLEVBQVk7QUFDWixVQUFNLElBQUk5RSx1REFBSixDQUFtQjZPLFlBQW5CLENBQU47QUFDRDs7QUFFRCxTQUFPcEosTUFBUDtBQUNELEM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDbGdCRDs7Ozs7OztJQVFNbEgsZ0I7OztBQUNKOzs7O0FBSUEsOEJBQWM7QUFBQTs7QUFDWixTQUFLdVEsT0FBTCxHQUFlLElBQUlDLEdBQUosRUFBZjtBQUNEO0FBRUQ7Ozs7Ozs7Ozs7OztBQXVDQTs7Ozs7Ozt3QkFPSXpHLEssRUFBTzBHLEssRUFBTztBQUNoQkEsV0FBSyxHQUFHLEtBQUtDLGVBQUwsQ0FBcUJELEtBQXJCLENBQVI7O0FBQ0EsVUFBSSxDQUFDLEtBQUtGLE9BQUwsQ0FBYUksR0FBYixDQUFpQjVHLEtBQWpCLENBQUwsRUFBOEI7QUFDNUIsYUFBS3dHLE9BQUwsQ0FBYXZPLEdBQWIsQ0FBaUIrSCxLQUFqQixFQUF3QixDQUFDMEcsS0FBRCxDQUF4Qjs7QUFDQSxlQUFPLElBQVA7QUFDRDs7QUFDRCxVQUFNRyxXQUFXLEdBQUcsS0FBS0wsT0FBTCxDQUFheE4sR0FBYixDQUFpQmdILEtBQWpCLENBQXBCOztBQUNBLFVBQUksQ0FBQzZHLFdBQVcsQ0FBQzlKLFFBQVosQ0FBcUIySixLQUFyQixDQUFMLEVBQWtDO0FBQ2hDRyxtQkFBVyxDQUFDNU0sSUFBWixDQUFpQnlNLEtBQWpCO0FBQ0Q7O0FBQ0QsYUFBTyxJQUFQO0FBQ0Q7QUFFRDs7Ozs7Ozs7OzZCQU1TMUcsSyxFQUFPO0FBQ2QsYUFBTyxLQUFLd0csT0FBTCxDQUFhSSxHQUFiLENBQWlCNUcsS0FBakIsQ0FBUDtBQUNEO0FBRUQ7Ozs7Ozs7OzttQ0FNZUEsSyxFQUFPO0FBQ3BCLGFBQU8sS0FBS3dHLE9BQUwsQ0FBYXhOLEdBQWIsQ0FBaUJnSCxLQUFqQixLQUEyQixJQUFsQztBQUNEO0FBRUQ7Ozs7Ozs7OzswQ0FNc0JBLEssRUFBTztBQUMzQixVQUFNNkcsV0FBVyxHQUFHLEtBQUtMLE9BQUwsQ0FBYXhOLEdBQWIsQ0FBaUJnSCxLQUFqQixDQUFwQjs7QUFDQSxVQUFJNkcsV0FBSixFQUFpQjtBQUNmLGVBQU9BLFdBQVcsQ0FBQzVELEdBQVosQ0FBZ0IsVUFBQXlELEtBQUs7QUFBQSxpQkFBSUEsS0FBSyxDQUFDeE4sT0FBVjtBQUFBLFNBQXJCLENBQVA7QUFDRDs7QUFDRCxhQUFPLElBQVA7QUFDRDtBQUVEOzs7Ozs7OztzQ0FLa0I7QUFDaEIsVUFBTTROLE1BQU0sR0FBRyxnRkFBSSxLQUFLTixPQUFMLENBQWFoRyxJQUFiLEVBQVAsQ0FBWjs7QUFDQSxhQUFPc0csTUFBTSxDQUFDM00sTUFBUCxHQUFnQjJNLE1BQWhCLEdBQXlCLElBQWhDO0FBQ0Q7QUFFRDs7Ozs7Ozs7OEJBS1U7QUFDUixhQUFPLEtBQUtOLE9BQUwsQ0FBYWpHLElBQWIsS0FBc0IsQ0FBN0I7QUFDRDtBQUVEOzs7Ozs7Ozs7K0JBTVdQLEssRUFBTztBQUNoQixXQUFLd0csT0FBTCxXQUFvQnhHLEtBQXBCOztBQUNBLGFBQU8sSUFBUDtBQUNEO0FBRUQ7Ozs7Ozs7OzRCQUtRO0FBQ04sV0FBS3dHLE9BQUwsR0FBZSxJQUFJQyxHQUFKLEVBQWY7QUFDQSxhQUFPLElBQVA7QUFDRDtBQUVEOzs7Ozs7Ozs2QkFLUztBQUNQLFVBQU1ILElBQUksR0FBRyxFQUFiO0FBRE87QUFBQTtBQUFBOztBQUFBO0FBRVAsNkJBQTJCLEtBQUtFLE9BQWhDLDhIQUF5QztBQUFBO0FBQUEsY0FBN0IvRCxHQUE2QjtBQUFBLGNBQXhCeEMsS0FBd0I7O0FBQ3ZDcUcsY0FBSSxDQUFDN0QsR0FBRCxDQUFKLEdBQVl4QyxLQUFaO0FBQ0Q7QUFKTTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUtQLGFBQU9xRyxJQUFQO0FBQ0Q7QUFFRDs7Ozs7Ozs7NEJBS1E7QUFDTixhQUFPclEsZ0JBQWdCLENBQUM4USxjQUFqQixDQUFnQyxLQUFLL1EsTUFBTCxFQUFoQyxDQUFQO0FBQ0Q7QUFFRDs7Ozs7Ozs7MEJBS01nUixnQixFQUFrQjtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUN0Qiw4QkFBaUNBLGdCQUFnQixDQUFDQyxTQUFqQixFQUFqQyxtSUFBK0Q7QUFBQTs7QUFBQTtBQUFBLGNBQW5EakgsS0FBbUQ7QUFBQSxjQUE1Q2tILFNBQTRDOztBQUM3RCxjQUFJQyxNQUFNLEdBQUcsS0FBS1gsT0FBTCxDQUFheE4sR0FBYixDQUFpQmdILEtBQWpCLENBQWI7O0FBQ0EsY0FBSSxDQUFDbUgsTUFBTCxFQUFhO0FBQ1hBLGtCQUFNLEdBQUcsRUFBVDs7QUFDQSxpQkFBS1gsT0FBTCxDQUFhdk8sR0FBYixDQUFpQitILEtBQWpCLEVBQXdCbUgsTUFBeEI7QUFDRDs7QUFDRCxxQkFBQUEsTUFBTSxFQUFDbE4sSUFBUCxnR0FBZWlOLFNBQWY7QUFDRDtBQVJxQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQVV0QixhQUFPLElBQVA7QUFDRDtBQUVEOzs7Ozs7OztnQ0FLWTtBQUNWLGFBQU8sS0FBS1YsT0FBWjtBQUNEOzs7b0NBRWVFLEssRUFBTztBQUNyQixVQUFJLE9BQU9BLEtBQVAsS0FBaUIsUUFBckIsRUFBK0I7QUFDN0IsZUFBTztBQUNMeE4saUJBQU8sRUFBRXdOO0FBREosU0FBUDtBQUdEOztBQUNELFVBQUksQ0FBQ0EsS0FBSyxDQUFDeE4sT0FBWCxFQUFvQjtBQUNsQixjQUFNLElBQUlDLEtBQUosQ0FBVSw4RUFBVixDQUFOO0FBQ0Q7O0FBQ0QsYUFBT3VOLEtBQVA7QUFDRDs7O21DQXpMcUJVLFUsRUFBWTtBQUNoQyxVQUFNSixnQkFBZ0IsR0FBRyxJQUFJL1EsZ0JBQUosRUFBekI7O0FBRGdDO0FBQUE7QUFBQSxZQUVwQndNLEdBRm9CO0FBQUEsWUFFZnhDLEtBRmU7O0FBRzlCQSxhQUFLLENBQUM4QyxPQUFOLENBQWMsVUFBQXNFLFVBQVU7QUFBQSxpQkFBSUwsZ0JBQWdCLENBQUNNLEdBQWpCLENBQXFCN0UsR0FBckIsRUFBMEI0RSxVQUExQixDQUFKO0FBQUEsU0FBeEI7QUFIOEI7O0FBRWhDLHlDQUEyQjFOLE1BQU0sQ0FBQ29HLE9BQVAsQ0FBZXFILFVBQWYsQ0FBM0IscUNBQXVEO0FBQUE7QUFFdEQ7O0FBQ0QsYUFBT0osZ0JBQVA7QUFDRDtBQUVEOzs7Ozs7Ozs7O29DQU91QmhILEssRUFBTzBHLEssRUFBTztBQUNuQyxVQUFNTSxnQkFBZ0IsR0FBRyxJQUFJL1EsZ0JBQUosRUFBekI7QUFDQStRLHNCQUFnQixDQUFDTSxHQUFqQixDQUFxQnRILEtBQXJCLEVBQTRCMEcsS0FBNUI7QUFDQSxhQUFPTSxnQkFBUDtBQUNEOzs7Ozs7NkVBbkNHL1EsZ0IsV0FxQ1csWUFBbUI7QUFDaEMsTUFBTXNSLFVBQVUsR0FBRyxDQUFDLEVBQUQsQ0FBbkI7O0FBRGdDLG9DQUFOM0ssSUFBTTtBQUFOQSxRQUFNO0FBQUE7O0FBR2hDLDRCQUFrQkEsSUFBbEIsNkJBQXdCO0FBQW5CLFFBQU0ySCxHQUFHLGFBQVQ7QUFDSGdELGNBQVUsQ0FBQ3ROLElBQVgsQ0FBZ0JzSyxHQUFHLENBQUN2TyxNQUFKLEVBQWhCO0FBQ0QsR0FMK0IsQ0FPaEM7OztBQUNBLFNBQU9DLGdCQUFnQixDQUFDOFEsY0FBakIsQ0FBZ0NwTixNQUFNLENBQUN3SSxNQUFQLE9BQUF4SSxNQUFNLEVBQVc0TixVQUFYLENBQXRDLENBQVA7QUFDRCxDOztBQThKWXRSLCtFQUFmLEU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDcE5BOzs7Ozs7O0FBUUE7QUFDQTtBQUNBOztJQUVNSixTOzs7QUFDSjs7Ozs7QUFLQSx1QkFBYztBQUFBOztBQUNaLFNBQUsyUixTQUFMLEdBQWlCO0FBQ2ZDLGdCQUFVLEVBQUUsRUFERztBQUVmQyxxQkFBZSxFQUFFLEVBRkY7QUFHZkMscUJBQWUsRUFBRSxFQUhGO0FBSWZDLDBCQUFvQixFQUFFLEVBSlA7QUFLZkMsc0JBQWdCLEVBQUU7QUFMSCxLQUFqQjtBQU9EOzs7OztBQU1EOzs7Ozs7OzBCQU9NN0gsTSxFQUFzQjtBQUMxQixVQUFJLENBQUMsS0FBS3dILFNBQUwsQ0FBZUMsVUFBZixDQUEwQnpILE1BQTFCLENBQUwsRUFBdUM7QUFDckMsYUFBS3dILFNBQUwsQ0FBZUMsVUFBZixDQUEwQnpILE1BQTFCLElBQW1DLEVBQW5DO0FBQ0Q7O0FBSHlCLHdDQUFaeUgsVUFBWTtBQUFaQSxrQkFBWTtBQUFBOztBQUkxQixXQUFLRCxTQUFMLENBQWVDLFVBQWYsQ0FBMEJ6SCxNQUExQixJQUFtQyxLQUFLd0gsU0FBTCxDQUFlQyxVQUFmLENBQTBCekgsTUFBMUIsRUFBaUMyQixNQUFqQyxDQUF3QzhGLFVBQXhDLENBQW5DO0FBQ0EsYUFBTyxJQUFQO0FBQ0Q7QUFFRDs7Ozs7Ozs7OzsyQkFPT1gsTyxFQUFRZ0IsaUIsRUFBbUI7QUFDaEMsV0FBS04sU0FBTCxDQUFlRSxlQUFmLENBQStCek4sSUFBL0IsQ0FBb0M7QUFDbEM2TSxjQUFNLEVBQUVBLE9BRDBCO0FBRWxDaUIsVUFBRSxFQUFFRDtBQUY4QixPQUFwQzs7QUFJQSxhQUFPLElBQVA7QUFDRDtBQUVEOzs7Ozs7Ozs7b0NBTWdCaEIsTSxFQUFRO0FBQ3RCLFdBQUtVLFNBQUwsQ0FBZUssZ0JBQWYsQ0FBZ0M1TixJQUFoQyxDQUFxQzZNLE1BQXJDOztBQUNBLGFBQU8sSUFBUDtBQUNEO0FBRUQ7Ozs7Ozs7Ozs7K0JBT1c5RyxLLEVBQU84SCxpQixFQUFtQjtBQUNuQyxVQUFJLENBQUMsS0FBS04sU0FBTCxDQUFlRyxlQUFmLENBQStCM0gsS0FBL0IsQ0FBTCxFQUE0QztBQUMxQyxhQUFLd0gsU0FBTCxDQUFlRyxlQUFmLENBQStCM0gsS0FBL0IsSUFBd0MsRUFBeEM7QUFDRDs7QUFDRCxXQUFLd0gsU0FBTCxDQUFlRyxlQUFmLENBQStCM0gsS0FBL0IsRUFBc0MvRixJQUF0QyxDQUEyQzZOLGlCQUEzQzs7QUFDQSxhQUFPLElBQVA7QUFDRDtBQUVEOzs7Ozs7Ozs7O2dDQU9ZaEIsTSxFQUFRZ0IsaUIsRUFBbUI7QUFDckMsV0FBS04sU0FBTCxDQUFlSSxvQkFBZixDQUFvQzNOLElBQXBDLENBQXlDO0FBQ3ZDNk0sY0FBTSxFQUFFQSxNQUQrQjtBQUV2Q2lCLFVBQUUsRUFBRUQ7QUFGbUMsT0FBekM7O0FBSUEsYUFBTyxJQUFQO0FBQ0Q7QUFFRDs7Ozs7Ozs7OzRDQU13QmhCLE0sRUFBUTtBQUM5QixVQUFNM0osTUFBTSxHQUFHLEVBQWY7QUFDQSxVQUFJaEQsTUFBSjtBQUNBLFVBQU02TixNQUFNLEdBQUdoRixvREFBSyxDQUNsQixLQUFLd0UsU0FBTCxDQUFlRSxlQUFmLENBQStCL0YsTUFBL0IsQ0FBc0MsS0FBSzZGLFNBQUwsQ0FBZUksb0JBQXJELENBRGtCLEVBRWxCLFFBRmtCLENBQUwsQ0FHYmpHLE1BSGEsQ0FHTixLQUFLNkYsU0FBTCxDQUFlSyxnQkFIVCxDQUFmOztBQUtBLGFBQU8xTixNQUFNLEtBQUtnRCxNQUFNLENBQUNoRCxNQUF6QixFQUFpQztBQUMvQkEsY0FBTSxHQUFHZ0QsTUFBTSxDQUFDaEQsTUFBaEI7O0FBRUEsYUFBSyxJQUFJd0csQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBR3FILE1BQU0sQ0FBQzdOLE1BQTNCLEVBQW1Dd0csQ0FBQyxFQUFwQyxFQUF3QztBQUN0QyxjQUFJLENBQUNULDZEQUFjLENBQUM4SCxNQUFNLENBQUNySCxDQUFELENBQVAsRUFBWW1HLE1BQVosQ0FBZixJQUFzQyxDQUFDNUcsNkRBQWMsQ0FBQzhILE1BQU0sQ0FBQ3JILENBQUQsQ0FBUCxFQUFZeEQsTUFBWixDQUF6RCxFQUE4RTtBQUM1RTtBQUNEOztBQUNELGVBQUssSUFBSThLLENBQUMsR0FBRyxDQUFiLEVBQWdCQSxDQUFDLEdBQUdELE1BQU0sQ0FBQ3JILENBQUQsQ0FBTixDQUFVeEcsTUFBOUIsRUFBc0M4TixDQUFDLEVBQXZDLEVBQTJDO0FBQ3pDLGdCQUFNakksS0FBSyxHQUFHZ0ksTUFBTSxDQUFDckgsQ0FBRCxDQUFOLENBQVVzSCxDQUFWLENBQWQ7O0FBQ0EsZ0JBQUluQixNQUFNLENBQUN4RyxPQUFQLENBQWVOLEtBQWYsS0FBeUIsQ0FBekIsSUFBOEI3QyxNQUFNLENBQUNtRCxPQUFQLENBQWVOLEtBQWYsS0FBeUIsQ0FBM0QsRUFBOEQ7QUFDNUQ7QUFDRDs7QUFDRDdDLGtCQUFNLENBQUNsRCxJQUFQLENBQVkrRixLQUFaO0FBQ0Q7QUFDRjtBQUNGOztBQUNELGFBQU83QyxNQUFQO0FBQ0Q7QUFFRDs7Ozs7Ozs7Ozs7OzhGQU1vQitLLE07Ozs7Ozs7QUFDWnBCLHNCLEdBQVNuTixNQUFNLENBQUM2RyxJQUFQLENBQVkwSCxNQUFaLEM7QUFDVGYsc0IsR0FBUyxJQUFJbFIseURBQUosRTtBQUNUa1MsMEIsR0FBYSxFO0FBQ2JDLHdCLEdBQVcsRTtBQUVYQywrQixHQUFrQixLQUFLbEQsdUJBQUwsQ0FBNkIyQixNQUE3QixDOztxQkFDcEJ1QixlQUFlLENBQUNsTyxNOzs7OztzQkFDWixJQUFJekMsdURBQUosQ0FBbUIsc0NBQXNDMlEsZUFBZSxDQUFDN0MsSUFBaEIsQ0FBcUIsSUFBckIsQ0FBekQsQzs7OzBDQUlxQjdMLE1BQU0sQ0FBQ29HLE9BQVAsQ0FBZW1JLE1BQWYsQzs7Ozs7Ozs7MElBQWpCbEksTywwQkFBT0MsSztBQUNYd0gsMEIsR0FBYSxLQUFLRCxTQUFMLENBQWVDLFVBQWYsQ0FBMEJ6SCxPQUExQixDOztxQkFDZnlILFU7Ozs7Ozs7Ozs7QUFDRixrQ0FBd0JBLFVBQXhCLDJIQUFvQztBQUF6QmEsMkJBQXlCO0FBQzVCNUIsd0JBRDRCLEdBQ3BCNEIsU0FBUyxDQUFDckksS0FBRCxDQURXOztBQUVsQyxzQkFBSXlHLE1BQUosRUFBVztBQUNUUywwQkFBTSxDQUFDRyxHQUFQLENBQVd0SCxPQUFYLEVBQWtCMEcsTUFBbEI7QUFDRDtBQUNGOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHR2lCLCtCLEdBQWtCLEtBQUtILFNBQUwsQ0FBZUcsZUFBZixDQUErQjNILE9BQS9CLEM7O3FCQUNwQjJILGU7Ozs7Ozs7Ozs2QkFDMkJBLGU7Ozs7Ozs7O0FBQWxCWSw4QjtBQUNUSiwwQkFBVSxDQUFDbE8sSUFBWCxDQUFnQitGLE9BQWhCOzhCQUNBb0ksUTs7dUJBQ1FHLGNBQWMsQ0FBQ3RJLEtBQUQsQzs7Ozs7NEJBRGJoRyxJOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQU9mOzs7Ozs7QUFDQSxpQ0FBNkIsS0FBS3VOLFNBQUwsQ0FBZUUsZUFBNUMsdUhBQTZEO0FBQWxEYyxnQ0FBa0Q7O0FBQzNELHNCQUFJdEksNkRBQWMsQ0FBQ3NJLGNBQWMsQ0FBQzFCLE1BQWhCLEVBQXdCQSxNQUF4QixDQUFsQixFQUFtRDtBQUNqRDBCLGtDQUFjLENBQUNULEVBQWYsQ0FBa0JHLE1BQWxCLEVBQTBCZixNQUExQjtBQUNEO0FBQ0Y7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7NkJBRWlDLEtBQUtLLFNBQUwsQ0FBZUksb0I7Ozs7Ozs7O0FBQXRDYSxtQzs7cUJBQ0x2SSw2REFBYyxDQUFDdUksbUJBQW1CLENBQUMzQixNQUFyQixFQUE2QkEsTUFBN0IsQzs7Ozs7QUFDaEJxQiwwQkFBVSxDQUFDbE8sSUFBWCxDQUFnQixJQUFoQjs4QkFDQW1PLFE7O3VCQUNRSyxtQkFBbUIsQ0FBQ1YsRUFBcEIsQ0FBdUJHLE1BQXZCLEVBQStCZixNQUEvQixDOzs7Ozs0QkFEQ2xOLEk7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7dUJBTWF3RCxPQUFPLENBQUNpTCxHQUFSLENBQVlOLFFBQVosQzs7O0FBQXBCTywyQjs7QUFDTix1QkFBT0EsV0FBVyxDQUFDeE8sTUFBbkIsRUFBMkI7QUFDbkJ1TSx1QkFEbUIsR0FDWGlDLFdBQVcsQ0FBQ0MsR0FBWixFQURXO0FBRW5CNUksdUJBRm1CLEdBRVhtSSxVQUFVLENBQUNTLEdBQVgsRUFGVzs7QUFJekIsc0JBQUlsQyxLQUFLLElBQUkxRyxLQUFiLEVBQW9CO0FBQ2xCbUgsMEJBQU0sQ0FBQ0csR0FBUCxDQUFXdEgsS0FBWCxFQUFrQjBHLEtBQWxCO0FBQ0Q7QUFDRjs7aURBRU1TLE07Ozs7Ozs7Ozs7Ozs7Ozs7Ozs2QkE5S087QUFDZCxhQUFPLElBQUl0UixTQUFKLEVBQVA7QUFDRDs7Ozs7O0FBZ0xZQSx3RUFBZixFOzs7Ozs7Ozs7Ozs7QUM5TUE7QUFBQTtBQUFBOzs7Ozs7O0FBUUE7O0FBRUEsU0FBU2dULGFBQVQsQ0FBdUJ2USxPQUF2QixFQUFnQ29PLEtBQWhDLEVBQXVDekcsS0FBdkMsRUFBOEM7QUFDNUN5RyxPQUFLLEdBQUdBLEtBQUssSUFBSSxhQUFqQjs7QUFDQSxNQUFJLENBQUM1RCx3REFBUyxDQUFDN0MsS0FBRCxDQUFkLEVBQXVCO0FBQ3JCLFFBQUkzSCxPQUFKLEVBQWE7QUFDWCxhQUFPb08sS0FBUDtBQUNEOztBQUNEO0FBQ0Q7O0FBRUQsTUFBSSxPQUFPekcsS0FBUCxLQUFpQixTQUFyQixFQUFnQztBQUM5QixXQUFPeUcsS0FBUDtBQUNEO0FBQ0Y7QUFFRDs7Ozs7Ozs7QUFNQSxJQUFNNEIsU0FBUyxHQUFHLFNBQVpBLFNBQVksQ0FBQTVCLEtBQUs7QUFBQSxTQUFJbUMsYUFBYSxDQUFDbk8sSUFBZCxDQUFtQixJQUFuQixFQUF5QixLQUF6QixFQUFnQ2dNLEtBQWhDLENBQUo7QUFBQSxDQUF2Qjs7QUFDQTRCLFNBQVMsQ0FBQ2hRLE9BQVYsR0FBb0IsVUFBQW9PLEtBQUs7QUFBQSxTQUFJbUMsYUFBYSxDQUFDbk8sSUFBZCxDQUFtQixJQUFuQixFQUF5QixJQUF6QixFQUErQmdNLEtBQS9CLENBQUo7QUFBQSxDQUF6Qjs7QUFFZTRCLHdFQUFmLEU7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2pDQTs7Ozs7OztBQVFBOztBQUVBLFNBQVNPLGFBQVQsQ0FBdUJ2USxPQUF2QixFQUFnQ3dRLEdBQWhDLEVBQXFDQyxHQUFyQyxFQUEwQ3JDLEtBQTFDLEVBQWlEekcsS0FBakQsRUFBd0Q7QUFDdER5RyxPQUFLLEdBQUdBLEtBQUssSUFBSSxjQUFqQjs7QUFFQSxNQUFJLENBQUM1RCx3REFBUyxDQUFDN0MsS0FBRCxDQUFkLEVBQXVCO0FBQ3JCLFFBQUkzSCxPQUFKLEVBQWE7QUFDWCxhQUFPb08sS0FBUDtBQUNEOztBQUNEO0FBQ0Q7O0FBRUQsTUFBTXNDLFdBQVcsR0FBRyxxRUFBTy9JLEtBQVYsQ0FBakI7O0FBQ0EsTUFBSStJLFdBQVcsS0FBSyxRQUFoQixJQUE0QkEsV0FBVyxLQUFLLFFBQTVDLElBQXdELEVBQUUvSSxLQUFLLFlBQVlULElBQW5CLENBQTVELEVBQXNGO0FBQ3BGLFdBQU9rSCxLQUFQO0FBQ0Q7O0FBRUR6RyxPQUFLLEdBQUd5RSxxREFBTSxDQUFDekUsS0FBRCxDQUFkOztBQUNBLE1BQUlnSixLQUFLLENBQUNoSixLQUFELENBQVQsRUFBa0I7QUFDaEIsV0FBT3lHLEtBQVA7QUFDRDs7QUFFRCxNQUFJb0MsR0FBRyxJQUFJcEUscURBQU0sQ0FBQ29FLEdBQUQsQ0FBTixHQUFjN0ksS0FBekIsRUFBZ0M7QUFDOUIsV0FBT3lHLEtBQVA7QUFDRDs7QUFDRCxNQUFJcUMsR0FBRyxJQUFJckUscURBQU0sQ0FBQ3FFLEdBQUQsQ0FBTixHQUFjOUksS0FBekIsRUFBZ0M7QUFDOUIsV0FBT3lHLEtBQVA7QUFDRDtBQUNGO0FBRUQ7Ozs7Ozs7Ozs7QUFRQSxJQUFNNEIsU0FBUyxHQUFHLFNBQVpBLFNBQVksQ0FBQ1EsR0FBRCxFQUFNQyxHQUFOLEVBQVdyQyxLQUFYO0FBQUEsU0FBcUJtQyxhQUFhLENBQUNuTyxJQUFkLENBQW1CLElBQW5CLEVBQXlCLEtBQXpCLEVBQWdDb08sR0FBaEMsRUFBcUNDLEdBQXJDLEVBQTBDckMsS0FBMUMsQ0FBckI7QUFBQSxDQUFsQjs7QUFDQTRCLFNBQVMsQ0FBQ2hRLE9BQVYsR0FBb0IsVUFBQ3dRLEdBQUQsRUFBTUMsR0FBTixFQUFXckMsS0FBWDtBQUFBLFNBQXFCbUMsYUFBYSxDQUFDbk8sSUFBZCxDQUFtQixJQUFuQixFQUF5QixJQUF6QixFQUErQm9PLEdBQS9CLEVBQW9DQyxHQUFwQyxFQUF5Q3JDLEtBQXpDLENBQXJCO0FBQUEsQ0FBcEI7O0FBRWU0Qix3RUFBZixFOzs7Ozs7Ozs7Ozs7QUNqREE7QUFBQTtBQUFBOzs7Ozs7O0FBUUE7O0FBRUEsU0FBU08sYUFBVCxDQUF1QnZRLE9BQXZCLEVBQWdDNFEsUUFBaEMsRUFBMEN4QyxLQUExQyxFQUFpRHpHLEtBQWpELEVBQXdEO0FBQ3REeUcsT0FBSyxHQUFHQSxLQUFLLElBQUksaUJBQWpCOztBQUNBLE1BQUksQ0FBQzVELHdEQUFTLENBQUM3QyxLQUFELENBQWQsRUFBdUI7QUFDckIsUUFBSTNILE9BQUosRUFBYTtBQUNYLGFBQU9vTyxLQUFQO0FBQ0Q7O0FBQ0Q7QUFDRDs7QUFFRCxNQUFJd0MsUUFBUSxDQUFDNUksT0FBVCxDQUFpQkwsS0FBakIsSUFBMEIsQ0FBOUIsRUFBaUM7QUFDL0IsV0FBT3lHLEtBQVA7QUFDRDtBQUNGO0FBRUQ7Ozs7Ozs7OztBQU9BLElBQU00QixTQUFTLEdBQUcsU0FBWkEsU0FBWSxDQUFDWSxRQUFELEVBQVd4QyxLQUFYO0FBQUEsU0FBcUJtQyxhQUFhLENBQUNuTyxJQUFkLENBQW1CLElBQW5CLEVBQXlCLEtBQXpCLEVBQWdDd08sUUFBaEMsRUFBMEN4QyxLQUExQyxDQUFyQjtBQUFBLENBQWxCOztBQUNBNEIsU0FBUyxDQUFDaFEsT0FBVixHQUFvQixVQUFDNFEsUUFBRCxFQUFXeEMsS0FBWDtBQUFBLFNBQXFCbUMsYUFBYSxDQUFDbk8sSUFBZCxDQUFtQixJQUFuQixFQUF5QixJQUF6QixFQUErQndPLFFBQS9CLEVBQXlDeEMsS0FBekMsQ0FBckI7QUFBQSxDQUFwQjs7QUFFZTRCLHdFQUFmLEU7Ozs7Ozs7Ozs7OztBQ2xDQTtBQUFBO0FBQUE7Ozs7Ozs7QUFRQTs7QUFFQSxTQUFTTyxhQUFULENBQXVCdlEsT0FBdkIsRUFBZ0N3USxHQUFoQyxFQUFxQ0MsR0FBckMsRUFBMENyQyxLQUExQyxFQUFpRHpHLEtBQWpELEVBQXdEO0FBQ3REeUcsT0FBSyxHQUFHQSxLQUFLLElBQUksZUFBakI7O0FBQ0EsTUFBSSxDQUFDNUQsd0RBQVMsQ0FBQzdDLEtBQUQsQ0FBZCxFQUF1QjtBQUNyQixRQUFJM0gsT0FBSixFQUFhO0FBQ1gsYUFBT29PLEtBQVA7QUFDRDs7QUFDRDtBQUNEOztBQUVELE1BQ0UsT0FBT3pHLEtBQVAsS0FBaUIsUUFBakIsSUFDQWdKLEtBQUssQ0FBQ2hKLEtBQUQsQ0FETCxJQUVBLENBQUNrSixRQUFRLENBQUNsSixLQUFELENBRlQsSUFHQSxPQUFPNkksR0FBUCxLQUFlLFFBQWYsSUFBMkI3SSxLQUFLLEdBQUc2SSxHQUhuQyxJQUlBLE9BQU9DLEdBQVAsS0FBZSxRQUFmLElBQTJCOUksS0FBSyxHQUFHOEksR0FMckMsRUFNRTtBQUNBLFdBQU9yQyxLQUFQO0FBQ0Q7QUFDRjtBQUVEOzs7Ozs7Ozs7O0FBUUEsSUFBTTRCLFNBQVMsR0FBRyxTQUFaQSxTQUFZLENBQUNRLEdBQUQsRUFBTUMsR0FBTixFQUFXckMsS0FBWDtBQUFBLFNBQXFCbUMsYUFBYSxDQUFDbk8sSUFBZCxDQUFtQixJQUFuQixFQUF5QixLQUF6QixFQUFnQ29PLEdBQWhDLEVBQXFDQyxHQUFyQyxFQUEwQ3JDLEtBQTFDLENBQXJCO0FBQUEsQ0FBbEI7O0FBQ0E0QixTQUFTLENBQUNoUSxPQUFWLEdBQW9CLFVBQUN3USxHQUFELEVBQU1DLEdBQU4sRUFBV3JDLEtBQVg7QUFBQSxTQUFxQm1DLGFBQWEsQ0FBQ25PLElBQWQsQ0FBbUIsSUFBbkIsRUFBeUIsSUFBekIsRUFBK0JvTyxHQUEvQixFQUFvQ0MsR0FBcEMsRUFBeUNyQyxLQUF6QyxDQUFyQjtBQUFBLENBQXBCOztBQUVlNEIsd0VBQWYsRTs7Ozs7Ozs7Ozs7O0FDekNBO0FBQUE7QUFBQTs7Ozs7OztBQVFBO0FBRUE7Ozs7Ozs7QUFNZSx5RUFBVTVCLEtBQVYsRUFBaUI7QUFDOUJBLE9BQUssR0FBR0EsS0FBSyxJQUFJLGtCQUFqQjtBQUNBLFNBQU8sVUFBVXpHLEtBQVYsRUFBaUI7QUFDdEIsUUFDRTJDLHNEQUFPLENBQUMzQyxLQUFELENBQVAsSUFDQyxPQUFPQSxLQUFQLEtBQWlCLFFBQWpCLEtBQ0NnSixLQUFLLENBQUNoSixLQUFELENBQUwsSUFDQSxDQUFDa0osUUFBUSxDQUFDbEosS0FBRCxDQUZWLENBRkgsRUFNRTtBQUNBLGFBQU95RyxLQUFQO0FBQ0Q7QUFDRixHQVZEO0FBV0QsQzs7Ozs7Ozs7Ozs7O0FDN0JEO0FBQUE7QUFBQTs7Ozs7OztBQVFBO0FBRUE7Ozs7Ozs7QUFNZSx5RUFBQUEsS0FBSyxFQUFJO0FBQ3RCQSxPQUFLLEdBQUdBLEtBQUssSUFBSSxrQkFBakI7QUFDQSxTQUFPLFVBQUF6RyxLQUFLLEVBQUk7QUFDZCxRQUNFLENBQUM2Qyx3REFBUyxDQUFDN0MsS0FBRCxDQUFWLElBQ0FBLEtBQUssS0FBSyxFQURWLElBRUMsT0FBT0EsS0FBUCxLQUFpQixRQUFqQixLQUNDZ0osS0FBSyxDQUFDaEosS0FBRCxDQUFMLElBQ0EsQ0FBQ2tKLFFBQVEsQ0FBQ2xKLEtBQUQsQ0FGVixDQUhILEVBT0U7QUFDQSxhQUFPeUcsS0FBUDtBQUNEO0FBQ0YsR0FYRDtBQVlELENBZEQsRTs7Ozs7Ozs7Ozs7O0FDaEJBO0FBQUE7QUFBQTs7Ozs7OztBQVFBOztBQUVBLFNBQVNtQyxhQUFULENBQXVCdlEsT0FBdkIsRUFBZ0N3USxHQUFoQyxFQUFxQ0MsR0FBckMsRUFBMENyQyxLQUExQyxFQUFpRHpHLEtBQWpELEVBQXdEO0FBQ3REeUcsT0FBSyxHQUFHQSxLQUFLLElBQUksZ0JBQWpCOztBQUNBLE1BQUksQ0FBQzVELHdEQUFTLENBQUM3QyxLQUFELENBQWQsRUFBdUI7QUFDckIsUUFBSTNILE9BQUosRUFBYTtBQUNYLGFBQU9vTyxLQUFQO0FBQ0Q7O0FBQ0Q7QUFDRDs7QUFFRCxNQUNFLE9BQU96RyxLQUFQLEtBQWlCLFFBQWpCLElBQ0FnSixLQUFLLENBQUNoSixLQUFELENBREwsSUFFQW1KLFFBQVEsQ0FBQ25KLEtBQUQsRUFBUSxFQUFSLENBQVIsQ0FBb0JILFFBQXBCLE9BQW1DRyxLQUFLLENBQUNILFFBQU4sRUFGbkMsSUFHQSxPQUFPZ0osR0FBUCxLQUFlLFFBQWYsSUFBMkI3SSxLQUFLLEdBQUc2SSxHQUhuQyxJQUlBLE9BQU9DLEdBQVAsS0FBZSxRQUFmLElBQTJCOUksS0FBSyxHQUFHOEksR0FMckMsRUFNRTtBQUNBLFdBQU9yQyxLQUFQO0FBQ0Q7QUFDRjtBQUVEOzs7Ozs7Ozs7O0FBUUEsSUFBTTRCLFNBQVMsR0FBRyxTQUFaQSxTQUFZLENBQUNRLEdBQUQsRUFBTUMsR0FBTixFQUFXckMsS0FBWDtBQUFBLFNBQXFCbUMsYUFBYSxDQUFDbk8sSUFBZCxDQUFtQixJQUFuQixFQUF5QixLQUF6QixFQUFnQ29PLEdBQWhDLEVBQXFDQyxHQUFyQyxFQUEwQ3JDLEtBQTFDLENBQXJCO0FBQUEsQ0FBbEI7O0FBQ0E0QixTQUFTLENBQUNoUSxPQUFWLEdBQW9CLFVBQUN3USxHQUFELEVBQU1DLEdBQU4sRUFBV3JDLEtBQVg7QUFBQSxTQUFxQm1DLGFBQWEsQ0FBQ25PLElBQWQsQ0FBbUIsSUFBbkIsRUFBeUIsSUFBekIsRUFBK0JvTyxHQUEvQixFQUFvQ0MsR0FBcEMsRUFBeUNyQyxLQUF6QyxDQUFyQjtBQUFBLENBQXBCOztBQUVlNEIsd0VBQWYsRTs7Ozs7Ozs7Ozs7O0FDekNBO0FBQUE7QUFBQTs7Ozs7OztBQVFBOztBQUVBLFNBQVNPLGFBQVQsQ0FBdUJ2USxPQUF2QixFQUFnQ0YsTUFBaEMsRUFBd0NzTyxLQUF4QyxFQUErQ3pHLEtBQS9DLEVBQXNEO0FBQ3BEeUcsT0FBSyxHQUFHQSxLQUFLLElBQUksZUFBakI7O0FBQ0EsTUFBSSxDQUFDNUQsd0RBQVMsQ0FBQzdDLEtBQUQsQ0FBVixJQUFxQkEsS0FBSyxLQUFLLEVBQW5DLEVBQXVDO0FBQ3JDLFFBQUkzSCxPQUFKLEVBQWE7QUFDWCxhQUFPb08sS0FBUDtBQUNEOztBQUNEO0FBQ0Q7O0FBRUQsTUFBSSxPQUFPekcsS0FBUCxLQUFpQixRQUFqQixJQUE2QixDQUFDN0gsTUFBTSxDQUFDcUwsSUFBUCxDQUFZeEQsS0FBWixDQUFsQyxFQUFzRDtBQUNwRCxXQUFPeUcsS0FBUDtBQUNEO0FBQ0Y7QUFFRDs7Ozs7Ozs7O0FBT0EsSUFBTTRCLFNBQVMsR0FBRyxTQUFaQSxTQUFZLENBQUNsUSxNQUFELEVBQVNzTyxLQUFUO0FBQUEsU0FBbUJtQyxhQUFhLENBQUNuTyxJQUFkLENBQW1CLElBQW5CLEVBQXlCLEtBQXpCLEVBQWdDdEMsTUFBaEMsRUFBd0NzTyxLQUF4QyxDQUFuQjtBQUFBLENBQWxCOztBQUNBNEIsU0FBUyxDQUFDaFEsT0FBVixHQUFvQixVQUFDRixNQUFELEVBQVNzTyxLQUFUO0FBQUEsU0FBbUJtQyxhQUFhLENBQUNuTyxJQUFkLENBQW1CLElBQW5CLEVBQXlCLElBQXpCLEVBQStCdEMsTUFBL0IsRUFBdUNzTyxLQUF2QyxDQUFuQjtBQUFBLENBQXBCOztBQUVlNEIsd0VBQWYsRTs7Ozs7Ozs7Ozs7O0FDbENBO0FBQUE7QUFBQTs7Ozs7OztBQVFBOztBQUVBLFNBQVNPLGFBQVQsQ0FBdUJ2USxPQUF2QixFQUFnQzRRLFFBQWhDLEVBQTBDeEMsS0FBMUMsRUFBaUQ3QyxNQUFqRCxFQUF5RDtBQUN2RDZDLE9BQUssR0FBR0EsS0FBSyxJQUFJLGlCQUFqQjs7QUFDQSxNQUFJLENBQUM1RCx3REFBUyxDQUFDZSxNQUFELENBQVYsSUFBc0IsQ0FBQ0EsTUFBTSxDQUFDMUosTUFBbEMsRUFBMEM7QUFDeEMsUUFBSTdCLE9BQUosRUFBYTtBQUNYLGFBQU9vTyxLQUFQO0FBQ0Q7O0FBQ0Q7QUFDRDs7QUFQc0Q7QUFBQTtBQUFBOztBQUFBO0FBU3ZELHlCQUFvQjdDLE1BQXBCLDhIQUE0QjtBQUFBLFVBQWpCNUQsS0FBaUI7O0FBQzFCLFVBQUlpSixRQUFRLENBQUM1SSxPQUFULENBQWlCTCxLQUFqQixJQUEwQixDQUE5QixFQUFpQztBQUMvQixlQUFPeUcsS0FBUDtBQUNEO0FBQ0Y7QUFic0Q7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQWN4RDtBQUVEOzs7Ozs7Ozs7QUFPQSxJQUFNNEIsU0FBUyxHQUFHLFNBQVpBLFNBQVksQ0FBQ1ksUUFBRCxFQUFXeEMsS0FBWDtBQUFBLFNBQXFCbUMsYUFBYSxDQUFDbk8sSUFBZCxDQUFtQixJQUFuQixFQUF5QixLQUF6QixFQUFnQ3dPLFFBQWhDLEVBQTBDeEMsS0FBMUMsQ0FBckI7QUFBQSxDQUFsQjs7QUFDQTRCLFNBQVMsQ0FBQ2hRLE9BQVYsR0FBb0IsVUFBQzRRLFFBQUQsRUFBV3hDLEtBQVg7QUFBQSxTQUFxQm1DLGFBQWEsQ0FBQ25PLElBQWQsQ0FBbUIsSUFBbkIsRUFBeUIsSUFBekIsRUFBK0J3TyxRQUEvQixFQUF5Q3hDLEtBQXpDLENBQXJCO0FBQUEsQ0FBcEI7O0FBRWU0Qix3RUFBZixFOzs7Ozs7Ozs7Ozs7QUNwQ0E7QUFBQTs7Ozs7OztBQVFBLElBQU12UCxTQUFTLEdBQUcsRUFBbEI7QUFFZTtBQUNiQyxLQUFHLEVBQUUsYUFBQXlKLEdBQUc7QUFBQSxXQUFJMUosU0FBUyxDQUFDMEosR0FBRCxDQUFiO0FBQUEsR0FESztBQUVieEssS0FBRyxFQUFFLGFBQUN3SyxHQUFELEVBQU14QyxLQUFOLEVBQWdCO0FBQ25CbEgsYUFBUyxDQUFDMEosR0FBRCxDQUFULEdBQWlCeEMsS0FBakI7QUFDRDtBQUpZLENBQWYsRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDVkE7Ozs7Ozs7QUFRQTtBQUNBOztBQUVBLFNBQVN6SSxRQUFULENBQWtCZ0QsS0FBbEIsRUFBeUI7QUFBQSxNQUNoQjZPLGFBRGdCLEdBQ2dCN08sS0FEaEIsQ0FDaEI2TyxhQURnQjtBQUFBLE1BQ0VDLFVBREYseUZBQ2dCOU8sS0FEaEI7O0FBRXZCLFNBQ0UsOElBQ004TyxVQUROO0FBRUUsUUFBSSxFQUFDLFVBRlA7QUFHRSxPQUFHLEVBQUUsYUFBQUMsS0FBSyxFQUFJO0FBQ1osVUFBSUEsS0FBSixFQUFXO0FBQ1RBLGFBQUssQ0FBQ0YsYUFBTixHQUFzQkEsYUFBdEI7QUFDRDtBQUNGO0FBUEgsS0FERjtBQVdEOztBQUVEN1IsUUFBUSxDQUFDMkUsU0FBVCxHQUFxQjtBQUNuQmtOLGVBQWEsRUFBRWpOLGlEQUFTLENBQUNvTjtBQUROLENBQXJCO0FBSWVoUyx1RUFBZixFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzlCQTs7Ozs7OztBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0lBRU1pUyxnQjs7Ozs7Ozs7Ozs7Ozs2QkFnQkszUixJLEVBQU07QUFDYixVQUFJQSxJQUFKLEVBQVU7QUFDUkEsWUFBSSxHQUFHQSxJQUFJLENBQUM0UixNQUFMLENBQVksS0FBS2xQLEtBQUwsQ0FBV2tQLE1BQXZCLENBQVA7QUFDRDs7QUFDRCxXQUFLbFAsS0FBTCxDQUFXbVAsUUFBWCxDQUFvQjdSLElBQXBCO0FBQ0Q7Ozs2QkFFUTtBQUNQLFVBQU13UixVQUFVLEdBQUd2TiwyREFBSSxDQUFDLEtBQUt2QixLQUFOLEVBQWEsQ0FBQyxZQUFELEVBQWUsT0FBZixFQUF3QixVQUF4QixFQUFvQyxLQUFwQyxFQUEyQyxLQUEzQyxDQUFiLENBQXZCO0FBQ0EsYUFDRSwyREFBQyx1REFBRCw0RUFDTThPLFVBRE47QUFFRSxrQkFBVSxFQUFFLEtBQUs5TyxLQUFMLENBQVdvUCxVQUZ6QjtBQUdFLGdCQUFRLEVBQUUsS0FBS3BQLEtBQUwsQ0FBV3lGLEtBQVgsSUFBb0I0Siw2Q0FBTSxDQUFDLEtBQUtyUCxLQUFMLENBQVd5RixLQUFaLENBSHRDO0FBSUUsZ0JBQVEsRUFBSSxLQUFLMEosUUFBVCxNQUFJLElBQUosQ0FKVjtBQUtFLGVBQU8sRUFBRSxLQUFLblAsS0FBTCxDQUFXc08sR0FBWCxJQUFrQmUsNkNBQU0sQ0FBQyxLQUFLclAsS0FBTCxDQUFXc08sR0FBWixDQUxuQztBQU1FLGVBQU8sRUFBRSxLQUFLdE8sS0FBTCxDQUFXdU8sR0FBWCxJQUFrQmMsNkNBQU0sQ0FBQyxLQUFLclAsS0FBTCxDQUFXdU8sR0FBWixDQU5uQztBQU9FLG1CQUFXLEVBQUU7QUFQZixTQURGO0FBV0Q7Ozs7RUFwQzRCOU0sNENBQUssQ0FBQ0MsUzs7NkVBQS9CdU4sZ0IsZUFDZTtBQUNqQkMsUUFBTSxFQUFFdE4sa0RBQVMsQ0FBQ2tILE1BREQ7QUFFakJzRyxZQUFVLEVBQUV4TixrREFBUyxDQUFDa0gsTUFGTDtBQUdqQndGLEtBQUcsRUFBRTFNLGtEQUFTLENBQUMwTixHQUhFO0FBSWpCZixLQUFHLEVBQUUzTSxrREFBUyxDQUFDME4sR0FKRTtBQUtqQjdKLE9BQUssRUFBRTdELGtEQUFTLENBQUMwTixHQUxBO0FBTWpCQyxNQUFJLEVBQUUzTixrREFBUyxDQUFDb04sSUFOQztBQU9qQlEsUUFBTSxFQUFFNU4sa0RBQVMsQ0FBQ0UsSUFQRDtBQVFqQnFOLFVBQVEsRUFBRXZOLGtEQUFTLENBQUNFLElBQVYsQ0FBZTJOO0FBUlIsQzs7NkVBRGZSLGdCLGtCQVlrQjtBQUNwQkcsWUFBVSxFQUFFO0FBRFEsQzs7QUEyQlRILCtFQUFmLEU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNyREE7Ozs7Ozs7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUEsSUFBTVMsY0FBYyxHQUFHQyw4RUFBYyxDQUFDLElBQUQsRUFBTyxJQUFQLEVBQWEsSUFBYixDQUFyQzs7SUFFTUMsWTs7Ozs7QUFXSix3QkFBWTVQLEtBQVosRUFBbUI7QUFBQTs7QUFBQTs7QUFDakIsZ05BQU1BLEtBQU47QUFDQSxVQUFLNlAsS0FBTCxHQUFhO0FBQ1hwSyxXQUFLLEVBQUV6RixLQUFLLENBQUN5RjtBQURGLEtBQWI7QUFGaUI7QUFLbEI7Ozs7OENBRXlCcUssUyxFQUFXO0FBQ25DLFVBQUksQ0FBQzFKLDZEQUFPLENBQUMsS0FBS3lKLEtBQUwsQ0FBV3BLLEtBQVosRUFBbUJxSyxTQUFTLENBQUNySyxLQUE3QixDQUFaLEVBQWlEO0FBQy9Dc0sscUVBQVcsQ0FBQyxLQUFLaEIsS0FBTixDQUFYLENBQXdCdEosS0FBeEIsR0FBZ0MsS0FBS29LLEtBQUwsQ0FBV3BLLEtBQVgsR0FBbUJxSyxTQUFTLENBQUNySyxLQUE3RDtBQUNEO0FBQ0Y7OztxQ0FFZ0J2RSxDLEVBQUc7QUFDbEIsVUFBTUYsTUFBTSxHQUFHRSxDQUFDLENBQUNGLE1BQWpCO0FBQ0EsVUFBTWdQLGFBQWEsR0FBR0MsVUFBVSxDQUFDalAsTUFBTSxDQUFDeUUsS0FBUixDQUFoQyxDQUZrQixDQUU4Qjs7QUFDaEQsVUFBSXpFLE1BQU0sQ0FBQ3lFLEtBQVAsS0FBaUIsRUFBakIsSUFBdUJ6RSxNQUFNLENBQUNrUCxRQUFQLENBQWdCQyxLQUEzQyxFQUFrRDtBQUFFO0FBQ2xELGFBQUtOLEtBQUwsQ0FBV3BLLEtBQVgsR0FBbUIsSUFBbkI7QUFDRCxPQUZELE1BRU8sSUFBSWlLLGNBQWMsQ0FBQ00sYUFBRCxDQUFsQixFQUFtQztBQUN4QyxhQUFLSCxLQUFMLENBQVdwSyxLQUFYLEdBQW1CLEVBQW5CO0FBQ0QsT0FGTSxNQUVBO0FBQ0wsYUFBS29LLEtBQUwsQ0FBV3BLLEtBQVgsR0FBbUJ1SyxhQUFuQjtBQUNEOztBQUVELFdBQUtoUSxLQUFMLENBQVdtUCxRQUFYLENBQW9CLEtBQUtVLEtBQUwsQ0FBV3BLLEtBQS9CO0FBQ0Q7Ozs2QkFFUTtBQUFBOztBQUNQLGFBQ0U7QUFDRSxZQUFJLEVBQUM7QUFEUCxTQUVNbEUsMERBQUksQ0FBQyxLQUFLdkIsS0FBTixFQUFhLE9BQWIsQ0FGVjtBQUdFLFlBQUksRUFBQyxRQUhQO0FBSUUsV0FBRyxFQUFFLGFBQUMrTyxLQUFEO0FBQUEsaUJBQVcsTUFBSSxDQUFDQSxLQUFMLEdBQWFBLEtBQXhCO0FBQUEsU0FKUDtBQUtFLGdCQUFRLEVBQUksS0FBS3FCLGdCQUFULE1BQUksSUFBSixDQUxWO0FBTUUsb0JBQVksRUFBRSxLQUFLcFEsS0FBTCxDQUFXeUY7QUFOM0IsU0FERjtBQVVEOzs7O0VBakR3QmhFLDZDQUFLLENBQUNDLFM7OzZFQUEzQmtPLFksZUFDZTtBQUNqQlQsVUFBUSxFQUFFdk4sa0RBQVMsQ0FBQ0UsSUFBVixDQUFlMk4sVUFEUjtBQUVqQmhLLE9BQUssRUFBRTdELGtEQUFTLENBQUN5TyxTQUFWLENBQW9CLENBQ3pCek8sa0RBQVMsQ0FBQzVELE1BRGUsRUFFekI7QUFDQTtBQUNBNEQsb0RBQVMsQ0FBQ2tILE1BSmUsQ0FBcEI7QUFGVSxDOztBQW1ETjhHLDJFQUFmLEU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNwRUE7Ozs7Ozs7QUFRQTtBQUNBO0FBQ0E7O0lBRU1VLFk7Ozs7O0FBaUJKLHdCQUFZdFEsS0FBWixFQUFtQjtBQUFBOztBQUFBOztBQUNqQixnTkFBTUEsS0FBTjtBQUNBLFVBQUs2UCxLQUFMLEdBQWE7QUFDWFUsYUFBTyxFQUFFdlEsS0FBSyxDQUFDdVEsT0FESjtBQUVYQyxhQUFPLEVBQUVDLE9BQU8sQ0FBQ3pRLEtBQUssQ0FBQ3dLLEtBQVA7QUFGTCxLQUFiO0FBRmlCO0FBTWxCOzs7O3dDQUVtQjtBQUFBOztBQUNsQixVQUFJLEtBQUt4SyxLQUFMLENBQVd3SyxLQUFmLEVBQXNCO0FBQ3BCLGFBQUt4SyxLQUFMLENBQVd3SyxLQUFYLENBQWlCa0csSUFBakIsQ0FBc0IsRUFBdEIsRUFDRzdOLElBREgsQ0FDUSxVQUFBQyxJQUFJLEVBQUk7QUFDWkEsY0FBSSxDQUFDNk4sT0FBTCxDQUFhLENBQUMsSUFBRCxFQUFPLEVBQVAsQ0FBYjs7QUFFQSxnQkFBSSxDQUFDQyxRQUFMLENBQWM7QUFDWkwsbUJBQU8sRUFBRXpOLElBREc7QUFFWjBOLG1CQUFPLEVBQUU7QUFGRyxXQUFkO0FBSUQsU0FSSCxXQVNTLFVBQUF4TyxHQUFHLEVBQUk7QUFDWmlKLGlCQUFPLENBQUNpQixLQUFSLENBQWNsSyxHQUFkO0FBQ0QsU0FYSDtBQVlEO0FBQ0Y7OztpQ0FFWTtBQUNYLGFBQU8sS0FBS2hDLEtBQUwsQ0FBV3dLLEtBQVgsR0FBbUIsS0FBS3FGLEtBQUwsQ0FBV1UsT0FBOUIsR0FBd0MsS0FBS3ZRLEtBQUwsQ0FBV3VRLE9BQTFEO0FBQ0Q7OztpQ0FFWXJQLEMsRUFBRztBQUNkLFVBQUkyUCxNQUFNLEdBQUcsS0FBS0MsVUFBTCxHQUFrQjVQLENBQUMsQ0FBQ0YsTUFBRixDQUFTeUUsS0FBM0IsQ0FBYjs7QUFDQSxVQUFJLEVBQUVvTCxNQUFNLFlBQVkxTCxLQUFwQixDQUFKLEVBQWdDO0FBQzlCMEwsY0FBTSxHQUFHLENBQUNBLE1BQUQsRUFBU0EsTUFBVCxDQUFUO0FBQ0Q7O0FBQ0QsV0FBSzdRLEtBQUwsQ0FBV21QLFFBQVgsQ0FBb0IwQixNQUFNLENBQUMsQ0FBRCxDQUExQjs7QUFDQSxVQUFJLEtBQUs3USxLQUFMLENBQVcrUSxhQUFmLEVBQThCO0FBQzVCLGFBQUsvUSxLQUFMLENBQVcrUSxhQUFYLENBQXlCRixNQUFNLENBQUMsQ0FBRCxDQUEvQjtBQUNEO0FBQ0Y7Ozs2QkFFUTtBQUFBOztBQUNQLFVBQU1OLE9BQU8sR0FBRyxLQUFLTyxVQUFMLEVBQWhCO0FBQ0EsVUFBTUUsVUFBVSxHQUFHckksK0RBQVMsQ0FBQzRILE9BQUQsRUFBVSxVQUFBTSxNQUFNLEVBQUk7QUFDOUMsZUFBT3pLLDZEQUFPLENBQUN5SyxNQUFNLFlBQVkxTCxLQUFsQixHQUEwQjBMLE1BQU0sQ0FBQyxDQUFELENBQWhDLEdBQXNDQSxNQUF2QyxFQUErQyxNQUFJLENBQUM3USxLQUFMLENBQVd5RixLQUExRCxDQUFkO0FBQ0QsT0FGMkIsQ0FBNUI7QUFJQSxhQUNFLCtJQUNNbEUsMERBQUksQ0FBQyxLQUFLdkIsS0FBTixFQUFhLENBQUMsT0FBRCxFQUFVLFNBQVYsQ0FBYixDQURWO0FBRUUsYUFBSyxFQUFFZ1IsVUFGVDtBQUdFLGdCQUFRLEVBQVEsS0FBS0MsWUFBYixNQUFFLElBQUYsQ0FIVjtBQUlFLGdCQUFRLEVBQUUsS0FBS2pSLEtBQUwsQ0FBV2tSLFFBQVgsSUFBdUIsS0FBS3JCLEtBQUwsQ0FBV1c7QUFKOUMsVUFNR0QsT0FBTyxDQUFDOUgsR0FBUixDQUFZLFVBQUN2QyxJQUFELEVBQU9pTCxLQUFQLEVBQWlCO0FBQzVCLFlBQU1DLFdBQVcsR0FBS2xMLElBQUksWUFBWWYsS0FBakIsSUFBNEJlLElBQUksQ0FBQyxDQUFELENBQUosWUFBbUIvRyxNQUFoRCxHQUEyRCtHLElBQUksQ0FBQyxDQUFELENBQS9ELEdBQXFFLEVBQXpGO0FBQ0EsZUFDRTtBQUFRLGFBQUcsRUFBRWlMLEtBQWI7QUFBb0IsZUFBSyxFQUFFQTtBQUEzQixXQUFzQ0MsV0FBdEMsR0FDR2xMLElBQUksWUFBWWYsS0FBaEIsR0FBd0JlLElBQUksQ0FBQyxDQUFELENBQTVCLEdBQWtDQSxJQURyQyxDQURGO0FBS0QsT0FQQSxDQU5ILENBREY7QUFpQkQ7Ozs7RUFoRndCekUsNENBQUssQ0FBQ0MsUzs7NkVBQTNCNE8sWSxlQUNlO0FBQ2pCQyxTQUFPLEVBQUUzTyxpREFBUyxDQUFDeVAsS0FERjtBQUNTO0FBQzFCO0FBQ0E3RyxPQUFLLEVBQUU1SSxpREFBUyxDQUFDMFAsS0FBVixDQUFnQjtBQUNyQlosUUFBSSxFQUFFOU8saURBQVMsQ0FBQ0U7QUFESyxHQUFoQixDQUhVO0FBTWpCb1AsVUFBUSxFQUFFdFAsaURBQVMsQ0FBQ29OLElBTkg7QUFPakJHLFVBQVEsRUFBRXZOLGlEQUFTLENBQUNFLElBQVYsQ0FBZTJOLFVBUFI7QUFRakJzQixlQUFhLEVBQUVuUCxpREFBUyxDQUFDRSxJQVJSO0FBU2pCMkQsT0FBSyxFQUFFN0QsaURBQVMsQ0FBQzBOO0FBVEEsQzs7NkVBRGZnQixZLGtCQWFrQjtBQUNwQkMsU0FBTyxFQUFFO0FBRFcsQzs7QUFzRVRELDJFQUFmLEU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQy9GQTs7Ozs7OztBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUEsSUFBTWlCLE9BQU8sR0FBRyxtQkFBaEI7QUFDQSxJQUFNQyxPQUFPLEdBQUc7QUFDZFgsUUFBTSxFQUFFLDBCQURNO0FBRWRZLGVBQWEsRUFBRSxrQ0FGRDtBQUdkQyxrQkFBZ0IsRUFBRSxxQ0FISjtBQUlkQyxhQUFXLEVBQUU7QUFDWEMsU0FBSyxFQUFFLGdDQURJO0FBRVhDLFVBQU0sRUFBRSxpQ0FGRztBQUdYQyxXQUFPLEVBQUUsa0NBSEU7QUFJWEMsU0FBSyxFQUFFO0FBSkksR0FKQztBQVVkQyxhQUFXLEVBQUUscUJBVkM7QUFXZEMsV0FBUyxFQUFFLHlCQVhHO0FBWWRDLE9BQUssRUFBRSxvQkFaTztBQWFkQyxJQUFFLEVBQUU7QUFiVSxDQUFoQjtBQWVBLElBQU1DLE9BQU8sR0FBRyxDQUFoQjtBQUNBLElBQU1DLFNBQVMsR0FBRyxFQUFsQjtBQUNBLElBQU1DLFVBQVUsR0FBRyxFQUFuQjtBQUNBLElBQU1DLFlBQVksR0FBRyxFQUFyQjtBQUNBLElBQU1DLGNBQWMsR0FBRyxFQUF2QjtBQUNBLElBQU1DLGdCQUFnQixHQUFHLEdBQXpCOztJQUVNQyxnQjs7Ozs7QUEyQkosNEJBQVkxUyxLQUFaLEVBQW1CO0FBQUE7O0FBQUE7O0FBQ2pCLG9OQUFNQSxLQUFOO0FBQ0EsVUFBSzJTLFNBQUwsR0FBaUJ0TSwrREFBUSxDQUFDLE1BQUtzTSxTQUFOLENBQXpCO0FBQ0EsVUFBSzlDLEtBQUwsR0FBYTtBQUNYK0MsY0FBUSxFQUFFLEtBREM7QUFFWHJDLGFBQU8sRUFBRSxFQUZFO0FBR1hzQyx1QkFBaUIsRUFBRSxJQUhSO0FBSVhDLG9CQUFjLEVBQUUsRUFKTDtBQUtYQyxXQUFLLEVBQUUsRUFMSTtBQU1YQyxpQkFBVyxFQUFFO0FBTkYsS0FBYjtBQVFBLFVBQUtDLGFBQUwsR0FBcUIsTUFBS0EsYUFBTCxDQUFtQi9TLElBQW5CLDRGQUFyQjtBQUNBLFVBQUtnVCxlQUFMLEdBQXVCLE1BQUtBLGVBQUwsQ0FBcUJoVCxJQUFyQiw0RkFBdkI7QUFDQSxVQUFLaVQsbUJBQUwsR0FBMkIsTUFBS0EsbUJBQUwsQ0FBeUJqVCxJQUF6Qiw0RkFBM0I7QUFDQSxVQUFLa1QsWUFBTCxHQUFvQixNQUFLQSxZQUFMLENBQWtCbFQsSUFBbEIsNEZBQXBCO0FBQ0EsVUFBS0Qsb0JBQUwsR0FBNEIsTUFBS0Esb0JBQUwsQ0FBMEJDLElBQTFCLDRGQUE1QjtBQUNBLFVBQUtDLHNCQUFMLEdBQThCLE1BQUtBLHNCQUFMLENBQTRCRCxJQUE1Qiw0RkFBOUI7QUFDQSxVQUFLbVQsV0FBTCxHQUFtQixNQUFLQSxXQUFMLENBQWlCblQsSUFBakIsNEZBQW5CO0FBQ0EsVUFBS29ULFNBQUwsR0FBaUIsTUFBS0EsU0FBTCxDQUFlcFQsSUFBZiw0RkFBakI7QUFsQmlCO0FBbUJsQjs7Ozt3Q0FFbUI7QUFDbEIsV0FBS3FULFVBQUwsR0FBa0IsSUFBbEI7O0FBQ0EsVUFBSSxLQUFLdlQsS0FBTCxDQUFXd1QsWUFBZixFQUE2QjtBQUMzQixhQUFLQyxXQUFMLENBQWlCLEtBQUt6VCxLQUFMLENBQVd3VCxZQUE1QixFQUEwQyxJQUExQztBQUNELE9BRkQsTUFFTyxJQUFJLEtBQUt4VCxLQUFMLENBQVd5SixjQUFYLENBQTBCLE9BQTFCLENBQUosRUFBd0M7QUFDN0MsYUFBS2dLLFdBQUwsQ0FBaUIsS0FBS3pULEtBQUwsQ0FBVytTLEtBQTVCLEVBQW1DLElBQW5DO0FBQ0QsT0FGTSxNQUVBO0FBQ0wsYUFBS1csa0JBQUwsQ0FBd0IsS0FBSzFULEtBQUwsQ0FBV3dLLEtBQW5DLEVBQTBDLEtBQUt4SyxLQUFMLENBQVd5RixLQUFyRDtBQUNEO0FBQ0Y7OzsyQ0FFc0I7QUFDckIsV0FBSzhOLFVBQUwsR0FBa0IsS0FBbEI7QUFDRDs7OzBDQUVxQnpELFMsRUFBVzZELFMsRUFBVztBQUMxQyxhQUFPLEtBQUs5RCxLQUFMLEtBQWU4RCxTQUFmLElBQ0YsQ0FBQ3ZOLDhEQUFPLENBQUMsS0FBS3BHLEtBQUwsQ0FBV3lGLEtBQVosRUFBbUJxSyxTQUFTLENBQUNySyxLQUE3QixDQUROLElBRUYsS0FBS3pGLEtBQUwsQ0FBV2tSLFFBQVgsS0FBd0JwQixTQUFTLENBQUNvQixRQUZ2QztBQUdEOzs7OENBRXlCcEIsUyxFQUFXO0FBQ25DLFVBQUksQ0FBQzFKLDhEQUFPLENBQUMsS0FBS3BHLEtBQUwsQ0FBV3lGLEtBQVosRUFBbUJxSyxTQUFTLENBQUNySyxLQUE3QixDQUFaLEVBQWlEO0FBQy9DLFlBQUksQ0FBQyxLQUFLekYsS0FBTCxDQUFXeUosY0FBWCxDQUEwQixPQUExQixDQUFMLEVBQXlDO0FBQ3ZDLGVBQUtpSyxrQkFBTCxDQUF3QjVELFNBQVMsQ0FBQ3RGLEtBQWxDLEVBQXlDc0YsU0FBUyxDQUFDckssS0FBbkQ7QUFDRDtBQUNGOztBQUNELFVBQUksS0FBS3pGLEtBQUwsQ0FBVytTLEtBQVgsS0FBcUJqRCxTQUFTLENBQUNpRCxLQUFuQyxFQUEwQztBQUN4QyxhQUFLVSxXQUFMLENBQWlCM0QsU0FBUyxDQUFDaUQsS0FBM0IsRUFBa0MsSUFBbEM7QUFDRDtBQUNGOzs7b0NBRWVsQyxNLEVBQVE7QUFDdEIsYUFBTzFMLEtBQUssQ0FBQ0MsT0FBTixDQUFjeUwsTUFBTSxDQUFDa0MsS0FBckIsSUFBOEJsQyxNQUFNLENBQUNrQyxLQUFQLENBQWFsQyxNQUFNLENBQUNrQyxLQUFQLENBQWFwVCxNQUFiLEdBQXNCLENBQW5DLENBQTlCLEdBQXNFa1IsTUFBTSxDQUFDa0MsS0FBcEY7QUFDRDs7O2dDQUVXQSxLLEVBQU9hLFcsRUFBYTtBQUM5QixVQUFJYixLQUFLLEtBQUssSUFBVixJQUFrQkEsS0FBSyxLQUFLbEwsU0FBaEMsRUFBMkM7QUFDekNrTCxhQUFLLEdBQUcsRUFBUjtBQUNEOztBQUNELFdBQUtuQyxRQUFMLENBQWM7QUFDWm1DLGFBQUssRUFBRUEsS0FESztBQUVaRCxzQkFBYyxFQUFFYyxXQUFXLEdBQUdiLEtBQUgsR0FBVyxLQUFLbEQsS0FBTCxDQUFXaUQ7QUFGckMsT0FBZDtBQUlEOzs7dUNBRWtCdEksSyxFQUFPcUosRSxFQUFJO0FBQUE7O0FBQzVCLFVBQUlBLEVBQUUsS0FBSyxJQUFQLElBQWVBLEVBQUUsS0FBS2hNLFNBQTFCLEVBQXFDO0FBQ25DLGVBQU8sS0FBSzRMLFdBQUwsQ0FBaUIsRUFBakIsRUFBcUIsSUFBckIsQ0FBUDtBQUNEOztBQUVEakosV0FBSyxDQUFDc0osUUFBTixDQUFlRCxFQUFmLEVBQ0doUixJQURILENBQ1EsVUFBQ2tRLEtBQUQsRUFBVztBQUNmLFlBQUksQ0FBQyxNQUFJLENBQUNRLFVBQVYsRUFBc0I7QUFDcEI7QUFDRDs7QUFDRCxjQUFJLENBQUNFLFdBQUwsQ0FBaUJWLEtBQWpCLEVBQXdCLElBQXhCO0FBQ0QsT0FOSCxXQU9TLFVBQUEvUSxHQUFHLEVBQUk7QUFDWixZQUFJQSxHQUFKLEVBQVM7QUFDUGlKLGlCQUFPLENBQUNpQixLQUFSLENBQWNsSyxHQUFkO0FBQ0EsZ0JBQU1BLEdBQU47QUFDRDtBQUNGLE9BWkg7QUFhRDs7Ozs7OzhGQUVpQitSLGE7Ozs7Ozs7O3VCQUdFLEtBQUtwQixTQUFMLENBQWVvQixhQUFmLEM7OztBQUFoQnhELHVCOzs7Ozs7OztvQkFFTSx1QkFBYXBULDhEOzs7Ozs7Ozs7OztBQU1yQixvQkFBSW9ULE9BQU8sQ0FBQzVRLE1BQVIsSUFBa0IsS0FBS0ssS0FBTCxDQUFXZ1UsZUFBakMsRUFBa0Q7QUFDaER6RCx5QkFBTyxDQUFDSSxPQUFSLENBQWdCO0FBQ2RrRCxzQkFBRSxFQUFFLElBRFU7QUFFZGQseUJBQUssRUFBRSxNQUZPLENBRUU7O0FBRkYsbUJBQWhCO0FBSUQ7O3FCQUVHLEtBQUtRLFU7Ozs7Ozt1QkFDRCxLQUFLM0MsUUFBTCxDQUFjO0FBQ2xCTCx5QkFBTyxFQUFQQSxPQURrQjtBQUVsQnNDLG1DQUFpQixFQUFFLElBRkQ7QUFHbEJyQyx5QkFBTyxFQUFFO0FBSFMsaUJBQWQsQzs7O0FBT0Z5RCx1QixHQUFVN1QsUUFBUSxDQUFDOFQsYUFBVCxXQUEwQjNDLE9BQTFCLGlDOztBQUNoQixvQkFBSTBDLE9BQUosRUFBYTtBQUNYQSx5QkFBTyxDQUFDRSxLQUFSLEdBQWdCO0FBQ2RDLDBCQUFNLEVBQUUsTUFETTtBQUVkQyw0QkFBUSxFQUFFO0FBRkksbUJBQWhCO0FBSUQ7O0FBQ0QscUJBQUtDLGFBQUw7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs4QkFHUVAsYSxFQUFlO0FBQ3ZCLGFBQU8sS0FBSy9ULEtBQUwsQ0FBV3dLLEtBQVgsQ0FBaUJrRyxJQUFqQixDQUFzQnFELGFBQWEsSUFBSSxFQUF2QyxDQUFQO0FBQ0Q7Ozs7OzsrRkFFZUEsYTs7Ozs7Ozs7Ozs7O0FBQWVRLGdDLDhEQUFtQixLOztzQkFDNUMsS0FBS3ZVLEtBQUwsQ0FBV2tSLFFBQVgsSUFBdUIsS0FBS3JCLEtBQUwsQ0FBVytDLFE7Ozs7Ozs7O0FBSWhDSSwyQixHQUFjLEtBQUt3Qix1QkFBTCxFOztvQkFDZnhCLFc7Ozs7Ozs7Ozt1QkFJQzVPLGtFQUFTLENBQUcsS0FBS3dNLFFBQVIsTUFBRyxJQUFILEdBQWtCLElBQWxCLENBQVQsQ0FBaUM7QUFDckNnQywwQkFBUSxFQUFFLElBRDJCO0FBRXJDcEMseUJBQU8sRUFBRSxJQUY0QjtBQUdyQ3dDLDZCQUFXLEVBQVhBO0FBSHFDLGlCQUFqQyxDOzs7QUFLTmpELDhFQUFXLENBQUMsS0FBS2hCLEtBQU4sQ0FBWCxDQUF3QjBGLE1BQXhCOzt1QkFFTSxLQUFLQyxXQUFMLENBQWlCWCxhQUFqQixDOzs7b0JBRUQsS0FBS2xFLEtBQUwsQ0FBV1UsT0FBWCxDQUFtQjVRLE07Ozs7Ozs7O3FCQUlwQjRVLGdCOzs7OztBQUNJdE0sbUIsR0FBTSxLQUFLNEgsS0FBTCxDQUFXVSxPQUFYLENBQW1CLENBQW5CLEVBQXNCaEosSUFBdEIsS0FBK0IsT0FBL0IsR0FBeUMsQ0FBekMsR0FBNkMsQzs7dUJBQ25ELEtBQUs2TCxZQUFMLENBQWtCbkwsR0FBbEIsRUFBdUIsSUFBdkIsQzs7Ozs7O0FBSUY0SyxpQyxHQUFvQmxLLGdFQUFTLENBQUMsS0FBS2tILEtBQUwsQ0FBV1UsT0FBWixFQUFxQixVQUFDTSxNQUFELEVBQVk7QUFDbEUseUJBQU96Syw4REFBTyxDQUFDeUssTUFBTSxDQUFDZ0QsRUFBUixFQUFZLE1BQUksQ0FBQzdULEtBQUwsQ0FBV3lGLEtBQXZCLENBQWQ7QUFDRCxpQkFGa0MsQzs7QUFJbkMsb0JBQUlvTixpQkFBaUIsS0FBSyxDQUFDLENBQTNCLEVBQThCO0FBQzVCLHVCQUFLOEIsNkJBQUwsQ0FBbUMxWCxNQUFNLENBQUM0VixpQkFBRCxDQUF6QztBQUNEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7K0ZBR2lCM1IsQzs7Ozs7O3VCQUNaLEtBQUtvUyxTQUFMLEU7OztvQkFDRCxLQUFLQyxVOzs7Ozs7OztBQUlWeEQsOEVBQVcsQ0FBQyxLQUFLaEIsS0FBTixDQUFYLENBQXdCMEYsTUFBeEI7O0FBQ0Esb0JBQUksS0FBS3pVLEtBQUwsQ0FBVzRVLE9BQWYsRUFBd0I7QUFDdEIsdUJBQUs1VSxLQUFMLENBQVc0VSxPQUFYLENBQW1CMVQsQ0FBbkI7QUFDRDs7Ozs7Ozs7Ozs7Ozs7Ozs7OytCQUdRMlQsVSxFQUFZO0FBQ3JCLFVBQUlBLFVBQUosRUFBZ0I7QUFDZDlFLHNFQUFXLENBQUMsS0FBS2hCLEtBQU4sQ0FBWCxDQUF3QitGLElBQXhCO0FBQ0Q7O0FBQ0QsVUFBSSxDQUFDLEtBQUtqRixLQUFMLENBQVcrQyxRQUFaLElBQXdCLENBQUMsS0FBS1csVUFBbEMsRUFBOEM7QUFDNUM7QUFDRDs7QUFDRCxXQUFLM0MsUUFBTCxDQUFjO0FBQ1pMLGVBQU8sRUFBRSxFQURHO0FBRVpzQyx5QkFBaUIsRUFBRSxJQUZQO0FBR1pELGdCQUFRLEVBQUU7QUFIRSxPQUFkO0FBS0Q7Ozs7Ozs7Ozs7O3FCQUdLLEtBQUsvQyxLQUFMLENBQVcrQyxROzs7OztBQUNiLHFCQUFLbUMsVUFBTDs7Ozs7Ozt1QkFFTSxLQUFLekIsU0FBTCxFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7a0NBSUl6QyxNLEVBQVE7QUFDcEJBLFlBQU0sR0FBR0EsTUFBTSxJQUFJO0FBQ2pCZ0QsVUFBRSxFQUFFLElBRGE7QUFFakJkLGFBQUssRUFBRSxFQUZVO0FBR2pCaUMsZ0JBQVEsRUFBRTtBQUhPLE9BQW5CO0FBS0EsV0FBS2hWLEtBQUwsQ0FBV21QLFFBQVgsQ0FBb0IwQixNQUFNLENBQUNnRCxFQUEzQixFQUErQmhELE1BQS9COztBQUNBLFVBQUksS0FBSzdRLEtBQUwsQ0FBVytRLGFBQWYsRUFBOEI7QUFDNUIsYUFBSy9RLEtBQUwsQ0FBVytRLGFBQVgsQ0FBeUJGLE1BQU0sQ0FBQ2tDLEtBQWhDO0FBQ0Q7O0FBQ0QsVUFBSSxLQUFLL1MsS0FBTCxDQUFXaVYsZ0JBQWYsRUFBaUM7QUFDL0IsYUFBS2pWLEtBQUwsQ0FBV2lWLGdCQUFYLENBQTRCcEUsTUFBTSxDQUFDbUUsUUFBbkM7QUFDRDs7QUFDRGpGLG9FQUFXLENBQUMsS0FBS2hCLEtBQU4sQ0FBWCxDQUF3QjBGLE1BQXhCO0FBQ0Q7Ozs7OzsrRkFFa0J4TSxHLEVBQUtpTixjOzs7OztBQUN0QixvQkFBSUEsY0FBYyxLQUFLLElBQXZCLEVBQTZCO0FBQzNCLHVCQUFLekIsV0FBTCxDQUFpQixLQUFLNUQsS0FBTCxDQUFXVSxPQUFYLENBQW1CdEksR0FBbkIsRUFBd0I4SyxLQUF6QztBQUNEOztxQkFDRyxLQUFLbEQsS0FBTCxDQUFXK0MsUTs7Ozs7QUFDYixxQkFBSytCLDZCQUFMLENBQW1DMU0sR0FBbkM7Ozs7Ozs7dUJBRU0sS0FBS3FMLFNBQUwsQ0FBZSxJQUFmLEM7OztBQUNOLHFCQUFLcUIsNkJBQUwsQ0FBbUMxTSxHQUFuQzs7Ozs7Ozs7Ozs7Ozs7Ozs7O2tEQUkwQkEsRyxFQUFLO0FBQ2pDLFdBQUs0SCxLQUFMLENBQVdnRCxpQkFBWCxHQUErQjVLLEdBQS9CO0FBQ0EsVUFBTWtOLFlBQVksR0FBRy9VLFFBQVEsQ0FBQzhULGFBQVQsWUFBMkIxQyxPQUFPLENBQUNDLGFBQW5DLEVBQXJCO0FBQ0EsVUFBTTJELFdBQVcsR0FBR2hWLFFBQVEsQ0FBQzhULGFBQVQsWUFBMkIxQyxPQUFPLENBQUNYLE1BQW5DLHlCQUF1RDVJLEdBQXZELFNBQXBCOztBQUNBLFVBQUlrTixZQUFKLEVBQWtCO0FBQ2hCQSxvQkFBWSxDQUFDRSxTQUFiLENBQXVCQyxNQUF2QixDQUE4QjlELE9BQU8sQ0FBQ0MsYUFBdEM7QUFDRDs7QUFDRCxVQUFJMkQsV0FBSixFQUFpQjtBQUNmQSxtQkFBVyxDQUFDQyxTQUFaLENBQXNCdkksR0FBdEIsQ0FBMEIwRSxPQUFPLENBQUNDLGFBQWxDO0FBQ0Q7O0FBQ0QsVUFBTThELFNBQVMsR0FBR25WLFFBQVEsQ0FBQ29WLGdCQUFULFlBQThCakUsT0FBOUIsNEJBQXNEdEosR0FBdEQsVUFBK0QsQ0FBL0QsQ0FBbEI7O0FBQ0EsV0FBS3FNLGFBQUwsQ0FBbUJpQixTQUFuQjtBQUNEOzs7dUNBRWtCO0FBQ2pCLFVBQUksQ0FBQyxLQUFLMUYsS0FBTCxDQUFXVSxPQUFYLENBQW1CNVEsTUFBeEIsRUFBZ0M7QUFDOUI7QUFDRDs7QUFFRCxVQUFJLEtBQUtrUSxLQUFMLENBQVdnRCxpQkFBWCxLQUFpQyxJQUFyQyxFQUEyQztBQUN6QyxhQUFLaEQsS0FBTCxDQUFXZ0QsaUJBQVgsR0FBK0IsQ0FBL0I7QUFDQSxlQUFPLEtBQUtPLFlBQUwsQ0FBa0IsS0FBS3ZELEtBQUwsQ0FBV2dELGlCQUE3QixFQUFnRCxJQUFoRCxDQUFQO0FBQ0Q7O0FBRUQsVUFBSTVLLEdBQUo7O0FBQ0EsV0FBS0EsR0FBRyxHQUFHLEtBQUs0SCxLQUFMLENBQVdnRCxpQkFBWCxHQUErQixDQUExQyxFQUE2QzVLLEdBQUcsR0FBRyxLQUFLNEgsS0FBTCxDQUFXVSxPQUFYLENBQW1CNVEsTUFBdEUsRUFBOEVzSSxHQUFHLEVBQWpGLEVBQXFGO0FBQ25GLFlBQUksS0FBSzRILEtBQUwsQ0FBV1UsT0FBWCxDQUFtQnRJLEdBQW5CLEVBQXdCNEwsRUFBNUIsRUFBZ0M7QUFDOUIsaUJBQU8sS0FBS1QsWUFBTCxDQUFrQm5MLEdBQWxCLEVBQXVCLElBQXZCLENBQVA7QUFDRDtBQUNGOztBQUNELFdBQUtBLEdBQUcsR0FBRyxDQUFYLEVBQWNBLEdBQUcsR0FBRyxLQUFLNEgsS0FBTCxDQUFXZ0QsaUJBQVgsR0FBK0IsQ0FBbkQsRUFBc0Q1SyxHQUFHLEVBQXpELEVBQTZEO0FBQzNELFlBQUksS0FBSzRILEtBQUwsQ0FBV1UsT0FBWCxDQUFtQnRJLEdBQW5CLEVBQXdCNEwsRUFBNUIsRUFBZ0M7QUFDOUIsaUJBQU8sS0FBS1QsWUFBTCxDQUFrQm5MLEdBQWxCLEVBQXVCLElBQXZCLENBQVA7QUFDRDtBQUNGO0FBQ0Y7Ozt1Q0FFa0I7QUFDakIsVUFBSSxLQUFLNEgsS0FBTCxDQUFXZ0QsaUJBQVgsS0FBaUMsSUFBckMsRUFBMkM7QUFDekMsYUFBS2hELEtBQUwsQ0FBV2dELGlCQUFYLEdBQStCLENBQS9CO0FBQ0EsZUFBTyxLQUFLTyxZQUFMLENBQWtCLEtBQUt2RCxLQUFMLENBQVdnRCxpQkFBN0IsQ0FBUDtBQUNEOztBQUVELFVBQUk1SyxHQUFKOztBQUNBLFdBQUtBLEdBQUcsR0FBRyxLQUFLNEgsS0FBTCxDQUFXZ0QsaUJBQVgsR0FBK0IsQ0FBMUMsRUFBNkM1SyxHQUFHLElBQUksQ0FBcEQsRUFBdURBLEdBQUcsRUFBMUQsRUFBOEQ7QUFDNUQsWUFBSSxLQUFLNEgsS0FBTCxDQUFXVSxPQUFYLENBQW1CdEksR0FBbkIsRUFBd0I0TCxFQUE1QixFQUFnQztBQUM5QixpQkFBTyxLQUFLVCxZQUFMLENBQWtCbkwsR0FBbEIsRUFBdUIsSUFBdkIsQ0FBUDtBQUNEO0FBQ0Y7O0FBQ0QsV0FBS0EsR0FBRyxHQUFHLEtBQUs0SCxLQUFMLENBQVdVLE9BQVgsQ0FBbUI1USxNQUFuQixHQUE0QixDQUF2QyxFQUEwQ3NJLEdBQUcsR0FBRyxLQUFLNEgsS0FBTCxDQUFXZ0QsaUJBQVgsR0FBK0IsQ0FBL0UsRUFBa0Y1SyxHQUFHLEVBQXJGLEVBQXlGO0FBQ3ZGLFlBQUksS0FBSzRILEtBQUwsQ0FBV1UsT0FBWCxDQUFtQnRJLEdBQW5CLEVBQXdCNEwsRUFBNUIsRUFBZ0M7QUFDOUIsaUJBQU8sS0FBS1QsWUFBTCxDQUFrQm5MLEdBQWxCLEVBQXVCLElBQXZCLENBQVA7QUFDRDtBQUNGO0FBQ0Y7OztrQ0FFYWpILE0sRUFBUTtBQUNwQixVQUFNeVUsU0FBUyxHQUFHclYsUUFBUSxDQUFDOFQsYUFBVCxZQUEyQjNDLE9BQTNCLGtCQUFsQjs7QUFDQSxVQUFJLENBQUNrRSxTQUFMLEVBQWdCO0FBQ2Q7QUFDRDs7QUFFRCxVQUFJLENBQUN6VSxNQUFMLEVBQWE7QUFDWHlVLGlCQUFTLENBQUNDLFNBQVYsR0FBc0IsQ0FBdEI7QUFDQTtBQUNEOztBQUVELFVBQUkxVSxNQUFNLENBQUMyVSxTQUFQLEdBQW1CRixTQUFTLENBQUNDLFNBQTdCLElBQTBDRCxTQUFTLENBQUNHLFlBQVYsR0FBeUI1VSxNQUFNLENBQUM0VSxZQUE5RSxFQUE0RjtBQUMxRkgsaUJBQVMsQ0FBQ0MsU0FBVixHQUFzQjFVLE1BQU0sQ0FBQzJVLFNBQVAsR0FBbUJGLFNBQVMsQ0FBQ0csWUFBN0IsR0FBNEM1VSxNQUFNLENBQUM0VSxZQUF6RTtBQUNELE9BRkQsTUFFTyxJQUFJNVUsTUFBTSxDQUFDMlUsU0FBUCxHQUFtQkYsU0FBUyxDQUFDQyxTQUE3QixHQUF5QyxDQUE3QyxFQUFnRDtBQUNyREQsaUJBQVMsQ0FBQ0MsU0FBVixHQUFzQjFVLE1BQU0sQ0FBQzJVLFNBQTdCO0FBQ0Q7QUFDRjs7O2dDQUVXRSxLLEVBQU87QUFDakIsYUFBT0EsS0FBUCxFQUFjO0FBQ1pBLGFBQUssR0FBR0EsS0FBSyxDQUFDQyxVQUFkOztBQUNBLFlBQUlELEtBQUssS0FBSzlGLDhEQUFXLENBQUMsSUFBRCxDQUF6QixFQUFpQztBQUMvQixpQkFBTyxJQUFQO0FBQ0Q7QUFDRjs7QUFDRCxhQUFPLEtBQVA7QUFDRDs7O3lDQUVvQjdPLEMsRUFBRzZVLE8sRUFBUztBQUMvQixVQUFJN1UsQ0FBQyxDQUFDOFUsTUFBRixLQUFhLENBQWpCLEVBQW9CO0FBQ2xCO0FBQ0Q7O0FBQ0QsVUFBSWhWLE1BQU0sR0FBR0UsQ0FBQyxDQUFDRixNQUFmOztBQUNBLFVBQUkrVSxPQUFKLEVBQWE7QUFDWCxZQUFJLENBQUMvVSxNQUFNLENBQUNxVSxTQUFQLENBQWlCcFUsUUFBakIsQ0FBMEJ1USxPQUFPLENBQUNYLE1BQWxDLENBQUwsRUFBZ0Q7QUFDOUM3UCxnQkFBTSxHQUFHQSxNQUFNLENBQUM4VSxVQUFoQjtBQUNEOztBQUNELFlBQUk5VSxNQUFNLENBQUNxVSxTQUFQLENBQWlCcFUsUUFBakIsQ0FBMEJ1USxPQUFPLENBQUNFLGdCQUFsQyxLQUF1RCxLQUFLN0IsS0FBTCxDQUFXK0MsUUFBdEUsRUFBZ0Y7QUFDOUUsZUFBS3FELGFBQUwsQ0FBbUIsS0FBS3BHLEtBQUwsQ0FBV1UsT0FBWCxDQUFtQnZQLE1BQU0sQ0FBQ2tWLFlBQVAsQ0FBb0IsVUFBcEIsQ0FBbkIsQ0FBbkI7O0FBQ0EsZUFBS25CLFVBQUwsQ0FBZ0IsSUFBaEI7QUFDRDtBQUNGLE9BUkQsTUFRTztBQUNMO0FBQ0EsWUFBSSxDQUFDdkosOERBQU8sQ0FBQ3hLLE1BQUQsYUFBYXdRLE9BQU8sQ0FBQ1EsV0FBckIsRUFBUCxDQUEyQ3JTLE1BQWhELEVBQXdEO0FBQ3RELGNBQUksQ0FBQ29RLDhEQUFXLENBQUMsS0FBS2hCLEtBQU4sQ0FBWCxDQUF3QnRKLEtBQTdCLEVBQW9DO0FBQ2xDLGlCQUFLd1EsYUFBTCxDQUFtQixJQUFuQjtBQUNELFdBRkQsTUFFTztBQUNMLGlCQUFLeEMsV0FBTCxDQUFpQixLQUFLNUQsS0FBTCxDQUFXaUQsY0FBNUI7QUFDRDtBQUNGOztBQUNELFlBQUksQ0FBQyxLQUFLcUQsV0FBTCxDQUFpQmpWLENBQUMsQ0FBQ0YsTUFBbkIsQ0FBTCxFQUFpQztBQUMvQixlQUFLK1QsVUFBTCxDQUFnQixJQUFoQjtBQUNEO0FBQ0Y7QUFDRjs7OzJDQUVzQjdULEMsRUFBRzZVLE8sRUFBUztBQUNqQyxVQUFJLENBQUNBLE9BQUQsSUFBWSxLQUFLbEcsS0FBTCxDQUFXK0MsUUFBM0IsRUFBcUM7QUFDbkMsWUFBTUksV0FBVyxHQUFHLEtBQUt3Qix1QkFBTCxFQUFwQjs7QUFDQSxZQUFJeEIsV0FBSixFQUFpQjtBQUNmLGVBQUtwQyxRQUFMLENBQWM7QUFDWm9DLHVCQUFXLEVBQUUsS0FBS3dCLHVCQUFMO0FBREQsV0FBZDtBQUdELFNBSkQsTUFJTztBQUNMLGVBQUtmLFdBQUwsQ0FBaUIsS0FBSzVELEtBQUwsQ0FBV2lELGNBQTVCOztBQUNBLGVBQUtpQyxVQUFMLENBQWdCLElBQWhCO0FBQ0Q7QUFDRjtBQUNGOzs7b0NBRWU3VCxDLEVBQUc7QUFDakIsVUFBSSxLQUFLbEIsS0FBTCxDQUFXa1IsUUFBZixFQUF5QjtBQUN2QjtBQUNEOztBQUNELGNBQVFoUSxDQUFDLENBQUNrVixPQUFWO0FBQ0EsYUFBSzVELGNBQUw7QUFDRXRSLFdBQUMsQ0FBQ21WLGNBQUY7O0FBQ0EsY0FBSSxDQUFDLEtBQUt4RyxLQUFMLENBQVcrQyxRQUFoQixFQUEwQjtBQUN4QixtQkFBTyxLQUFLVSxTQUFMLENBQWUsRUFBZixFQUFtQixJQUFuQixDQUFQO0FBQ0Q7O0FBQ0QsZUFBS2dELGdCQUFMOztBQUNBOztBQUNGLGFBQUsvRCxZQUFMO0FBQ0VyUixXQUFDLENBQUNtVixjQUFGOztBQUNBLGNBQUksQ0FBQyxLQUFLeEcsS0FBTCxDQUFXK0MsUUFBaEIsRUFBMEI7QUFDeEIsbUJBQU8sS0FBS1UsU0FBTCxFQUFQO0FBQ0Q7O0FBQ0QsZUFBS2lELGdCQUFMOztBQUNBOztBQUNGLGFBQUtsRSxTQUFMO0FBQ0VuUixXQUFDLENBQUNtVixjQUFGOztBQUVBLGNBQUksS0FBS3hHLEtBQUwsQ0FBV2dELGlCQUFYLEtBQWlDLElBQXJDLEVBQTJDO0FBQ3pDLGlCQUFLb0QsYUFBTCxDQUFtQixJQUFuQjtBQUNELFdBRkQsTUFFTztBQUNMLGlCQUFLQSxhQUFMLENBQW1CLEtBQUtwRyxLQUFMLENBQVdVLE9BQVgsQ0FBbUIsS0FBS1YsS0FBTCxDQUFXZ0QsaUJBQTlCLENBQW5CO0FBQ0Q7O0FBQ0QsZUFBS2tDLFVBQUw7O0FBQ0E7O0FBQ0YsYUFBSzNDLE9BQUw7QUFDQSxhQUFLRSxVQUFMO0FBQ0UsY0FBSXBSLENBQUMsQ0FBQ2tWLE9BQUYsS0FBYzlELFVBQWxCLEVBQThCO0FBQzVCcFIsYUFBQyxDQUFDbVYsY0FBRjtBQUNEOztBQUNELGNBQUksQ0FBQ25WLENBQUMsQ0FBQ0YsTUFBRixDQUFTeUUsS0FBVixJQUFtQixDQUFDLEtBQUt6RixLQUFMLENBQVd5RixLQUFuQyxFQUEwQztBQUN4QyxpQkFBS2dPLFdBQUwsQ0FBaUIsRUFBakI7O0FBQ0EsaUJBQUt3QyxhQUFMLENBQW1CLElBQW5CO0FBQ0QsV0FIRCxNQUdPO0FBQ0wsaUJBQUt4QyxXQUFMLENBQWlCLEtBQUs1RCxLQUFMLENBQVdpRCxjQUE1QjtBQUNEOztBQUNELGVBQUtpQyxVQUFMOztBQUNBO0FBckNGO0FBdUNEOzs7Ozs7K0ZBRXlCN1QsQzs7Ozs7QUFDeEIscUJBQUt1UyxXQUFMLENBQWlCdlMsQ0FBQyxDQUFDRixNQUFGLENBQVN5RSxLQUExQjs7cUJBQ0ksS0FBS29LLEtBQUwsQ0FBVytDLFE7Ozs7Ozt1QkFDUCxLQUFLOEIsV0FBTCxDQUFpQnhULENBQUMsQ0FBQ0YsTUFBRixDQUFTeUUsS0FBMUIsQzs7Ozs7Ozs7dUJBRUEsS0FBSzZOLFNBQUwsQ0FBZXBTLENBQUMsQ0FBQ0YsTUFBRixDQUFTeUUsS0FBeEIsQzs7Ozs7Ozs7Ozs7Ozs7Ozs7OzhDQUlnQjtBQUN4QixVQUFNK1EsV0FBVyxHQUFHaFQsTUFBTSxDQUFDaVQsZ0JBQVAsQ0FBd0IxRyw4REFBVyxDQUFDLEtBQUtoQixLQUFOLENBQW5DLENBQXBCO0FBQ0EsVUFBTTJILFVBQVUsR0FBRyxFQUFuQjtBQUVBLFVBQU1DLFdBQVcsR0FBRzVHLDhEQUFXLENBQUMsS0FBS2hCLEtBQU4sQ0FBWCxDQUF3QjZILHFCQUF4QixFQUFwQjtBQUNBLFVBQU1DLFVBQVUsR0FBR0wsV0FBVyxDQUFDTSxLQUEvQjtBQUNBLFVBQU1DLFdBQVcsR0FBR25JLFFBQVEsQ0FBQzRILFdBQVcsQ0FBQ1EsTUFBYixDQUE1Qjs7QUFFQSxVQUFJTCxXQUFXLENBQUNNLEdBQVosR0FBa0JGLFdBQWxCLElBQWlDLENBQWpDLElBQXNDSixXQUFXLENBQUNNLEdBQVosSUFBbUJ6VCxNQUFNLENBQUMwVCxXQUFwRSxFQUFpRjtBQUMvRSxlQUFPLElBQVA7QUFDRDs7QUFFRCxVQUFNdkIsU0FBUyxHQUFHZ0IsV0FBVyxDQUFDTSxHQUFaLEdBQWtCRixXQUFwQztBQUNBLFVBQU1JLFVBQVUsR0FBR1IsV0FBVyxDQUFDUyxJQUEvQjs7QUFFQSxVQUFJLE9BQU81VCxNQUFQLEtBQWtCLFdBQXRCLEVBQW1DO0FBQ2pDLFlBQU02VCxjQUFjLEdBQUc3VCxNQUFNLENBQUMwVCxXQUFQLEdBQXFCdkIsU0FBNUM7O0FBQ0EsWUFBSTBCLGNBQWMsR0FBRzVFLGdCQUFyQixFQUF1QztBQUNyQ2lFLG9CQUFVLENBQUNZLFNBQVgsR0FBdUJYLFdBQVcsQ0FBQ00sR0FBbkM7QUFDQVAsb0JBQVUsQ0FBQ3RDLE1BQVgsR0FBb0IsQ0FBQ3VDLFdBQVcsQ0FBQ00sR0FBakM7QUFDRCxTQUhELE1BR087QUFDTFAsb0JBQVUsQ0FBQ1ksU0FBWCxHQUF1QkQsY0FBdkI7QUFDQVgsb0JBQVUsQ0FBQ08sR0FBWCxHQUFpQnRCLFNBQWpCO0FBQ0Q7QUFDRjs7QUFFRGUsZ0JBQVUsQ0FBQ2EsUUFBWCxHQUFzQlYsVUFBdEI7QUFDQUgsZ0JBQVUsQ0FBQ1UsSUFBWCxHQUFrQkQsVUFBbEI7QUFFQSxhQUFPVCxVQUFQO0FBQ0Q7Ozs0QkFFTztBQUNOM0csb0VBQVcsQ0FBQyxLQUFLaEIsS0FBTixDQUFYLENBQXdCeUksS0FBeEI7QUFDRDs7OzZCQUVRO0FBQUE7O0FBQ1AsVUFBTUMsWUFBWSxHQUFHLENBQUNqRyxPQUFPLENBQUNVLEtBQVQsQ0FBckI7QUFDQSxVQUFJM0IsT0FBSjtBQUNBLFVBQUltSCxZQUFZLEdBQUcsSUFBbkI7O0FBRUEsVUFBSSxLQUFLN0gsS0FBTCxDQUFXK0MsUUFBZixFQUF5QjtBQUN2QjZFLG9CQUFZLENBQUNoWSxJQUFiLENBQWtCK1IsT0FBTyxDQUFDVyxFQUExQjs7QUFFQSxZQUFJLEtBQUt0QyxLQUFMLENBQVdXLE9BQWYsRUFBd0I7QUFDdEJELGlCQUFPLEdBQ0w7QUFBSSxxQkFBUyxFQUFFLENBQUNpQixPQUFPLENBQUNYLE1BQVQsRUFBaUJXLE9BQU8sQ0FBQ0csV0FBUixDQUFvQkksS0FBckMsRUFBNEMvRyxJQUE1QyxDQUFpRCxHQUFqRDtBQUFmLGFBQ0csS0FBS2hMLEtBQUwsQ0FBVzJYLGNBRGQsQ0FERjtBQUtELFNBTkQsTUFNTztBQUNMLGNBQUksQ0FBQyxLQUFLOUgsS0FBTCxDQUFXVSxPQUFYLENBQW1CNVEsTUFBeEIsRUFBZ0M7QUFDOUI0USxtQkFBTyxHQUNMO0FBQUksdUJBQVMsRUFBRSxDQUFDaUIsT0FBTyxDQUFDWCxNQUFULEVBQWlCVyxPQUFPLENBQUNHLFdBQVIsQ0FBb0JJLEtBQXJDLEVBQTRDL0csSUFBNUMsQ0FBaUQsR0FBakQ7QUFBZixlQUNHLEtBQUtoTCxLQUFMLENBQVc0WCxlQURkLENBREY7QUFLRCxXQU5ELE1BTU87QUFDTHJILG1CQUFPLEdBQUcsS0FBS1YsS0FBTCxDQUFXVSxPQUFYLENBQW1COUgsR0FBbkIsQ0FBdUIsVUFBQ29JLE1BQUQsRUFBUzVJLEdBQVQsRUFBaUI7QUFDaEQsa0JBQU00UCxnQkFBZ0IsR0FBRyxDQUFDckcsT0FBTyxDQUFDWCxNQUFULENBQXpCOztBQUNBLGtCQUFJNUksR0FBRyxLQUFLLE1BQUksQ0FBQzRILEtBQUwsQ0FBV2dELGlCQUF2QixFQUEwQztBQUN4Q2dGLGdDQUFnQixDQUFDcFksSUFBakIsQ0FBc0IrUixPQUFPLENBQUNDLGFBQTlCO0FBQ0Q7O0FBRUQsa0JBQUlaLE1BQU0sQ0FBQ2dELEVBQVAsS0FBY2hNLFNBQWxCLEVBQTZCO0FBQzNCZ1EsZ0NBQWdCLENBQUNwWSxJQUFqQixDQUFzQitSLE9BQU8sQ0FBQ0UsZ0JBQTlCO0FBQ0Q7O0FBRUQsa0JBQUliLE1BQU0sQ0FBQ3RKLElBQVgsRUFBaUI7QUFDZnNRLGdDQUFnQixDQUFDcFksSUFBakIsQ0FBc0IrUixPQUFPLENBQUNHLFdBQVIsQ0FBb0JkLE1BQU0sQ0FBQ3RKLElBQTNCLEtBQW9Dc0osTUFBTSxDQUFDdEosSUFBakU7QUFDRDs7QUFFRCxxQkFDRTtBQUNFLG1CQUFHLEVBQUVVLEdBRFA7QUFFRSw0QkFBVUEsR0FGWjtBQUdFLDJCQUFXLEVBQUUsTUFBSSxDQUFDbUwsWUFBTCxDQUFrQmxULElBQWxCLENBQXVCLE1BQXZCLEVBQTZCK0gsR0FBN0IsQ0FIZjtBQUlFLHlCQUFTLEVBQUU0UCxnQkFBZ0IsQ0FBQzdNLElBQWpCLENBQXNCLEdBQXRCO0FBSmIsaUJBT0k3RixLQUFLLENBQUNDLE9BQU4sQ0FBY3lMLE1BQU0sQ0FBQ2tDLEtBQXJCLElBQThCbEMsTUFBTSxDQUFDa0MsS0FBUCxDQUFhdEssR0FBYixDQUFpQixVQUFDc0ssS0FBRCxFQUFRK0UsU0FBUjtBQUFBLHVCQUFzQjtBQUNuRSxxQkFBRyxFQUFFQTtBQUQ4RCxtQkFDbEQvRSxLQURrRCxDQUF0QjtBQUFBLGVBQWpCLENBQTlCLEdBQ21DLHlFQUFNbEMsTUFBTSxDQUFDa0MsS0FBYixDQVJ2QyxDQURGO0FBYUQsYUEzQlMsQ0FBVjtBQTRCRDtBQUNGOztBQUVEMkUsb0JBQVksR0FDViw0REFBQyx1REFBRDtBQUNFLFlBQUUsRUFBRW5HLE9BRE47QUFFRSxlQUFLLEVBQUUsS0FBSzFCLEtBQUwsQ0FBV21ELFdBRnBCO0FBR0UsNkJBQW1CLEVBQUUsS0FBSy9TLG9CQUg1QjtBQUlFLCtCQUFxQixFQUFFLEtBQUtFLHNCQUo5QjtBQUtFLG1CQUFTLEVBQUM7QUFMWixXQU9FO0FBQUssbUJBQVMsRUFBQztBQUFmLFdBQ0Usd0VBQUtvUSxPQUFMLENBREYsQ0FQRixDQURGO0FBYUQ7O0FBRUQsYUFDRTtBQUFLLGlCQUFTLEVBQUM7QUFBZixTQUNFO0FBQUssaUJBQVMsRUFBRWlCLE9BQU8sQ0FBQ1E7QUFBeEIsU0FDRSwrSUFDTXpRLDJEQUFJLENBQUMsS0FBS3ZCLEtBQU4sRUFDTixDQUFDLE9BQUQsRUFBVSxPQUFWLEVBQW1CLFVBQW5CLEVBQStCLGVBQS9CLEVBQWdELFNBQWhELEVBQ0UsUUFERixFQUNZLGlCQURaLEVBQytCLGdCQUQvQixFQUNpRCxjQURqRCxFQUNpRSxrQkFEakUsRUFDcUYsaUJBRHJGLENBRE0sQ0FEVjtBQUlFLFdBQUcsRUFBRSxhQUFDK08sS0FBRDtBQUFBLGlCQUFXLE1BQUksQ0FBQ0EsS0FBTCxHQUFhQSxLQUF4QjtBQUFBLFNBSlA7QUFLRSxZQUFJLEVBQUMsTUFMUDtBQU1FLGVBQU8sRUFBRSxLQUFLdUUsU0FOaEI7QUFPRSxlQUFPLEVBQUUsS0FBS0wsYUFQaEI7QUFRRSxpQkFBUyxFQUFFLEtBQUtDLGVBUmxCO0FBU0UsZ0JBQVEsRUFBRSxLQUFLQyxtQkFUakI7QUFVRSxhQUFLLEVBQUUsS0FBS3RELEtBQUwsQ0FBV2tEO0FBVnBCLFNBREYsRUFhRTtBQUFLLGVBQU8sRUFBRSxLQUFLTSxXQUFuQjtBQUFnQyxpQkFBUyxFQUFFN0IsT0FBTyxDQUFDUztBQUFuRCxTQUNFO0FBQUssaUJBQVMsRUFBRXdGLFlBQVksQ0FBQ3pNLElBQWIsQ0FBa0IsR0FBbEI7QUFBaEIsUUFERixDQWJGLENBREYsRUFrQkcwTSxZQWxCSCxDQURGO0FBc0JEOzs7O0VBaGpCNEJqVyw2Q0FBSyxDQUFDQyxTOzs2RUFBL0JnUixnQixlQUNlO0FBQ2pCeEIsVUFBUSxFQUFFdFAsa0RBQVMsQ0FBQ29OLElBREg7QUFFakJ4RSxPQUFLLEVBQUU1SSxrREFBUyxDQUFDMFAsS0FBVixDQUFnQjtBQUNyQlosUUFBSSxFQUFFOU8sa0RBQVMsQ0FBQ0UsSUFESztBQUVyQmdTLFlBQVEsRUFBRWxTLGtEQUFTLENBQUNFO0FBRkMsR0FBaEIsQ0FGVTtBQU1qQnFOLFVBQVEsRUFBRXZOLGtEQUFTLENBQUNFLElBQVYsQ0FBZTJOLFVBTlI7QUFPakJzQixlQUFhLEVBQUVuUCxrREFBUyxDQUFDRSxJQVBSO0FBUWpCbVQsa0JBQWdCLEVBQUVyVCxrREFBUyxDQUFDRSxJQVJYO0FBU2pCMkQsT0FBSyxFQUFFN0Qsa0RBQVMsQ0FBQzBOLEdBVEE7QUFVakJrRSxjQUFZLEVBQUU1UixrREFBUyxDQUFDa0gsTUFWUDtBQVdqQmlLLE9BQUssRUFBRW5SLGtEQUFTLENBQUNrSCxNQVhBO0FBWWpCOE8saUJBQWUsRUFBRWhXLGtEQUFTLENBQUM2SixPQVpWO0FBYWpCa00sZ0JBQWMsRUFBRS9WLGtEQUFTLENBQUM2SixPQWJUO0FBY2pCbUosU0FBTyxFQUFFaFQsa0RBQVMsQ0FBQ0UsSUFkRjtBQWVqQmtTLGlCQUFlLEVBQUVwUyxrREFBUyxDQUFDb047QUFmVixDOzs2RUFEZjBELGdCLGtCQW1Ca0I7QUFDcEJ4QixVQUFRLEVBQUUsS0FEVTtBQUVwQjBHLGlCQUFlLEVBQUUseUZBRkc7QUFHcEJELGdCQUFjLEVBQUUsc0ZBSEk7QUFJcEJsUyxPQUFLLEVBQUUsSUFKYTtBQUtwQnVPLGlCQUFlLEVBQUU7QUFMRyxDOztBQWdpQlR0QiwrRUFBZixFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDMWxCQTs7Ozs7OztBQVFBO0FBQ0E7O0lBRU1wVyxpQjs7Ozs7QUFDSjs7Ozs7QUFLQSwrQkFBYztBQUFBOztBQUFBO0FBRWI7QUFFRDs7Ozs7Ozs7Ozs7O0FBT1E7QUFBWTtBQUNsQixhQUFPMkcsT0FBTyxDQUFDQyxPQUFSLENBQWdCLEVBQWhCLENBQVA7QUFDRDtBQUVEOzs7Ozs7Ozs7OztBQU9PO0FBQWE7QUFDbEIsYUFBT0QsT0FBTyxDQUFDQyxPQUFSLEVBQVA7QUFDRDtBQUVEOzs7Ozs7Ozs7OztBQU9jO0FBQVk7QUFDeEIsYUFBT0QsT0FBTyxDQUFDQyxPQUFSLENBQWdCLElBQUl6SCwyRUFBSixFQUFoQixDQUFQO0FBQ0Q7QUFFRDs7Ozs7Ozs7Ozs7QUFPd0I7QUFBWTtBQUNsQyxhQUFPLEVBQVA7QUFDRDs7OztFQXBENkI0RCxzRDs7QUF1RGpCL0MsZ0ZBQWYsRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDbEVBOzs7Ozs7O0FBUUE7QUFDQTtBQUNBOztJQUVNeWIsYzs7Ozs7NkJBQ1k7QUFDZCxhQUFPLElBQUlBLGNBQUosRUFBUDtBQUNEOzs7QUFFRCw0QkFBYztBQUFBOztBQUFBOztBQUNaLFNBQUtDLFdBQUwsR0FBbUI7QUFDakJDLGFBQU8sRUFBRSxDQUFDN00sa0VBQVk7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLCtFQUFDLGlCQUFPRSxHQUFQLEVBQVlDLEdBQVosRUFBaUJ2SCxJQUFqQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDZnNJLHdCQURlLEdBQ05oQixHQUFHLENBQUM0TSxLQUFKLENBQVU1TCxNQUFWLEdBQW1CN0osSUFBSSxDQUFDYyxLQUFMLENBQVcrSCxHQUFHLENBQUM0TSxLQUFKLENBQVU1TCxNQUFyQixDQUFuQixHQUFrRCxJQUQ1QztBQUVmOUIsdUJBRmUsR0FFUCxLQUFJLENBQUMyTixTQUFMLENBQWU3TSxHQUFmLEVBQW9CQyxHQUFwQixDQUZPO0FBQUE7QUFBQTtBQUFBLHlCQUlBZixLQUFLLENBQUN5TixPQUFOLENBQWMzTCxNQUFkLENBSkE7O0FBQUE7QUFJYnhKLHNCQUphOztBQUtuQix1QkFBSSxDQUFDc1YsT0FBTCxDQUFhLElBQWIsRUFBbUJ0VixJQUFuQixFQUF5QndJLEdBQXpCLEVBQThCQyxHQUE5QixFQUFtQ3ZILElBQW5DOztBQUxtQjtBQUFBOztBQUFBO0FBQUE7QUFBQTs7QUFPbkIsdUJBQUksQ0FBQ29VLE9BQUwsY0FBa0IsSUFBbEIsRUFBd0I5TSxHQUF4QixFQUE2QkMsR0FBN0IsRUFBa0N2SCxJQUFsQzs7QUFQbUI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsU0FBRDs7QUFBQTtBQUFBO0FBQUE7QUFBQSxVQUFiLENBRFE7QUFXakJxVSxZQUFNLEVBQUUsQ0FBQ2pOLGtFQUFZO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSwrRUFBQyxrQkFBT0UsR0FBUCxFQUFZQyxHQUFaLEVBQWlCdkgsSUFBakI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ2R3Ryx1QkFEYyxHQUNOLEtBQUksQ0FBQzJOLFNBQUwsQ0FBZTdNLEdBQWYsRUFBb0JDLEdBQXBCLENBRE07QUFBQTtBQUFBO0FBQUEseUJBR0NmLEtBQUssQ0FBQzZOLE1BQU4sQ0FBYS9NLEdBQUcsQ0FBQzlLLElBQWpCLENBSEQ7O0FBQUE7QUFHWnNDLHNCQUhZOztBQUlsQix1QkFBSSxDQUFDc1YsT0FBTCxDQUFhLElBQWIsRUFBbUI7QUFBQ3RWLHdCQUFJLEVBQUVBLElBQVA7QUFBYW9KLHlCQUFLLEVBQUU7QUFBcEIsbUJBQW5CLEVBQThDWixHQUE5QyxFQUFtREMsR0FBbkQsRUFBd0R2SCxJQUF4RDs7QUFKa0I7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUEsd0JBTWQsZ0JBQU8sRUFBRSx3QkFBZXZJLDJFQUFqQixDQU5PO0FBQUE7QUFBQTtBQUFBOztBQU9oQix1QkFBSSxDQUFDMmMsT0FBTCxlQUFrQixJQUFsQixFQUF3QjlNLEdBQXhCLEVBQTZCQyxHQUE3QixFQUFrQ3ZILElBQWxDOztBQVBnQjs7QUFBQTtBQVVsQix1QkFBSSxDQUFDb1UsT0FBTCxDQUFhLElBQWIsRUFBbUI7QUFBQ3RWLHdCQUFJLEVBQUUsSUFBUDtBQUFhb0oseUJBQUs7QUFBbEIsbUJBQW5CLEVBQTZDWixHQUE3QyxFQUFrREMsR0FBbEQsRUFBdUR2SCxJQUF2RDs7QUFWa0I7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsU0FBRDs7QUFBQTtBQUFBO0FBQUE7QUFBQSxVQUFiLENBWFM7QUF3QmpCc1UsY0FBUSxFQUFFLENBQUNsTixrRUFBWTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsK0VBQUMsa0JBQU9FLEdBQVAsRUFBWUMsR0FBWixFQUFpQnZILElBQWpCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNoQndHLHVCQURnQixHQUNSLEtBQUksQ0FBQzJOLFNBQUwsQ0FBZTdNLEdBQWYsRUFBb0JDLEdBQXBCLENBRFE7QUFBQTtBQUFBO0FBQUEseUJBR0RmLEtBQUssQ0FBQytOLGFBQU4sQ0FBb0JqTixHQUFHLENBQUM5SyxJQUF4QixDQUhDOztBQUFBO0FBR2RzQyxzQkFIYzs7QUFJcEIsdUJBQUksQ0FBQ3NWLE9BQUwsQ0FBYSxJQUFiLEVBQW1CdFYsSUFBbkIsRUFBeUJ3SSxHQUF6QixFQUE4QkMsR0FBOUIsRUFBbUN2SCxJQUFuQzs7QUFKb0I7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBTXBCLHVCQUFJLENBQUNvVSxPQUFMLGVBQWtCLElBQWxCLEVBQXdCOU0sR0FBeEIsRUFBNkJDLEdBQTdCLEVBQWtDdkgsSUFBbEM7O0FBTm9CO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLFNBQUQ7O0FBQUE7QUFBQTtBQUFBO0FBQUEsVUFBYjtBQXhCTyxLQUFuQjtBQWtDRDs7OzswQkFFS3dHLE0sRUFBTztBQUNYLFVBQUksT0FBT0EsTUFBUCxLQUFpQixVQUFyQixFQUFpQztBQUMvQixhQUFLMk4sU0FBTCxHQUFpQjNOLE1BQWpCO0FBQ0QsT0FGRCxNQUVPO0FBQ0wsYUFBSzJOLFNBQUwsR0FBaUI7QUFBQSxpQkFBTTNOLE1BQU47QUFBQSxTQUFqQjtBQUNEOztBQUNELGFBQU8sSUFBUDtBQUNEOzs7Z0NBRVc7QUFDVixhQUFPLElBQUlnTyw4Q0FBTyxDQUFDQyxNQUFaLEdBQ0pqYSxHQURJLENBQ0EsR0FEQSxFQUNLLEtBQUt3WixXQUFMLENBQWlCQyxPQUR0QixFQUVKUyxJQUZJLENBRUMsR0FGRCxFQUVNLEtBQUtWLFdBQUwsQ0FBaUJLLE1BRnZCLEVBR0pLLElBSEksQ0FHQyxhQUhELEVBR2dCLEtBQUtWLFdBQUwsQ0FBaUJNLFFBSGpDLENBQVA7QUFJRDs7OzRCQUVPTixXLEVBQWE7QUFDbkIsYUFBTyxLQUFLVyxjQUFMLENBQW9CLFNBQXBCLEVBQStCWCxXQUEvQixDQUFQO0FBQ0Q7OzsyQkFDTUEsVyxFQUFhO0FBQ2xCLGFBQU8sS0FBS1csY0FBTCxDQUFvQixRQUFwQixFQUE4QlgsV0FBOUIsQ0FBUDtBQUNEOzs7NkJBQ1FBLFcsRUFBYTtBQUNwQixhQUFPLEtBQUtXLGNBQUwsQ0FBb0IsVUFBcEIsRUFBZ0NYLFdBQWhDLENBQVA7QUFDRDs7O21DQUVjWSxNLEVBQVFaLFcsRUFBYTtBQUNsQyxVQUFJLENBQUM3UyxLQUFLLENBQUNDLE9BQU4sQ0FBYzRTLFdBQWQsQ0FBTCxFQUFpQztBQUMvQkEsbUJBQVcsR0FBRyxDQUFDQSxXQUFELENBQWQ7QUFDRDs7QUFDRCxXQUFLQSxXQUFMLENBQWlCWSxNQUFqQixJQUEyQlosV0FBVyxDQUFDN1EsTUFBWixDQUFtQixLQUFLNlEsV0FBTCxDQUFpQlksTUFBakIsQ0FBbkIsQ0FBM0I7QUFDQSxhQUFPLElBQVA7QUFDRCxLLENBRUQ7Ozs7Z0NBQ1k7QUFDVixZQUFNamEsS0FBSyxDQUFDLHVCQUFELENBQVg7QUFDRDs7OzRCQUVPcUQsRyxFQUFLYyxJLEVBQU13SSxHLEVBQUtDLEcsRUFBS3ZILEksRUFBTTtBQUNqQyxVQUFJaEMsR0FBSixFQUFTO0FBQ1BnQyxZQUFJLENBQUNoQyxHQUFELENBQUo7QUFDRCxPQUZELE1BRU87QUFDTHVKLFdBQUcsQ0FBQ08sSUFBSixDQUFTaEosSUFBVDtBQUNEO0FBQ0Y7Ozs7OztBQUdZaVYsNkVBQWYsRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN0R0E7Ozs7Ozs7QUFRQTtBQUNBO0FBQ0E7O0lBRU0vYixTOzs7OztBQUNKOzs7Ozs7O0FBT0EscUJBQVk2YyxhQUFaLEVBQTJCQyxVQUEzQixFQUF1QztBQUFBOztBQUFBOztBQUNyQztBQUNBLFVBQUtDLFdBQUwsR0FBbUJELFVBQVUsSUFBSSxJQUFJemQsb0VBQUosRUFBakM7QUFDQSxVQUFLMmQsS0FBTCxHQUFhSCxhQUFhLEdBQUczUSwyREFBSyxDQUFDMlEsYUFBRCxDQUFSLEdBQTBCLEVBQXBEO0FBSHFDO0FBSXRDO0FBRUQ7Ozs7Ozs7Ozs7Ozs4RkFLY3ZNLE07Ozs7Ozs7QUFDUm9CLHNCLEdBQVMsRTs7cUJBRVRwQixNOzs7Ozs7Ozs7O0FBQ0YsaUNBQW9CQSxNQUFwQix1SEFBNEI7QUFBakI5Ryx1QkFBaUI7QUFDMUJrSSx3QkFBTSxDQUFDbEksS0FBRCxDQUFOLEdBQWdCLEtBQUt3VCxLQUFMLENBQVd4VCxLQUFYLENBQWhCO0FBQ0Q7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFRGtJLHNCQUFNLEdBQUd4RiwyREFBSyxDQUFDLEtBQUs4USxLQUFOLENBQWQ7OztpREFHS3RMLE07Ozs7Ozs7Ozs7Ozs7Ozs7QUFHVDs7Ozs7Ozs7Ozs7K0ZBS2FqRCxPOzs7Ozs7O3VCQUNlLEtBQUs4TixhQUFMLENBQW1COU4sT0FBbkIsQzs7O0FBQXBCd08sMkI7O29CQUNEQSxXQUFXLENBQUM3USxPQUFaLEU7Ozs7O3NCQUNHNlEsVzs7O0FBRVI5WixzQkFBTSxDQUFDd0ksTUFBUCxDQUFjLEtBQUtxUixLQUFuQixFQUEwQnZPLE9BQTFCO0FBQ0EscUJBQUt5TyxPQUFMLENBQWEsUUFBYixFQUF1QnpPLE9BQXZCO2tEQUNPQSxPOzs7Ozs7Ozs7Ozs7Ozs7O0FBR1Q7Ozs7Ozs7Ozs7OytGQUtvQmlELE07Ozs7Ozt1QkFDTCxLQUFLcUwsV0FBTCxDQUFpQlIsYUFBakIsQ0FBK0I3SyxNQUEvQixDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBR2Y7Ozs7Ozs7Ozs0Q0FNd0JwQixNLEVBQVE7QUFDOUIsYUFBTyxLQUFLeU0sV0FBTCxDQUFpQnBPLHVCQUFqQixDQUF5QzJCLE1BQXpDLENBQVA7QUFDRDs7OztFQWpFcUJoUSwwRDs7QUFvRVROLHdFQUFmLEU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNoRkE7Ozs7Ozs7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztJQUVNZCxXOzs7QUFDSix5QkFBMkI7QUFBQSxRQUFmb1IsTUFBZSx1RUFBTixJQUFNOztBQUFBOztBQUN6QixTQUFLME0sS0FBTCxHQUFhLElBQWI7QUFDQSxTQUFLRyxRQUFMLEdBQWdCLElBQWhCO0FBQ0EsU0FBS0MsT0FBTCxHQUFlLElBQUkzZCwyRUFBSixFQUFmO0FBQ0EsU0FBSzRkLFNBQUwsR0FBaUIsSUFBSTVkLDJFQUFKLEVBQWpCO0FBQ0EsU0FBSzZkLGtCQUFMLEdBQTBCLElBQTFCO0FBQ0EsU0FBS0MsYUFBTCxHQUFxQixJQUFJQyxzREFBSixFQUFyQjtBQUNBLFNBQUtDLGlCQUFMLEdBQXlCLElBQXpCO0FBQ0EsU0FBS25OLE1BQUwsR0FBY0EsTUFBZDtBQUNBLFNBQUtvTixhQUFMLEdBQXFCclQsK0RBQVEsQ0FBQyxLQUFLcVQsYUFBTCxDQUFtQnhaLElBQW5CLENBQXdCLElBQXhCLENBQUQsQ0FBN0I7QUFDQSxTQUFLeVosWUFBTCxHQUFvQixLQUFLQSxZQUFMLENBQWtCelosSUFBbEIsQ0FBdUIsSUFBdkIsQ0FBcEI7QUFDQSxTQUFLMFosY0FBTCxHQUFzQixLQUFLQSxjQUFMLENBQW9CMVosSUFBcEIsQ0FBeUIsSUFBekIsQ0FBdEI7QUFDQSxTQUFLMlosWUFBTCxHQUFvQixLQUFLQSxZQUFMLENBQWtCM1osSUFBbEIsQ0FBdUIsSUFBdkIsQ0FBcEI7QUFDQSxTQUFLNFosVUFBTCxHQUFrQixLQUFLQSxVQUFMLENBQWdCNVosSUFBaEIsQ0FBcUIsSUFBckIsQ0FBbEI7QUFDQSxTQUFLNlosZUFBTCxHQUF1QixLQUFLQSxlQUFMLENBQXFCN1osSUFBckIsQ0FBMEIsSUFBMUIsQ0FBdkI7QUFDQSxTQUFLOFosV0FBTCxHQUFtQixLQUFLQSxXQUFMLENBQWlCOVosSUFBakIsQ0FBc0IsSUFBdEIsQ0FBbkI7QUFDQSxTQUFLK1osYUFBTCxHQUFxQixLQUFLQSxhQUFMLENBQW1CL1osSUFBbkIsQ0FBd0IsSUFBeEIsQ0FBckI7QUFDQSxTQUFLZ2EsUUFBTCxHQUFnQixLQUFLQSxRQUFMLENBQWNoYSxJQUFkLENBQW1CLElBQW5CLENBQWhCO0FBQ0EsU0FBS2lhLFdBQUwsR0FBbUIsS0FBS0EsV0FBTCxDQUFpQmphLElBQWpCLENBQXNCLElBQXRCLENBQW5CO0FBQ0Q7QUFFRDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OEZBYVc4QyxROzs7OztvQkFDSkEsUUFBUSxDQUFDd0gsSzs7Ozs7c0JBQ043TCxLQUFLLENBQUMsNEJBQUQsQzs7O0FBR2IscUJBQUtxYSxLQUFMLEdBQWFoVyxRQUFRLENBQUNGLElBQVQsSUFBaUIsSUFBOUI7QUFDQSxxQkFBS3FXLFFBQUwsR0FBZ0JuVyxRQUFRLENBQUN5SCxPQUFULElBQW9CLEVBQXBDO0FBQ0EscUJBQUsyUCxhQUFMLEdBQXFCLEtBQXJCO0FBQ0EscUJBQUtDLG1CQUFMLEdBQTJCclgsUUFBUSxDQUFDcVgsbUJBQVQsSUFBZ0MsS0FBM0Q7QUFDQSxxQkFBS0MscUJBQUwsR0FBNkJ0WCxRQUFRLENBQUN1WCxvQkFBdEMsQyxDQUE0RDs7QUFDNUQscUJBQUtDLDRCQUFMLEdBQW9DeFgsUUFBUSxDQUFDdVgsb0JBQTdDLEMsQ0FBbUU7O0FBQ25FLHFCQUFLL1AsS0FBTCxHQUFheEgsUUFBUSxDQUFDd0gsS0FBdEIsQyxDQUE2Qjs7QUFDN0IscUJBQUtpUSxTQUFMLEdBQWlCelgsUUFBUSxDQUFDeVgsU0FBMUI7QUFDQSxxQkFBS25CLGtCQUFMLEdBQTBCdFcsUUFBUSxDQUFDMFgsaUJBQVQsSUFBOEIsSUFBSXJmLG9FQUFKLEVBQXhEO0FBRUEscUJBQUtzZixVQUFMLEdBQWtCLEtBQWxCO0FBQ0EscUJBQUtDLHVCQUFMLEdBQStCLEVBQS9CO0FBQ0EscUJBQUtDLFVBQUwsR0FBa0IsS0FBbEI7QUFDQSxxQkFBS3BCLGlCQUFMLEdBQXlCLEtBQXpCOztBQUVBLG9CQUFJelcsUUFBUSxDQUFDeUcsY0FBVCxDQUF3QixRQUF4QixDQUFKLEVBQXVDO0FBQ3JDLHVCQUFLNkMsTUFBTCxHQUFjdEosUUFBUSxDQUFDc0osTUFBdkI7QUFDRDs7b0JBQ0ksS0FBSzBNLEs7Ozs7Ozt1QkFDV2hXLFFBQVEsQ0FBQ3dILEtBQVQsQ0FBZXlOLE9BQWYsQ0FBdUIsS0FBSzNMLE1BQTVCLEM7OztBQUFuQixxQkFBSzBNLEs7OztBQUdQLHFCQUFLeE8sS0FBTCxDQUFXc1EsRUFBWCxDQUFjLFFBQWQsRUFBd0IsS0FBS2xCLGNBQTdCOztBQUNBLHFCQUFLbUIsU0FBTDs7b0JBRUsvWCxRQUFRLENBQUN1WCxvQjs7Ozs7O3VCQUNOLEtBQUtaLFlBQUwsRTs7Ozs7Ozs7Ozs7Ozs7Ozs7OzZCQUlEO0FBQ1AsVUFBTXFCLFFBQVEsR0FBRyxLQUFLQyxTQUFMLEVBQWpCOztBQUVBLFVBQUksQ0FBQ0QsUUFBTCxFQUFlO0FBQ2IsWUFBTUUsU0FBUyxHQUFHO0FBQ2hCRixrQkFBUSxFQUFSQSxRQURnQjtBQUVoQmxZLGNBQUksRUFBRSxFQUZVO0FBR2hCcVksc0JBQVksRUFBRSxFQUhFO0FBSWhCMVEsaUJBQU8sRUFBRSxFQUpPO0FBS2hCa0MsZ0JBQU0sRUFBRSxJQUFJbFIsMkVBQUosRUFMUTtBQU1oQjJmLGtCQUFRLEVBQUUsSUFBSTNmLDJFQUFKLEVBTk07QUFPaEI0ZixzQkFBWSxFQUFFO0FBUEUsU0FBbEI7QUFTQUgsaUJBQVMsQ0FBQzVPLE1BQVYsR0FBbUIsS0FBS2dQLFVBQUwsQ0FBZ0JKLFNBQVMsQ0FBQ3BZLElBQTFCLEVBQWdDb1ksU0FBUyxDQUFDelEsT0FBMUMsRUFBbUR5USxTQUFTLENBQUN2TyxNQUE3RCxFQUFxRXVPLFNBQVMsQ0FBQ0UsUUFBL0UsQ0FBbkI7QUFDQSxlQUFPRixTQUFQO0FBQ0Q7O0FBRUQsVUFBTXBZLElBQUksR0FBRyxLQUFLb1gsUUFBTCxFQUFiOztBQUNBLFVBQU16UCxPQUFPLEdBQUcsS0FBSzhRLGlCQUFMLEVBQWhCOztBQUNBLFVBQU01TyxNQUFNLEdBQUcsS0FBSzZPLG1CQUFMLENBQXlCLEtBQUtwQyxPQUE5QixDQUFmOztBQUNBLFVBQU1nQyxRQUFRLEdBQUcsS0FBS0ksbUJBQUwsQ0FBeUIsS0FBS25DLFNBQTlCLENBQWpCOztBQUVBLGFBQU87QUFDTDJCLGdCQUFRLEVBQVJBLFFBREs7QUFFTGxZLFlBQUksRUFBSkEsSUFGSztBQUdMcVksb0JBQVksRUFBRSxLQUFLbkMsS0FIZDtBQUlMdk8sZUFBTyxFQUFQQSxPQUpLO0FBS0xrQyxjQUFNLEVBQU5BLE1BTEs7QUFNTHlPLGdCQUFRLEVBQVJBLFFBTks7QUFPTDtBQUNBO0FBQ0E5TyxjQUFNLEVBQUUsS0FBS2dQLFVBQUwsQ0FBZ0J4WSxJQUFoQixFQUFzQjJILE9BQXRCLEVBQStCa0MsTUFBL0IsRUFBdUN5TyxRQUF2QyxDQVRIO0FBVUxDLG9CQUFZLEVBQUUsS0FBS2pCO0FBVmQsT0FBUDtBQVlEO0FBRUQ7Ozs7Ozs7Ozs7OzsrRkFNa0I1VSxLLEVBQU9DLEs7Ozs7Ozt1QkFDakIsS0FBS2hJLEdBQUwsa0ZBQ0grSCxLQURHLEVBQ0s2QiwwRUFBbUIsQ0FBQzVCLEtBQUQsQ0FEeEIsRTs7Ozs7Ozs7Ozs7Ozs7Ozs7O3NDQUtVM0QsSSxFQUFNO0FBQ3RCLFdBQUt5WCxhQUFMLENBQW1CdUIsRUFBbkIsQ0FBc0IsUUFBdEIsRUFBZ0NoWixJQUFoQztBQUNEOzs7eUNBRW9CQSxJLEVBQU07QUFDekIsV0FBS3lYLGFBQUwsQ0FBbUJrQyxHQUFuQixDQUF1QixRQUF2QixFQUFpQzNaLElBQWpDOztBQUNBLFVBQUksS0FBS3lYLGFBQUwsQ0FBbUJtQyxhQUFuQixDQUFpQyxRQUFqQyxNQUErQyxDQUEvQyxJQUFvRCxDQUFDLEtBQUtqQyxpQkFBOUQsRUFBaUY7QUFDL0UsYUFBS2pQLEtBQUwsQ0FBV2lSLEdBQVgsQ0FBZSxRQUFmLEVBQXlCLEtBQUs3QixjQUE5QjtBQUNEO0FBQ0Y7Ozt5Q0FFb0I7QUFDbkIsV0FBS0wsYUFBTCxDQUFtQm9DLGtCQUFuQixDQUFzQyxRQUF0Qzs7QUFDQSxXQUFLblIsS0FBTCxDQUFXaVIsR0FBWCxDQUFlLFFBQWYsRUFBeUIsS0FBSzdCLGNBQTlCO0FBQ0Q7QUFFRDs7Ozs7O29DQUdnQnROLE0sRUFBUTtBQUN0QixVQUFJLEtBQUttTixpQkFBVCxFQUE0QjtBQUMxQjtBQUNELE9BSHFCLENBS3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQSxVQUFJdFUsS0FBSyxDQUFDQyxPQUFOLENBQWNrSCxNQUFkLENBQUosRUFBMkI7QUFBQTs7QUFDekIsc0NBQUtzTyx1QkFBTCxFQUE2Qm5iLElBQTdCLDhHQUFxQzZNLE1BQXJDO0FBQ0QsT0FGRCxNQUVPO0FBQ0wsYUFBS3NPLHVCQUFMLENBQTZCbmIsSUFBN0IsQ0FBa0M2TSxNQUFsQztBQUNEOztBQUVELFdBQUt5TyxTQUFMO0FBQ0Q7OzsrQkFFVXZWLEssRUFBTztBQUNoQnlGLGFBQU8sQ0FBQ3pJLElBQVIsQ0FBYSwwRUFBYjtBQUNBLFdBQUt1WCxlQUFMLENBQXFCdlUsS0FBckI7QUFDRDs7Ozs7OytGQUVtQkEsSyxFQUFPQyxLOzs7Ozs7dUJBQ25CLEtBQUtoSSxHQUFMLGtGQUNIK0gsS0FERyxFQUNLNkIsMEVBQW1CLENBQUM1QixLQUFELENBRHhCLEdBRUgsSUFGRyxDOzs7Ozs7Ozs7Ozs7Ozs7O0FBS1I7Ozs7Ozs7Ozs7OzsrRkFNVTNDLEksRUFBTXdWLFE7Ozs7O29CQUNULEtBQUsyQyxTQUFMLEU7Ozs7Ozs7O0FBSUwscUJBQUs5QixRQUFMLEdBQWdCNU8sdUVBQWdCLENBQUMsS0FBS0MsS0FBTixFQUFhLEtBQUt3TyxLQUFsQixFQUF5QixLQUFLRyxRQUE5QixFQUF3Q3JXLElBQXhDLENBQWhDOztBQUVBLHFCQUFLaVksU0FBTDs7cUJBRUl6QyxROzs7Ozs7O3VCQUVNLEtBQUtxQixZQUFMLEU7Ozs7Ozs7Ozs7b0JBRUEsd0JBQWF4Yyw4RDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7K0ZBT1IyRixJOzs7OztxQkFDWCxLQUFLMlcsaUI7Ozs7Ozs7Ozt1QkFJSCxLQUFLaGMsR0FBTCxDQUFTcUYsSUFBVCxDOzs7O3VCQUNPLEtBQUt1VixNQUFMLEU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHZjs7Ozs7Ozs7Ozs7Ozs7O3NCQUlNLEtBQUtvQixpQkFBTCxJQUEwQixLQUFLVyxhOzs7Ozs7OztBQUk3QjNQLHVCLEdBQVUsS0FBSzBQLFdBQUwsRTtBQUVoQixxQkFBS0MsYUFBTCxHQUFxQixJQUFyQjtBQUNBLHFCQUFLRSxxQkFBTCxHQUE2QixLQUE3QjtBQUNNc0IscUQsR0FBd0MsS0FBS2hCLHVCQUFMLENBQTZCamIsTTs7QUFFM0UscUJBQUtvYixTQUFMLEcsQ0FFQTs7Ozs7dUJBSWUsS0FBS3ZRLEtBQUwsQ0FBVzZOLE1BQVgsQ0FBa0I1TixPQUFsQixDOzs7QUFBYjNILG9COzs7Ozs7OztvQkFFTSx3QkFBZXJILDJFOzs7OztBQUNuQixxQkFBSzJlLGFBQUwsR0FBcUIsS0FBckI7O0FBQ0EscUJBQUtXLFNBQUw7Ozs7O0FBR0Z2TyxnQ0FBZ0IsZUFBaEI7OztBQUdGLHFCQUFLNE4sYUFBTCxHQUFxQixLQUFyQjtBQUVNMVAsMEIsR0FBYSxLQUFLeVAsV0FBTCxFO0FBQ2IwQiw2QixHQUFnQnpWLDhEQUFPLENBQUNxRSxPQUFELEVBQVVDLFVBQVYsQzs7QUFFN0Isb0JBQUltUixhQUFKLEVBQW1CO0FBQ2pCLHNCQUFJclAsZ0JBQUosRUFBc0I7QUFDcEIseUJBQUs0TSxPQUFMLEdBQWU1TSxnQkFBZjtBQUNELG1CQUZELE1BRU87QUFDTCx5QkFBSzRNLE9BQUwsR0FBZSxJQUFJM2QsMkVBQUosRUFBZjtBQUNBLHlCQUFLMGQsUUFBTCxHQUFnQixFQUFoQjtBQUNEO0FBQ0Y7O0FBRUQscUJBQUt5Qix1QkFBTCxDQUE2QmtCLE1BQTdCLENBQW9DLENBQXBDLEVBQXVDRixxQ0FBdkM7O0FBRUEscUJBQUtiLFNBQUw7O3FCQUVJdk8sZ0I7Ozs7O3NCQUNJQSxnQjs7O2tEQUdEMUosSTs7Ozs7Ozs7Ozs7Ozs7Ozs7O3NDQUdTMEMsSyxFQUFPO0FBQ3ZCLFVBQUksS0FBS2lVLGlCQUFULEVBQTRCO0FBQzFCO0FBQ0Q7O0FBRUQsV0FBS0wsT0FBTCxDQUFhMkMsVUFBYixDQUF3QnZXLEtBQXhCOztBQUNBLFdBQUs2VCxTQUFMLENBQWUwQyxVQUFmLENBQTBCdlcsS0FBMUI7O0FBQ0EsYUFBTyxLQUFLMlQsUUFBTCxDQUFjM1QsS0FBZCxDQUFQOztBQUNBLFdBQUt1VixTQUFMO0FBQ0Q7OzttQ0FFYztBQUNiLFVBQUksS0FBS3RCLGlCQUFULEVBQTRCO0FBQzFCO0FBQ0Q7O0FBRUQsV0FBS0wsT0FBTCxDQUFhNEMsS0FBYjs7QUFDQSxXQUFLM0MsU0FBTCxDQUFlMkMsS0FBZjs7QUFDQSxXQUFLN0MsUUFBTCxHQUFnQixFQUFoQjtBQUNBLFdBQUttQixxQkFBTCxHQUE2QixLQUFLRSw0QkFBbEM7O0FBQ0EsV0FBS08sU0FBTDtBQUNEOzs7NENBRXVCdFYsSyxFQUFPO0FBQzdCLFdBQUs2VSxxQkFBTCxHQUE2QjdVLEtBQTdCOztBQUNBLFdBQUtzVixTQUFMO0FBQ0Q7Ozs4Q0FFeUI7QUFDeEIsYUFBTyxLQUFLVCxxQkFBWjtBQUNEOzs7Ozs7Ozs7Ozs7O3VCQUlnQixLQUFLWixhQUFMLEU7Ozs7Ozs7OztvQkFFUCx3QkFBYXZjLDhEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztxQkFPakIsS0FBS3NjLGlCOzs7Ozs7OztBQUlUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTW1DLHFELEdBQXdDLEtBQUtoQix1QkFBTCxDQUE2QmpiLE07QUFDM0UscUJBQUtnYixVQUFMLEdBQWtCLElBQWxCOzs7dUJBR1ExWCxPQUFPLENBQUNpTCxHQUFSLENBQVksQ0FDaEIsS0FBSytOLGFBQUwsQ0FBbUIsS0FBS3pSLEtBQXhCLEVBQStCLEtBQUsyUCxXQUFwQyxFQUFpRCxTQUFqRCxDQURnQixFQUVoQixLQUFLOEIsYUFBTCxDQUFtQixLQUFLM0Msa0JBQXhCLEVBQTRDLEtBQUtZLFFBQWpELEVBQTJELFdBQTNELENBRmdCLENBQVosQzs7OztBQUtOLHFCQUFLUyxVQUFMLEdBQWtCLEtBQWxCOztBQUVBLHFCQUFLQyx1QkFBTCxDQUE2QmtCLE1BQTdCLENBQW9DLENBQXBDLEVBQXVDRixxQ0FBdkM7O0FBRUEscUJBQUtiLFNBQUw7Ozs7O0FBR0ltQiwrQixHQUFrQixLQUFLVixtQkFBTCxDQUF5QixLQUFLcEMsT0FBOUIsQztBQUNsQitDLGdDLEdBQW1CLEtBQUtYLG1CQUFMLENBQXlCLEtBQUtuQyxTQUE5QixDO2tEQUVsQjtBQUNMMU0sd0JBQU0sRUFBRSxDQUFDdVAsZUFBZSxDQUFDOVQsT0FBaEIsRUFBRCxHQUE2QjhULGVBQTdCLEdBQStDLElBRGxEO0FBRUxkLDBCQUFRLEVBQUUsQ0FBQ2UsZ0JBQWdCLENBQUMvVCxPQUFqQixFQUFELEdBQThCK1QsZ0JBQTlCLEdBQWlEO0FBRnRELGlCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7K0JBTUVyWixJLEVBQU0ySCxPLEVBQVNrQyxNLEVBQVF5TyxRLEVBQVU7QUFDMUMsVUFBTWdCLEtBQUssR0FBRyxJQUFJQyxLQUFKLENBQVUsRUFBVixFQUFjO0FBQzFCN2QsV0FEMEIsZUFDdEJ3QyxNQURzQixFQUNkc2IsU0FEYyxFQUNIO0FBQ3JCLGlCQUFPO0FBQ0w3VyxpQkFBSyxFQUFFM0MsSUFBSSxDQUFDd1osU0FBRCxDQUROO0FBRUxDLHFCQUFTLEVBQUU5UixPQUFPLENBQUNoQixjQUFSLENBQXVCNlMsU0FBdkIsQ0FGTjtBQUdMM1Asa0JBQU0sRUFBRUEsTUFBTSxDQUFDNlAscUJBQVAsQ0FBNkJGLFNBQTdCLENBSEg7QUFJTGxCLG9CQUFRLEVBQUVBLFFBQVEsQ0FBQ29CLHFCQUFULENBQStCRixTQUEvQjtBQUpMLFdBQVA7QUFNRDtBQVJ5QixPQUFkLENBQWQsQ0FEMEMsQ0FZMUM7O0FBQ0EsVUFBSSxLQUFLaFEsTUFBVCxFQUFpQjtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUNmLCtCQUFvQixLQUFLQSxNQUF6Qiw4SEFBaUM7QUFBQSxnQkFBdEI5RyxLQUFzQjtBQUMvQjRXLGlCQUFLLENBQUM1VyxLQUFELENBQUwsR0FBZTRXLEtBQUssQ0FBQzVXLEtBQUQsQ0FBcEI7QUFDRDtBQUhjO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFJaEI7O0FBRUQsYUFBTzRXLEtBQVA7QUFDRDtBQUVEOzs7Ozs7OztnQ0FLWTtBQUNWLGFBQU8sS0FBS3BELEtBQUwsS0FBZSxJQUF0QjtBQUNEO0FBRUQ7Ozs7Ozs7O3dDQUtvQjtBQUFFO0FBQ3BCLFVBQU12TyxPQUFPLEdBQUcsRUFBaEI7O0FBQ0EsV0FBSyxJQUFNakYsS0FBWCxJQUFvQixLQUFLMlQsUUFBekIsRUFBbUM7QUFDakMsWUFBSSxDQUFDLEtBQUtzRCxpQkFBTCxDQUF1QmpYLEtBQXZCLENBQUwsRUFBb0M7QUFDbENpRixpQkFBTyxDQUFDakYsS0FBRCxDQUFQLEdBQWlCLEtBQUsyVCxRQUFMLENBQWMzVCxLQUFkLENBQWpCO0FBQ0Q7QUFDRjs7QUFDRCxhQUFPaUYsT0FBUDtBQUNEO0FBRUQ7Ozs7Ozs7Ozt3Q0FNb0IrQixnQixFQUFrQjtBQUNwQyxVQUFNa1EsY0FBYyxHQUFHbFEsZ0JBQWdCLENBQUN0RSxLQUFqQixFQUF2QjtBQURvQztBQUFBO0FBQUE7O0FBQUE7QUFHcEMsOEJBQW9Cc0UsZ0JBQWdCLENBQUNDLFNBQWpCLEdBQTZCekcsSUFBN0IsRUFBcEIsbUlBQXlEO0FBQUEsY0FBOUNSLEtBQThDO0FBQ3ZELGNBQU1tWCxlQUFlLEdBQUcsQ0FBQyxLQUFLeEQsUUFBTCxDQUFjMVAsY0FBZCxDQUE2QmpFLEtBQTdCLENBQUQsSUFDbkJZLDhEQUFPLENBQUMsS0FBSytTLFFBQUwsQ0FBYzNULEtBQWQsQ0FBRCxFQUF1QixLQUFLd1QsS0FBTCxDQUFXeFQsS0FBWCxDQUF2QixDQURaOztBQUVBLGNBQUksS0FBS29WLHVCQUFMLENBQTZCclksUUFBN0IsQ0FBc0NpRCxLQUF0QyxLQUFnRCxLQUFLOFUscUJBQUwsSUFBOEJxQyxlQUFsRixFQUFtRztBQUNqR0QsMEJBQWMsQ0FBQ1gsVUFBZixDQUEwQnZXLEtBQTFCO0FBQ0Q7QUFDRjtBQVRtQztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQVdwQyxhQUFPa1gsY0FBUDtBQUNEOzs7Z0NBRVc7QUFDVixXQUFLbkQsYUFBTCxDQUFtQkwsT0FBbkIsQ0FBMkIsUUFBM0IsRUFBcUMsS0FBSzBELE1BQUwsRUFBckM7QUFDRDtBQUVEOzs7Ozs7Ozs7bUNBTWVuUyxPLEVBQVM7QUFDdEIsV0FBS3VPLEtBQUwsa0ZBQWlCLEtBQUtBLEtBQXRCLEVBQWdDdk8sT0FBaEM7O0FBQ0EsV0FBS3NRLFNBQUw7QUFDRDs7OytCQUVVO0FBQ1QsYUFBTzViLE1BQU0sQ0FBQ3dJLE1BQVAsQ0FBYyxFQUFkLEVBQWtCLEtBQUtxUixLQUF2QixFQUE4QixLQUFLRyxRQUFuQyxDQUFQO0FBQ0Q7OztrQ0FFYTtBQUNaO0FBQ0EsVUFBSSxLQUFLc0IsU0FBVCxFQUFvQjtBQUNsQixlQUFPLEtBQUtQLFFBQUwsRUFBUDtBQUNEOztBQUNELGFBQU8sS0FBS2YsUUFBWjtBQUNEOzs7c0NBRWlCM1QsSyxFQUFPO0FBQ3ZCLGFBQU8sS0FBSzJULFFBQUwsQ0FBYzFQLGNBQWQsQ0FBNkJqRSxLQUE3QixLQUF1Q1ksOERBQU8sQ0FBQyxLQUFLK1MsUUFBTCxDQUFjM1QsS0FBZCxDQUFELEVBQXVCLEtBQUt3VCxLQUFMLENBQVd4VCxLQUFYLENBQXZCLENBQXJEO0FBQ0Q7Ozs7OzsrRkFFbUJzSSxTLEVBQVdtSyxPLEVBQVM0RSxNOzs7Ozs7QUFDaEMvWixvQixHQUFPbVYsT0FBTyxFOztxQkFDaEI3UCw4REFBTyxDQUFDdEYsSUFBRCxDOzs7OztBQUNULHFCQUFLK1osTUFBTCxFQUFhYixLQUFiOzs7Ozs7dUJBTW9CbE8sU0FBUyxDQUFDeUssYUFBVixDQUF3QnpWLElBQXhCLEM7OztBQUFwQm1XLDJCOzs7Ozs7O0FBRUEscUJBQUs0RCxNQUFMLEVBQWFiLEtBQWI7Ozs7QUFJRixvQkFBSTVWLDhEQUFPLENBQUN0RCxJQUFELEVBQU9tVixPQUFPLEVBQWQsQ0FBWCxFQUE4QjtBQUM1Qix1QkFBSzRFLE1BQUwsSUFBZTVELFdBQWY7QUFDRDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBSVUvZCwwRUFBZixFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3BkQTs7Ozs7OztBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0lBRU1nQixZOzs7OztBQUNKLHdCQUFZOEcsUUFBWixFQUFzQjtBQUFBOztBQUFBOztBQUNwQjs7QUFFQSxRQUFJLENBQUNBLFFBQVEsQ0FBQzhaLEdBQWQsRUFBbUI7QUFDakIsWUFBTW5lLEtBQUssQ0FBQyxvREFBRCxDQUFYO0FBQ0Q7O0FBRUQsVUFBS29lLFVBQUwsR0FBa0IvWixRQUFRLENBQUM4SyxTQUFULElBQXNCLElBQUl6UyxvRUFBSixFQUF4QztBQUNBLFVBQUsyaEIsSUFBTCxHQUFZaGEsUUFBUSxDQUFDSSxHQUFULElBQWdCTCwwREFBNUI7QUFDQSxVQUFLa2EsT0FBTCxHQUFlamEsUUFBUSxDQUFDOFosR0FBVCxDQUNaNVQsT0FEWSxDQUNKLFVBREksRUFDUSxNQURSLEVBQ2dCO0FBRGhCLEtBRVpBLE9BRlksQ0FFSixhQUZJLEVBRVcsS0FGWCxDQUFmLENBVG9CLENBV2M7O0FBWGQ7QUFZckI7Ozs7Ozs7OEZBRWFvRCxNOzs7Ozs7QUFDTjRRLHlCLEdBQVlDLDJDQUFHLENBQUM1WixLQUFKLENBQVUsS0FBSzBaLE9BQWYsRUFBd0IsSUFBeEIsQztBQUNsQkMseUJBQVMsQ0FBQ2hGLEtBQVYsQ0FBZ0I1TCxNQUFoQixHQUF5QjdKLElBQUksQ0FBQ0MsU0FBTCxDQUFlNEosTUFBZixDQUF6QjtBQUNBLHVCQUFPNFEsU0FBUyxDQUFDRSxNQUFqQjs7dUJBRXVCLEtBQUtKLElBQUwsQ0FBVTtBQUMvQnBFLHdCQUFNLEVBQUUsS0FEdUI7QUFFL0J5RSxxQkFBRyxFQUFFRiwyQ0FBRyxDQUFDak8sTUFBSixDQUFXZ08sU0FBWDtBQUYwQixpQkFBVixDOzs7QUFBakI3Wix3QjtpREFLQ1osSUFBSSxDQUFDYyxLQUFMLENBQVdGLFFBQVgsQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OytGQUdJb0gsTzs7Ozs7Ozt1QkFDTSxLQUFLdVMsSUFBTCxDQUFVO0FBQ3pCcEUsd0JBQU0sRUFBRSxNQURpQjtBQUV6QjBFLHlCQUFPLEVBQUU7QUFDUCxvQ0FBZ0I7QUFEVCxtQkFGZ0I7QUFLekJELHFCQUFHLEVBQUUsS0FBS0osT0FMZTtBQU16QnpjLHNCQUFJLEVBQUVpQyxJQUFJLENBQUNDLFNBQUwsQ0FBZStILE9BQWY7QUFObUIsaUJBQVYsQzs7O0FBQWJqSyxvQjtBQVNKQSxvQkFBSSxHQUFHaUMsSUFBSSxDQUFDYyxLQUFMLENBQVcvQyxJQUFYLENBQVA7O3FCQUVJQSxJQUFJLENBQUMwTCxLOzs7OztzQkFDRHpRLDJFQUFnQixDQUFDOFEsY0FBakIsQ0FBZ0MvTCxJQUFJLENBQUMwTCxLQUFyQyxDOzs7QUFHUixxQkFBS2dOLE9BQUwsQ0FBYSxRQUFiLEVBQXVCMVksSUFBSSxDQUFDc0MsSUFBNUI7a0RBQ090QyxJQUFJLENBQUNzQyxJOzs7Ozs7Ozs7Ozs7Ozs7O0FBR2Q7Ozs7Ozs7O2tDQUtjNEssTSxFQUFRO0FBQ3BCLGFBQU8sS0FBS3FQLFVBQUwsQ0FBZ0J4RSxhQUFoQixDQUE4QjdLLE1BQTlCLENBQVA7QUFDRDtBQUVEOzs7Ozs7Ozs7NENBTXdCcEIsTSxFQUFRO0FBQzlCLGFBQU8sS0FBS3lRLFVBQUwsQ0FBZ0JwUyx1QkFBaEIsQ0FBd0MyQixNQUF4QyxDQUFQO0FBQ0Q7Ozs7RUFqRXdCak4sdUQ7O0FBb0VabkQsMkVBQWYsRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2xGQTs7Ozs7OztBQVFBO0FBQ0E7O0lBRU1xaEIsZ0I7Ozs7O0FBQ0o7Ozs7Ozs7QUFPQSw0QkFBWS9TLEtBQVosRUFBbUJnVCxXQUFuQixFQUFnQztBQUFBOztBQUFBOztBQUM5QjtBQUVBLFVBQUtDLFFBQUwsR0FBZ0I7QUFDZGpULFdBQUssRUFBRUEsS0FETztBQUVkZ1QsaUJBQVcsRUFBRUEsV0FBVyxJQUFJO0FBRmQsS0FBaEI7QUFIOEI7QUFPL0I7QUFFRDs7Ozs7Ozs7Ozs7OzhGQUtjbFIsTTs7Ozs7c0JBQ1JBLE1BQU0sSUFBSUEsTUFBTSxDQUFDM00sTTs7Ozs7aURBQ1oySiwwREFBSSxDQUFDLEtBQUttVSxRQUFMLENBQWNELFdBQWYsRUFBNEJsUixNQUE1QixDOzs7aURBRU4sS0FBS21SLFFBQUwsQ0FBY0QsVzs7Ozs7Ozs7Ozs7Ozs7OztBQUd2Qjs7Ozs7Ozs7Ozs7K0ZBS2ExYSxJOzs7Ozs7QUFDTDBILHFCLEdBQVEsS0FBS2lULFFBQUwsQ0FBY2pULEs7O3VCQUNmQSxLQUFLLENBQUNsUCxNQUFOLENBQWF3SCxJQUFiLEM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHZjs7Ozs7Ozs7Ozs7K0ZBS29CNEssTTs7Ozs7O0FBQ1psRCxxQixHQUFRLEtBQUtpVCxRQUFMLENBQWNqVCxLOzt1QkFDZkEsS0FBSyxDQUFDK04sYUFBTixDQUFvQjdLLE1BQXBCLEVBQTRCLElBQTVCLEM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHZjs7Ozs7Ozs7OzRDQU13QnBCLE0sRUFBUTtBQUM5QixhQUFPLEtBQUttUixRQUFMLENBQWNqVCxLQUFkLENBQW9CRyx1QkFBcEIsQ0FBNEMyQixNQUE1QyxDQUFQO0FBQ0Q7Ozs7RUF6RDRCdlEsc0Q7O0FBNERoQndoQiwrRUFBZixFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3ZFQTs7Ozs7OztBQVFBO0FBQ0E7QUFDQTs7SUFFTUcsZ0I7Ozs7O0FBQ0o7Ozs7Ozs7QUFPQSw0QkFBWWxULEtBQVosRUFBbUJxSixFQUFuQixFQUF1QjtBQUFBOztBQUFBOztBQUNyQjtBQUVBLFVBQUs0SixRQUFMLEdBQWdCO0FBQ2RqVCxXQUFLLEVBQUVBLEtBRE87QUFFZHFKLFFBQUUsRUFBRUE7QUFGVSxLQUFoQjtBQUtBLFVBQUs4SixpQkFBTCxHQUF5QixFQUF6QjtBQVJxQjtBQVN0QjtBQUVEOzs7Ozs7Ozs7O3VCQU1HcGUsSyxFQUFPQyxFLEVBQUk7QUFDWixVQUFNc0gsR0FBRyxHQUFHLElBQVo7O0FBRUEsVUFBSXZILEtBQUssS0FBSyxRQUFkLEVBQXdCO0FBQ3RCeEQsOERBQU0sQ0FBQ21ELFNBQVAsQ0FBaUI0YixFQUFqQixDQUFvQmxjLElBQXBCLENBQXlCLElBQXpCLEVBQStCVyxLQUEvQixFQUFzQ0MsRUFBdEM7QUFDQTtBQUNELE9BTlcsQ0FRWjs7O0FBQ0EsZUFBUzJQLFFBQVQsQ0FBa0IxRSxPQUFsQixFQUEyQjtBQUN6QixhQUFLLElBQUl0RSxDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHc0UsT0FBTyxDQUFDOUssTUFBNUIsRUFBb0N3RyxDQUFDLEVBQXJDLEVBQXlDO0FBQ3ZDLGNBQUlDLDZEQUFPLENBQUNxRSxPQUFPLENBQUN0RSxDQUFELENBQVAsQ0FBVyxDQUFYLENBQUQsRUFBZ0JXLEdBQUcsQ0FBQzJXLFFBQUosQ0FBYTVKLEVBQTdCLENBQVgsRUFBNkM7QUFDM0NyVSxjQUFFLENBQUNpTCxPQUFPLENBQUN0RSxDQUFELENBQVAsQ0FBVyxDQUFYLENBQUQsQ0FBRjtBQUNBO0FBQ0Q7QUFDRjtBQUNGOztBQUVELFdBQUt3WCxpQkFBTCxDQUF1QmxlLElBQXZCLENBQTRCO0FBQzFCbWUsd0JBQWdCLEVBQUVwZSxFQURRO0FBRTFCcWUsdUJBQWUsRUFBRTFPO0FBRlMsT0FBNUI7O0FBS0EsV0FBS3NPLFFBQUwsQ0FBY2pULEtBQWQsQ0FBb0JzUSxFQUFwQixDQUF1QixRQUF2QixFQUFpQzNMLFFBQWpDO0FBQ0Q7QUFFRDs7Ozs7Ozs7O3dCQU1JNVAsSyxFQUFPQyxFLEVBQUk7QUFDYixVQUFNc0gsR0FBRyxHQUFHLElBQVo7QUFDQSxVQUFNZ1gsbUJBQW1CLEdBQUcsRUFBNUI7O0FBRUEsVUFBSXZlLEtBQUssS0FBSyxRQUFkLEVBQXdCO0FBQ3RCeEQsOERBQU0sQ0FBQ21ELFNBQVAsQ0FBaUJ1YyxHQUFqQixDQUFxQjdjLElBQXJCLENBQTBCLElBQTFCLEVBQWdDVyxLQUFoQyxFQUF1Q0MsRUFBdkM7QUFDQTtBQUNEOztBQUVELFdBQUttZSxpQkFBTCxDQUF1QnBWLE9BQXZCLENBQStCLFVBQUF3VixPQUFPLEVBQUk7QUFDeEMsWUFBSUEsT0FBTyxDQUFDSCxnQkFBUixLQUE2QnBlLEVBQWpDLEVBQXFDO0FBQ25Dc0gsYUFBRyxDQUFDMlcsUUFBSixDQUFhalQsS0FBYixDQUFtQmlSLEdBQW5CLENBQXVCLFFBQXZCLEVBQWlDc0MsT0FBTyxDQUFDRixlQUF6QztBQUNELFNBRkQsTUFFTztBQUNMQyw2QkFBbUIsQ0FBQ3JlLElBQXBCLENBQXlCc2UsT0FBekI7QUFDRDtBQUNGLE9BTkQ7O0FBUUEsV0FBS0osaUJBQUwsR0FBeUJHLG1CQUF6QjtBQUNEOzs7a0NBRWF2ZSxLLEVBQU87QUFDbkIsYUFBTyxLQUFLa2UsUUFBTCxDQUFjalQsS0FBZCxDQUFvQmtSLGFBQXBCLENBQWtDbmMsS0FBbEMsQ0FBUDtBQUNEO0FBRUQ7Ozs7Ozs7Ozs7OzhGQUtjK00sTTs7Ozs7O0FBQ045QixxQixHQUFRLEtBQUtpVCxRQUFMLENBQWNqVCxLOzt1QkFDZkEsS0FBSyxDQUFDd1QsU0FBTixDQUFnQixLQUFLUCxRQUFMLENBQWM1SixFQUE5QixFQUFrQ3ZILE1BQWxDLEM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHZjs7Ozs7Ozs7Ozs7K0ZBS2E3QixPOzs7Ozs7QUFDTGlELHNCLEdBQVN4RiwyREFBSyxDQUFDdUMsT0FBRCxDO0FBQ2RELHFCLEdBQVEsS0FBS2lULFFBQUwsQ0FBY2pULEs7O3VCQUVUQSxLQUFLLENBQUN5VCxNQUFOLENBQWEsQ0FBQyxDQUFDLEtBQUtSLFFBQUwsQ0FBYzVKLEVBQWYsRUFBbUJuRyxNQUFuQixDQUFELENBQWIsQzs7O0FBQWYvSyxzQjtBQUNKQSxzQkFBTSxHQUFHQSxNQUFNLENBQUMsQ0FBRCxDQUFOLENBQVUsQ0FBVixDQUFUOztzQkFDSUEsTUFBTSxZQUFZaEUsS0FBbEIsSUFBMkJnRSxNQUFNLFlBQVlsSCwyRTs7Ozs7c0JBQ3pDa0gsTTs7O2tEQUVEQSxNOzs7Ozs7Ozs7Ozs7Ozs7O0FBR1Q7Ozs7Ozs7Ozs7OytGQUtvQitLLE07Ozs7OztBQUNabEQscUIsR0FBUSxLQUFLaVQsUUFBTCxDQUFjalQsSzs7dUJBQ2ZBLEtBQUssQ0FBQytOLGFBQU4sQ0FBb0I3SyxNQUFwQixFQUE0QixLQUFLK1AsUUFBTCxDQUFjNUosRUFBMUMsQzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUdmOzs7Ozs7Ozs7NENBTXdCdkgsTSxFQUFRO0FBQzlCLGFBQU8sS0FBS21SLFFBQUwsQ0FBY2pULEtBQWQsQ0FBb0JHLHVCQUFwQixDQUE0QzJCLE1BQTVDLENBQVA7QUFDRDs7OztFQTlINEJ2USxzRDs7QUFpSWhCMmhCLCtFQUFmLEU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDN0lBOzs7Ozs7O0FBUUE7QUFDQTs7QUFFQSxTQUFTdmlCLFdBQVQsR0FBb0M7QUFBQSxNQUFmbVIsTUFBZSx1RUFBTixJQUFNO0FBQ2xDLFNBQU8sVUFBQTVLLFNBQVM7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFDZCw0Q0FBYztBQUFBOztBQUFBOztBQUNaO0FBQ0EsZ0JBQUt3YyxJQUFMLEdBQVksSUFBSWhqQixxREFBSixDQUFnQm9SLE1BQWhCLENBQVo7QUFDQSxnQkFBS3VELEtBQUwsR0FBYSxNQUFLcU8sSUFBTCxDQUFVdEIsTUFBVixFQUFiO0FBRUEsZ0JBQUt1QixZQUFMLEdBQW9CLE1BQUtBLFlBQUwsQ0FBa0JqZSxJQUFsQiw0RkFBcEI7QUFMWTtBQU1iOztBQVBhO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFVTjJQLDJCQVZNLEdBVUUsS0FBS3FPLElBQUwsQ0FBVXRCLE1BQVYsRUFWRjs7QUFXWiwwQkFBSS9NLEtBQUssQ0FBQ21MLFFBQVYsRUFBb0I7QUFDbEIsNkJBQUtwSyxRQUFMLENBQWNmLEtBQWQ7QUFDRDs7QUFDRCwyQkFBS3FPLElBQUwsQ0FBVUUsaUJBQVYsQ0FBNEIsS0FBS0QsWUFBakM7O0FBZFk7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsaURBaUJTO0FBQ3JCLGlCQUFLRCxJQUFMLENBQVVHLG9CQUFWLENBQStCLEtBQUtGLFlBQXBDO0FBQ0Q7QUFuQmE7QUFBQTtBQUFBLHVDQXFCREcsWUFyQkMsRUFxQmE7QUFDekIsaUJBQUsxTixRQUFMLENBQWMwTixZQUFkO0FBQ0Q7QUF2QmE7QUFBQTtBQUFBLG1DQXlCTDtBQUNQLG1CQUFPLDJEQUFDLFNBQUQsNEVBQWUsS0FBS3RlLEtBQXBCO0FBQTJCLHNCQUFRLEVBQUUsS0FBSzZQLEtBQTFDO0FBQWlELHlCQUFXLEVBQUUsS0FBS3FPO0FBQW5FLGVBQVA7QUFDRDtBQTNCYTs7QUFBQTtBQUFBLFFBQTJDemMsNENBQUssQ0FBQ0MsU0FBakQ7QUFBQTtBQUFBLEdBQWhCO0FBNkJEOztBQUVjdkcsMEVBQWYsRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzNDQTs7Ozs7OztBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7QUFJQSxJQUFNa0QsU0FBUyxHQUFHO0FBQ2hCa2dCLGlCQUFlLEVBQUUsMkJBQVk7QUFDM0IsU0FBSzdFLGFBQUwsR0FBcUJyVCw4REFBUSxDQUFDLEtBQUtxVCxhQUFOLENBQTdCOztBQUVBLFFBQUksS0FBSzhFLGtCQUFMLENBQXdCM2YsSUFBeEIsQ0FBNkJpSCxPQUE3QixDQUFxQyxRQUFyQyxNQUFtRCxDQUF2RCxFQUEwRDtBQUFFO0FBQzFELFdBQUswWSxrQkFBTCxHQUEwQixLQUFLQSxrQkFBTCxDQUF3QnRlLElBQXhCLENBQTZCLElBQTdCLENBQTFCO0FBQ0EsV0FBS2dhLFFBQUwsR0FBZ0IsS0FBS0EsUUFBTCxDQUFjaGEsSUFBZCxDQUFtQixJQUFuQixDQUFoQjtBQUNBLFdBQUtpYSxXQUFMLEdBQW1CLEtBQUtBLFdBQUwsQ0FBaUJqYSxJQUFqQixDQUFzQixJQUF0QixDQUFuQjtBQUNBLFdBQUt5WixZQUFMLEdBQW9CLEtBQUtBLFlBQUwsQ0FBa0J6WixJQUFsQixDQUF1QixJQUF2QixDQUFwQjtBQUNEOztBQUVELFdBQU87QUFDTHVlLGdCQUFVLEVBQUU7QUFEUCxLQUFQO0FBR0QsR0FkZTtBQWdCaEJDLG9CQUFrQixFQUFFLDhCQUFZO0FBQzlCLFNBQUtDLFlBQUwsR0FBb0IsS0FBcEI7QUFDRCxHQWxCZTtBQW9CaEJDLHNCQUFvQixFQUFFLGdDQUFZO0FBQ2hDLFNBQUtELFlBQUwsR0FBb0IsSUFBcEI7O0FBQ0EsUUFBSSxDQUFDLEtBQUtsRixpQkFBTCxFQUFMLEVBQStCO0FBQzdCLFdBQUs1SixLQUFMLENBQVc0TyxVQUFYLENBQXNCalUsS0FBdEIsQ0FBNEJpUixHQUE1QixDQUFnQyxRQUFoQyxFQUEwQyxLQUFLK0Msa0JBQS9DO0FBQ0Q7QUFDRixHQXpCZTs7QUEyQmhCOzs7Ozs7Ozs7Ozs7Ozs7O0FBZ0JBSyxVQUFRLEVBQUVDLG1FQUFXO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSwyRUFBQyxpQkFBZ0I5YixRQUFoQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDcEIsbUJBQUsrYixVQUFMLENBQWdCL2IsUUFBaEI7O0FBRG9CLGtCQUdmLEtBQUs2TSxLQUFMLENBQVc0TyxVQUFYLENBQXNCM2IsSUFIUDtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUEscUJBT0hFLFFBQVEsQ0FBQ3dILEtBQVQsQ0FBZXlOLE9BQWYsQ0FBdUJqVixRQUFRLENBQUNzSixNQUFoQyxDQVBHOztBQUFBO0FBT2hCeEosa0JBUGdCO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFTaEJkLGlCQUFHLGNBQUg7O0FBVGdCO0FBQUEsbUJBWWQsS0FBSzJjLFlBWlM7QUFBQTtBQUFBO0FBQUE7O0FBQUE7O0FBQUE7QUFBQSxtQkFnQmQzYyxHQWhCYztBQUFBO0FBQUE7QUFBQTs7QUFpQmhCLG1CQUFLNk4sS0FBTCxDQUFXNE8sVUFBWCxDQUFzQk8sV0FBdEIsR0FBb0NoZCxHQUFwQztBQWpCZ0I7QUFBQSxxQkFrQlZvQyxpRUFBUyxDQUFHLEtBQUt3TSxRQUFSLE1BQUcsSUFBSCxHQUFrQixJQUFsQixDQUFULENBQWlDLEtBQUtmLEtBQXRDLENBbEJVOztBQUFBO0FBQUEsb0JBbUJWN04sR0FuQlU7O0FBQUE7QUFzQmxCLG1CQUFLNk4sS0FBTCxDQUFXNE8sVUFBWCxDQUFzQjNiLElBQXRCLEdBQTZCQSxJQUE3Qjs7QUF0QmtCO0FBeUJwQixtQkFBSytNLEtBQUwsQ0FBVzRPLFVBQVgsQ0FBc0JqVSxLQUF0QixDQUE0QnNRLEVBQTVCLENBQStCLFFBQS9CLEVBQXlDLEtBQUswRCxrQkFBOUM7O0FBekJvQjtBQUFBLHFCQTBCZHBhLGlFQUFTLENBQUcsS0FBS3dNLFFBQVIsTUFBRyxJQUFILEdBQWtCLElBQWxCLENBQVQsQ0FBaUMsS0FBS2YsS0FBdEMsQ0ExQmM7O0FBQUE7QUFBQSxrQkEyQmY3TSxRQUFRLENBQUN1WCxvQkEzQk07QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQSxxQkE0QlosS0FBS1osWUFBTCxFQTVCWTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxLQUFEOztBQUFBO0FBQUE7QUFBQTtBQUFBLE9BOEJsQixJQTlCa0IsQ0EzQ0w7O0FBMkVoQjs7Ozs7QUFLQXFCLFVBQVEsRUFBRSxvQkFBWTtBQUNwQixXQUFPLEtBQUtuTCxLQUFMLElBQWMsS0FBS0EsS0FBTCxDQUFXNE8sVUFBekIsSUFDTGhPLE9BQU8sQ0FBQyxLQUFLWixLQUFMLENBQVc0TyxVQUFYLENBQXNCM2IsSUFBdEIsSUFBOEIsS0FBSytNLEtBQUwsQ0FBVzRPLFVBQVgsQ0FBc0JPLFdBQXJELENBRFQ7QUFFRCxHQW5GZTs7QUFxRmhCOzs7OztBQUtBQyxZQUFVLEVBQUUsc0JBQVk7QUFDdEIsUUFBTXhVLE9BQU8sR0FBRyxFQUFoQjs7QUFDQSxTQUFLLElBQU1qRixLQUFYLElBQW9CLEtBQUtxSyxLQUFMLENBQVc0TyxVQUFYLENBQXNCaFUsT0FBMUMsRUFBbUQ7QUFDakQsVUFBSSxDQUFDLEtBQUtnUyxpQkFBTCxDQUF1QmpYLEtBQXZCLENBQUwsRUFBb0M7QUFDbENpRixlQUFPLENBQUNqRixLQUFELENBQVAsR0FBaUIsS0FBS3FLLEtBQUwsQ0FBVzRPLFVBQVgsQ0FBc0JoVSxPQUF0QixDQUE4QmpGLEtBQTlCLENBQWpCO0FBQ0Q7QUFDRjs7QUFDRCxXQUFPaUYsT0FBUDtBQUNELEdBbEdlOztBQW9HaEI7Ozs7OztBQU1BeVUsWUFBVSxFQUFFLG9CQUFVMVosS0FBVixFQUFpQjtBQUMzQixRQUFJLEtBQUtpVSxpQkFBTCxFQUFKLEVBQThCO0FBQzVCLGFBQU8sS0FBUDtBQUNEOztBQUVELFFBQU01SixLQUFLLEdBQUcsS0FBS0EsS0FBTCxDQUFXNE8sVUFBekI7O0FBRUEsUUFBSWpaLEtBQUssS0FBS3FDLFNBQWQsRUFBeUI7QUFDdkIsYUFBTyxDQUFDTyw2REFBTyxDQUFDeUgsS0FBSyxDQUFDcEYsT0FBUCxDQUFmO0FBQ0Q7O0FBRUQsUUFBSSxDQUFDb0YsS0FBSyxDQUFDd0ssbUJBQVAsSUFBOEIsS0FBS29DLGlCQUFMLENBQXVCalgsS0FBdkIsQ0FBbEMsRUFBaUU7QUFDL0QsYUFBTyxLQUFQO0FBQ0Q7O0FBRUQsV0FBT3FLLEtBQUssQ0FBQ3BGLE9BQU4sQ0FBY2hCLGNBQWQsQ0FBNkJqRSxLQUE3QixDQUFQO0FBQ0QsR0ExSGU7O0FBNEhoQjs7Ozs7O0FBTUEyWixVQUFRLEVBQUUsa0JBQVUzWixLQUFWLEVBQWlCO0FBQ3pCLFFBQUksS0FBS2lVLGlCQUFMLEVBQUosRUFBOEI7QUFDNUIsYUFBTyxLQUFQO0FBQ0Q7O0FBRUQsUUFBTTVKLEtBQUssR0FBRyxLQUFLQSxLQUFMLENBQVc0TyxVQUF6QixDQUx5QixDQU96Qjs7QUFDQSxRQUFJdFosS0FBSyxDQUFDQyxPQUFOLENBQWNJLEtBQWQsQ0FBSixFQUEwQjtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUN4Qiw2QkFBb0JBLEtBQXBCLDhIQUEyQjtBQUFBLGNBQWhCNFosS0FBZ0I7O0FBQ3pCLGNBQUksS0FBS0QsUUFBTCxDQUFjQyxLQUFkLENBQUosRUFBMEI7QUFDeEIsbUJBQU8sSUFBUDtBQUNEO0FBQ0Y7QUFMdUI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFNeEIsYUFBTyxLQUFQO0FBQ0QsS0Fmd0IsQ0FpQnpCO0FBQ0E7OztBQUNBLFFBQUl2UCxLQUFLLENBQUMwSyxvQkFBVixFQUFnQztBQUM5QixVQUFJLENBQUMxSyxLQUFLLENBQUNwRixPQUFOLENBQWNoQixjQUFkLENBQTZCakUsS0FBN0IsQ0FBRCxJQUF3Q1ksNkRBQU8sQ0FBQ3lKLEtBQUssQ0FBQ3BGLE9BQU4sQ0FBY2pGLEtBQWQsQ0FBRCxFQUF1QnFLLEtBQUssQ0FBQy9NLElBQU4sQ0FBVzBDLEtBQVgsQ0FBdkIsQ0FBbkQsRUFBOEY7QUFDNUYsZUFBTyxLQUFQO0FBQ0Q7QUFDRjs7QUFFRCxXQUFPLEtBQUtxSyxLQUFMLENBQVc0TyxVQUFYLENBQXNCOVIsTUFBdEIsQ0FBNkJ3UyxRQUE3QixDQUFzQzNaLEtBQXRDLEtBQWdELEtBQUtxSyxLQUFMLENBQVc0TyxVQUFYLENBQXNCckQsUUFBdEIsQ0FBK0IrRCxRQUEvQixDQUF3QzNaLEtBQXhDLENBQXZEO0FBQ0QsR0E1SmU7QUE4SmhCc1UsWUFBVSxFQUFFLG9CQUFVdFUsS0FBVixFQUFpQmhHLEVBQWpCLEVBQXFCO0FBQy9CLFFBQUksS0FBS2lhLGlCQUFMLEVBQUosRUFBOEI7QUFDNUI7QUFDRDs7QUFFRCxRQUFJLEtBQUs1SixLQUFMLENBQVc0TyxVQUFYLENBQXNCOUQsVUFBMUIsRUFBc0M7QUFDcEMsV0FBSzlLLEtBQUwsQ0FBVzRPLFVBQVgsQ0FBc0JZLGtCQUF0QixDQUF5QzVmLElBQXpDLENBQThDK0YsS0FBOUM7QUFDRDs7QUFFRCxRQUFJTCxLQUFLLENBQUNDLE9BQU4sQ0FBY0ksS0FBZCxDQUFKLEVBQTBCO0FBQ3hCQSxXQUFLLENBQUMrQyxPQUFOLENBQWMsVUFBVStXLFFBQVYsRUFBb0I7QUFDaEMsYUFBS3pQLEtBQUwsQ0FBVzRPLFVBQVgsQ0FBc0I5UixNQUF0QixDQUE2Qm9QLFVBQTdCLENBQXdDdUQsUUFBeEM7O0FBQ0EsYUFBS3pQLEtBQUwsQ0FBVzRPLFVBQVgsQ0FBc0JyRCxRQUF0QixDQUErQlcsVUFBL0IsQ0FBMEN1RCxRQUExQztBQUNELE9BSEQsRUFHRyxJQUhIO0FBSUQsS0FMRCxNQUtPO0FBQ0wsV0FBS3pQLEtBQUwsQ0FBVzRPLFVBQVgsQ0FBc0I5UixNQUF0QixDQUE2Qm9QLFVBQTdCLENBQXdDdlcsS0FBeEM7O0FBQ0EsV0FBS3FLLEtBQUwsQ0FBVzRPLFVBQVgsQ0FBc0JyRCxRQUF0QixDQUErQlcsVUFBL0IsQ0FBMEN2VyxLQUExQztBQUNEOztBQUVELFNBQUtvTCxRQUFMLENBQWMsS0FBS2YsS0FBbkIsRUFBMEIsT0FBT3JRLEVBQVAsS0FBYyxVQUFkLEdBQTJCQSxFQUEzQixHQUFnQyxJQUExRDtBQUNELEdBbExlOztBQW9MaEI7Ozs7O0FBS0ErZixpQkFBZSxFQUFFLDJCQUFZO0FBQzNCLFFBQUksS0FBSzlGLGlCQUFMLEVBQUosRUFBOEI7QUFDNUIsYUFBTyxFQUFQO0FBQ0Q7O0FBQ0QsV0FBTyxLQUFLNUosS0FBTCxDQUFXNE8sVUFBWCxDQUFzQjNiLElBQXRCLElBQThCLElBQXJDO0FBQ0QsR0E5TGU7O0FBZ01oQjs7Ozs7QUFLQW1WLFNBQU8sRUFBRSxtQkFBWTtBQUNuQixRQUFJLEtBQUt3QixpQkFBTCxFQUFKLEVBQThCO0FBQzVCLGFBQU8sRUFBUDtBQUNEOztBQUNELFdBQU90UiwrREFBUyxDQUFDLEtBQUsrUixRQUFMLEVBQUQsQ0FBaEI7QUFDRCxHQTFNZTs7QUE0TWhCOzs7OztBQUtBc0YscUJBQW1CLEVBQUUsK0JBQVk7QUFDL0IsUUFBSSxLQUFLL0YsaUJBQUwsRUFBSixFQUE4QjtBQUM1QixhQUFPLElBQUloZSwyRUFBSixFQUFQO0FBQ0Q7O0FBRUQsUUFBSStKLEtBQUo7QUFDQSxRQUFJbUgsTUFBTSxHQUFHbFIsMkVBQWdCLENBQUNna0IsS0FBakIsQ0FBdUIsS0FBSzVQLEtBQUwsQ0FBVzRPLFVBQVgsQ0FBc0I5UixNQUE3QyxFQUFxRCxLQUFLa0QsS0FBTCxDQUFXNE8sVUFBWCxDQUFzQnJELFFBQTNFLENBQWIsQ0FOK0IsQ0FRL0I7QUFDQTs7QUFDQSxRQUFJLEtBQUt2TCxLQUFMLENBQVc0TyxVQUFYLENBQXNCbEUsb0JBQTFCLEVBQWdEO0FBQzlDNU4sWUFBTSxHQUFHLEtBQUtrRCxLQUFMLENBQVc0TyxVQUFYLENBQXNCOVIsTUFBdEIsQ0FBNkJ6RSxLQUE3QixFQUFULENBRDhDLENBRzlDOztBQUNBLFdBQUsxQyxLQUFMLElBQWMsS0FBS3FLLEtBQUwsQ0FBVzRPLFVBQVgsQ0FBc0IzYixJQUFwQyxFQUEwQztBQUN4QztBQUNBLFlBQ0UsQ0FBQyxLQUFLK00sS0FBTCxDQUFXNE8sVUFBWCxDQUFzQmhVLE9BQXRCLENBQThCaEIsY0FBOUIsQ0FBNkNqRSxLQUE3QyxDQUFELElBQ0FZLDZEQUFPLENBQUMsS0FBS3lKLEtBQUwsQ0FBVzRPLFVBQVgsQ0FBc0JoVSxPQUF0QixDQUE4QmpGLEtBQTlCLENBQUQsRUFBdUMsS0FBS3FLLEtBQUwsQ0FBVzRPLFVBQVgsQ0FBc0IzYixJQUF0QixDQUEyQjBDLEtBQTNCLENBQXZDLENBRlQsRUFHRTtBQUNBbUgsZ0JBQU0sQ0FBQ29QLFVBQVAsQ0FBa0J2VyxLQUFsQjtBQUNEO0FBQ0Y7QUFDRjs7QUFFRCxXQUFPbUgsTUFBUDtBQUNELEdBM09lO0FBNk9oQitTLGdCQUFjLEVBQUUsd0JBQVVsYSxLQUFWLEVBQWlCO0FBQy9CLFFBQUksS0FBS2lVLGlCQUFMLEVBQUosRUFBOEI7QUFDNUIsYUFBTyxLQUFQO0FBQ0QsS0FIOEIsQ0FLL0I7QUFDQTs7O0FBQ0EsUUFBSSxLQUFLNUosS0FBTCxDQUFXNE8sVUFBWCxDQUFzQmxFLG9CQUF0QixJQUE4QyxDQUFDLEtBQUsxSyxLQUFMLENBQVc0TyxVQUFYLENBQXNCaFUsT0FBdEIsQ0FBOEJoQixjQUE5QixDQUE2Q2pFLEtBQTdDLENBQW5ELEVBQXdHO0FBQ3RHLGFBQU8sSUFBUDtBQUNEOztBQUVELFFBQU1tSCxNQUFNLEdBQUcsS0FBS2tELEtBQUwsQ0FBVzRPLFVBQVgsQ0FBc0I5UixNQUF0QixDQUE2QjZQLHFCQUE3QixDQUFtRGhYLEtBQW5ELEtBQTZELEVBQTVFO0FBQ0EsUUFBTTRWLFFBQVEsR0FBRyxLQUFLdkwsS0FBTCxDQUFXNE8sVUFBWCxDQUFzQnJELFFBQXRCLENBQStCb0IscUJBQS9CLENBQXFEaFgsS0FBckQsS0FBK0QsRUFBaEY7QUFFQSxXQUFPbUgsTUFBTSxDQUFDeEYsTUFBUCxDQUFjaVUsUUFBZCxDQUFQO0FBQ0QsR0E1UGU7O0FBOFBoQjs7Ozs7QUFLQXVFLGdCQUFjLEVBQUUsMEJBQVk7QUFDMUIsUUFBSSxLQUFLbEcsaUJBQUwsRUFBSixFQUE4QjtBQUM1QixhQUFPLElBQVA7QUFDRDs7QUFDRCxXQUFPLEtBQUs1SixLQUFMLENBQVc0TyxVQUFYLENBQXNCTyxXQUE3QjtBQUNELEdBeFFlOztBQTBRaEI7Ozs7Ozs7QUFPQWhGLGFBQVcsRUFBRSxxQkFBVXhVLEtBQVYsRUFBaUJDLEtBQWpCLEVBQXdCO0FBQ25DLFFBQUksS0FBS2dVLGlCQUFMLEVBQUosRUFBOEI7QUFDNUI7QUFDRDs7QUFDRCxTQUFLaGMsR0FBTCxrRkFDRytILEtBREgsRUFDVzZCLHlFQUFtQixDQUFDNUIsS0FBRCxDQUQ5QjtBQUdELEdBeFJlO0FBMFJoQndVLGVBQWEsRUFBRSx1QkFBVXpVLEtBQVYsRUFBaUJDLEtBQWpCLEVBQXdCakcsRUFBeEIsRUFBNEI7QUFDekMsU0FBSy9CLEdBQUwsa0ZBQ0crSCxLQURILEVBQ1c2Qix5RUFBbUIsQ0FBQzVCLEtBQUQsQ0FEOUIsR0FFRyxJQUZILEVBRVNqRyxFQUZUO0FBR0QsR0E5UmU7QUFnU2hCbWEsY0FBWSxFQUFFLHNCQUFVbmEsRUFBVixFQUFjO0FBQzFCLFNBQUtrYSxhQUFMLENBQW1CLFVBQVUxWCxHQUFWLEVBQWU7QUFDaEMsVUFBSSxPQUFPeEMsRUFBUCxLQUFjLFVBQWxCLEVBQThCO0FBQzVCLGVBQU9BLEVBQUUsQ0FBQ3dDLEdBQUQsQ0FBVDtBQUNELE9BRkQsTUFFTyxJQUFJQSxHQUFKLEVBQVM7QUFDZCxZQUFJLEVBQUVBLEdBQUcsWUFBWXZHLDJFQUFqQixDQUFKLEVBQXdDO0FBQ3RDd1AsaUJBQU8sQ0FBQ2lCLEtBQVIsQ0FBY2xLLEdBQWQ7QUFDRDtBQUNGO0FBQ0YsS0FSRDtBQVNELEdBMVNlOztBQTRTaEI7Ozs7Ozs7QUFPQXZFLEtBQUcsRUFBRSxhQUFVcUYsSUFBVixFQUFnQndWLFFBQWhCLEVBQTBCOVksRUFBMUIsRUFBOEI7QUFBQTs7QUFDakMsUUFBSSxDQUFDLEtBQUt3YixRQUFMLEVBQUwsRUFBc0I7QUFDcEI7QUFDRDs7QUFFRCxRQUFJLE9BQU8xQyxRQUFQLEtBQW9CLFVBQXBCLElBQWtDLENBQUM5WSxFQUF2QyxFQUEyQztBQUN6Q0EsUUFBRSxHQUFHOFksUUFBTDtBQUNBQSxjQUFRLEdBQUcsS0FBWDtBQUNEOztBQUVELFFBQU16SSxLQUFLLEdBQUcsS0FBS0EsS0FBTCxDQUFXNE8sVUFBekI7QUFDQTVPLFNBQUssQ0FBQ3BGLE9BQU4sR0FBZ0JGLHNFQUFnQixDQUFDc0YsS0FBSyxDQUFDckYsS0FBUCxFQUFjcUYsS0FBSyxDQUFDL00sSUFBcEIsRUFBMEIrTSxLQUFLLENBQUNwRixPQUFoQyxFQUF5QzNILElBQXpDLENBQWhDOztBQUVBLFFBQUksS0FBSytNLEtBQUwsQ0FBVzRPLFVBQVgsQ0FBc0JtQixVQUExQixFQUFzQztBQUNwQyxXQUFLdkgsTUFBTCxDQUFZLFVBQUNyVyxHQUFELEVBQU1XLE1BQU4sRUFBaUI7QUFDM0IsYUFBSSxDQUFDa04sS0FBTCxDQUFXNE8sVUFBWCxDQUFzQm9CLGlCQUF0QixDQUF3QzdkLEdBQXhDLEVBQTZDVyxNQUE3Qzs7QUFDQSxZQUFJLE9BQU9uRCxFQUFQLEtBQWMsVUFBbEIsRUFBOEI7QUFDNUJBLFlBQUUsQ0FBQ3dDLEdBQUQsRUFBTVcsTUFBTixDQUFGO0FBQ0Q7QUFDRixPQUxEO0FBTUE7QUFDRDs7QUFFRCxRQUFJMlYsUUFBSixFQUFjO0FBQ1osV0FBSzFILFFBQUwsQ0FBYyxLQUFLZixLQUFuQixFQUEwQjtBQUFBLGVBQU0sS0FBSSxDQUFDOEosWUFBTCxDQUFrQm5hLEVBQWxCLENBQU47QUFBQSxPQUExQjtBQUNBO0FBQ0Q7O0FBRUQsU0FBS29SLFFBQUwsQ0FBYyxLQUFLZixLQUFuQixFQUEwQixPQUFPclEsRUFBUCxLQUFjLFVBQWQsR0FBMkJBLEVBQTNCLEdBQWdDLElBQTFEO0FBQ0QsR0FoVmU7QUFrVmhCc2dCLFlBQVUsRUFBRSxvQkFBVWhkLElBQVYsRUFBZ0J0RCxFQUFoQixFQUFvQjtBQUM5QixRQUFJLEtBQUtpYSxpQkFBTCxFQUFKLEVBQThCO0FBQzVCO0FBQ0Q7O0FBRUQsU0FBS2hjLEdBQUwsQ0FBU3FGLElBQVQ7QUFDQSxTQUFLdVYsTUFBTCxDQUFZN1ksRUFBWjtBQUNELEdBelZlOztBQTJWaEI7Ozs7O0FBS0E2WSxRQUFNLEVBQUV5RyxtRUFBVztBQUFBO0FBQUE7QUFBQTtBQUFBLHlFQUFDO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLGlCQUNkLEtBQUtyRixpQkFBTCxFQURjO0FBQUE7QUFBQTtBQUFBOztBQUFBOztBQUFBO0FBQUEsa0JBS2QsQ0FBQyxLQUFLNUosS0FBTCxDQUFXNE8sVUFBWCxDQUFzQm1CLFVBQXZCLElBQXFDLEtBQUt2RSxZQUFMLEVBTHZCO0FBQUE7QUFBQTtBQUFBOztBQUFBOztBQUFBO0FBU2xCLGlCQUFLeEwsS0FBTCxDQUFXNE8sVUFBWCxDQUFzQjVELFVBQXRCLEdBQW1DLElBQW5DO0FBRU1wUSxtQkFYWSxHQVdGLEtBQUswUCxXQUFMLEVBWEU7QUFhbEIsaUJBQUt0SyxLQUFMLENBQVc0TyxVQUFYLENBQXNCTyxXQUF0QixHQUFvQyxJQUFwQztBQUNBLGlCQUFLblAsS0FBTCxDQUFXNE8sVUFBWCxDQUFzQmxFLG9CQUF0QixHQUE2QyxLQUE3QztBQUVBLGlCQUFLM0osUUFBTCxDQUFjLEtBQUtmLEtBQW5CLEVBaEJrQixDQWtCbEI7O0FBbEJrQjtBQUFBO0FBQUEsbUJBc0JILEtBQUtBLEtBQUwsQ0FBVzRPLFVBQVgsQ0FBc0JqVSxLQUF0QixDQUE0QjZOLE1BQTVCLENBQW1DNU4sT0FBbkMsQ0F0Qkc7O0FBQUE7QUFzQmhCM0gsZ0JBdEJnQjtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBd0JoQmQsZUFBRyxlQUFIOztBQXhCZ0I7QUFBQSxpQkEyQmQsS0FBSzJjLFlBM0JTO0FBQUE7QUFBQTtBQUFBOztBQUFBOztBQUFBO0FBK0JsQixpQkFBSzlPLEtBQUwsQ0FBVzRPLFVBQVgsQ0FBc0I1RCxVQUF0QixHQUFtQyxLQUFuQztBQUVNblEsc0JBakNZLEdBaUNDLEtBQUt5UCxXQUFMLEVBakNEO0FBa0NaMEIseUJBbENZLEdBa0NJelYsNkRBQU8sQ0FBQ3FFLE9BQUQsRUFBVUMsVUFBVixDQWxDWDtBQW1DWnFWLDJCQW5DWSxHQW1DTS9kLEdBQUcsWUFBWXZHLDJFQW5DckIsRUFxQ2xCOztBQUNBLGdCQUFJc2tCLGVBQWUsSUFBSS9kLEdBQUcsQ0FBQ29HLE9BQUosRUFBdkIsRUFBc0M7QUFDcENwRyxpQkFBRyxHQUFHLElBQU47QUFDRDs7QUFFRCxnQkFBSUEsR0FBSixFQUFTO0FBQ1Asa0JBQUkrZCxlQUFKLEVBQXFCO0FBQ25CLG9CQUFJbEUsYUFBSixFQUFtQjtBQUNqQix1QkFBS2hNLEtBQUwsQ0FBVzRPLFVBQVgsQ0FBc0I5UixNQUF0QixHQUErQjNLLEdBQS9CO0FBQ0Q7QUFDRixlQUpELE1BSU87QUFDTCxxQkFBSzZOLEtBQUwsQ0FBVzRPLFVBQVgsQ0FBc0JPLFdBQXRCLEdBQW9DaGQsR0FBcEM7QUFDRDtBQUNGLGFBUkQsTUFRTyxJQUFJNlosYUFBSixFQUFtQjtBQUN4QixtQkFBS2hNLEtBQUwsQ0FBVzRPLFVBQVgsQ0FBc0I5UixNQUF0QixHQUErQixJQUFJbFIsMkVBQUosRUFBL0I7QUFDQSxtQkFBS29VLEtBQUwsQ0FBVzRPLFVBQVgsQ0FBc0JoVSxPQUF0QixHQUFnQyxFQUFoQztBQUNELGFBSE0sTUFHQTtBQUNMbEMsMkVBQU8sQ0FBQ2tDLE9BQUQsRUFBVSxVQUFVaEYsS0FBVixFQUFpQkQsS0FBakIsRUFBd0I7QUFDdkMsb0JBQUlZLDZEQUFPLENBQUNYLEtBQUQsRUFBUWlGLFVBQVUsQ0FBQ2xGLEtBQUQsQ0FBbEIsQ0FBWCxFQUF1QztBQUNyQyx5QkFBTyxLQUFLcUssS0FBTCxDQUFXNE8sVUFBWCxDQUFzQmhVLE9BQXRCLENBQThCakYsS0FBOUIsQ0FBUDtBQUNEO0FBQ0YsZUFKTSxFQUlKLElBSkksQ0FBUDtBQUtEOztBQTNEaUI7QUFBQSxtQkE2RFpwQixpRUFBUyxDQUFHLEtBQUt3TSxRQUFSLE1BQUcsSUFBSCxHQUFrQixJQUFsQixDQUFULENBQWlDLEtBQUtmLEtBQXRDLENBN0RZOztBQUFBO0FBQUEsaUJBK0RkN04sR0EvRGM7QUFBQTtBQUFBO0FBQUE7O0FBQUEsa0JBZ0VWQSxHQWhFVTs7QUFBQTtBQUFBLDhDQWtFWGMsSUFsRVc7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsR0FBRCxHQWhXSDtBQXFhaEJrZCxtQkFBaUIsRUFBRSwyQkFBVXhhLEtBQVYsRUFBaUJoRyxFQUFqQixFQUFxQjtBQUN0QyxRQUFJLEtBQUtpYSxpQkFBTCxFQUFKLEVBQThCO0FBQzVCO0FBQ0Q7O0FBRUQsU0FBSzVKLEtBQUwsQ0FBVzRPLFVBQVgsQ0FBc0I5UixNQUF0QixDQUE2Qm9QLFVBQTdCLENBQXdDdlcsS0FBeEM7O0FBQ0EsU0FBS3FLLEtBQUwsQ0FBVzRPLFVBQVgsQ0FBc0JyRCxRQUF0QixDQUErQlcsVUFBL0IsQ0FBMEN2VyxLQUExQzs7QUFDQSxXQUFPLEtBQUtxSyxLQUFMLENBQVc0TyxVQUFYLENBQXNCaFUsT0FBdEIsQ0FBOEJqRixLQUE5QixDQUFQO0FBQ0EsU0FBS29MLFFBQUwsQ0FBYyxLQUFLZixLQUFuQixFQUEwQixPQUFPclEsRUFBUCxLQUFjLFVBQWQsR0FBMkJBLEVBQTNCLEdBQWdDLElBQTFEO0FBQ0QsR0E5YWU7QUFnYmhCcWEsY0FBWSxFQUFFLHNCQUFVcmEsRUFBVixFQUFjO0FBQzFCLFFBQUksS0FBS2lhLGlCQUFMLEVBQUosRUFBOEI7QUFDNUI7QUFDRDs7QUFFRCxTQUFLNUosS0FBTCxDQUFXNE8sVUFBWCxDQUFzQjlSLE1BQXRCLENBQTZCcVAsS0FBN0I7O0FBQ0EsU0FBS25NLEtBQUwsQ0FBVzRPLFVBQVgsQ0FBc0JyRCxRQUF0QixDQUErQlksS0FBL0I7O0FBQ0EsU0FBS25NLEtBQUwsQ0FBVzRPLFVBQVgsQ0FBc0JoVSxPQUF0QixHQUFnQyxFQUFoQztBQUNBLFNBQUtvRixLQUFMLENBQVc0TyxVQUFYLENBQXNCTyxXQUF0QixHQUFvQyxLQUFwQztBQUNBLFNBQUtuUCxLQUFMLENBQVc0TyxVQUFYLENBQXNCbEUsb0JBQXRCLEdBQTZDLEtBQUsxSyxLQUFMLENBQVc0TyxVQUFYLENBQXNCd0IsMkJBQW5FO0FBQ0EsU0FBS3JQLFFBQUwsQ0FBYyxLQUFLZixLQUFuQixFQUEwQixPQUFPclEsRUFBUCxLQUFjLFVBQWQsR0FBMkJBLEVBQTNCLEdBQWdDLElBQTFEO0FBQ0QsR0EzYmU7QUE2YmhCMGdCLHlCQUF1QixFQUFFLGlDQUFVemEsS0FBVixFQUFpQmpHLEVBQWpCLEVBQXFCO0FBQzVDLFNBQUtxUSxLQUFMLENBQVc0TyxVQUFYLENBQXNCbEUsb0JBQXRCLEdBQTZDOVUsS0FBN0M7QUFDQSxTQUFLbUwsUUFBTCxDQUFjLEtBQUtmLEtBQW5CLEVBQTBCLE9BQU9yUSxFQUFQLEtBQWMsVUFBZCxHQUEyQkEsRUFBM0IsR0FBZ0MsSUFBMUQ7QUFDRCxHQWhjZTtBQWtjaEI2YixjQUFZLEVBQUUsd0JBQVk7QUFDeEIsUUFBSSxLQUFLNUIsaUJBQUwsRUFBSixFQUE4QjtBQUM1QixhQUFPLEtBQVA7QUFDRDs7QUFFRCxXQUFPLEtBQUs1SixLQUFMLENBQVc0TyxVQUFYLENBQXNCNUQsVUFBN0I7QUFDRCxHQXhjZTs7QUEwY2hCOzs7Ozs7QUFNQTJELG9CQUFrQixFQUFFLDRCQUFVL1QsT0FBVixFQUFtQjtBQUNyQ3RMLFVBQU0sQ0FBQ3dJLE1BQVAsQ0FBYyxLQUFLa0ksS0FBTCxDQUFXNE8sVUFBWCxDQUFzQjNiLElBQXBDLEVBQTBDcUYsK0RBQVMsQ0FBQ3NDLE9BQUQsQ0FBbkQ7O0FBQ0EsUUFBSSxDQUFDLEtBQUtrVSxZQUFWLEVBQXdCO0FBQ3RCLFdBQUsvTixRQUFMLENBQWMsS0FBS2YsS0FBbkI7QUFDRDtBQUNGLEdBcmRlO0FBdWRoQmtQLFlBQVUsRUFBRSxvQkFBVS9iLFFBQVYsRUFBb0I7QUFDOUIsUUFBSSxDQUFDQSxRQUFRLENBQUN3SCxLQUFkLEVBQXFCO0FBQ25CLFlBQU03TCxLQUFLLENBQUMsb0RBQUQsQ0FBWDtBQUNEOztBQUVELFNBQUtrUixLQUFMLENBQVc0TyxVQUFYLEdBQXdCO0FBQ3RCM2IsVUFBSSxFQUFFRSxRQUFRLENBQUNGLElBRE87QUFFdEIySCxhQUFPLEVBQUV6SCxRQUFRLENBQUN5SCxPQUFULElBQW9CLEVBRlA7QUFHdEJrQyxZQUFNLEVBQUUsSUFBSWxSLDJFQUFKLEVBSGM7QUFJdEIyZixjQUFRLEVBQUUsSUFBSTNmLDJFQUFKLEVBSlk7QUFLdEJ1akIsaUJBQVcsRUFBRSxJQUxTO0FBTXRCckUsZ0JBQVUsRUFBRSxLQU5VO0FBT3RCMEUsd0JBQWtCLEVBQUUsRUFQRTtBQVF0QnhFLGdCQUFVLEVBQUUsS0FSVTtBQVN0QlIseUJBQW1CLEVBQUVyWCxRQUFRLENBQUNxWCxtQkFBVCxJQUFnQyxLQVQvQjtBQVV0QkssdUJBQWlCLEVBQUUxWCxRQUFRLENBQUMwWCxpQkFBVCxJQUE4QixJQUFJcmYsb0VBQUosRUFWM0I7QUFZdEJrZiwwQkFBb0IsRUFBRXZYLFFBQVEsQ0FBQ3VYLG9CQVpUO0FBWStCO0FBQ3JEMEYsaUNBQTJCLEVBQUVqZCxRQUFRLENBQUN1WCxvQkFiaEI7QUFhc0M7QUFFNUQvUCxXQUFLLEVBQUV4SCxRQUFRLENBQUN3SCxLQWZNO0FBZUM7QUFDdkI4QixZQUFNLEVBQUV0SixRQUFRLENBQUNzSixNQWhCSztBQWlCdEJtTyxlQUFTLEVBQUV6WCxRQUFRLENBQUN5WCxTQWpCRTtBQWtCdEJtRixnQkFBVSxFQUFFNWMsUUFBUSxDQUFDNGMsVUFsQkM7QUFtQnRCQyx1QkFBaUIsRUFBRTdjLFFBQVEsQ0FBQzZjO0FBbkJOLEtBQXhCO0FBcUJELEdBamZlO0FBbWZoQnBHLG1CQUFpQixFQUFFLDZCQUFZO0FBQzdCLFdBQU8sQ0FBQyxLQUFLNUosS0FBTixJQUFlLENBQUMsS0FBS0EsS0FBTCxDQUFXNE8sVUFBbEM7QUFDRCxHQXJmZTtBQXVmaEIvRSxlQUFhLEVBQUUsdUJBQVVsYSxFQUFWLEVBQWMyZ0IsSUFBZCxFQUFvQjtBQUNqQyxRQUFJLEtBQUsxRyxpQkFBTCxFQUFKLEVBQThCO0FBQzVCLGFBQU8wRyxJQUFJLEVBQVg7QUFDRDs7QUFFRCxRQUFJQyxTQUFTLEdBQUcsQ0FBaEI7QUFDQSxRQUFJQyxhQUFKOztBQUNBLFFBQU1DLFVBQVUsR0FBRyxVQUFVdGUsR0FBVixFQUFlO0FBQ2hDLFVBQUl3RCxLQUFKOztBQUVBLFVBQUksS0FBS21aLFlBQVQsRUFBdUI7QUFDckIsWUFBSTNjLEdBQUosRUFBUztBQUNQaUosaUJBQU8sQ0FBQ2lCLEtBQVIsQ0FBY2xLLEdBQWQ7QUFDRDs7QUFDRDtBQUNEOztBQUVELFVBQUlBLEdBQUosRUFBUztBQUNQcWUscUJBQWEsR0FBR3JlLEdBQWhCO0FBQ0Q7O0FBRUQsVUFBSSxFQUFFb2UsU0FBRixHQUFjLENBQWxCLEVBQXFCO0FBQUM7QUFDcEI7QUFDRDs7QUFFRCxXQUFLdlEsS0FBTCxDQUFXNE8sVUFBWCxDQUFzQjlELFVBQXRCLEdBQW1DLEtBQW5DOztBQUVBLGFBQU9uVixLQUFLLEdBQUcsS0FBS3FLLEtBQUwsQ0FBVzRPLFVBQVgsQ0FBc0JZLGtCQUF0QixDQUF5Q2pSLEdBQXpDLEVBQWYsRUFBK0Q7QUFDN0QsYUFBS3lCLEtBQUwsQ0FBVzRPLFVBQVgsQ0FBc0JyRCxRQUF0QixDQUErQlcsVUFBL0IsQ0FBMEN2VyxLQUExQzs7QUFDQSxhQUFLcUssS0FBTCxDQUFXNE8sVUFBWCxDQUFzQjlSLE1BQXRCLENBQTZCb1AsVUFBN0IsQ0FBd0N2VyxLQUF4QztBQUNEOztBQUVELFdBQUtvTCxRQUFMLENBQWMsS0FBS2YsS0FBbkIsRUFBMEIsWUFBWTtBQUNwQyxZQUFJd1EsYUFBSixFQUFtQjtBQUNqQjdnQixZQUFFLENBQUM2Z0IsYUFBRCxDQUFGO0FBQ0E7QUFDRDs7QUFFRCxZQUFNRSx5QkFBeUIsR0FBRyxLQUFLZixtQkFBTCxFQUFsQztBQUNBaGdCLFVBQUUsQ0FBQytnQix5QkFBeUIsQ0FBQ25ZLE9BQTFCLEtBQXNDLElBQXRDLEdBQTZDbVkseUJBQTlDLENBQUY7QUFDRCxPQVJEO0FBU0QsS0FsQ2tCLENBa0NqQnJnQixJQWxDaUIsQ0FrQ1osSUFsQ1ksQ0FBbkI7O0FBb0NBLFNBQUsyUCxLQUFMLENBQVc0TyxVQUFYLENBQXNCOUQsVUFBdEIsR0FBbUMsSUFBbkM7O0FBRUEsU0FBS3NCLGFBQUwsQ0FBbUIsS0FBS3BNLEtBQUwsQ0FBVzRPLFVBQVgsQ0FBc0JqVSxLQUF6QyxFQUFnRCxLQUFLMlAsV0FBckQsRUFBa0UsUUFBbEUsRUFBNEVtRyxVQUE1RTs7QUFDQSxTQUFLckUsYUFBTCxDQUFtQixLQUFLcE0sS0FBTCxDQUFXNE8sVUFBWCxDQUFzQi9ELGlCQUF6QyxFQUE0RCxLQUFLUixRQUFqRSxFQUEyRSxVQUEzRSxFQUF1Rm9HLFVBQXZGO0FBQ0QsR0F0aUJlO0FBd2lCaEJyRSxlQUFhLEVBQUUsdUJBQVVuTyxTQUFWLEVBQXFCbUssT0FBckIsRUFBOEI0RSxNQUE5QixFQUFzQ3JkLEVBQXRDLEVBQTBDO0FBQUE7O0FBQ3ZELFFBQU1zRCxJQUFJLEdBQUdtVixPQUFPLEVBQXBCO0FBQ0FuSyxhQUFTLENBQUN5SyxhQUFWLENBQXdCelYsSUFBeEIsRUFDR0QsSUFESCxDQUNRLFVBQUFvVyxXQUFXLEVBQUk7QUFDbkIsVUFBSSxDQUFDLE1BQUksQ0FBQzBGLFlBQU4sSUFBc0J2WSw2REFBTyxDQUFDdEQsSUFBRCxFQUFPbVYsT0FBTyxFQUFkLENBQWpDLEVBQW9EO0FBQ2xELGNBQUksQ0FBQ3BJLEtBQUwsQ0FBVzRPLFVBQVgsQ0FBc0I1QixNQUF0QixJQUFnQzVELFdBQWhDO0FBQ0Q7O0FBQ0R6WixRQUFFO0FBQ0gsS0FOSCxXQU9TLFVBQUF3QyxHQUFHLEVBQUk7QUFDWixVQUFJLENBQUMsTUFBSSxDQUFDMmMsWUFBTixJQUFzQnZZLDZEQUFPLENBQUN0RCxJQUFELEVBQU9tVixPQUFPLEVBQWQsQ0FBakMsRUFBb0Q7QUFDbEQsY0FBSSxDQUFDcEksS0FBTCxDQUFXNE8sVUFBWCxDQUFzQjVCLE1BQXRCLEVBQThCYixLQUE5QjtBQUNEOztBQUNEeGMsUUFBRSxDQUFDd0MsR0FBRCxDQUFGO0FBQ0QsS0FaSDtBQWFELEdBdmpCZTtBQXlqQmhCa1ksVUFBUSxFQUFFLG9CQUFZO0FBQ3BCLFFBQUksQ0FBQyxLQUFLckssS0FBTCxDQUFXNE8sVUFBWCxDQUFzQjNiLElBQTNCLEVBQWlDO0FBQy9CLGFBQU8sSUFBUDtBQUNEOztBQUNELFdBQU8zRCxNQUFNLENBQUN3SSxNQUFQLENBQWMsRUFBZCxFQUFrQixLQUFLa0ksS0FBTCxDQUFXNE8sVUFBWCxDQUFzQjNiLElBQXhDLEVBQThDLEtBQUsrTSxLQUFMLENBQVc0TyxVQUFYLENBQXNCaFUsT0FBcEUsQ0FBUDtBQUNELEdBOWpCZTtBQWdrQmhCMFAsYUFBVyxFQUFFLHVCQUFZO0FBQ3ZCO0FBQ0EsUUFBSSxLQUFLdEssS0FBTCxDQUFXNE8sVUFBWCxDQUFzQmhFLFNBQTFCLEVBQXFDO0FBQ25DLGFBQU8sS0FBS1AsUUFBTCxFQUFQO0FBQ0Q7O0FBQ0QsV0FBT2hTLDJEQUFLLENBQUMsS0FBSzJILEtBQUwsQ0FBVzRPLFVBQVgsQ0FBc0JoVSxPQUF2QixDQUFaO0FBQ0QsR0F0a0JlO0FBd2tCaEJnUyxtQkFBaUIsRUFBRSwyQkFBVWpYLEtBQVYsRUFBaUI7QUFDbEMsUUFBTXFLLEtBQUssR0FBRyxLQUFLQSxLQUFMLENBQVc0TyxVQUF6QjtBQUNBLFdBQU81TyxLQUFLLENBQUNwRixPQUFOLENBQWNoQixjQUFkLENBQTZCakUsS0FBN0IsS0FBdUNZLDZEQUFPLENBQUN5SixLQUFLLENBQUNwRixPQUFOLENBQWNqRixLQUFkLENBQUQsRUFBdUJxSyxLQUFLLENBQUMvTSxJQUFOLENBQVcwQyxLQUFYLENBQXZCLENBQXJEO0FBQ0Q7QUEza0JlLENBQWxCO0FBOGtCZW5ILHdFQUFmLEU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2htQkE7Ozs7Ozs7O0FBUUE7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUEsSUFBTW1pQixXQUFXLEdBQUcsS0FBSyxDQUF6QjtBQUNBLElBQU1DLGtCQUFrQixHQUFHLEtBQUssQ0FBaEM7QUFDQSxJQUFNQyxVQUFVLEdBQUcsS0FBSyxDQUF4QjtBQUNBLElBQU1DLGdCQUFnQixHQUFHLEtBQUssQ0FBOUI7QUFDQSxJQUFNQyxzQkFBc0IsR0FBRyxLQUFLLENBQXBDO0FBQ0EsSUFBTUMscUJBQXFCLEdBQUcsS0FBSyxDQUFuQzs7QUFFQSxJQUFNbGYsU0FBUyxHQUFJLFlBQU07QUFDdkIsTUFBTW1mLGVBQWUsR0FBR2xmLGlEQUFTLENBQUMwUCxLQUFWLENBQWdCO0FBQ3RDeVAsVUFBTSxFQUFFbmYsaURBQVMsQ0FBQ2tILE1BRG9CO0FBRXRDa1ksYUFBUyxFQUFFcGYsaURBQVMsQ0FBQzBOO0FBRmlCLEdBQWhCLENBQXhCO0FBSUEsTUFBTTJSLFFBQVEsR0FBR3JmLGlEQUFTLENBQUN5TyxTQUFWLENBQW9CLENBQ25DeVEsZUFEbUMsRUFFbkNsZixpREFBUyxDQUFDc2YsT0FBVixDQUFrQkosZUFBbEIsQ0FGbUMsQ0FBcEIsQ0FBakI7QUFJQSxTQUFPO0FBQ0xwZ0IsYUFBUyxFQUFFa0IsaURBQVMsQ0FBQ2tILE1BRGhCO0FBRUwwQixTQUFLLEVBQUU1SSxpREFBUyxDQUFDMFAsS0FBVixDQUFnQjtBQUNyQlosVUFBSSxFQUFFOU8saURBQVMsQ0FBQ0UsSUFBVixDQUFlMk4sVUFEQTtBQUVyQndPLFlBQU0sRUFBRXJjLGlEQUFTLENBQUNFLElBRkc7QUFHckJ5VyxtQkFBYSxFQUFFM1csaURBQVMsQ0FBQ0UsSUFISjtBQUlyQjZJLDZCQUF1QixFQUFFL0ksaURBQVMsQ0FBQ0UsSUFKZDtBQUtyQmdaLFFBQUUsRUFBRWxaLGlEQUFTLENBQUNFLElBTE87QUFNckIyWixTQUFHLEVBQUU3WixpREFBUyxDQUFDRTtBQU5NLEtBQWhCLENBRkY7QUFVTHFmLFFBQUksRUFBRXZmLGlEQUFTLENBQUMrSCxNQVZYO0FBV0x5WCxlQUFXLEVBQUV4ZixpREFBUyxDQUFDeU8sU0FBVixDQUFvQixDQUMvQnpPLGlEQUFTLENBQUNzZixPQUFWLENBQWtCdGYsaURBQVMsQ0FBQ2tILE1BQTVCLENBRCtCLEVBRS9CbEgsaURBQVMsQ0FBQytILE1BRnFCLENBQXBCLENBWFI7QUFlTDBYLFlBQVEsRUFBRXpmLGlEQUFTLENBQUN5UCxLQWZmO0FBZ0JMO0FBQ0FpUSxRQUFJLEVBQUUxZixpREFBUyxDQUFDNUQsTUFqQlg7QUFrQkx1akIsb0JBQWdCLEVBQUUzZixpREFBUyxDQUFDNUQsTUFsQnZCO0FBbUJMd2pCLGFBQVMsRUFBRTVmLGlEQUFTLENBQUM1RCxNQW5CaEI7QUFvQkx5akIsZ0JBQVksRUFBRTdmLGlEQUFTLENBQUNzZixPQUFWLENBQWtCdGYsaURBQVMsQ0FBQzVELE1BQTVCLENBcEJUO0FBcUJMMGpCLHFCQUFpQixFQUFFOWYsaURBQVMsQ0FBQ0UsSUFyQnhCO0FBc0JMcU4sWUFBUSxFQUFFdk4saURBQVMsQ0FBQ0UsSUF0QmY7QUF1Qkw2ZixXQUFPLEVBQUUvZixpREFBUyxDQUFDRSxJQXZCZDtBQXdCTDhmLGNBQVUsRUFBRWhnQixpREFBUyxDQUFDRSxJQXhCakI7QUF5QkwrZixVQUFNLEVBQUVqZ0IsaURBQVMsQ0FBQ0UsSUF6QmI7QUEwQkxnZ0IsYUFBUyxFQUFFbGdCLGlEQUFTLENBQUNFLElBMUJoQjtBQTJCTDhkLGNBQVUsRUFBRWhlLGlEQUFTLENBQUNvTixJQTNCakI7QUE0QkxnSSxVQUFNLEVBQUVwVixpREFBUyxDQUFDNUQsTUE1QmI7QUE2QkwrakIsb0JBQWdCLEVBQUVuZ0IsaURBQVMsQ0FBQ0UsSUE3QnZCO0FBOEJMa2dCLGFBQVMsRUFBRXBnQixpREFBUyxDQUFDRSxJQTlCaEI7QUErQkxtZ0IsbUJBQWUsRUFBRXJnQixpREFBUyxDQUFDb04sSUEvQnRCO0FBZ0NMa1QsbUJBQWUsRUFBRXRnQixpREFBUyxDQUFDME4sR0FoQ3RCO0FBaUNMNlMsb0JBQWdCLEVBQUV2Z0IsaURBQVMsQ0FBQ0UsSUFqQ3ZCO0FBa0NMc2dCLHFCQUFpQixFQUFFeGdCLGlEQUFTLENBQUNFLElBbEN4QjtBQW1DTHVnQixlQUFXLEVBQUUscUJBQUNyaUIsS0FBRCxFQUFRc2lCLFFBQVIsRUFBOEI7QUFDekMsVUFBSSxDQUFDdGlCLEtBQUssQ0FBQ3FpQixXQUFYLEVBQXdCO0FBQ3RCO0FBQ0Q7O0FBSHdDLHdDQUFURSxJQUFTO0FBQVRBLFlBQVM7QUFBQTs7QUFJekMsVUFBTUMsU0FBUyxHQUFHdkIsUUFBUSxNQUFSLFVBQVNqaEIsS0FBVCxFQUFnQnNpQixRQUFoQixTQUE2QkMsSUFBN0IsRUFBbEI7O0FBQ0EsVUFBSUMsU0FBSixFQUFlO0FBQ2IsZUFBT0EsU0FBUDtBQUNEOztBQUNELFVBQUl4aUIsS0FBSyxDQUFDeUosY0FBTixDQUFxQixNQUFyQixDQUFKLEVBQWtDO0FBQ2hDLGVBQU85SyxLQUFLLENBQUMsaUVBQUQsQ0FBWjtBQUNEO0FBQ0YsS0E5Q0k7QUErQ0w4akIsUUFBSSxFQUFFLGNBQUN6aUIsS0FBRCxFQUFRc2lCLFFBQVIsRUFBOEI7QUFDbEMsVUFBSSxDQUFDdGlCLEtBQUssQ0FBQ3lpQixJQUFYLEVBQWlCO0FBQ2Y7QUFDRDs7QUFIaUMseUNBQVRGLElBQVM7QUFBVEEsWUFBUztBQUFBOztBQUlsQyxVQUFNQyxTQUFTLEdBQUd2QixRQUFRLE1BQVIsVUFBU2poQixLQUFULEVBQWdCc2lCLFFBQWhCLFNBQTZCQyxJQUE3QixFQUFsQjs7QUFDQSxVQUFJQyxTQUFKLEVBQWU7QUFDYixlQUFPQSxTQUFQO0FBQ0Q7O0FBQ0QsVUFBSSxDQUFDeGlCLEtBQUssQ0FBQ2dpQixTQUFYLEVBQXNCO0FBQ3BCLGVBQU9yakIsS0FBSyxDQUFDLDREQUFELENBQVo7QUFDRDtBQUNGLEtBMURJO0FBMkRMK2pCLGtCQUFjLEVBQUU5Z0IsaURBQVMsQ0FBQ29OLElBM0RyQjtBQTRETHVMLHdCQUFvQixFQUFFM1ksaURBQVMsQ0FBQ29OLElBNUQzQjtBQTZETDBMLHFCQUFpQixFQUFFOVksaURBQVMsQ0FBQzBQLEtBQVYsQ0FBZ0I7QUFDakNpSCxtQkFBYSxFQUFFM1csaURBQVMsQ0FBQ0UsSUFEUTtBQUVqQzZJLDZCQUF1QixFQUFFL0ksaURBQVMsQ0FBQ0U7QUFGRixLQUFoQjtBQTdEZCxHQUFQO0FBa0VELENBM0VpQixFQUFsQjs7QUE2RUEsSUFBTTlHLGFBQWEsR0FBRzJuQix5REFBZ0IsQ0FBQztBQUFEO0FBQUEsR0FDakNDLHVEQURpQyxFQUVqQ0MsMERBRmlDLEVBR2pDQyx3REFIaUMsRUFJakNDLHdEQUppQyxFQUtqQ0MscURBTGlDLEVBTWpDQyx1REFOaUMsRUFPakNDLG1EQVBpQyxFQVFqQ0MsdURBUmlDO0FBVXBDQyxpQkFBZSxFQUFFO0FBQUEsV0FBTztBQUN0QjlCLFVBQUksRUFBRSxDQURnQjtBQUV0QkMsc0JBQWdCLEVBQUUsQ0FGSTtBQUd0QmhILDBCQUFvQixFQUFFLEtBSEE7QUFJdEI4RyxjQUFRLEVBQUU7QUFKWSxLQUFQO0FBQUEsR0FWbUI7QUFnQnBDOUMsaUJBQWUsRUFBRSwyQkFBWTtBQUMzQixTQUFLOEUscUJBQUwsR0FBNkJoZCw4REFBUSxDQUFDLEtBQUtpZCxXQUFOLENBQXJDO0FBQ0EsU0FBS0MsWUFBTCxHQUFvQmxkLDhEQUFRLENBQUMsS0FBS2tkLFlBQU4sQ0FBNUI7O0FBQ0EsUUFBSSxLQUFLdmpCLEtBQUwsQ0FBVzZoQixNQUFmLEVBQXVCO0FBQ3JCLFdBQUs3aEIsS0FBTCxDQUFXNmhCLE1BQVg7QUFDRDs7QUFDRCxXQUFPO0FBQ0xQLFVBQUksRUFBRSxLQUFLdGhCLEtBQUwsQ0FBV3NoQixJQURaO0FBRUxFLGVBQVMsRUFBRSxLQUFLeGhCLEtBQUwsQ0FBV3VoQixnQkFGakI7QUFHTGlDLFdBQUssRUFBRSxDQUhGO0FBSUxDLGVBQVMsRUFBRTtBQUNULGVBQUssS0FBSztBQURELE9BSk47QUFPTEMsY0FBUSxFQUFFLEVBUEw7QUFRTGpCLFVBQUksRUFBRSxLQUFLa0IsZUFBTCxFQVJEO0FBU0w3Z0IsVUFBSSxFQUFFLElBVEQ7QUFVTDJILGFBQU8sRUFBRSxFQVZKO0FBV0wyUSxjQUFRLEVBQUUsRUFYTDtBQVlMek8sWUFBTSxFQUFFLEVBWkg7QUFhTGlYLFlBQU0sRUFBRSxFQWJIO0FBY0xDLGlCQUFXLEVBQUUsRUFkUjtBQWVMQyxhQUFPLEVBQUUsRUFmSjtBQWdCTHZKLDBCQUFvQixFQUFFLEtBQUt2YSxLQUFMLENBQVd1YSxvQkFoQjVCO0FBaUJMd0osWUFBTSxFQUFFLEVBakJIO0FBa0JMQywwQkFBb0IsRUFBRSxFQWxCakI7QUFtQkxDLHlCQUFtQixFQUFFLEtBbkJoQjtBQW9CTDVDLGNBQVEsRUFBRSxnRkFBSSxLQUFLcmhCLEtBQUwsQ0FBV3FoQixRQUFqQixDQXBCSDtBQXFCTDZDLGdCQUFVLEVBQUU7QUFyQlAsS0FBUDtBQXVCRCxHQTdDbUM7QUE4Q3BDQyxtQkFBaUIsRUFBRSw2QkFBWTtBQUM3QixTQUFLNVEsVUFBTCxHQUFrQixJQUFsQjs7QUFDQSxRQUFJLEtBQUt2VCxLQUFMLENBQVd3SyxLQUFmLEVBQXNCO0FBQ3BCLFdBQUt4SyxLQUFMLENBQVd3SyxLQUFYLENBQWlCc1EsRUFBakIsQ0FBb0IsUUFBcEIsRUFBOEIsS0FBS3NKLGlCQUFuQztBQUNBLFdBQUtwa0IsS0FBTCxDQUFXd0ssS0FBWCxDQUFpQnNRLEVBQWpCLENBQW9CLFFBQXBCLEVBQThCLEtBQUt1SixRQUFuQztBQUNBLFdBQUtya0IsS0FBTCxDQUFXd0ssS0FBWCxDQUFpQnNRLEVBQWpCLENBQW9CLFFBQXBCLEVBQThCLEtBQUt3SSxXQUFuQztBQUNEOztBQUNELFNBQUtBLFdBQUw7QUFDRCxHQXREbUM7QUF1RHBDMUUsc0JBQW9CLEVBQUUsZ0NBQVk7QUFDaEMsU0FBS3JMLFVBQUwsR0FBa0IsS0FBbEI7O0FBQ0EsUUFBSSxLQUFLdlQsS0FBTCxDQUFXd0ssS0FBZixFQUFzQjtBQUNwQixXQUFLeEssS0FBTCxDQUFXd0ssS0FBWCxDQUFpQmlSLEdBQWpCLENBQXFCLFFBQXJCLEVBQStCLEtBQUsySSxpQkFBcEM7QUFDQSxXQUFLcGtCLEtBQUwsQ0FBV3dLLEtBQVgsQ0FBaUJpUixHQUFqQixDQUFxQixRQUFyQixFQUErQixLQUFLNEksUUFBcEM7QUFDQSxXQUFLcmtCLEtBQUwsQ0FBV3dLLEtBQVgsQ0FBaUJpUixHQUFqQixDQUFxQixRQUFyQixFQUErQixLQUFLNkgsV0FBcEM7QUFDRDs7QUFDRCxRQUFJLEtBQUt0akIsS0FBTCxDQUFXOGhCLFNBQWYsRUFBMEI7QUFDeEIsV0FBSzloQixLQUFMLENBQVc4aEIsU0FBWDtBQUNEO0FBQ0YsR0FqRW1DO0FBa0VwQ3dDLDJCQUF5QixFQUFFLG1DQUFVeFUsU0FBVixFQUFxQjtBQUM5QyxRQUFNeVUsUUFBUSxHQUFHLEtBQUt2a0IsS0FBdEI7QUFDQSxRQUFJd2tCLEtBQUssR0FBRyxDQUFaOztBQUVBLFFBQUksQ0FBQ3BlLDZEQUFPLENBQUMsS0FBS3BHLEtBQUwsQ0FBV3dLLEtBQVosRUFBbUJzRixTQUFTLENBQUN0RixLQUE3QixDQUFaLEVBQWlEO0FBQy9DZ2EsV0FBSyxJQUFJaEUsV0FBVDtBQUNEOztBQUNELFFBQUksQ0FBQ3BhLDZEQUFPLENBQUMsS0FBS3BHLEtBQUwsQ0FBV29oQixXQUFaLEVBQXlCdFIsU0FBUyxDQUFDc1IsV0FBbkMsQ0FBWixFQUE2RDtBQUMzRG9ELFdBQUssSUFBSS9ELGtCQUFUO0FBQ0Q7O0FBQ0QsUUFBSSxDQUFDcmEsNkRBQU8sQ0FBQyxLQUFLcEcsS0FBTCxDQUFXeWlCLElBQVosRUFBa0IzUyxTQUFTLENBQUMyUyxJQUE1QixDQUFaLEVBQStDO0FBQzdDK0IsV0FBSyxJQUFJOUQsVUFBVDtBQUNEOztBQUNELFFBQUksS0FBSzFnQixLQUFMLENBQVd3aEIsU0FBWCxLQUF5QjFSLFNBQVMsQ0FBQzBSLFNBQXZDLEVBQWtEO0FBQ2hEZ0QsV0FBSyxJQUFJN0QsZ0JBQVQ7QUFDRDs7QUFDRCxRQUNFLENBQUN2YSw2REFBTyxDQUFDLEtBQUtwRyxLQUFMLENBQVdxaEIsUUFBWixFQUFzQnZSLFNBQVMsQ0FBQ3VSLFFBQWhDLENBQVIsSUFDRyxLQUFLcmhCLEtBQUwsQ0FBV2lrQixtQkFBWCxLQUFtQ25VLFNBQVMsQ0FBQ21VLG1CQUZsRCxFQUdFO0FBQ0FPLFdBQUssSUFBSTVELHNCQUFUO0FBQ0Q7O0FBQ0QsUUFBSSxDQUFDeGEsNkRBQU8sQ0FBQyxLQUFLcEcsS0FBTCxDQUFXeWtCLGFBQVosRUFBMkIzVSxTQUFTLENBQUMyVSxhQUFyQyxDQUFaLEVBQWlFO0FBQy9ERCxXQUFLLElBQUkzRCxxQkFBVDtBQUNEOztBQUVELFFBQUksQ0FBQzJELEtBQUwsRUFBWTtBQUNWO0FBQ0Q7O0FBRUQsUUFBSTFVLFNBQVMsQ0FBQ3VSLFFBQWQsRUFBd0I7QUFDdEIsV0FBS3hSLEtBQUwsQ0FBV3dSLFFBQVgsbUZBQTBCdlIsU0FBUyxDQUFDdVIsUUFBcEM7QUFDRDs7QUFDRCxTQUFLelEsUUFBTCxDQUFjLEVBQWQsRUFBa0IsWUFBWTtBQUM1QixVQUFJNFQsS0FBSyxHQUFHOUQsVUFBUixJQUFzQjhELEtBQUssR0FBR2hFLFdBQTlCLElBQTZDZ0UsS0FBSyxHQUFHN0QsZ0JBQXpELEVBQTJFO0FBQ3pFLFlBQUk2RCxLQUFLLEdBQUdoRSxXQUFaLEVBQXlCO0FBQ3ZCLGVBQUszUSxLQUFMLENBQVcvTSxJQUFYLEdBQWtCLElBQWxCOztBQUNBLGNBQUl5aEIsUUFBUSxDQUFDL1osS0FBYixFQUFvQjtBQUNsQitaLG9CQUFRLENBQUMvWixLQUFULENBQWVpUixHQUFmLENBQW1CLFFBQW5CLEVBQTZCLEtBQUsySSxpQkFBbEM7QUFDQUcsb0JBQVEsQ0FBQy9aLEtBQVQsQ0FBZWlSLEdBQWYsQ0FBbUIsUUFBbkIsRUFBNkIsS0FBSzRJLFFBQWxDO0FBQ0Q7O0FBQ0QsY0FBSSxLQUFLcmtCLEtBQUwsQ0FBV3dLLEtBQWYsRUFBc0I7QUFDcEIsaUJBQUt4SyxLQUFMLENBQVd3SyxLQUFYLENBQWlCc1EsRUFBakIsQ0FBb0IsUUFBcEIsRUFBOEIsS0FBS3NKLGlCQUFuQztBQUNBLGlCQUFLcGtCLEtBQUwsQ0FBV3dLLEtBQVgsQ0FBaUJzUSxFQUFqQixDQUFvQixRQUFwQixFQUE4QixLQUFLdUosUUFBbkM7QUFDRDs7QUFDRCxlQUFLSyxRQUFMLENBQWMsQ0FBZDtBQUNEOztBQUNELGFBQUtyQixxQkFBTCxZQUFtQyxVQUFBcmhCLEdBQUcsRUFBSTtBQUN4QyxjQUFJLEVBQUVBLEdBQUcsWUFBWTdFLDhEQUFqQixDQUFKLEVBQXFDO0FBQ25DOE4sbUJBQU8sQ0FBQ2lCLEtBQVIsQ0FBY2xLLEdBQWQ7QUFDRDtBQUNGLFNBSkQ7QUFLRCxPQWxCRCxNQWtCTyxJQUFLd2lCLEtBQUssR0FBRy9ELGtCQUFULElBQWlDK0QsS0FBSyxHQUFHNUQsc0JBQXpDLElBQXFFNEQsS0FBSyxHQUFHM0QscUJBQWpGLEVBQXlHO0FBQzlHLGFBQUs4RCxXQUFMO0FBQ0Q7QUFDRixLQXRCRDtBQXVCRCxHQTFIbUM7QUEySHBDQyxzQkEzSG9DLGdDQTJIZkMsY0EzSGUsRUEySEM7QUFBQTs7QUFDbkMsUUFBTWhULE1BQU0sR0FBRyxLQUFLaVQsV0FBTCxFQUFmOztBQUNBLFdBQ0U7QUFBSyxlQUFTLEVBQUVELGNBQWMsQ0FBQzdaLElBQWYsQ0FBb0IsR0FBcEI7QUFBaEIsT0FDRTtBQUFLLGVBQVMsRUFBQztBQUFmLE9BQ0U7QUFBTyxpQkFBVyxFQUFDLEdBQW5CO0FBQXVCLGVBQVMsRUFBQztBQUFqQyxPQUNFLDZFQUFXNkcsTUFBTSxDQUFDa1QsUUFBbEIsQ0FERixFQUVFLDBFQUNHbFQsTUFBTSxDQUFDc1AsSUFBUCxDQUFZMVksR0FBWixDQUFnQixVQUFDdWMsR0FBRCxFQUFNQyxNQUFOLEVBQWlCO0FBQ2hDLGFBQ0U7QUFBSSxXQUFHLEVBQUVBO0FBQVQsU0FDR0QsR0FBRyxDQUFDdmMsR0FBSixDQUFRLFVBQUN5YyxHQUFELEVBQU1DLE1BQU4sRUFBaUI7QUFDeEIsWUFBTXRULE1BQU0sR0FBRyxLQUFJLENBQUN1VCxrQkFBTCxDQUF3QkYsR0FBRyxDQUFDemIsY0FBSixDQUFtQixNQUFuQixJQUE2QnliLEdBQUcsQ0FBQ3JtQixJQUFqQyxHQUF3Q3FtQixHQUFHLENBQUNyUixFQUFwRSxDQUFmOztBQUNBLFlBQU03VCxLQUFLLEdBQUc7QUFDWmlJLGFBQUcsRUFBRWtkLE1BRE87QUFFWnprQixtQkFBUyxFQUFFd2tCLEdBQUcsQ0FBQ3hrQixTQUZIO0FBR1oya0IsaUJBQU8sRUFBRUgsR0FBRyxDQUFDekMsSUFBSixHQUFXLEtBQUksQ0FBQzZDLFFBQUwsQ0FBY3BsQixJQUFkLENBQW1CLEtBQW5CLEVBQXlCZ2xCLEdBQUcsQ0FBQzFmLEtBQTdCLENBQVgsR0FDUCxLQUFJLENBQUMrZixzQkFBTCxDQUE0QnJsQixJQUE1QixDQUFpQyxLQUFqQyxFQUF1Q2dsQixHQUF2QyxDQUpVO0FBS1pNLGlCQUFPLEVBQUVOLEdBQUcsQ0FBQy9ELElBTEQ7QUFNWnNFLGlCQUFPLEVBQUVQLEdBQUcsQ0FBQ1E7QUFORCxTQUFkO0FBUUEsZUFDRSxPQUFPN1QsTUFBUCxLQUFrQixRQUFsQixHQUNFLDJJQUNNN1IsS0FETjtBQUVFLGlDQUF1QixFQUFFO0FBQ3ZCMmxCLGtCQUFNLEVBQUU5VDtBQURlO0FBRjNCLFdBREYsR0FNSSxpRUFBUTdSLEtBQVIsRUFBZ0I2UixNQUFoQixDQVBOO0FBUUQsT0FsQkEsQ0FESCxDQURGO0FBdUJELEtBeEJBLENBREgsQ0FGRixDQURGLENBREYsRUFpQ0U7QUFDRSxXQUFLLEVBQUU7QUFBQ3lGLGlCQUFTLEVBQUUsS0FBS3RYLEtBQUwsQ0FBV2dYLE1BQXZCO0FBQStCQSxjQUFNLEVBQUUsS0FBS2hYLEtBQUwsQ0FBV2dYO0FBQWxELE9BRFQ7QUFFRSxlQUFTLEVBQUM7QUFGWixPQUlFO0FBQUssZUFBUyxFQUFDO0FBQWYsT0FDRTtBQUFLLGVBQVMsRUFBRSxLQUFLbkgsS0FBTCxDQUFXcVUsVUFBWCxHQUF3QixjQUF4QixHQUF5QyxFQUF6RDtBQUE2RCxTQUFHLEVBQUUsYUFBQzBCLE1BQUQ7QUFBQSxlQUFZLEtBQUksQ0FBQ0EsTUFBTCxHQUFjQSxNQUExQjtBQUFBO0FBQWxFLE1BREYsRUFFRTtBQUNFLGlCQUFXLEVBQUMsR0FEZDtBQUVFLFNBQUcsRUFBRSxhQUFDcGxCLElBQUQ7QUFBQSxlQUFVLEtBQUksQ0FBQ0EsSUFBTCxHQUFZQSxJQUF0QjtBQUFBLE9BRlA7QUFHRSxhQUFPLEVBQUUsS0FBS3FsQjtBQUhoQixPQUtFLDZFQUFXaFUsTUFBTSxDQUFDa1QsUUFBbEIsQ0FMRixFQU1FO0FBQU8sZUFBUyxFQUFDLGtCQUFqQjtBQUFvQyxTQUFHLEVBQUUsYUFBQ2UsS0FBRDtBQUFBLGVBQVcsS0FBSSxDQUFDQyxLQUFMLEdBQWFELEtBQXhCO0FBQUE7QUFBekMsTUFORixDQUZGLENBSkYsQ0FqQ0YsRUFpREU7QUFBSyxlQUFTLEVBQUM7QUFBZixPQUNHLEtBQUtFLGFBQUwsQ0FBbUIsS0FBS2htQixLQUFMLENBQVdnWCxNQUE5QixDQURILENBakRGLEVBb0RHLEtBQUtpUCxpQkFBTCxFQXBESCxDQURGO0FBd0RELEdBckxtQztBQXNMcENDLFlBdExvQyxzQkFzTHpCckIsY0F0THlCLEVBc0xUO0FBQUE7O0FBQ3pCLFFBQU1oVCxNQUFNLEdBQUcsS0FBS2lULFdBQUwsRUFBZjs7QUFDQUQsa0JBQWMsR0FBR0EsY0FBYyxDQUFDMWQsTUFBZixDQUFzQixzQkFBdEIsQ0FBakI7QUFDQSxXQUNFO0FBQUssZUFBUyxFQUFFMGQsY0FBYyxDQUFDN1osSUFBZixDQUFvQixHQUFwQjtBQUFoQixPQUNFO0FBQUssZUFBUyxFQUFFLEtBQUs2RSxLQUFMLENBQVdxVSxVQUFYLEdBQXdCLGNBQXhCLEdBQXlDLEVBQXpEO0FBQTZELFNBQUcsRUFBRSxhQUFDMEIsTUFBRDtBQUFBLGVBQVksTUFBSSxDQUFDQSxNQUFMLEdBQWNBLE1BQTFCO0FBQUE7QUFBbEUsTUFERixFQUVFO0FBQ0UsaUJBQVcsRUFBQyxHQURkO0FBRUUsZUFBUyxFQUFDLGtCQUZaO0FBR0UsU0FBRyxFQUFFLGFBQUNwbEIsSUFBRDtBQUFBLGVBQVUsTUFBSSxDQUFDQSxJQUFMLEdBQVlBLElBQXRCO0FBQUEsT0FIUDtBQUlFLGFBQU8sRUFBRSxLQUFLcWxCO0FBSmhCLE9BTUUsNkVBQVdoVSxNQUFNLENBQUNrVCxRQUFsQixDQU5GLEVBT0UsMEVBQ0dsVCxNQUFNLENBQUNzUCxJQUFQLENBQVkxWSxHQUFaLENBQWdCLFVBQUN1YyxHQUFELEVBQU1DLE1BQU4sRUFBaUI7QUFDaEMsYUFDRTtBQUFJLFdBQUcsRUFBRUE7QUFBVCxTQUNHRCxHQUFHLENBQUN2YyxHQUFKLENBQVEsVUFBQ3ljLEdBQUQsRUFBTUMsTUFBTixFQUFpQjtBQUN4QixZQUFNdFQsTUFBTSxHQUFHLE1BQUksQ0FBQ3VULGtCQUFMLENBQXdCRixHQUFHLENBQUN6YixjQUFKLENBQW1CLE1BQW5CLElBQTZCeWIsR0FBRyxDQUFDcm1CLElBQWpDLEdBQXdDcW1CLEdBQUcsQ0FBQ3JSLEVBQXBFLENBQWY7O0FBQ0EsWUFBTTdULEtBQUssR0FBRztBQUNaaUksYUFBRyxFQUFFa2QsTUFETztBQUVaemtCLG1CQUFTLEVBQUV3a0IsR0FBRyxDQUFDeGtCLFNBRkg7QUFHWjJrQixpQkFBTyxFQUFFSCxHQUFHLENBQUN6QyxJQUFKLEdBQVcsTUFBSSxDQUFDNkMsUUFBTCxDQUFjcGxCLElBQWQsQ0FBbUIsTUFBbkIsRUFBeUJnbEIsR0FBRyxDQUFDMWYsS0FBN0IsQ0FBWCxHQUNQLE1BQUksQ0FBQytmLHNCQUFMLENBQTRCcmxCLElBQTVCLENBQWlDLE1BQWpDLEVBQXVDZ2xCLEdBQXZDLENBSlU7QUFLWk0saUJBQU8sRUFBRU4sR0FBRyxDQUFDL0QsSUFMRDtBQU1ac0UsaUJBQU8sRUFBRVAsR0FBRyxDQUFDUTtBQU5ELFNBQWQ7QUFRQSxlQUNFLE9BQU83VCxNQUFQLEtBQWtCLFFBQWxCLEdBQ0UsMklBQ003UixLQUROO0FBRUUsaUNBQXVCLEVBQUU7QUFDdkIybEIsa0JBQU0sRUFBRTlUO0FBRGU7QUFGM0IsV0FERixHQU1JLGlFQUFRN1IsS0FBUixFQUFnQjZSLE1BQWhCLENBUE47QUFRRCxPQWxCQSxDQURILENBREY7QUF1QkQsS0F4QkEsQ0FESCxDQVBGLEVBa0NFO0FBQU8sZUFBUyxFQUFDLGtCQUFqQjtBQUFvQyxTQUFHLEVBQUUsYUFBQ2lVLEtBQUQ7QUFBQSxlQUFXLE1BQUksQ0FBQ0MsS0FBTCxHQUFhRCxLQUF4QjtBQUFBO0FBQXpDLE1BbENGLEVBbUNHLEtBQUtFLGFBQUwsQ0FBbUIsS0FBS2htQixLQUFMLENBQVdnWCxNQUE5QixDQW5DSCxDQUZGLEVBdUNHLEtBQUtpUCxpQkFBTCxFQXZDSCxDQURGO0FBMkNELEdBcE9tQztBQXFPcEMza0IsUUFBTSxFQUFFLGtCQUFZO0FBQ2xCLFFBQU11akIsY0FBYyxHQUFHLENBQUMsV0FBRCxDQUF2Qjs7QUFFQSxRQUFJLEtBQUs3a0IsS0FBTCxDQUFXVSxTQUFmLEVBQTBCO0FBQ3hCbWtCLG9CQUFjLENBQUNwbEIsSUFBZixDQUFvQixLQUFLTyxLQUFMLENBQVdVLFNBQS9CO0FBQ0Q7O0FBRUQsUUFBSSxDQUFDLEtBQUtWLEtBQUwsQ0FBV2dYLE1BQWhCLEVBQXdCO0FBQ3RCLGFBQU8sS0FBS2tQLFVBQUwsQ0FBZ0JyQixjQUFoQixDQUFQO0FBQ0Q7O0FBRUQsV0FBTyxLQUFLRCxvQkFBTCxDQUEwQkMsY0FBMUIsQ0FBUDtBQUNEO0FBalBtQyxHQUF0QztBQW9QQTdwQixhQUFhLENBQUMyRyxTQUFkLEdBQTBCQSxTQUExQjtBQUVlM0csNEVBQWYsRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDcldBOzs7Ozs7O0FBUUE7O0FBRUEsU0FBU21yQixhQUFULENBQXVCQyxPQUF2QixFQUFnQ2hGLFdBQWhDLEVBQTZDO0FBQzNDLE1BQU1pRixnQkFBZ0IsR0FBRyxFQUF6QjtBQUNBLE1BQUlDLFFBQUo7QUFDQSxNQUFJbmdCLENBQUo7O0FBRUEsT0FBS0EsQ0FBQyxHQUFHLENBQVQsRUFBWUEsQ0FBQyxHQUFHaWIsV0FBVyxDQUFDemhCLE1BQTVCLEVBQW9Dd0csQ0FBQyxFQUFyQyxFQUF5QztBQUN2Q21nQixZQUFRLEdBQUdsRixXQUFXLENBQUNqYixDQUFELENBQXRCO0FBQ0FrZ0Isb0JBQWdCLENBQUNDLFFBQUQsQ0FBaEIsYUFBZ0NGLE9BQU8sQ0FBQ0UsUUFBRCxDQUFQLENBQWtCQyxNQUFsQixHQUEyQkgsT0FBTyxDQUFDRSxRQUFELENBQVAsQ0FBa0JDLE1BQWxCLEdBQTJCLEdBQXRELEdBQTRELEVBQTVGLFNBQWlHSCxPQUFPLENBQUNFLFFBQUQsQ0FBUCxDQUFrQnpuQixJQUFuSDtBQUNEOztBQUVELFNBQU93bkIsZ0JBQVA7QUFDRDs7QUFFRCxTQUFTRyxZQUFULENBQXNCOVksTUFBdEIsRUFBOEIwWSxPQUE5QixFQUF1Q2hGLFdBQXZDLEVBQW9EO0FBQ2xELE1BQU1xRixlQUFlLEdBQUcsRUFBeEI7QUFEa0Q7QUFBQTtBQUFBOztBQUFBO0FBR2xELHlCQUF5QnJGLFdBQXpCLDhIQUFzQztBQUFBLFVBQTNCc0YsVUFBMkI7QUFDcEMsVUFBTTNGLE1BQU0sR0FBR3FGLE9BQU8sQ0FBQ00sVUFBRCxDQUF0QjtBQUNBRCxxQkFBZSxDQUFDQyxVQUFELENBQWYsR0FBOEIzRixNQUFNLENBQUN6ZixNQUFQLENBQWN5ZixNQUFNLENBQUN6ZixNQUFQLENBQWMzQixNQUFkLEdBQXVCLENBQXJDLEVBQXdDK04sTUFBeEMsQ0FBOUI7QUFDRDtBQU5pRDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQVFsRCxTQUFPK1ksZUFBUDtBQUNEOztBQUVELFNBQVNFLFVBQVQsQ0FBb0JDLE9BQXBCLEVBQTZCaEQsTUFBN0IsRUFBcUN3QyxPQUFyQyxFQUE4Q2hGLFdBQTlDLEVBQTJEO0FBQ3pELE1BQU15RixTQUFTLEdBQUc7QUFDaEJULFdBQU8sRUFBRUQsYUFBYSxDQUFDQyxPQUFELEVBQVVoRixXQUFWLENBRE47QUFFaEJ3RixXQUFPLEVBQUVBLE9BQU8sQ0FBQ25lLEdBQVIsQ0FBWSxVQUFBaUYsTUFBTTtBQUFBLGFBQUk4WSxZQUFZLENBQUM5WSxNQUFNLENBQUMsQ0FBRCxDQUFQLEVBQVkwWSxPQUFaLEVBQXFCaEYsV0FBckIsQ0FBaEI7QUFBQSxLQUFsQjtBQUZPLEdBQWxCOztBQUlBLE1BQUl3QyxNQUFKLEVBQVk7QUFDVmlELGFBQVMsQ0FBQ2pELE1BQVYsR0FBbUI0QyxZQUFZLENBQUM1QyxNQUFELEVBQVN3QyxPQUFULEVBQWtCaEYsV0FBbEIsQ0FBL0I7QUFDRDs7QUFDRCxTQUFPeUYsU0FBUDtBQUNEOztBQUVELFNBQVNDLFNBQVQsQ0FBbUJWLE9BQW5CLEVBQTRCaEYsV0FBNUIsRUFBeUM7QUFDdkMsTUFBTTlVLE1BQU0sR0FBRyxFQUFmO0FBRHVDO0FBQUE7QUFBQTs7QUFBQTtBQUV2QywwQkFBdUI4VSxXQUF2QixtSUFBb0M7QUFBQSxVQUF6QmtGLFFBQXlCOztBQUNsQyxXQUFLLElBQUluZ0IsQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBR2lnQixPQUFPLENBQUNFLFFBQUQsQ0FBUCxDQUFrQmhsQixNQUFsQixDQUF5QjNCLE1BQXpCLEdBQWtDLENBQXRELEVBQXlEd0csQ0FBQyxFQUExRCxFQUE4RDtBQUM1RG1HLGNBQU0sQ0FBQzhaLE9BQU8sQ0FBQ0UsUUFBRCxDQUFQLENBQWtCaGxCLE1BQWxCLENBQXlCNkUsQ0FBekIsQ0FBRCxDQUFOLEdBQXNDLElBQXRDO0FBQ0Q7QUFDRjtBQU5zQztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQVF2QyxTQUFPaEgsTUFBTSxDQUFDNkcsSUFBUCxDQUFZc0csTUFBWixDQUFQO0FBQ0Q7QUFFRDs7Ozs7O0FBSUEsU0FBU3lhLHNCQUFULENBQWdDWCxPQUFoQyxFQUF5Q2hGLFdBQXpDLEVBQXNEO0FBQ3BELE1BQUksQ0FBQ0EsV0FBRCxJQUFnQixDQUFDQSxXQUFXLENBQUN6aEIsTUFBakMsRUFBeUM7QUFDdkMsVUFBTSxJQUFJekMsOERBQUosQ0FBbUIsOEJBQW5CLENBQU47QUFDRDs7QUFFRCxNQUFNOHBCLGVBQWUsR0FBRyxFQUF4QjtBQUxvRDtBQUFBO0FBQUE7O0FBQUE7QUFNcEQsMEJBQXVCNUYsV0FBdkIsbUlBQW9DO0FBQUEsVUFBekJrRixRQUF5Qjs7QUFDbEMsVUFBSSxDQUFDRixPQUFPLENBQUNFLFFBQUQsQ0FBWixFQUF3QjtBQUN0QlUsdUJBQWUsQ0FBQ3ZuQixJQUFoQixDQUFxQjZtQixRQUFyQjtBQUNEO0FBQ0Y7QUFWbUQ7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFZcEQsTUFBSVUsZUFBZSxDQUFDcm5CLE1BQXBCLEVBQTRCO0FBQzFCLFVBQU0sSUFBSXpDLDhEQUFKLGdEQUEyRDhwQixlQUFlLENBQUNoYyxJQUFoQixDQUFxQixJQUFyQixDQUEzRCxFQUFOO0FBQ0Q7QUFDRjtBQUVEOzs7Ozs7Ozs7Ozs7O1NBV2V6UCxjOzs7Ozs7O3lFQUFmLGlCQUE4QjByQixTQUE5QixFQUF5Q2IsT0FBekMsRUFBa0RoRixXQUFsRCxFQUErRDhGLFFBQS9ELEVBQXlFbGtCLFFBQXpFO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNFK2pCLGtDQUFzQixDQUFDWCxPQUFELEVBQVVoRixXQUFWLENBQXRCO0FBREY7QUFBQSxtQkFFdUI2RixTQUFTLENBQUN2VyxJQUFWLENBQWU7QUFDbENwRSxvQkFBTSxFQUFFd2EsU0FBUyxDQUFDVixPQUFELEVBQVVoRixXQUFWLENBRGlCO0FBRWxDcUIsa0JBQUksRUFBRXpmLFFBQVEsQ0FBQ3lmLElBQVQsR0FBZ0IsQ0FBQyxDQUFDemYsUUFBUSxDQUFDeWYsSUFBVCxDQUFjMUIsTUFBZixFQUF1Qi9kLFFBQVEsQ0FBQ3lmLElBQVQsQ0FBY3pCLFNBQXJDLENBQUQsQ0FBaEIsR0FBb0UsSUFGeEM7QUFHbENtRyxtQkFBSyxFQUFFbmtCLFFBQVEsQ0FBQ21rQixLQUhrQjtBQUlsQ0Msb0JBQU0sRUFBRXBrQixRQUFRLENBQUNva0I7QUFKaUIsYUFBZixDQUZ2Qjs7QUFBQTtBQUVRemtCLGtCQUZSO0FBU1FHLGdCQVRSLEdBU2U2akIsVUFBVSxDQUFDaGtCLE1BQU0sQ0FBQ2lrQixPQUFSLEVBQWlCamtCLE1BQU0sQ0FBQ2loQixNQUF4QixFQUFnQ3dDLE9BQWhDLEVBQXlDaEYsV0FBekMsQ0FUekI7QUFBQTtBQUFBLG1CQVdlOEYsUUFBUSxDQUFDcGtCLElBQUQsQ0FYdkI7O0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxHOzs7O0FBY2V2SCw2RUFBZixFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3RHQTs7Ozs7OztBQVFBO0FBQ0E7O1NBRWU4ckIsSzs7Ozs7Ozt5RUFBZixpQkFBcUJ2a0IsSUFBckI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxtQkFDd0JzQixpRUFBUyxDQUFDa2pCLG9EQUFELEVBQU0sSUFBTixDQUFULENBQXFCeGtCLElBQUksQ0FBQzhqQixPQUFMLENBQWF6ZixNQUFiLENBQW9CLENBQUNyRSxJQUFJLENBQUM4Z0IsTUFBTixDQUFwQixDQUFyQixFQUF5RDtBQUM3RS9SLG9CQUFNLEVBQUUsSUFEcUU7QUFFN0V1VSxxQkFBTyxFQUFFdGpCLElBQUksQ0FBQ3NqQjtBQUYrRCxhQUF6RCxDQUR4Qjs7QUFBQTtBQUNRbUIsbUJBRFI7QUFBQSw2Q0FNUztBQUNMQyxrQkFBSSxFQUFFLFVBREQ7QUFFTDFrQixrQkFBSSxFQUFFeWtCO0FBRkQsYUFOVDs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxHOzs7O0FBWWVGLG9FQUFmLEU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdkJBOzs7Ozs7O1NBUWU3ckIsTTs7Ozs7Ozt5RUFBZixpQkFBc0JzSCxJQUF0QjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsNkNBQ1M7QUFDTDBrQixrQkFBSSxFQUFFLGtCQUREO0FBRUwxa0Isa0JBQUksRUFBRTtBQUNKOGpCLHVCQUFPLEVBQUU5akIsSUFBSSxDQUFDOGpCLE9BRFY7QUFFSmhELHNCQUFNLEVBQUU5Z0IsSUFBSSxDQUFDOGdCO0FBRlQ7QUFGRCxhQURUOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEc7Ozs7QUFVZXBvQixxRUFBZixFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2xCQTs7Ozs7OztBQVFBO0FBQ0E7QUFFQSxJQUFNb25CLGdCQUFnQixHQUFHO0FBQ3ZCOzs7Ozs7O0FBT0E2RSxlQVJ1Qix5QkFRVDVULEVBUlMsRUFRTDtBQUNoQixRQUFJLENBQUMsS0FBSzdULEtBQUwsQ0FBV29oQixXQUFoQixFQUE2QjtBQUMzQixhQUFPLElBQVA7QUFDRDs7QUFFRCxRQUFJamMsS0FBSyxDQUFDQyxPQUFOLENBQWMsS0FBS3BGLEtBQUwsQ0FBV29oQixXQUF6QixDQUFKLEVBQTJDO0FBQ3pDLGFBQU8sS0FBS3BoQixLQUFMLENBQVdvaEIsV0FBWCxDQUF1QnRiLE9BQXZCLENBQStCK04sRUFBL0IsSUFBcUMsQ0FBQyxDQUE3QztBQUNEOztBQUVELFdBQU8sS0FBSzdULEtBQUwsQ0FBV29oQixXQUFYLENBQXVCdk4sRUFBdkIsQ0FBUDtBQUNELEdBbEJzQjs7QUFvQnZCOzs7Ozs7QUFNQWlSLGFBMUJ1Qix5QkEwQlQ7QUFDWixRQUFNWSxJQUFJLEdBQUcsQ0FBQztBQUFDO0FBQUQsS0FBRCxFQUFjO0FBQUM7QUFBRCxLQUFkLENBQWI7QUFDQSxRQUFNWCxRQUFRLEdBQUcsRUFBakI7QUFDQSxRQUFJMkMsVUFBVSxHQUFHO0FBQUM3b0IsVUFBSSxFQUFFO0FBQVAsS0FBakI7O0FBRUEsU0FBSyxJQUFNeW5CLFFBQVgsSUFBdUIsS0FBS3RtQixLQUFMLENBQVdtaEIsSUFBbEMsRUFBd0M7QUFDdEM7QUFDQSxVQUFJLENBQUMsS0FBS3NHLGFBQUwsQ0FBbUJuQixRQUFuQixDQUFMLEVBQW1DO0FBQ2pDO0FBQ0Q7O0FBRUR2QixjQUFRLENBQUN0bEIsSUFBVCxDQUNFa29CLDBEQUFHLENBQUN6QyxHQUFKLENBQVE7QUFDTmpkLFdBQUcsRUFBRXFlLFFBREM7QUFFTnhQLGFBQUssRUFBRSxLQUFLOVcsS0FBTCxDQUFXbWhCLElBQVgsQ0FBZ0JtRixRQUFoQixFQUEwQnhQLEtBRjNCO0FBR05wVyxpQkFBUyxFQUFFLEtBQUtrbkIsZUFBTCxDQUFxQnRCLFFBQXJCO0FBSEwsT0FBUixDQURGO0FBUUEsVUFBTXVCLFVBQVUsR0FBRyxDQUFDLEtBQUtELGVBQUwsQ0FBcUJ0QixRQUFyQixDQUFELENBQW5CO0FBQ0EsVUFBTXdCLE9BQU8sR0FBRztBQUNkalUsVUFBRSxFQUFFeVMsUUFEVTtBQUVkem5CLFlBQUksRUFBRSxLQUFLbUIsS0FBTCxDQUFXbWhCLElBQVgsQ0FBZ0JtRixRQUFoQixFQUEwQnpuQixJQUZsQjtBQUdkd21CLGVBQU8sRUFBRSxLQUFLcmxCLEtBQUwsQ0FBV21oQixJQUFYLENBQWdCbUYsUUFBaEIsRUFBMEJqQixPQUhyQjtBQUlkMEMsbUJBQVcsRUFBRSxLQUFLL25CLEtBQUwsQ0FBV21oQixJQUFYLENBQWdCbUYsUUFBaEIsRUFBMEJ5QixXQUp6QjtBQUtkNUcsWUFBSSxFQUFFLENBTFE7QUFNZHVFLFlBQUksRUFBRTtBQU5RLE9BQWhCOztBQVNBLFVBQU1zQyxVQUFVLEdBQUcsS0FBS0MsY0FBTCxDQUFvQjNCLFFBQXBCLENBQW5COztBQUNBLFVBQUkwQixVQUFKLEVBQWdCO0FBQ2RILGtCQUFVLENBQUNwb0IsSUFBWCxpQkFBeUJ1b0IsVUFBVSxDQUFDaEgsU0FBcEM7QUFDQThHLGVBQU8sQ0FBQ3RpQixLQUFSLEdBQWdCd2lCLFVBQVUsQ0FBQ2pILE1BQTNCO0FBQ0ErRyxlQUFPLENBQUNyRixJQUFSLEdBQWV1RixVQUFVLENBQUNoSCxTQUExQjtBQUNEOztBQUVEOEcsYUFBTyxDQUFDcG5CLFNBQVIsR0FBb0JtbkIsVUFBVSxDQUFDN2MsSUFBWCxDQUFnQixHQUFoQixDQUFwQjs7QUFFQSxVQUFJLEtBQUtoTCxLQUFMLENBQVdtaEIsSUFBWCxDQUFnQm1GLFFBQWhCLEVBQTBCQyxNQUE5QixFQUFzQztBQUNwQyxZQUFJLEtBQUt2bUIsS0FBTCxDQUFXbWhCLElBQVgsQ0FBZ0JtRixRQUFoQixFQUEwQkMsTUFBMUIsS0FBcUNtQixVQUFVLENBQUM3b0IsSUFBcEQsRUFBMEQ7QUFDeEQ2b0Isb0JBQVUsR0FBR2hDLElBQUksQ0FBQyxDQUFELENBQUosQ0FBUUEsSUFBSSxDQUFDLENBQUQsQ0FBSixDQUFRam1CLElBQVIsQ0FBYTtBQUNoQ1osZ0JBQUksRUFBRSxLQUFLbUIsS0FBTCxDQUFXbWhCLElBQVgsQ0FBZ0JtRixRQUFoQixFQUEwQkMsTUFEQTtBQUVoQ3BGLGdCQUFJLEVBQUUsQ0FGMEI7QUFFdkJ1RSxnQkFBSSxFQUFFO0FBRmlCLFdBQWIsSUFHaEIsQ0FIUSxDQUFiO0FBSUQsU0FMRCxNQUtPO0FBQ0xnQyxvQkFBVSxDQUFDdkcsSUFBWDtBQUNEOztBQUNEdUUsWUFBSSxDQUFDLENBQUQsQ0FBSixDQUFRam1CLElBQVIsQ0FBYXFvQixPQUFiO0FBQ0QsT0FWRCxNQVVPO0FBQ0xKLGtCQUFVLEdBQUc7QUFBQzdvQixjQUFJLEVBQUU7QUFBUCxTQUFiO0FBQ0FpcEIsZUFBTyxDQUFDcEMsSUFBUixHQUFlLENBQWY7QUFDQUEsWUFBSSxDQUFDLENBQUQsQ0FBSixDQUFRam1CLElBQVIsQ0FBYXFvQixPQUFiO0FBQ0Q7QUFDRjs7QUFDRCxXQUFPO0FBQUMzRyxVQUFJLEVBQUV1RSxJQUFQO0FBQWFYLGNBQVEsRUFBRUE7QUFBdkIsS0FBUDtBQUNELEdBakZzQjs7QUFtRnZCOzs7Ozs7QUFNQW1ELG9CQXpGdUIsZ0NBeUZGO0FBQ25CLFFBQUkvaEIsQ0FBSjtBQUNBLFFBQU1nYixJQUFJLEdBQUcsS0FBS25oQixLQUFMLENBQVdtaEIsSUFBeEI7QUFDQSxRQUFJaUYsT0FBTyxHQUFHLEVBQWQ7O0FBQ0EsU0FBS2pnQixDQUFMLElBQVVnYixJQUFWLEVBQWdCO0FBQ2RpRixhQUFPLEdBQUd2YywyREFBSyxDQUFDdWMsT0FBRCxFQUFVakYsSUFBSSxDQUFDaGIsQ0FBRCxDQUFKLENBQVE3RSxNQUFSLENBQWUwRixLQUFmLENBQXFCLENBQXJCLEVBQXdCbWEsSUFBSSxDQUFDaGIsQ0FBRCxDQUFKLENBQVE3RSxNQUFSLENBQWUzQixNQUFmLEdBQXdCLENBQWhELENBQVYsQ0FBZjtBQUNEOztBQUNELFdBQU95bUIsT0FBUDtBQUNELEdBakdzQjs7QUFtR3ZCOzs7Ozs7O0FBT0ErQix1QkExR3VCLGlDQTBHRDNpQixLQTFHQyxFQTBHTTtBQUMzQixRQUFJVyxDQUFKO0FBQ0EsUUFBTWdiLElBQUksR0FBRyxLQUFLbmhCLEtBQUwsQ0FBV21oQixJQUF4Qjs7QUFDQSxTQUFLaGIsQ0FBTCxJQUFVZ2IsSUFBVixFQUFnQjtBQUNkLFVBQUlBLElBQUksQ0FBQ2hiLENBQUQsQ0FBSixDQUFRN0UsTUFBUixDQUFld0UsT0FBZixDQUF1Qk4sS0FBdkIsS0FBaUMsQ0FBckMsRUFBd0M7QUFDdEMsZUFBTyxJQUFQO0FBQ0Q7QUFDRjs7QUFDRCxXQUFPLEtBQVA7QUFDRCxHQW5Ic0I7O0FBcUh2Qjs7Ozs7OztBQU9BNGlCLHNCQTVIdUIsZ0NBNEhGNWlCLEtBNUhFLEVBNEhLO0FBQzFCLFFBQU02aUIsZ0JBQWdCLEdBQUcsRUFBekI7QUFDQSxRQUFNQyxnQkFBZ0IsSUFDcEI5aUIsS0FEb0IseUZBRWpCLEtBQUt4RixLQUFMLENBQVd3SyxLQUFYLENBQWlCRyx1QkFBakIsQ0FBeUMsQ0FBQ25GLEtBQUQsQ0FBekMsQ0FGaUIsRUFBdEI7O0FBS0EsdUNBQXVDckcsTUFBTSxDQUFDb0csT0FBUCxDQUFlLEtBQUt2RixLQUFMLENBQVdtaEIsSUFBMUIsQ0FBdkMscUNBQXdFO0FBQUE7QUFBQSxVQUE1RG9ILFVBQTREO0FBQUEsVUFBOUNqbkIsTUFBOEMseUJBQTlDQSxNQUE4Qzs7QUFDdEUsVUFBSUEsTUFBTSxDQUFDa25CLElBQVAsQ0FBWSxVQUFBQyxXQUFXO0FBQUEsZUFBSUgsZ0JBQWdCLENBQUMvbEIsUUFBakIsQ0FBMEJrbUIsV0FBMUIsQ0FBSjtBQUFBLE9BQXZCLENBQUosRUFBd0U7QUFDdEVKLHdCQUFnQixDQUFDNW9CLElBQWpCLENBQXNCOG9CLFVBQXRCO0FBQ0Q7QUFDRjs7QUFFRCxXQUFPRixnQkFBUDtBQUNELEdBMUlzQjtBQTRJdkJULGlCQTVJdUIsMkJBNElQL1QsRUE1SU8sRUE0SUg7QUFDbEIsV0FBTyxLQUFLN1QsS0FBTCxDQUFXbWhCLElBQVgsQ0FBZ0J0TixFQUFoQixFQUFvQm5ULFNBQTNCO0FBQ0Q7QUE5SXNCLENBQXpCO0FBaUpla2lCLCtFQUFmLEU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDNUpBOzs7Ozs7O0FBUUE7QUFDQTtBQUNBO0FBRUEsSUFBTThGLGFBQWEsR0FBRztBQUNwQjs7Ozs7Ozs7QUFRQWpyQixLQVRvQixlQVNoQmtyQixRQVRnQixFQVNON2xCLElBVE0sRUFTQXRELEVBVEEsRUFTSTtBQUFDO0FBQ3ZCLFFBQU13bEIsR0FBRyxHQUFHLEtBQUs0RCxTQUFMLENBQWVELFFBQWYsQ0FBWjs7QUFDQSxTQUFLRSxjQUFMLENBQW9CN0QsR0FBcEIsRUFBeUI3YywrREFBUyxDQUFDckYsSUFBRCxDQUFsQyxFQUEwQ3RELEVBQTFDOztBQUVBLFFBQUksS0FBS1EsS0FBTCxDQUFXNGYsVUFBWCxJQUF5QixLQUFLNWYsS0FBTCxDQUFXOG9CLFFBQXhDLEVBQWtEO0FBQ2hELFVBQUksS0FBSzlvQixLQUFMLENBQVc4b0IsUUFBZixFQUF5QjtBQUN2QjdkLGVBQU8sQ0FBQ3pJLElBQVIsQ0FBYSwwREFBYjtBQUNEOztBQUNELFdBQUt1bUIsSUFBTCxDQUFVLEtBQUsvb0IsS0FBTCxDQUFXZ3BCLGdCQUFyQjtBQUNELEtBTEQsTUFLTyxJQUFJLEtBQUtocEIsS0FBTCxDQUFXbVAsUUFBZixFQUF5QjtBQUM5QixXQUFLblAsS0FBTCxDQUFXbVAsUUFBWCxDQUFvQixLQUFLVSxLQUFMLENBQVdwRixPQUEvQixFQUF3QyxLQUFLb0YsS0FBTCxDQUFXL00sSUFBbkQ7QUFDRDtBQUNGLEdBckJtQjs7QUF1QnBCOzs7Ozs7QUFNQWtiLFdBN0JvQixxQkE2QlYySyxRQTdCVSxFQTZCQTtBQUNsQixRQUFNM0QsR0FBRyxHQUFHLEtBQUs0RCxTQUFMLENBQWVELFFBQWYsQ0FBWjs7QUFDQSxXQUFPeGdCLCtEQUFTLENBQUMsS0FBSzhnQixxQkFBTCxDQUEyQmpFLEdBQTNCLENBQUQsQ0FBaEI7QUFDRCxHQWhDbUI7O0FBa0NwQjs7Ozs7O0FBTUF6YSxrQkF4Q29CLDRCQXdDSG9lLFFBeENHLEVBd0NPO0FBQ3pCLFFBQU0zRCxHQUFHLEdBQUcsS0FBSzRELFNBQUwsQ0FBZUQsUUFBZixDQUFaOztBQUNBLFdBQU8sS0FBS08saUJBQUwsQ0FBdUJsRSxHQUF2QixDQUFQO0FBQ0QsR0EzQ21COztBQTZDcEI7Ozs7Ozs7QUFPQW1FLG1CQXBEb0IsNkJBb0RGUixRQXBERSxFQW9EUTtBQUMxQixRQUFNM0QsR0FBRyxHQUFHLEtBQUs0RCxTQUFMLENBQWVELFFBQWYsQ0FBWjs7QUFDQSxXQUFPLEtBQUs5WSxLQUFMLENBQVd1TCxRQUFYLENBQW9CNEosR0FBcEIsS0FBNEIsSUFBSXZwQiwyRUFBSixFQUFuQztBQUNELEdBdkRtQjs7QUF5RHBCOzs7OztBQUtBMnRCLGFBOURvQix5QkE4RE47QUFDWixRQUFNem1CLE1BQU0sR0FBRyxFQUFmOztBQUNBLFNBQUssSUFBTXdELENBQVgsSUFBZ0IsS0FBSzBKLEtBQUwsQ0FBV3VMLFFBQTNCLEVBQXFDO0FBQ25DelksWUFBTSxDQUFDbEQsSUFBUCxDQUFZLENBQ1YsS0FBS29RLEtBQUwsQ0FBV2dVLFdBQVgsQ0FBdUIxZCxDQUF2QixFQUEwQjBOLEVBRGhCLEVBRVYsS0FBS2hFLEtBQUwsQ0FBV3VMLFFBQVgsQ0FBb0JqVixDQUFwQixDQUZVLENBQVo7QUFJRDs7QUFDRCxXQUFPeEQsTUFBTSxDQUFDaEQsTUFBUCxHQUFnQmdELE1BQWhCLEdBQXlCLElBQWhDO0FBQ0QsR0F2RW1COztBQXlFcEI7Ozs7Ozs7QUFPQTBtQixpQkFoRm9CLDJCQWdGSlYsUUFoRkksRUFnRk07QUFDeEIsUUFBTTNELEdBQUcsR0FBRyxLQUFLNEQsU0FBTCxDQUFlRCxRQUFmLENBQVo7O0FBQ0EsV0FBTyxLQUFLVyxnQkFBTCxDQUFzQnRFLEdBQXRCLENBQVA7QUFDRCxHQW5GbUI7O0FBcUZwQjs7Ozs7QUFLQXZZLFdBMUZvQix1QkEwRlI7QUFDVixRQUFNOUosTUFBTSxHQUFHLEVBQWY7O0FBQ0EsU0FBSyxJQUFNd0QsQ0FBWCxJQUFnQixLQUFLMEosS0FBTCxDQUFXbEQsTUFBM0IsRUFBbUM7QUFDakNoSyxZQUFNLENBQUNsRCxJQUFQLENBQVksQ0FDVixLQUFLb1EsS0FBTCxDQUFXZ1UsV0FBWCxDQUF1QjFkLENBQXZCLEVBQTBCME4sRUFEaEIsRUFFVixLQUFLaEUsS0FBTCxDQUFXbEQsTUFBWCxDQUFrQnhHLENBQWxCLENBRlUsQ0FBWjtBQUlEOztBQUNELFdBQU94RCxNQUFNLENBQUNoRCxNQUFQLEdBQWdCZ0QsTUFBaEIsR0FBeUIsSUFBaEM7QUFDRCxHQW5HbUI7O0FBcUdwQjs7Ozs7QUFLQTRtQixVQTFHb0Isc0JBMEdUO0FBQ1QsV0FBTyxLQUFLdnBCLEtBQUwsQ0FBV3dLLEtBQWxCO0FBQ0QsR0E1R21COztBQThHcEI7OztBQUdNdWUsTUFqSGM7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBa0hacGMsb0JBbEhZLEdBa0hILEtBQUtGLFNBQUwsRUFsSEcsRUFvSGxCOztBQUNNaEMscUJBckhZLEdBcUhGakIsNERBQU0sQ0FBQyxLQUFLcUcsS0FBTCxDQUFXcEYsT0FBWixFQUFxQixVQUFDOUgsTUFBRCxFQUFTNm1CLFVBQVQsRUFBcUJ4RSxHQUFyQixFQUE2QjtBQUN0RSxvQkFBSSxDQUFDclksTUFBRCxJQUFXLENBQUNBLE1BQU0sQ0FBQ3FZLEdBQUQsQ0FBdEIsRUFBNkI7QUFDM0Isc0JBQUksS0FBSSxDQUFDaGxCLEtBQUwsQ0FBVzBpQixjQUFmLEVBQStCO0FBQzdCL2YsMEJBQU0sQ0FBQ3FpQixHQUFELENBQU4sR0FBYyxLQUFJLENBQUNpRSxxQkFBTCxDQUEyQmpFLEdBQTNCLENBQWQ7QUFDRCxtQkFGRCxNQUVPO0FBQ0xyaUIsMEJBQU0sQ0FBQ3FpQixHQUFELENBQU4sR0FBYyxFQUFkO0FBQ0E3bEIsMEJBQU0sQ0FBQ3dJLE1BQVAsQ0FBY2hGLE1BQU0sQ0FBQ3FpQixHQUFELENBQXBCLEVBQTJCd0UsVUFBM0IsRUFBdUNsZ0IsMERBQUksQ0FDekMsS0FBSSxDQUFDdUcsS0FBTCxDQUFXL00sSUFBWCxDQUFnQmtpQixHQUFoQixDQUR5QyxFQUV6QyxLQUFJLENBQUNobEIsS0FBTCxDQUFXd0ssS0FBWCxDQUFpQkcsdUJBQWpCLENBQXlDeEwsTUFBTSxDQUFDNkcsSUFBUCxDQUFZckQsTUFBTSxDQUFDcWlCLEdBQUQsQ0FBbEIsQ0FBekMsQ0FGeUMsQ0FBM0M7QUFJRDtBQUNGOztBQUNELHVCQUFPcmlCLE1BQVA7QUFDRCxlQWJxQixFQWFuQixFQWJtQixDQXJISixFQW9JbEI7O0FBQ0EsbUJBQUs4bUIscUJBQUwsQ0FBMkIsS0FBM0IsRUFySWtCLENBdUlsQjs7QUF2SWtCO0FBQUEscUJBd0lDLEtBQUt6cEIsS0FBTCxDQUFXd0ssS0FBWCxDQUFpQnlULE1BQWpCLENBQXdCLEtBQUt5TCxrQkFBTCxDQUF3QmpmLE9BQXhCLENBQXhCLENBeElEOztBQUFBO0FBd0laM0gsa0JBeElZOztBQUFBLGtCQXlJYixLQUFLeVEsVUF6SVE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7O0FBQUE7QUE2SWxCLG1CQUFLMUQsS0FBTCxDQUFXMEssb0JBQVgsR0FBa0MsS0FBbEM7QUFFTW9QLDZCQS9JWSxHQStJTSxFQS9JTjtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUEsb0JBZ0pQamMsTUFoSk87O0FBaUpoQixvQkFBTXNYLEdBQUcsR0FBRyxLQUFJLENBQUM0RCxTQUFMLENBQWVsYixNQUFNLENBQUMsQ0FBRCxDQUFyQixDQUFaLENBakpnQixDQW1KaEI7OztBQUNBLG9CQUFJLENBQUN0SCw2REFBTyxDQUFDLEtBQUksQ0FBQ3lKLEtBQUwsQ0FBV3BGLE9BQVgsQ0FBbUJ1YSxHQUFuQixDQUFELEVBQTBCdmEsT0FBTyxDQUFDdWEsR0FBRCxDQUFqQyxDQUFaLEVBQXFEO0FBQ25EO0FBQ0Q7O0FBRUQsb0JBQUl0WCxNQUFNLENBQUMsQ0FBRCxDQUFOLFlBQXFCL08sS0FBekIsRUFBZ0M7QUFDOUJnckIsaUNBQWUsQ0FBQ2xxQixJQUFoQixDQUFxQmlPLE1BQU0sQ0FBQyxDQUFELENBQTNCO0FBQ0E7QUFDRCxpQkEzSmUsQ0E2SmhCOzs7QUFDQSxvQkFBSUEsTUFBTSxDQUFDLENBQUQsQ0FBTixZQUFxQmpTLDJFQUF6QixFQUEyQztBQUN6Qyx1QkFBSSxDQUFDb1UsS0FBTCxDQUFXbEQsTUFBWCxDQUFrQnFZLEdBQWxCLElBQXlCdFgsTUFBTSxDQUFDLENBQUQsQ0FBL0I7QUFDQTtBQUNELGlCQWpLZSxDQW1LaEI7OztBQUNBbkYsNkVBQU8sQ0FBQ2tDLE9BQU8sQ0FBQ3VhLEdBQUQsQ0FBUixFQUFlLFVBQVV2ZixLQUFWLEVBQWlCRCxLQUFqQixFQUF3QjtBQUM1QyxzQkFBSVksNkRBQU8sQ0FBQ1gsS0FBRCxFQUFRLEtBQUtvSyxLQUFMLENBQVdwRixPQUFYLENBQW1CdWEsR0FBbkIsRUFBd0J4ZixLQUF4QixDQUFSLENBQVgsRUFBb0Q7QUFDbEQsMkJBQU8sS0FBS3FLLEtBQUwsQ0FBV3BGLE9BQVgsQ0FBbUJ1YSxHQUFuQixFQUF3QnhmLEtBQXhCLENBQVA7QUFDRDtBQUNGLGlCQUpNLEVBSUosS0FKSSxDQUFQLENBcEtnQixDQTBLaEI7O0FBQ0Esb0JBQUk0Qyw2REFBTyxDQUFDLEtBQUksQ0FBQ3lILEtBQUwsQ0FBV3BGLE9BQVgsQ0FBbUJ1YSxHQUFuQixDQUFELENBQVgsRUFBc0M7QUFDcEMseUJBQU8sS0FBSSxDQUFDblYsS0FBTCxDQUFXcEYsT0FBWCxDQUFtQnVhLEdBQW5CLENBQVA7O0FBQ0Esc0JBQUksQ0FBQyxLQUFJLENBQUM0RSxVQUFMLENBQWdCNUUsR0FBaEIsQ0FBTCxFQUEyQjtBQUN6Qix5QkFBSSxDQUFDNkUsYUFBTCxDQUFtQjdFLEdBQW5CO0FBQ0Q7QUFDRjtBQWhMZTs7QUFBQSwwQkFnSkdsaUIsSUFoSkg7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7O0FBQUE7QUFBQTs7QUFBQTtBQUFBOztBQUFBO0FBa0xsQixtQkFBSzZoQixXQUFMOztBQUVBLGtCQUFJLEtBQUsza0IsS0FBTCxDQUFXbVAsUUFBZixFQUF5QjtBQUN2QixxQkFBS25QLEtBQUwsQ0FBV21QLFFBQVgsQ0FBb0IsS0FBS1UsS0FBTCxDQUFXcEYsT0FBL0IsRUFBd0MsS0FBS29GLEtBQUwsQ0FBVy9NLElBQW5EO0FBQ0Q7O0FBRUtnbkIsMEJBeExZLEdBd0xHLEtBQUs5cEIsS0FBTCxDQUFXMmhCLE9BQVgsSUFBd0IsWUFBQTFXLE9BQU8sRUFBQ2lCLEtBQWhDLGVBeExIO0FBeUxsQnlkLDZCQUFlLENBQUNwaEIsT0FBaEIsQ0FBd0IsVUFBQTJELEtBQUs7QUFBQSx1QkFBSTRkLFlBQVksQ0FBQzVkLEtBQUQsQ0FBaEI7QUFBQSxlQUE3QjtBQXpMa0IsZ0RBMkxYcEosSUEzTFc7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7O0FBOExwQjs7Ozs7QUFLQWluQixvQkFuTW9CLDhCQW1NRHBCLFFBbk1DLEVBbU1TO0FBQzNCLFFBQU0zRCxHQUFHLEdBQUcsS0FBSzRELFNBQUwsQ0FBZUQsUUFBZixDQUFaOztBQUVBLFdBQU8sS0FBSzlZLEtBQUwsQ0FBV3BGLE9BQVgsQ0FBbUJ1YSxHQUFuQixDQUFQO0FBQ0EsV0FBTyxLQUFLblYsS0FBTCxDQUFXdUwsUUFBWCxDQUFvQjRKLEdBQXBCLENBQVA7QUFDQSxXQUFPLEtBQUtuVixLQUFMLENBQVdsRCxNQUFYLENBQWtCcVksR0FBbEIsQ0FBUDs7QUFFQSxTQUFLZ0YsVUFBTCxDQUFnQmhGLEdBQWhCOztBQUVBLFFBQUksS0FBS2hsQixLQUFMLENBQVdtUCxRQUFmLEVBQXlCO0FBQ3ZCLFdBQUtuUCxLQUFMLENBQVdtUCxRQUFYLENBQW9CLEtBQUtVLEtBQUwsQ0FBV3BGLE9BQS9CLEVBQXdDLEtBQUtvRixLQUFMLENBQVcvTSxJQUFuRDtBQUNEO0FBQ0YsR0EvTW1COztBQWlOcEI7OztBQUdBbW5CLGlCQXBOb0IsNkJBb05GO0FBQ2hCLFFBQUk5akIsQ0FBSjs7QUFDQSxTQUFLQSxDQUFMLElBQVUsS0FBSzBKLEtBQUwsQ0FBVy9NLElBQXJCLEVBQTJCO0FBQ3pCLFVBQUksQ0FBQyxLQUFLOG1CLFVBQUwsQ0FBZ0J6akIsQ0FBaEIsQ0FBTCxFQUF5QjtBQUN2QixlQUFPLEtBQUswSixLQUFMLENBQVcvTSxJQUFYLENBQWdCcUQsQ0FBaEIsQ0FBUDtBQUNBLGVBQU8sS0FBSzBKLEtBQUwsQ0FBV2dVLFdBQVgsQ0FBdUIxZCxDQUF2QixDQUFQO0FBQ0Q7QUFDRjs7QUFDRCxTQUFLMEosS0FBTCxDQUFXcEYsT0FBWCxHQUFxQixFQUFyQjtBQUNBLFNBQUtvRixLQUFMLENBQVc2VCxRQUFYLEdBQXNCLEVBQXRCO0FBQ0EsU0FBSzdULEtBQUwsQ0FBV3VMLFFBQVgsR0FBc0IsRUFBdEI7QUFDQSxTQUFLdkwsS0FBTCxDQUFXbEQsTUFBWCxHQUFvQixFQUFwQjtBQUNBLFNBQUtrRCxLQUFMLENBQVcwSyxvQkFBWCxHQUFrQyxLQUFLdmEsS0FBTCxDQUFXdWEsb0JBQTdDOztBQUVBLFNBQUtvSyxXQUFMOztBQUVBLFFBQUksS0FBSzNrQixLQUFMLENBQVdtUCxRQUFmLEVBQXlCO0FBQ3ZCLFdBQUtuUCxLQUFMLENBQVdtUCxRQUFYLENBQW9CLEtBQUtVLEtBQUwsQ0FBV3BGLE9BQS9CLEVBQXdDLEtBQUtvRixLQUFMLENBQVcvTSxJQUFuRDtBQUNEO0FBQ0YsR0F2T21COztBQXlPcEI7OztBQUdBMGhCLE9BNU9vQixtQkE0T1o7QUFDTixTQUFLRSxRQUFMLENBQWMsQ0FBZDs7QUFDQSxRQUFJLENBQUMsS0FBS3dGLG1CQUFMLEVBQUwsRUFBaUM7QUFDL0IsV0FBS0MsYUFBTDtBQUNEOztBQUNELFNBQUs3RyxXQUFMO0FBQ0QsR0FsUG1COztBQW9QcEI7Ozs7OztBQU1BNEYsbUJBMVBvQiw2QkEwUEZsRSxHQTFQRSxFQTBQRztBQUNyQixRQUFJLEtBQUtuVixLQUFMLENBQVdwRixPQUFYLENBQW1CaEIsY0FBbkIsQ0FBa0N1YixHQUFsQyxDQUFKLEVBQTRDO0FBQzFDLGFBQU83YywrREFBUyxDQUFDLEtBQUswSCxLQUFMLENBQVdwRixPQUFYLENBQW1CdWEsR0FBbkIsQ0FBRCxDQUFoQjtBQUNEOztBQUNELFdBQU8sRUFBUDtBQUNELEdBL1BtQjs7QUFpUXBCOzs7Ozs7O0FBT0FvRixnQkF4UW9CLDBCQXdRTHpCLFFBeFFLLEVBd1FLN2xCLElBeFFMLEVBd1FXO0FBQzdCLFFBQUksQ0FBQyxLQUFLdW5CLGVBQUwsQ0FBcUIxQixRQUFyQixDQUFMLEVBQXFDO0FBQ25DO0FBQ0QsS0FINEIsQ0FLN0I7OztBQUNBLFFBQU0zRCxHQUFHLEdBQUcsS0FBSzRELFNBQUwsQ0FBZUQsUUFBZixDQUFaLENBTjZCLENBUTdCOzs7QUFDQSxTQUFLLElBQU1uakIsS0FBWCxJQUFvQjFDLElBQXBCLEVBQTBCO0FBQ3hCLFdBQUsrTSxLQUFMLENBQVcvTSxJQUFYLENBQWdCa2lCLEdBQWhCLEVBQXFCeGYsS0FBckIsSUFBOEIyQywrREFBUyxDQUFDckYsSUFBSSxDQUFDMEMsS0FBRCxDQUFMLENBQXZDOztBQUNBLFdBQUs4a0IsWUFBTCxDQUFrQnRGLEdBQWxCLEVBQXVCeGYsS0FBdkI7QUFDRDtBQUNGLEdBclJtQjs7QUF1UnBCOzs7Ozs7OztBQVFBK2tCLGFBL1JvQix1QkErUlJ2RixHQS9SUSxFQStSSDFZLE1BL1JHLEVBK1JLO0FBQ3ZCLFdBQU8sS0FBS2tlLHVCQUFMLENBQTZCeEYsR0FBN0IsRUFBa0MxWSxNQUFsQyxFQUEwQyxLQUFLdUQsS0FBTCxDQUFXdUwsUUFBckQsQ0FBUDtBQUNELEdBalNtQjs7QUFtU3BCOzs7Ozs7OztBQVFBcVAsV0EzU29CLHFCQTJTVnpGLEdBM1NVLEVBMlNMMVksTUEzU0ssRUEyU0c7QUFDckIsV0FBTyxLQUFLa2UsdUJBQUwsQ0FBNkJ4RixHQUE3QixFQUFrQzFZLE1BQWxDLEVBQTBDLEtBQUt1RCxLQUFMLENBQVdsRCxNQUFyRCxDQUFQO0FBQ0QsR0E3U21COztBQStTcEI7Ozs7Ozs7OztBQVNBNmQseUJBeFRvQixtQ0F3VEl4RixHQXhUSixFQXdUUzFZLE1BeFRULEVBd1RpQndNLFVBeFRqQixFQXdUNkI7QUFDL0MsUUFBSTNTLENBQUo7O0FBRUEsUUFBSSxDQUFDMlMsVUFBVSxDQUFDa00sR0FBRCxDQUFmLEVBQXNCO0FBQ3BCLGFBQU8sS0FBUDtBQUNEOztBQUVELFFBQUksS0FBS25WLEtBQUwsQ0FBVzBLLG9CQUFYLElBQW1DLENBQUMsS0FBSzFLLEtBQUwsQ0FBV3BGLE9BQVgsQ0FBbUJoQixjQUFuQixDQUFrQ3ViLEdBQWxDLENBQXhDLEVBQWdGO0FBQzlFLGFBQU8sS0FBUDtBQUNEOztBQUVELFFBQUksQ0FBQzdmLEtBQUssQ0FBQ0MsT0FBTixDQUFja0gsTUFBZCxDQUFMLEVBQTRCO0FBQzFCQSxZQUFNLEdBQUcsQ0FBQ0EsTUFBRCxDQUFUO0FBQ0Q7O0FBRUQsU0FBS25HLENBQUMsR0FBRyxDQUFULEVBQVlBLENBQUMsR0FBR21HLE1BQU0sQ0FBQzNNLE1BQXZCLEVBQStCd0csQ0FBQyxFQUFoQyxFQUFvQztBQUNsQyxVQUFJMlMsVUFBVSxDQUFDa00sR0FBRCxDQUFWLENBQWdCN0YsUUFBaEIsQ0FBeUI3UyxNQUFNLENBQUNuRyxDQUFELENBQS9CLENBQUosRUFBeUM7QUFDdkMsZUFBTyxJQUFQO0FBQ0Q7QUFDRjs7QUFDRCxXQUFPLEtBQVA7QUFDRCxHQTdVbUI7O0FBK1VwQjs7Ozs7Ozs7QUFRQXVrQixZQXZWb0Isc0JBdVZUMUYsR0F2VlMsRUF1VkoxWSxNQXZWSSxFQXVWSTtBQUN0QixRQUFJbkcsQ0FBSjs7QUFDQSxRQUFJLENBQUMsS0FBSzBKLEtBQUwsQ0FBV3BGLE9BQVgsQ0FBbUJ1YSxHQUFuQixDQUFMLEVBQThCO0FBQzVCLGFBQU8sS0FBUDtBQUNEOztBQUVELFFBQUkxWSxNQUFKLEVBQVk7QUFDVixVQUFJLENBQUNuSCxLQUFLLENBQUNDLE9BQU4sQ0FBY2tILE1BQWQsQ0FBTCxFQUE0QjtBQUMxQkEsY0FBTSxHQUFHLENBQUNBLE1BQUQsQ0FBVDtBQUNEOztBQUNELFdBQUtuRyxDQUFDLEdBQUcsQ0FBVCxFQUFZQSxDQUFDLEdBQUdtRyxNQUFNLENBQUMzTSxNQUF2QixFQUErQndHLENBQUMsRUFBaEMsRUFBb0M7QUFDbEMsWUFBSSxLQUFLMEosS0FBTCxDQUFXcEYsT0FBWCxDQUFtQnVhLEdBQW5CLEVBQXdCdmIsY0FBeEIsQ0FBdUM2QyxNQUFNLENBQUNuRyxDQUFELENBQTdDLENBQUosRUFBdUQ7QUFDckQsaUJBQU8sSUFBUDtBQUNEO0FBQ0Y7O0FBQ0QsYUFBTyxLQUFQO0FBQ0Q7O0FBRUQsV0FBTyxJQUFQO0FBQ0QsR0ExV21COztBQTRXcEI7Ozs7Ozs7QUFPQW1qQixrQkFuWG9CLDRCQW1YSHRFLEdBblhHLEVBbVhFO0FBQ3BCLFdBQU8sS0FBS25WLEtBQUwsQ0FBV2xELE1BQVgsQ0FBa0JxWSxHQUFsQixLQUEwQixJQUFJdnBCLDJFQUFKLEVBQWpDO0FBQ0QsR0FyWG1COztBQXVYcEI7Ozs7Ozs7O0FBUUFvdEIsZ0JBL1hvQiwwQkErWEw3RCxHQS9YSyxFQStYQWxpQixJQS9YQSxFQStYTTtBQUN4QixRQUFNMkgsT0FBTyxHQUFHLEtBQUtvRixLQUFMLENBQVdwRixPQUEzQjs7QUFFQSxRQUFJLENBQUNBLE9BQU8sQ0FBQ3VhLEdBQUQsQ0FBWixFQUFtQjtBQUNqQnZhLGFBQU8sQ0FBQ3VhLEdBQUQsQ0FBUCxHQUFlLEVBQWY7QUFDRDs7QUFFRHZhLFdBQU8sQ0FBQ3VhLEdBQUQsQ0FBUCxHQUFlemEsc0VBQWdCLENBQUMsS0FBS3ZLLEtBQUwsQ0FBV3dLLEtBQVosRUFBbUIsS0FBS3FGLEtBQUwsQ0FBVy9NLElBQVgsQ0FBZ0JraUIsR0FBaEIsQ0FBbkIsRUFBeUN2YSxPQUFPLENBQUN1YSxHQUFELENBQWhELEVBQXVEbGlCLElBQXZELENBQS9COztBQUVBLFFBQUlzRiw2REFBTyxDQUFDcUMsT0FBTyxDQUFDdWEsR0FBRCxDQUFSLENBQVgsRUFBMkI7QUFDekIsYUFBT3ZhLE9BQU8sQ0FBQ3VhLEdBQUQsQ0FBZDtBQUNEOztBQUVELG9DQUFxQjdsQixNQUFNLENBQUM2RyxJQUFQLENBQVlsRCxJQUFaLENBQXJCLGtDQUF3QztBQUFuQyxVQUFNaWUsTUFBTSxtQkFBWjs7QUFDSCxXQUFLdUosWUFBTCxDQUFrQnRGLEdBQWxCLEVBQXVCakUsTUFBdkI7QUFDRDs7QUFFRCxRQUFJLEtBQUsvZ0IsS0FBTCxDQUFXbVAsUUFBZixFQUF5QjtBQUN2QixXQUFLblAsS0FBTCxDQUFXbVAsUUFBWCxDQUFvQixLQUFLVSxLQUFMLENBQVdwRixPQUEvQixFQUF3QyxLQUFLb0YsS0FBTCxDQUFXL00sSUFBbkQ7QUFDRDtBQUNGLEdBblptQjs7QUFxWnBCOzs7Ozs7O0FBT0FtbUIsdUJBNVpvQixpQ0E0WkVqRSxHQTVaRixFQTRaTztBQUN6QixRQUFJLEtBQUtuVixLQUFMLENBQVcvTSxJQUFYLENBQWdCa2lCLEdBQWhCLENBQUosRUFBMEI7QUFDeEIsYUFBTzdsQixNQUFNLENBQUN3SSxNQUFQLENBQWMsRUFBZCxFQUFrQixLQUFLa0ksS0FBTCxDQUFXL00sSUFBWCxDQUFnQmtpQixHQUFoQixDQUFsQixFQUF3QyxLQUFLblYsS0FBTCxDQUFXcEYsT0FBWCxDQUFtQnVhLEdBQW5CLENBQXhDLENBQVA7QUFDRDs7QUFDRCxXQUFPLElBQVA7QUFDRCxHQWphbUI7O0FBbWFwQjs7Ozs7O0FBTU1YLFVBemFjO0FBQUE7QUFBQTtBQUFBLDZGQXlhTDVaLE9BemFLO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUEwYWxCO0FBMWFrQjtBQUFBO0FBQUE7QUFBQTtBQUFBLDJCQTJhT0EsT0EzYVA7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQSwySEEyYU5vSixFQTNhTSxvQkEyYUYvUSxJQTNhRTs7QUE0YWhCO0FBQ0EsbUJBQUtzbkIsY0FBTCxDQUFvQnZXLEVBQXBCLEVBQXdCL1EsSUFBeEIsRUE3YWdCLENBOGFoQjs7O0FBOWFnQjtBQUFBO0FBQUEscUJBZ2JSLEtBQUs2bkIsY0FBTCxDQUFvQjlXLEVBQXBCLENBaGJROztBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUEsa0JBa2JSLHdCQUFhMVcsNkRBbGJMO0FBQUE7QUFBQTtBQUFBOztBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTs7QUFBQTtBQUFBOztBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7O0FBeWJwQjs7Ozs7OztBQU9BeXRCLGVBaGNvQix5QkFnY04vVyxFQWhjTSxFQWdjRjtBQUNoQixXQUFPLEtBQUs3VCxLQUFMLENBQVdtaEIsSUFBWCxDQUFnQnROLEVBQWhCLEVBQW9CZ1gsV0FBcEIsSUFBbUNoWCxFQUExQztBQUNELEdBbGNtQjs7QUFvY3BCOzs7Ozs7O0FBT0FpWCxvQkFBa0IsRUFBRSw0QkFBQTdrQixHQUFHLEVBQUk7QUFDekIsUUFBSUUsQ0FBSjtBQUNBLFFBQU15Z0IsT0FBTyxHQUFHLEVBQWhCO0FBQ0EsUUFBTW1FLElBQUksR0FBRyxFQUFiO0FBQ0EsUUFBSS9GLEdBQUo7O0FBRUEsU0FBSzdlLENBQUMsR0FBRyxDQUFULEVBQVlBLENBQUMsR0FBR0YsR0FBRyxDQUFDdEcsTUFBcEIsRUFBNEJ3RyxDQUFDLEVBQTdCLEVBQWlDO0FBQy9CNmUsU0FBRyxHQUFHOVoscUVBQWUsQ0FBQ2pGLEdBQUcsQ0FBQ0UsQ0FBRCxDQUFILENBQU8sQ0FBUCxDQUFELENBQXJCO0FBQ0F5Z0IsYUFBTyxDQUFDNUIsR0FBRCxDQUFQLEdBQWUvZSxHQUFHLENBQUNFLENBQUQsQ0FBSCxDQUFPLENBQVAsQ0FBZjtBQUNBNGtCLFVBQUksQ0FBQy9GLEdBQUQsQ0FBSixHQUFZO0FBQ1ZuUixVQUFFLEVBQUU1TixHQUFHLENBQUNFLENBQUQsQ0FBSCxDQUFPLENBQVAsQ0FETTtBQUVWZ0wsYUFBSyxFQUFFaEwsQ0FGRyxDQUVEOztBQUZDLE9BQVo7QUFJRDs7QUFFRCxXQUFPO0FBQ0x5Z0IsYUFBTyxFQUFFQSxPQURKO0FBRUxtRSxVQUFJLEVBQUVBO0FBRkQsS0FBUDtBQUlELEdBOWRtQjs7QUFnZXBCOzs7Ozs7O0FBT0FyQixvQkF2ZW9CLDhCQXVlRDlrQixHQXZlQyxFQXVlSTtBQUN0QixRQUFJdUIsQ0FBSjtBQUNBLFFBQU1GLEdBQUcsR0FBRyxFQUFaOztBQUVBLFNBQUtFLENBQUwsSUFBVXZCLEdBQVYsRUFBZTtBQUNicUIsU0FBRyxDQUFDeEcsSUFBSixDQUFTLENBQ1AsS0FBS29RLEtBQUwsQ0FBV2dVLFdBQVgsQ0FBdUIxZCxDQUF2QixFQUEwQjBOLEVBRG5CLEVBRVAzTCwyREFBSyxDQUFDdEQsR0FBRyxDQUFDdUIsQ0FBRCxDQUFKLENBRkUsQ0FBVDtBQUlEOztBQUVELFdBQU9GLEdBQVA7QUFDRCxHQW5mbUI7O0FBcWZwQjs7Ozs7OztBQU9BMmpCLFlBNWZvQixzQkE0ZlQ1RSxHQTVmUyxFQTRmSjtBQUNkLFdBQU8sS0FBS25WLEtBQUwsQ0FBV2lVLE9BQVgsQ0FBbUJoZSxPQUFuQixDQUEyQmtmLEdBQTNCLEtBQW1DLENBQTFDO0FBQ0QsR0E5Zm1CO0FBZ2dCcEJxRixpQkFoZ0JvQiwyQkFnZ0JKMUIsUUFoZ0JJLEVBZ2dCTTtBQUN4QjtBQUNBLFFBQU0zRCxHQUFHLEdBQUc5WixxRUFBZSxDQUFDeWQsUUFBRCxDQUEzQjtBQUNBLFdBQU8sS0FBSzlZLEtBQUwsQ0FBVy9NLElBQVgsQ0FBZ0IyRyxjQUFoQixDQUErQnViLEdBQS9CLENBQVA7QUFDRCxHQXBnQm1COztBQXNnQnBCOzs7Ozs7O0FBT0E0RCxXQTdnQm9CLHFCQTZnQlZELFFBN2dCVSxFQTZnQkE7QUFDbEIsUUFBTTNELEdBQUcsR0FBRzlaLHFFQUFlLENBQUN5ZCxRQUFELENBQTNCOztBQUVBLFFBQUksQ0FBQyxLQUFLOVksS0FBTCxDQUFXL00sSUFBWCxDQUFnQjJHLGNBQWhCLENBQStCdWIsR0FBL0IsQ0FBTCxFQUEwQztBQUN4QyxZQUFNcm1CLEtBQUssQ0FBQyxtREFBRCxDQUFYO0FBQ0Q7O0FBRUQsV0FBT3FtQixHQUFQO0FBQ0QsR0FyaEJtQjs7QUF1aEJwQjs7Ozs7O0FBTU1yUyxXQTdoQmM7QUFBQTtBQUFBO0FBQUEsNkZBNmhCSjNQLFFBN2hCSTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEscUJBZ2lCSCxLQUFLaEQsS0FBTCxDQUFXd0ssS0FBWCxDQUFpQmtHLElBQWpCLENBQXNCMU4sUUFBdEIsQ0FoaUJHOztBQUFBO0FBZ2lCaEJGLGtCQWhpQmdCO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBa2lCaEIsa0JBQUksZ0JBQU8sS0FBSzlDLEtBQUwsQ0FBVzJoQixPQUF0QixFQUErQjtBQUM3QixxQkFBSzNoQixLQUFMLENBQVcyaEIsT0FBWDtBQUNEOztBQXBpQmU7O0FBQUE7QUF3aUJsQixrQkFBSSxLQUFLM2hCLEtBQUwsQ0FBVzRoQixVQUFmLEVBQTJCO0FBQ3pCLHFCQUFLNWhCLEtBQUwsQ0FBVzRoQixVQUFYLENBQXNCOWUsSUFBdEI7QUFDRDs7QUExaUJpQixnREEyaUJYQSxJQTNpQlc7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7O0FBOGlCcEI7Ozs7OztBQU1Ba29CLG1CQXBqQm9CLCtCQW9qQkE7QUFDbEIsUUFBTUMsYUFBYSxHQUFHLEtBQUtDLHFCQUFMLEVBQXRCOztBQUNBLFFBQUlyWCxFQUFKOztBQUNBLFNBQUssSUFBTW1SLEdBQVgsSUFBa0IsS0FBS25WLEtBQUwsQ0FBV3BGLE9BQTdCLEVBQXNDO0FBQ3BDb0osUUFBRSxHQUFHLEtBQUtoRSxLQUFMLENBQVdnVSxXQUFYLENBQXVCbUIsR0FBdkIsRUFBNEJuUixFQUFqQzs7QUFDQSxVQUFJb1gsYUFBYSxDQUFDbmxCLE9BQWQsQ0FBc0IrTixFQUF0QixJQUE0QixDQUFoQyxFQUFtQztBQUNqQ29YLHFCQUFhLENBQUN4ckIsSUFBZCxDQUFtQm9VLEVBQW5CO0FBQ0Q7QUFDRjs7QUFDRCxXQUFPb1gsYUFBUDtBQUNELEdBOWpCbUI7QUFna0JwQnBCLGVBaGtCb0IseUJBZ2tCTnNCLEtBaGtCTSxFQWdrQkMzckIsRUFoa0JELEVBZ2tCSztBQUN2QixRQUFNNHJCLGNBQWMsR0FBRyxLQUFLdmIsS0FBTCxDQUFXcEYsT0FBWCxDQUFtQjBnQixLQUFuQixDQUF2Qjs7QUFDQSxTQUFLRSxTQUFMLENBQWVGLEtBQWYsRUFGdUIsQ0FHdkI7OztBQUNBLFdBQU8sS0FBS3RiLEtBQUwsQ0FBVy9NLElBQVgsQ0FBZ0Jxb0IsS0FBaEIsQ0FBUDtBQUNBLFdBQU8sS0FBS3RiLEtBQUwsQ0FBV2dVLFdBQVgsQ0FBdUJzSCxLQUF2QixDQUFQO0FBQ0EsV0FBTyxLQUFLdGIsS0FBTCxDQUFXcEYsT0FBWCxDQUFtQjBnQixLQUFuQixDQUFQO0FBQ0EsV0FBTyxLQUFLdGIsS0FBTCxDQUFXdUwsUUFBWCxDQUFvQitQLEtBQXBCLENBQVA7QUFDQSxXQUFPLEtBQUt0YixLQUFMLENBQVdsRCxNQUFYLENBQWtCd2UsS0FBbEIsQ0FBUDtBQUNBLFdBQU8sS0FBS3RiLEtBQUwsQ0FBV2tVLE1BQVgsQ0FBa0JvSCxLQUFsQixDQUFQO0FBQ0EsU0FBS3ZhLFFBQUwsQ0FBYyxLQUFLZixLQUFuQixFQUEwQnJRLEVBQUUsR0FBR0EsRUFBRSxDQUFDVSxJQUFILENBQVEsSUFBUixDQUFILEdBQW1CLElBQS9DOztBQUVBLFFBQUlrckIsY0FBYyxJQUFJLEtBQUtwckIsS0FBTCxDQUFXbVAsUUFBakMsRUFBMkM7QUFDekMsV0FBS25QLEtBQUwsQ0FBV21QLFFBQVgsQ0FBb0IsS0FBS1UsS0FBTCxDQUFXcEYsT0FBL0IsRUFBd0MsS0FBS29GLEtBQUwsQ0FBVy9NLElBQW5EO0FBQ0Q7QUFDRixHQS9rQm1CO0FBaWxCZDZuQixnQkFqbEJjO0FBQUE7QUFBQTtBQUFBLDZGQWlsQkMzRixHQWpsQkQ7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLGtCQWtsQmIsS0FBS2hsQixLQUFMLENBQVcwYSxpQkFsbEJFO0FBQUE7QUFBQTtBQUFBOztBQUFBOztBQUFBO0FBQUEsZ0RBcWxCWCxLQUFLNFEscUJBQUwsQ0FDTHRHLEdBREssRUFFTCxLQUFLaGxCLEtBQUwsQ0FBVzBhLGlCQUZOLEVBR0wsS0FBS3VPLHFCQUhBLEVBSUwsS0FBS3BaLEtBQUwsQ0FBV3VMLFFBSk4sQ0FybEJXOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBNmxCZG1JLGNBN2xCYztBQUFBO0FBQUE7QUFBQSw2RkE2bEJEeUIsR0E3bEJDO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHFCQThsQkwsS0FBS3NHLHFCQUFMLENBQTJCdEcsR0FBM0IsRUFBZ0MsS0FBS2hsQixLQUFMLENBQVd3SyxLQUEzQyxFQUFrRCxLQUFLMGUsaUJBQXZELEVBQTBFLEtBQUtyWixLQUFMLENBQVdsRCxNQUFyRixDQTlsQks7O0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTs7QUFpbUJwQjs7Ozs7Ozs7O0FBU00yZSx1QkExbUJjO0FBQUE7QUFBQTtBQUFBLDZGQTBtQlF0RyxHQTFtQlIsRUEwbUJhbFgsU0ExbUJiLEVBMG1Cd0JtSyxPQTFtQnhCLEVBMG1CaUN0VixNQTFtQmpDO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQTJtQlpnbUIsc0JBM21CWSxHQTJtQkQsS0FBSzlZLEtBQUwsQ0FBV2dVLFdBQVgsQ0FBdUJtQixHQUF2QixFQUE0Qm5SLEVBM21CM0I7QUE0bUJabkcsb0JBNW1CWSxHQTRtQkh1SyxPQUFPLENBQUMrTSxHQUFELENBNW1CSjtBQUFBO0FBQUEscUJBOG1CUWxYLFNBQVMsQ0FBQ3lLLGFBQVYsQ0FBd0I3SyxNQUF4QixFQUFnQ2liLFFBQWhDLENBOW1CUjs7QUFBQTtBQThtQloxUCx5QkE5bUJZOztBQUFBLG1CQWduQmQ3Uyw2REFBTyxDQUFDc0gsTUFBRCxFQUFTdUssT0FBTyxDQUFDK00sR0FBRCxDQUFoQixDQWhuQk87QUFBQTtBQUFBO0FBQUE7O0FBaW5CaEIsa0JBQUkvTCxXQUFXLENBQUM3USxPQUFaLEVBQUosRUFBMkI7QUFDekIsdUJBQU96RixNQUFNLENBQUNxaUIsR0FBRCxDQUFiO0FBQ0QsZUFGRCxNQUVPO0FBQ0xyaUIsc0JBQU0sQ0FBQ3FpQixHQUFELENBQU4sR0FBYy9MLFdBQWQ7QUFDRDs7QUFybkJlO0FBQUEscUJBdW5CVixLQUFLK1EsVUFBTCxDQUFnQmhGLEdBQWhCLENBdm5CVTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTs7QUEybkJwQjs7Ozs7OztBQU9BWixtQkFsb0JvQiw2QkFrb0JGbUgsU0Fsb0JFLEVBa29CUztBQUFBOztBQUMzQixRQUFJLENBQUNwbUIsS0FBSyxDQUFDQyxPQUFOLENBQWNtbUIsU0FBZCxDQUFMLEVBQStCO0FBQzdCL29CLGdFQUFJLENBQUMsc0RBQUQsQ0FBSjtBQUNBK29CLGVBQVMsR0FBRyxDQUFDQSxTQUFELENBQVo7QUFDRDs7QUFFRCxTQUFLakksV0FBTCxHQUFtQnpnQixJQUFuQixDQUNFSSxPQUFPLENBQUNpTCxHQUFSLENBQ0VxZCxTQUFTLENBQUM5aUIsR0FBVjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsNkVBQWMsa0JBQU1rZ0IsUUFBTjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxvQkFDUCxNQUFJLENBQUMwQixlQUFMLENBQXFCMUIsUUFBckIsQ0FETztBQUFBO0FBQUE7QUFBQTs7QUFBQTs7QUFBQTtBQUtOd0MscUJBTE0sR0FLRSxNQUFJLENBQUN2QyxTQUFMLENBQWVELFFBQWYsQ0FMRjtBQUFBO0FBQUE7QUFBQSx1QkFPSixNQUFJLENBQUNnQyxjQUFMLENBQW9CUSxLQUFwQixDQVBJOztBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUEsb0JBU0osd0JBQWFodUIsNkRBVFQ7QUFBQTtBQUFBO0FBQUE7O0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsT0FBZDs7QUFBQTtBQUFBO0FBQUE7QUFBQSxRQURGLENBREY7QUFrQkQ7QUExcEJtQixDQUF0QjtBQTZwQmV1ckIsNEVBQWYsRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN6cUJBOzs7Ozs7O0NBUTJCOztBQUMzQjtBQUNBO0FBQ0E7QUFFQSxJQUFNM1ksV0FBVyxHQUFHbFAsZ0RBQVEsQ0FBQ2tQLFdBQTdCO0FBRUEsSUFBTXNDLFNBQVMsR0FBRyxFQUFsQjtBQUNBLElBQU1DLFVBQVUsR0FBRyxFQUFuQjtBQUVBLElBQU1rWixlQUFlLEdBQUc7QUFFdEI7Ozs7Ozs7O0FBUUFDLGVBQWEsRUFBRSx1QkFBVWhnQixPQUFWLEVBQW1CdVosR0FBbkIsRUFBd0JqRSxNQUF4QixFQUFnQztBQUFBOztBQUM3QyxRQUFNMkssS0FBSyxHQUFHLEtBQUtkLGFBQUwsQ0FBbUI3SixNQUFuQixDQUFkOztBQUNBLFFBQU1yVCxNQUFNLEdBQUcsS0FBS3ViLHFCQUFMLENBQTJCakUsR0FBM0IsQ0FBZjs7QUFDQSxRQUFJdmYsS0FBSyxHQUFHdUUsd0RBQUUsQ0FBQzBELE1BQUQsRUFBU2dlLEtBQVQsQ0FBZDtBQUNBLFFBQUlDLFNBQVMsR0FBRyxLQUFoQjs7QUFFQSxRQUFJLENBQUN4bUIsS0FBSyxDQUFDQyxPQUFOLENBQWNzbUIsS0FBZCxDQUFMLEVBQTJCO0FBQ3pCam1CLFdBQUssR0FBR0EsS0FBSyxDQUFDLENBQUQsQ0FBYjtBQUNELEtBUjRDLENBVTdDOzs7QUFDQSxRQUFJLEtBQUttbUIsZ0JBQUwsQ0FBc0I1RyxHQUF0QixFQUEyQmpFLE1BQTNCLENBQUosRUFBd0M7QUFDdEM7QUFDRDs7QUFFRCxRQUFNOEssYUFBYSxHQUFHO0FBQ3BCN1IsaUJBQVcsRUFBRSxxQkFBQ3hVLEtBQUQsRUFBUXNtQixTQUFSLEVBQXNCO0FBQ2pDLFlBQU1ocEIsSUFBSSxHQUFHLEVBQWI7QUFDQUEsWUFBSSxDQUFDMEMsS0FBRCxDQUFKLEdBQWNzbUIsU0FBZDs7QUFDQSxhQUFJLENBQUNqRCxjQUFMLENBQW9CN0QsR0FBcEIsRUFBeUJsaUIsSUFBekI7QUFDRDtBQUxtQixLQUF0QjtBQVFBLFFBQU05QyxLQUFLLEdBQUc7QUFDWm1QLGNBQVEsRUFBRSxrQkFBQzlGLE1BQUQsRUFBWTtBQUNwQixhQUFJLENBQUMwaUIsZUFBTCxDQUFxQi9HLEdBQXJCLEVBQTBCakUsTUFBMUIsRUFBa0MxWCxNQUFsQyxFQUEwQ3dpQixhQUExQyxFQUF5RHBnQixPQUF6RDtBQUNELE9BSFc7QUFJWm1KLGFBQU8sRUFBRSxtQkFBTTtBQUNiLGFBQUksQ0FBQ29YLGNBQUwsQ0FBb0JoSCxHQUFwQixFQUF5QmpFLE1BQXpCO0FBQ0QsT0FOVztBQU9adlIsWUFBTSxFQUFFLGtCQUFNO0FBQ1o7QUFDQSxZQUFJbWMsU0FBSixFQUFlO0FBQ2IsZUFBSSxDQUFDTSxjQUFMLENBQW9CeGdCLE9BQXBCLEVBQTZCdVosR0FBN0IsRUFBa0NqRSxNQUFsQzs7QUFDQSxlQUFJLENBQUNtTCxhQUFMLENBQW1CbEgsR0FBbkI7QUFDRDtBQUNGLE9BYlc7QUFjWm1ILGFBQU8sRUFBRSxpQkFBQ2pyQixDQUFELEVBQU87QUFDZCxZQUFJeXFCLFNBQVMsSUFBSSxDQUFDdFosU0FBRCxFQUFZQyxVQUFaLEVBQXdCL1AsUUFBeEIsQ0FBaUNyQixDQUFDLENBQUNrVixPQUFuQyxDQUFqQixFQUE4RDtBQUM1RCxjQUFJbFYsQ0FBQyxDQUFDa1YsT0FBRixLQUFjOUQsVUFBbEIsRUFBOEI7QUFDNUIsaUJBQUksQ0FBQ3VXLGNBQUwsQ0FBb0I3RCxHQUFwQixtRkFBNEJqRSxNQUE1QixFQUFxQ3RiLEtBQXJDO0FBQ0Q7O0FBRUQsZUFBSSxDQUFDd21CLGNBQUwsQ0FBb0J4Z0IsT0FBcEIsRUFBNkJ1WixHQUE3QixFQUFrQ2pFLE1BQWxDOztBQUNBLGVBQUksQ0FBQ21MLGFBQUwsQ0FBbUJsSCxHQUFuQjtBQUNEO0FBQ0YsT0F2Qlc7QUF3Qlp2ZixXQUFLLEVBQUVBO0FBeEJLLEtBQWQ7QUEyQkFvbUIsaUJBQWEsQ0FBQzdyQixLQUFkLEdBQXNCQSxLQUF0QixDQWxENkMsQ0FvRDdDOztBQUNBLFFBQU0wQixTQUFTLEdBQUcsS0FBSzFCLEtBQUwsQ0FBV21oQixJQUFYLENBQWdCSixNQUFoQixFQUF3QmdELE1BQXhCLENBQStCbmxCLElBQS9CLENBQW9DaXRCLGFBQXBDLEVBQW1EbmUsTUFBbkQsRUFBMkQsSUFBM0QsQ0FBbEI7O0FBRUEsUUFBSSxDQUFDaE0sU0FBTCxFQUFnQjtBQUNkO0FBQ0Q7O0FBRUQsU0FBS21PLEtBQUwsQ0FBV2tVLE1BQVgsV0FBcUJpQixHQUFyQixjQUE0QmpFLE1BQTVCLEtBQXdDbGdCLGdEQUFRLENBQUNTLE1BQVQsQ0FBZ0JJLFNBQWhCLEVBQTJCK0osT0FBM0IsRUFBb0MsWUFBWTtBQUN0RkEsYUFBTyxDQUFDNEosU0FBUixDQUFrQnZJLEdBQWxCLENBQXNCLHFCQUF0Qjs7QUFFQSxVQUFJLE9BQU8sS0FBSzBLLEtBQVosS0FBc0IsVUFBMUIsRUFBc0M7QUFDcEMsYUFBS0EsS0FBTDtBQUNELE9BRkQsTUFFTztBQUNMekgsbUJBQVcsQ0FBQyxJQUFELENBQVgsQ0FBa0J5SCxLQUFsQjtBQUNEOztBQUNEbVUsZUFBUyxHQUFHLElBQVo7QUFDRCxLQVR1QyxDQUF4QztBQVVELEdBL0VxQjtBQWlGdEJNLGdCQWpGc0IsMEJBaUZQeGdCLE9BakZPLEVBaUZFdVosR0FqRkYsRUFpRk9qRSxNQWpGUCxFQWlGZTtBQUNuQ2xnQixvREFBUSxDQUFDQyxzQkFBVCxDQUFnQzJLLE9BQWhDO0FBQ0EsV0FBTyxLQUFLb0UsS0FBTCxDQUFXa1UsTUFBWCxXQUFxQmlCLEdBQXJCLGNBQTRCakUsTUFBNUIsRUFBUDtBQUNBdFYsV0FBTyxDQUFDNEosU0FBUixDQUFrQkMsTUFBbEIsQ0FBeUIscUJBQXpCO0FBRUEsUUFBTStMLFFBQVEsR0FBRyxLQUFLK0ssVUFBTCxDQUFnQixLQUFLdmMsS0FBTCxDQUFXZ1UsV0FBWCxDQUF1Qm1CLEdBQXZCLEVBQTRCblIsRUFBNUMsQ0FBakI7O0FBQ0EsU0FBS3dZLFdBQUwsQ0FBaUJySCxHQUFqQixFQUFzQmpFLE1BQXRCLEVBQThCTSxRQUE5QjtBQUNELEdBeEZxQjtBQTBGdEIwSyxpQkFBZSxFQUFFLHlCQUFVL0csR0FBVixFQUFlakUsTUFBZixFQUF1QjFYLE1BQXZCLEVBQStCd2lCLGFBQS9CLEVBQThDcGdCLE9BQTlDLEVBQXVEO0FBQ3RFLFFBQUlpZ0IsS0FBSyxHQUFHLEtBQUtkLGFBQUwsQ0FBbUI3SixNQUFuQixDQUFaOztBQUVBMVgsVUFBTSxHQUFHbEIsK0RBQVMsQ0FBQ2QseUVBQW1CLENBQUNnQyxNQUFELENBQXBCLENBQWxCOztBQUVBLFFBQU1xRSxNQUFNLEdBQUcsS0FBS3ViLHFCQUFMLENBQTJCakUsR0FBM0IsQ0FBZjs7QUFDQSxRQUFNc0gsT0FBTyxHQUFHbmtCLCtEQUFTLENBQUMwakIsYUFBRCxDQUF6QjtBQUNBUyxXQUFPLENBQUN0c0IsS0FBUixDQUFjeUYsS0FBZCxHQUFzQjRELE1BQXRCO0FBQ0EsUUFBTTNILFNBQVMsR0FBRyxLQUFLMUIsS0FBTCxDQUFXbWhCLElBQVgsQ0FBZ0JKLE1BQWhCLEVBQXdCZ0QsTUFBeEIsQ0FBK0JubEIsSUFBL0IsQ0FBb0MwdEIsT0FBcEMsRUFBNkM1ZSxNQUE3QyxFQUFxRCxJQUFyRCxDQUFsQjtBQUNBLFNBQUttQyxLQUFMLENBQVdrVSxNQUFYLFdBQXFCaUIsR0FBckIsY0FBNEJqRSxNQUE1QixLQUF3Q2xnQixnREFBUSxDQUFDUyxNQUFULENBQWdCSSxTQUFoQixFQUEyQitKLE9BQTNCLENBQXhDOztBQUVBLFFBQUksQ0FBQ3RHLEtBQUssQ0FBQ0MsT0FBTixDQUFjc21CLEtBQWQsQ0FBTCxFQUEyQjtBQUN6QkEsV0FBSyxHQUFHLENBQUNBLEtBQUQsQ0FBUjtBQUNBcmlCLFlBQU0sR0FBRyxDQUFDQSxNQUFELENBQVQ7QUFDRDs7QUFFRCxTQUFLd2YsY0FBTCxDQUFvQjdELEdBQXBCLEVBQXlCNWIsK0RBQVMsQ0FBQ3NpQixLQUFELEVBQVFyaUIsTUFBUixDQUFsQztBQUNELEdBM0dxQjtBQTZHdEIyaUIsZ0JBQWMsRUFBRSx3QkFBVWhILEdBQVYsRUFBZWpFLE1BQWYsRUFBdUI7QUFDckMsUUFBSSxDQUFDLEtBQUtsUixLQUFMLENBQVdsRCxNQUFYLENBQWtCcVksR0FBbEIsQ0FBTCxFQUE2QjtBQUMzQjtBQUNEOztBQUVELFFBQUkwRyxLQUFLLEdBQUcsS0FBS2QsYUFBTCxDQUFtQjdKLE1BQW5CLENBQVo7O0FBQ0EsUUFBSSxDQUFDNWIsS0FBSyxDQUFDQyxPQUFOLENBQWNzbUIsS0FBZCxDQUFMLEVBQTJCO0FBQ3pCQSxXQUFLLEdBQUcsQ0FBQ0EsS0FBRCxDQUFSO0FBQ0Q7O0FBRURBLFNBQUssQ0FBQ25qQixPQUFOLENBQWMsVUFBVS9DLEtBQVYsRUFBaUI7QUFDN0IsV0FBS3FLLEtBQUwsQ0FBV2xELE1BQVgsQ0FBa0JxWSxHQUFsQixFQUF1QmpKLFVBQXZCLENBQWtDdlcsS0FBbEM7QUFDRCxLQUZELEVBRUcsSUFGSDs7QUFHQSxRQUFJLEtBQUtxSyxLQUFMLENBQVdsRCxNQUFYLENBQWtCcVksR0FBbEIsRUFBdUI1YyxPQUF2QixFQUFKLEVBQXNDO0FBQ3BDLGFBQU8sS0FBS3lILEtBQUwsQ0FBV2xELE1BQVgsQ0FBa0JxWSxHQUFsQixDQUFQO0FBQ0Q7QUFDRixHQTdIcUI7QUErSGhCa0gsZUEvSGdCO0FBQUE7QUFBQTtBQUFBLDRGQStIRmxILEdBL0hFO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEscUJBaUlaLEtBQUsyRixjQUFMLENBQW9CM0YsR0FBcEIsQ0FqSVk7O0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTs7QUFBQSxrQkFtSVosdUJBQWE3bkIsNkRBbklEO0FBQUE7QUFBQTtBQUFBOztBQUFBOztBQUFBO0FBQUEsb0JBeUloQixLQUFLNkMsS0FBTCxDQUFXNGYsVUFBWCxJQUF5QixLQUFLNWYsS0FBTCxDQUFXOG9CLFFBeklwQjtBQUFBO0FBQUE7QUFBQTs7QUEwSWxCLGtCQUFJLEtBQUs5b0IsS0FBTCxDQUFXOG9CLFFBQWYsRUFBeUI7QUFDdkI3ZCx1QkFBTyxDQUFDekksSUFBUixDQUFhLDBEQUFiO0FBQ0Q7O0FBQ0QsbUJBQUt1bUIsSUFBTCxDQUFVLEtBQUsvb0IsS0FBTCxDQUFXZ3BCLGdCQUFyQjtBQTdJa0I7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQSxxQkFnSlYsS0FBS3pGLFlBQUwsQ0FBa0J5QixHQUFsQixDQWhKVTs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQUFBLGtCQWtKVix1QkFBYTduQiw2REFsSkg7QUFBQTtBQUFBO0FBQUE7O0FBQUE7O0FBQUE7QUF1SnBCLGtCQUFJLEtBQUs2QyxLQUFMLENBQVdtUCxRQUFmLEVBQXlCO0FBQ3ZCLHFCQUFLblAsS0FBTCxDQUFXbVAsUUFBWCxDQUFvQixLQUFLVSxLQUFMLENBQVdwRixPQUEvQixFQUF3QyxLQUFLb0YsS0FBTCxDQUFXL00sSUFBbkQ7QUFDRDs7QUF6Sm1CO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBNEp0QjhvQixrQkFBZ0IsRUFBRSwwQkFBVTVHLEdBQVYsRUFBZWpFLE1BQWYsRUFBdUI7QUFDdkMsV0FBT3RRLE9BQU8sQ0FBQyxLQUFLWixLQUFMLENBQVdrVSxNQUFYLFdBQXFCaUIsR0FBckIsY0FBNEJqRSxNQUE1QixFQUFELENBQWQ7QUFDRDtBQTlKcUIsQ0FBeEI7QUFpS2V5Syw4RUFBZixFOzs7Ozs7Ozs7Ozs7QUNuTEE7QUFBQTtBQUFBO0FBQUE7Ozs7Ozs7QUFRQTtBQUVBLElBQU1lLG1CQUFtQixHQUFHO0FBQzFCOzs7OztBQUtBQyx1QkFBcUIsRUFBRSwrQkFBVWp0QixLQUFWLEVBQWlCO0FBQ3RDLFFBQU1pa0IsS0FBSyxHQUFHLEtBQUt4akIsS0FBTCxDQUFXeWhCLFlBQVgsQ0FBd0JsaUIsS0FBSyxDQUFDeUIsTUFBTixDQUFheUUsS0FBckMsQ0FBZDs7QUFDQSxRQUFJLEtBQUtnbkIscUJBQUwsRUFBSixFQUFrQztBQUNoQyxXQUFLenNCLEtBQUwsQ0FBVzBoQixpQkFBWCxDQUE2QjhCLEtBQTdCO0FBQ0E7QUFDRDs7QUFDRCxTQUFLa0osWUFBTCxDQUFrQmxKLEtBQWxCO0FBQ0QsR0FieUI7O0FBZTFCOzs7OztBQUtBbUosaUJBQWUsRUFBRSx5QkFBVXB0QixLQUFWLEVBQWlCO0FBQ2hDQSxTQUFLLENBQUM4VyxjQUFOO0FBQ0EsU0FBS3VXLE9BQUwsQ0FBYSxDQUFiO0FBQ0QsR0F2QnlCOztBQXlCMUI7Ozs7O0FBS0FDLGdCQUFjLEVBQUUsd0JBQVV0dEIsS0FBVixFQUFpQjtBQUMvQkEsU0FBSyxDQUFDOFcsY0FBTjtBQUNBLFNBQUt1VyxPQUFMLENBQWEsS0FBS0UsYUFBTCxLQUF1QixDQUFwQztBQUNELEdBakN5Qjs7QUFtQzFCOzs7OztBQUtBQyxnQkFBYyxFQUFFLHdCQUFVeHRCLEtBQVYsRUFBaUI7QUFDL0JBLFNBQUssQ0FBQzhXLGNBQU47QUFDQSxTQUFLdVcsT0FBTCxDQUFhLEtBQUsvYyxLQUFMLENBQVd5UixJQUFYLEdBQWtCLENBQS9CO0FBQ0QsR0EzQ3lCOztBQTZDMUI7Ozs7O0FBS0EwTCxnQkFBYyxFQUFFLHdCQUFVenRCLEtBQVYsRUFBaUI7QUFDL0JBLFNBQUssQ0FBQzhXLGNBQU47QUFDQSxTQUFLdVcsT0FBTCxDQUFhLEtBQUsvYyxLQUFMLENBQVd5UixJQUFYLEdBQWtCLENBQS9CO0FBQ0QsR0FyRHlCOztBQXVEMUI7Ozs7QUFJQTJMLG9CQUFrQixFQUFFLDRCQUFVMXRCLEtBQVYsRUFBaUI7QUFDbkNBLFNBQUssQ0FBQzhXLGNBQU47QUFDQSxTQUFLaU4sV0FBTDtBQUNELEdBOUR5Qjs7QUFnRTFCOzs7OztBQUtBNEosZ0JBQWMsRUFBRSwwQkFBWTtBQUMxQixXQUFPLEtBQUtyZCxLQUFMLENBQVd5UixJQUFsQjtBQUNELEdBdkV5QjtBQXlFMUI2TCxpQkFBZSxFQUFFLDJCQUFZO0FBQzNCLFdBQU8sS0FBS3RkLEtBQUwsQ0FBVzJULEtBQWxCO0FBQ0QsR0EzRXlCOztBQTZFMUI7Ozs7O0FBS0FvSixTQUFPLEVBQUUsaUJBQVV0TCxJQUFWLEVBQWdCO0FBQ3ZCLFNBQUtvRCxRQUFMLENBQWNwRCxJQUFkOztBQUNBLFNBQUtnQyxXQUFMO0FBQ0QsR0FyRnlCOztBQXVGMUI7Ozs7O0FBS0FvSixjQUFZLEVBQUUsc0JBQVVsTCxTQUFWLEVBQXFCO0FBQ2pDLFFBQUksS0FBS2lMLHFCQUFMLEVBQUosRUFBa0M7QUFDaEMsWUFBTTl0QixLQUFLLENBQUMsbUVBQUQsQ0FBWDtBQUNEOztBQUVELFNBQUtrUixLQUFMLENBQVcyUixTQUFYLEdBQXVCQSxTQUF2QjtBQUNBLFNBQUszUixLQUFMLENBQVd5UixJQUFYLEdBQWtCLEtBQUs4TCxVQUFMLENBQWdCLEtBQUt2ZCxLQUFMLENBQVd5UixJQUEzQixFQUFpQ0UsU0FBakMsRUFBNEMsS0FBSzNSLEtBQUwsQ0FBVzJULEtBQXZELENBQWxCO0FBQ0EsU0FBS0YsV0FBTDtBQUNELEdBcEd5Qjs7QUFzRzFCOzs7OztBQUtBd0osZUFBYSxFQUFFLHlCQUFZO0FBQ3pCLFFBQU10TCxTQUFTLEdBQUcsS0FBSzZMLFlBQUwsRUFBbEI7QUFDQSxXQUFPN0wsU0FBUyxHQUFHM2QsSUFBSSxDQUFDeXBCLElBQUwsQ0FBVSxLQUFLemQsS0FBTCxDQUFXMlQsS0FBWCxHQUFtQmhDLFNBQTdCLENBQUgsR0FBNkMsQ0FBN0Q7QUFDRCxHQTlHeUI7QUFnSDFCNkwsY0FBWSxFQUFFLHdCQUFZO0FBQ3hCLFFBQUksS0FBS1oscUJBQUwsRUFBSixFQUFrQztBQUNoQyxhQUFPLEtBQUt6c0IsS0FBTCxDQUFXd2hCLFNBQWxCO0FBQ0Q7O0FBQ0QsV0FBTyxLQUFLM1IsS0FBTCxDQUFXMlIsU0FBbEI7QUFDRCxHQXJIeUI7QUF1SDFCa0QsVUFBUSxFQUFFLGtCQUFVcEQsSUFBVixFQUFnQjtBQUN4QixTQUFLelIsS0FBTCxDQUFXeVIsSUFBWCxHQUFrQixLQUFLOEwsVUFBTCxDQUFnQjlMLElBQWhCLEVBQXNCLEtBQUt6UixLQUFMLENBQVcyUixTQUFqQyxFQUE0QyxLQUFLM1IsS0FBTCxDQUFXMlQsS0FBdkQsQ0FBbEI7QUFDRCxHQXpIeUI7QUEySDFCNEosWUFBVSxFQUFFLG9CQUFDOUwsSUFBRCxFQUFPaU0sSUFBUCxFQUFhL0osS0FBYixFQUF1QjtBQUNqQyxRQUFJbEMsSUFBSSxHQUFHaU0sSUFBUCxJQUFlL0osS0FBbkIsRUFBMEI7QUFDeEJsQyxVQUFJLEdBQUdpTSxJQUFJLEdBQUcxcEIsSUFBSSxDQUFDeXBCLElBQUwsQ0FBVTlKLEtBQUssR0FBRytKLElBQWxCLElBQTBCLENBQTdCLEdBQWlDLENBQTVDO0FBQ0Q7O0FBQ0QsV0FBTzFwQixJQUFJLENBQUMwSyxHQUFMLENBQVMsQ0FBVCxFQUFZK1MsSUFBWixDQUFQO0FBQ0QsR0FoSXlCO0FBa0kxQm1MLHVCQUFxQixFQUFFLGlDQUFZO0FBQ2pDLFdBQU8sS0FBS3pzQixLQUFMLENBQVd5SixjQUFYLENBQTBCLFdBQTFCLENBQVA7QUFDRCxHQXBJeUI7QUFzSTFCd2MsbUJBQWlCLEVBQUUsU0FBU0EsaUJBQVQsR0FBNkI7QUFDOUMsUUFBTXpFLFNBQVMsR0FBRyxLQUFLNkwsWUFBTCxFQUFsQjtBQUNBLFdBQU81YyxPQUFPLENBQUMrUSxTQUFELENBQVAsSUFDTDtBQUFLLGVBQVMsRUFBQztBQUFmLE9BQ0cvUSxPQUFPLENBQUMsS0FBS3pRLEtBQUwsQ0FBV3loQixZQUFaLENBQVAsSUFDQywyREFBQyw4Q0FBRCxRQUNFO0FBQUssU0FBRyxFQUFDLEdBQVQ7QUFBYSxlQUFTLEVBQUM7QUFBdkIscUJBREYsRUFFRTtBQUFLLFNBQUcsRUFBQyxHQUFUO0FBQWEsZUFBUyxFQUFDO0FBQXZCLE9BQ0U7QUFDRSxlQUFTLEVBQUMsdUNBRFo7QUFFRSxXQUFLLEVBQUUsS0FBS3poQixLQUFMLENBQVd5aEIsWUFBWCxDQUF3QjNiLE9BQXhCLENBQWdDMGIsU0FBaEMsQ0FGVDtBQUdFLGNBQVEsRUFBRSxLQUFLZ0w7QUFIakIsT0FLRyxLQUFLeHNCLEtBQUwsQ0FBV3loQixZQUFYLENBQXdCaFosR0FBeEIsQ0FBNEIsVUFBQ29JLE1BQUQsRUFBUzVJLEdBQVQ7QUFBQSxhQUFpQjtBQUFRLFdBQUcsRUFBRUEsR0FBYjtBQUFrQixhQUFLLEVBQUVBO0FBQXpCLFNBQStCNEksTUFBL0IsQ0FBakI7QUFBQSxLQUE1QixFQUE4RixJQUE5RixDQUxILENBREYsQ0FGRixDQUZKLEVBZUU7QUFBRyxVQUFJLEVBQUMsR0FBUjtBQUFZLGVBQVMsRUFBQyxnQkFBdEI7QUFBdUMsYUFBTyxFQUFFLEtBQUs4YjtBQUFyRCxNQWZGLEVBZ0JFO0FBQUcsVUFBSSxFQUFDLEdBQVI7QUFBWSxlQUFTLEVBQUMsZUFBdEI7QUFBc0MsYUFBTyxFQUFFLEtBQUtJO0FBQXBELE1BaEJGLEVBaUJHdGMsT0FBTyxDQUFDLEtBQUtaLEtBQUwsQ0FBVzJULEtBQVosQ0FBUCxJQUNDLHdFQUNJLEtBQUszVCxLQUFMLENBQVd5UixJQUFYLEdBQWtCRSxTQUFuQixHQUFnQyxDQURuQyxFQUVHLEtBRkgsRUFHRzNkLElBQUksQ0FBQ3lLLEdBQUwsQ0FDQyxDQUFDLEtBQUt1QixLQUFMLENBQVd5UixJQUFYLEdBQWtCLENBQW5CLElBQXdCRSxTQUR6QixFQUVDLEtBQUszUixLQUFMLENBQVcyVCxLQUZaLENBSEgsRUFPRyxNQVBILEVBUUcsS0FBSzNULEtBQUwsQ0FBVzJULEtBUmQsQ0FsQkosRUE2QkU7QUFBRyxVQUFJLEVBQUMsR0FBUjtBQUFZLGVBQVMsRUFBQyxlQUF0QjtBQUFzQyxhQUFPLEVBQUUsS0FBS3dKO0FBQXBELE1BN0JGLEVBOEJFO0FBQUcsVUFBSSxFQUFDLEdBQVI7QUFBWSxlQUFTLEVBQUMsZUFBdEI7QUFBc0MsYUFBTyxFQUFFLEtBQUtIO0FBQXBELE1BOUJGLEVBK0JFO0FBQUcsVUFBSSxFQUFDLEdBQVI7QUFBWSxlQUFTLEVBQUMsa0JBQXRCO0FBQXlDLGFBQU8sRUFBRSxLQUFLSTtBQUF2RCxNQS9CRixDQURGO0FBbUNEO0FBM0t5QixDQUE1QjtBQThLZVYsa0ZBQWYsRTs7Ozs7Ozs7Ozs7O0FDeExBO0FBQUE7QUFBQTs7Ozs7OztBQVFBO0FBRUE7Ozs7QUFHQSxJQUFNaUIsZUFBZSxHQUFHO0FBQ3RCOzs7Ozs7QUFNQUMsb0JBQWtCLEVBQUUsNEJBQVVDLFdBQVYsRUFBdUJqSixhQUF2QixFQUFzQztBQUN4RCxTQUFLNVUsS0FBTCxDQUFXd1IsUUFBWCxHQUFzQm5aLDJEQUFLLENBQUN3bEIsV0FBRCxDQUEzQjs7QUFDQSxRQUFJLE9BQU9qSixhQUFQLEtBQXlCLFNBQTdCLEVBQXdDO0FBQ3RDLFdBQUs1VSxLQUFMLENBQVdvVSxtQkFBWCxHQUFpQ1EsYUFBakM7QUFDRDs7QUFFRCxTQUFLa0osV0FBTDs7QUFDQSxTQUFLaEosV0FBTDs7QUFDQSxTQUFLaUosc0JBQUw7QUFDRCxHQWhCcUI7O0FBa0J0Qjs7Ozs7O0FBTUFDLGNBQVksRUFBRSxzQkFBVWxGLFFBQVYsRUFBb0JtRixlQUFwQixFQUFxQztBQUFBOztBQUNqRCxRQUFNOUksR0FBRyxHQUFHOVoscUVBQWUsQ0FBQ3lkLFFBQUQsQ0FBM0I7O0FBRUEsUUFBSSxLQUFLOVksS0FBTCxDQUFXb1UsbUJBQVgsSUFBa0MsQ0FBQzZKLGVBQXZDLEVBQXdEO0FBQ3RELGFBQU8sS0FBS0MsY0FBTCxDQUFvQnBGLFFBQXBCLEVBQThCLElBQTlCLENBQVA7QUFDRDs7QUFFRCxRQUFJN2lCLDZEQUFPLENBQUMsS0FBSytKLEtBQUwsQ0FBV3dSLFFBQVosRUFBc0JzSCxRQUF0QixDQUFQLEdBQXlDLENBQTdDLEVBQWdEO0FBQzlDLFdBQUs5WSxLQUFMLENBQVd3UixRQUFYLENBQW9CNWhCLElBQXBCLENBQXlCa3BCLFFBQXpCOztBQUVBLFVBQUksS0FBSzlZLEtBQUwsQ0FBV3dSLFFBQVgsQ0FBb0IxaEIsTUFBcEIsS0FBK0IsS0FBS2tRLEtBQUwsQ0FBVzJULEtBQTlDLEVBQXFEO0FBQ25ELFlBQUksS0FBSzNULEtBQUwsQ0FBV29VLG1CQUFmLEVBQW9DO0FBQ2xDLGVBQUsrSixXQUFMO0FBQ0QsU0FGRCxNQUVPO0FBQ0wsZUFBS0MsU0FBTDtBQUNEOztBQUNEO0FBQ0Q7QUFDRjs7QUFFRCxTQUFLakUsVUFBTCxDQUFnQmhGLEdBQWhCLEVBQXFCbmlCLElBQXJCLENBQTBCLFlBQU07QUFDOUIsV0FBSSxDQUFDK3FCLHNCQUFMO0FBQ0QsS0FGRDtBQUdELEdBL0NxQjs7QUFpRHRCOzs7Ozs7QUFNQUcsZ0JBQWMsRUFBRSx3QkFBVXBGLFFBQVYsRUFBb0JtRixlQUFwQixFQUFxQztBQUFBOztBQUNuRCxRQUFNOUksR0FBRyxHQUFHOVoscUVBQWUsQ0FBQ3lkLFFBQUQsQ0FBM0I7O0FBRUEsUUFBSSxLQUFLOVksS0FBTCxDQUFXb1UsbUJBQVgsSUFBa0MsQ0FBQzZKLGVBQXZDLEVBQXdEO0FBQ3RELGFBQU8sS0FBS0QsWUFBTCxDQUFrQmxGLFFBQWxCLEVBQTRCLElBQTVCLENBQVA7QUFDRDs7QUFFRCxRQUFNdUYsR0FBRyxHQUFHcG9CLDZEQUFPLENBQUMsS0FBSytKLEtBQUwsQ0FBV3dSLFFBQVosRUFBc0JzSCxRQUF0QixDQUFuQjs7QUFDQSxRQUFJdUYsR0FBRyxJQUFJLENBQVgsRUFBYztBQUNaLFdBQUtyZSxLQUFMLENBQVd3UixRQUFYLENBQW9CdkYsTUFBcEIsQ0FBMkJvUyxHQUEzQixFQUFnQyxDQUFoQztBQUNEOztBQUVELFNBQUtsRSxVQUFMLENBQWdCaEYsR0FBaEIsRUFBcUJuaUIsSUFBckIsQ0FBMEIsWUFBTTtBQUM5QixZQUFJLENBQUMrcUIsc0JBQUw7QUFDRCxLQUZEO0FBR0QsR0F0RXFCOztBQXdFdEI7Ozs7Ozs7QUFPQXhCLFlBQVUsRUFBRSxvQkFBVXpELFFBQVYsRUFBb0I7QUFDOUIsUUFBTXRILFFBQVEsR0FBR3ZiLDZEQUFPLENBQUMsS0FBSytKLEtBQUwsQ0FBV3dSLFFBQVosRUFBc0JzSCxRQUF0QixDQUFQLElBQTBDLENBQTNEOztBQUNBLFFBQUksS0FBSzlZLEtBQUwsQ0FBV29VLG1CQUFmLEVBQW9DO0FBQ2xDLGFBQU8sQ0FBQzVDLFFBQVI7QUFDRDs7QUFDRCxXQUFPQSxRQUFQO0FBQ0QsR0FyRnFCOztBQXVGdEI7Ozs7O0FBS0E4TSxnQkFBYyxFQUFFLHdCQUFVeEYsUUFBVixFQUFvQjtBQUNsQyxRQUFJLEtBQUszb0IsS0FBTCxDQUFXbWlCLGdCQUFmLEVBQWlDO0FBQy9CLGFBQU8sS0FBS25pQixLQUFMLENBQVdtaUIsZ0JBQVgsQ0FBNEJ3RyxRQUE1QixDQUFQO0FBQ0Q7O0FBQ0QsUUFBSSxLQUFLeUQsVUFBTCxDQUFnQnpELFFBQWhCLENBQUosRUFBK0I7QUFDN0IsV0FBS29GLGNBQUwsQ0FBb0JwRixRQUFwQjtBQUNELEtBRkQsTUFFTztBQUNMLFdBQUtrRixZQUFMLENBQWtCbEYsUUFBbEI7QUFDRDtBQUNGLEdBckdxQjs7QUF1R3RCOzs7QUFHQXlGLGlCQUFlLEVBQUUsMkJBQVk7QUFDM0IsUUFBSSxLQUFLcHVCLEtBQUwsQ0FBV29pQixpQkFBZixFQUFrQztBQUNoQyxhQUFPLEtBQUtwaUIsS0FBTCxDQUFXb2lCLGlCQUFYLEVBQVA7QUFDRDs7QUFDRCxRQUFJLEtBQUt2UyxLQUFMLENBQVdvVSxtQkFBZixFQUFvQztBQUNsQyxXQUFLK0osV0FBTDtBQUNELEtBRkQsTUFFTztBQUNMLFdBQUtDLFNBQUw7QUFDRDtBQUNGLEdBbkhxQjs7QUFxSHRCOzs7O0FBSUFBLFdBQVMsRUFBRSxxQkFBWTtBQUNyQixTQUFLcGUsS0FBTCxDQUFXb1UsbUJBQVgsR0FBaUMsSUFBakM7QUFDQSxTQUFLcFUsS0FBTCxDQUFXd1IsUUFBWCxHQUFzQixFQUF0Qjs7QUFDQSxTQUFLc0QsV0FBTDs7QUFDQSxTQUFLaUosc0JBQUw7QUFDRCxHQTlIcUI7O0FBZ0l0Qjs7OztBQUlBSSxhQUFXLEVBQUUsdUJBQVk7QUFDdkIsU0FBS25lLEtBQUwsQ0FBV29VLG1CQUFYLEdBQWlDLEtBQWpDO0FBQ0EsU0FBS3BVLEtBQUwsQ0FBV3dSLFFBQVgsR0FBc0IsRUFBdEI7O0FBQ0EsU0FBS3NELFdBQUw7O0FBQ0EsU0FBS2lKLHNCQUFMO0FBQ0QsR0F6SXFCOztBQTJJdEI7Ozs7O0FBS0FTLG1CQUFpQixFQUFFLDZCQUFZO0FBQzdCLFdBQU8sS0FBS3hlLEtBQUwsQ0FBV29VLG1CQUFsQjtBQUNELEdBbEpxQjs7QUFvSnRCOzs7OztBQUtBcUssZ0JBQWMsRUFBRSwwQkFBWTtBQUMxQixXQUFPcG1CLDJEQUFLLENBQUMsS0FBSzJILEtBQUwsQ0FBV3dSLFFBQVosQ0FBWjtBQUNELEdBM0pxQjtBQTZKdEJrTixvQkE3SnNCLGdDQTZKRDtBQUNuQixXQUFPLEtBQUt2dUIsS0FBTCxDQUFXa2lCLGVBQWxCO0FBQ0QsR0EvSnFCOztBQWlLdEI7Ozs7O0FBS0EwTCx3QkFBc0IsRUFBRSxrQ0FBWTtBQUNsQyxRQUFJLEtBQUs1dEIsS0FBTCxDQUFXK2hCLGdCQUFmLEVBQWlDO0FBQy9CLFVBQUl5TSxhQUFhLEdBQUcsS0FBSzNlLEtBQUwsQ0FBV3dSLFFBQVgsQ0FBb0IxaEIsTUFBeEM7O0FBQ0EsVUFBSSxLQUFLa1EsS0FBTCxDQUFXb1UsbUJBQWYsRUFBb0M7QUFDbEN1SyxxQkFBYSxHQUFHLEtBQUtyQixlQUFMLEtBQXlCcUIsYUFBekM7QUFDRDs7QUFDRCxXQUFLeHVCLEtBQUwsQ0FBVytoQixnQkFBWCxDQUE0QixLQUFLdU0sY0FBTCxFQUE1QixFQUFtREUsYUFBbkQ7QUFDRDtBQUNGO0FBOUtxQixDQUF4QjtBQWlMZWhCLDhFQUFmLEU7Ozs7Ozs7Ozs7OztBQzlMQTtBQUFBO0FBQUE7Ozs7Ozs7QUFRQTtBQUVBLElBQU1pQixnQkFBZ0IsR0FBRztBQUN2Qjs7Ozs7O0FBTUFoTSxNQUFJLEVBQUUsY0FBVTFCLE1BQVYsRUFBa0JDLFNBQWxCLEVBQTZCO0FBQ2pDLFFBQUksS0FBS2tKLG1CQUFMLEVBQUosRUFBZ0M7QUFDOUIsWUFBTXZyQixLQUFLLENBQUMsc0RBQUQsQ0FBWDtBQUNEOztBQUVELFFBQU04akIsSUFBSSxHQUFHO0FBQ1gxQixZQUFNLEVBQUVBLE1BREc7QUFFWEMsZUFBUyxFQUFFQTtBQUZBLEtBQWI7O0FBS0EsUUFBSSxLQUFLaGhCLEtBQUwsQ0FBV2lpQixlQUFmLEVBQWdDO0FBQzlCLFdBQUtwUyxLQUFMLENBQVc0UyxJQUFYLENBQWdCaGpCLElBQWhCLENBQXFCZ2pCLElBQXJCO0FBQ0QsS0FGRCxNQUVPO0FBQ0wsV0FBSzVTLEtBQUwsQ0FBVzRTLElBQVgsR0FBa0JBLElBQWxCO0FBQ0Q7O0FBRUQsU0FBS21LLE9BQUwsQ0FBYSxDQUFiOztBQUVBLFFBQUksS0FBSzVzQixLQUFMLENBQVdnaUIsU0FBZixFQUEwQjtBQUN4QixXQUFLaGlCLEtBQUwsQ0FBV2dpQixTQUFYLENBQXFCLEtBQUtuUyxLQUFMLENBQVc0UyxJQUFoQyxFQUFzQzFCLE1BQXRDLEVBQThDQyxTQUE5QztBQUNEO0FBQ0YsR0E1QnNCOztBQThCdkI7Ozs7O0FBS0EwTixrQkFBZ0IsRUFBRSw0QkFBWTtBQUM1QixRQUFJLEtBQUt4RSxtQkFBTCxFQUFKLEVBQWdDO0FBQzlCLGFBQU8sS0FBS2xxQixLQUFMLENBQVd5aUIsSUFBbEI7QUFDRDs7QUFDRCxXQUFPLEtBQUs1UyxLQUFMLENBQVc0UyxJQUFsQjtBQUNELEdBeENzQjs7QUEwQ3ZCOzs7QUFHQWtNLGNBQVksRUFBRSx3QkFBWTtBQUN4QixRQUFJLEtBQUt6RSxtQkFBTCxFQUFKLEVBQWdDO0FBQzlCLFlBQU12ckIsS0FBSyxDQUFDLDhEQUFELENBQVg7QUFDRDs7QUFFRCxTQUFLd3JCLGFBQUw7O0FBQ0EsU0FBS3dELFdBQUw7QUFDRCxHQXBEc0I7O0FBc0R2Qjs7OztBQUlBeEQsZUFBYSxFQUFFLHlCQUFZO0FBQ3pCLFFBQU0xSCxJQUFJLEdBQUcsS0FBS2tCLGVBQUwsRUFBYjs7QUFFQSxRQUFJLEtBQUt1RyxtQkFBTCxFQUFKLEVBQWdDO0FBQzlCLFdBQUtsSSxTQUFMLENBQWVTLElBQWY7QUFDQTtBQUNEOztBQUVELFNBQUs1UyxLQUFMLENBQVc0UyxJQUFYLEdBQWtCQSxJQUFsQjtBQUNELEdBbkVzQjs7QUFxRXZCOzs7Ozs7QUFNQTZDLFVBQVEsRUFBRSxrQkFBVXZFLE1BQVYsRUFBa0I7QUFDMUIsUUFBSTZOLFFBQUo7QUFDQSxRQUFNQyxLQUFLLEdBQUcsS0FBSzd1QixLQUFMLENBQVdtaEIsSUFBWCxDQUFnQkosTUFBaEIsRUFBd0IrTixTQUF0QztBQUNBLFFBQUlDLFFBQVEsR0FBRzdtQiwyREFBSyxDQUFDLEtBQUt3bUIsZ0JBQUwsRUFBRCxDQUFwQjtBQUNBLFFBQU1NLFdBQVcsR0FBRztBQUFDak8sWUFBTSxFQUFFQTtBQUFULEtBQXBCO0FBQ0EsUUFBSWtPLGdCQUFKO0FBQ0EsUUFBSUMsV0FBSjs7QUFFQSxRQUFJLEtBQUtsdkIsS0FBTCxDQUFXaWlCLGVBQWYsRUFBZ0M7QUFDOUI7QUFDQWdOLHNCQUFnQixHQUFHdG1CLCtEQUFTLENBQUNvbUIsUUFBRCxFQUFXLFVBQUF0TSxJQUFJO0FBQUEsZUFBSUEsSUFBSSxDQUFDMUIsTUFBTCxLQUFnQkEsTUFBcEI7QUFBQSxPQUFmLENBQTVCOztBQUVBLFVBQUlrTyxnQkFBZ0IsSUFBSSxDQUF4QixFQUEyQjtBQUN6QkMsbUJBQVcsR0FBR0gsUUFBUSxDQUFDRSxnQkFBRCxDQUF0QixDQUR5QixDQUd6Qjs7QUFDQSxZQUFJQSxnQkFBZ0IsR0FBR0YsUUFBUSxDQUFDcHZCLE1BQVQsR0FBa0IsQ0FBekMsRUFBNEM7QUFDMUNpdkIsa0JBQVEsR0FBR0MsS0FBSyxDQUFDLENBQUQsQ0FBaEI7QUFDRCxTQUZELE1BRU87QUFDTDtBQUNBRCxrQkFBUSxHQUFHQyxLQUFLLENBQUMsQ0FBQ0EsS0FBSyxDQUFDL29CLE9BQU4sQ0FBY29wQixXQUFXLENBQUNsTyxTQUExQixJQUF1QyxDQUF4QyxJQUE2QzZOLEtBQUssQ0FBQ2x2QixNQUFwRCxDQUFoQjtBQUNEOztBQUVELFlBQUlpdkIsUUFBUSxLQUFLLFNBQWpCLEVBQTRCO0FBQzFCO0FBQ0FHLGtCQUFRLENBQUNqVCxNQUFULENBQWdCbVQsZ0JBQWhCLEVBQWtDLENBQWxDO0FBQ0QsU0FIRCxNQUdPLElBQUlBLGdCQUFnQixLQUFLRixRQUFRLENBQUNwdkIsTUFBVCxHQUFrQixDQUEzQyxFQUE4QztBQUNuRDtBQUNBdXZCLHFCQUFXLENBQUNsTyxTQUFaLEdBQXdCNE4sUUFBeEI7QUFDRCxTQUhNLE1BR0E7QUFDTDtBQUNBRyxrQkFBUSxDQUFDalQsTUFBVCxDQUFnQm1ULGdCQUFoQixFQUFrQyxDQUFsQztBQUNBRCxxQkFBVyxDQUFDaE8sU0FBWixHQUF3QjROLFFBQXhCO0FBQ0FHLGtCQUFRLENBQUN0dkIsSUFBVCxDQUFjdXZCLFdBQWQ7QUFDRDtBQUNGLE9BdkJELE1BdUJPO0FBQ0w7QUFDQUEsbUJBQVcsQ0FBQ2hPLFNBQVosR0FBd0I0TixRQUFRLEdBQUdDLEtBQUssQ0FBQyxDQUFELENBQXhDO0FBQ0FFLGdCQUFRLENBQUN0dkIsSUFBVCxDQUFjdXZCLFdBQWQ7QUFDRDtBQUNGLEtBaENELE1BZ0NPO0FBQ0wsVUFBSUQsUUFBUSxJQUFJQSxRQUFRLENBQUNoTyxNQUFULEtBQW9CQSxNQUFwQyxFQUE0QztBQUMxQztBQUNBNk4sZ0JBQVEsR0FBR0MsS0FBSyxDQUFDLENBQUNBLEtBQUssQ0FBQy9vQixPQUFOLENBQWNpcEIsUUFBUSxDQUFDL04sU0FBdkIsSUFBb0MsQ0FBckMsSUFBMEM2TixLQUFLLENBQUNsdkIsTUFBakQsQ0FBaEI7QUFDRCxPQUhELE1BR087QUFDTGl2QixnQkFBUSxHQUFHQyxLQUFLLENBQUMsQ0FBRCxDQUFoQjtBQUNEOztBQUNELFVBQUlELFFBQVEsS0FBSyxTQUFqQixFQUE0QjtBQUMxQkcsZ0JBQVEsR0FBRyxJQUFYO0FBQ0QsT0FGRCxNQUVPO0FBQ0xDLG1CQUFXLENBQUNoTyxTQUFaLEdBQXdCNE4sUUFBeEI7QUFDQUcsZ0JBQVEsR0FBR0MsV0FBWDtBQUNEO0FBQ0Y7O0FBRUQsUUFBSSxLQUFLaHZCLEtBQUwsQ0FBV2dpQixTQUFmLEVBQTBCO0FBQ3hCLFdBQUtoaUIsS0FBTCxDQUFXZ2lCLFNBQVgsQ0FBcUIrTSxRQUFyQixFQUErQmhPLE1BQS9CLEVBQXVDNk4sUUFBdkM7QUFDRDs7QUFFRCxRQUFJLENBQUMsS0FBSzFFLG1CQUFMLEVBQUwsRUFBaUM7QUFDL0IsV0FBS3JhLEtBQUwsQ0FBVzRTLElBQVgsR0FBa0JzTSxRQUFsQjtBQUNBLFdBQUtuQyxPQUFMLENBQWEsQ0FBYjtBQUNEO0FBQ0YsR0ExSXNCOztBQTRJdkI7Ozs7OztBQU1BakosaUJBQWUsRUFBRSwyQkFBWTtBQUMzQixRQUFJLEtBQUszakIsS0FBTCxDQUFXcWlCLFdBQWYsRUFBNEI7QUFDMUIsYUFBT2xhLCtEQUFTLENBQUMsS0FBS25JLEtBQUwsQ0FBV3FpQixXQUFaLENBQWhCO0FBQ0Q7O0FBQ0QsV0FBTyxJQUFQO0FBQ0QsR0F2SnNCOztBQXlKdkI7Ozs7Ozs7QUFPQTRGLGdCQUFjLEVBQUUsd0JBQVVsSCxNQUFWLEVBQWtCO0FBQ2hDLFFBQU1uaEIsTUFBTSxHQUFHO0FBQUNtaEIsWUFBTSxFQUFFQTtBQUFULEtBQWY7QUFDQSxRQUFNb08sS0FBSyxHQUFHLEtBQUtULGdCQUFMLEVBQWQ7QUFDQSxRQUFJVSxTQUFKOztBQUVBLFFBQUksQ0FBQyxLQUFLcHZCLEtBQUwsQ0FBV21oQixJQUFYLENBQWdCSixNQUFoQixFQUF3QitOLFNBQTdCLEVBQXdDO0FBQ3RDLGFBQU8sSUFBUDtBQUNEOztBQUVELFFBQUksQ0FBQ0ssS0FBTCxFQUFZO0FBQ1Z2dkIsWUFBTSxDQUFDb2hCLFNBQVAsR0FBbUIsU0FBbkI7QUFDQSxhQUFPcGhCLE1BQVA7QUFDRDs7QUFFRCxRQUFJLEtBQUtJLEtBQUwsQ0FBV2lpQixlQUFmLEVBQWdDO0FBQzlCbU4sZUFBUyxHQUFHem1CLCtEQUFTLENBQUN3bUIsS0FBRCxFQUFRLFVBQUExTSxJQUFJO0FBQUEsZUFBSUEsSUFBSSxDQUFDMUIsTUFBTCxLQUFnQm5oQixNQUFNLENBQUNtaEIsTUFBM0I7QUFBQSxPQUFaLENBQXJCOztBQUVBLFVBQUlxTyxTQUFTLEdBQUcsQ0FBWixJQUFpQkEsU0FBUyxHQUFHRCxLQUFLLENBQUN4dkIsTUFBTixHQUFlLENBQWhELEVBQW1EO0FBQ2pEQyxjQUFNLENBQUNvaEIsU0FBUCxHQUFtQixTQUFuQjtBQUNELE9BRkQsTUFFTztBQUNMcGhCLGNBQU0sQ0FBQ29oQixTQUFQLEdBQW1CbU8sS0FBSyxDQUFDQyxTQUFELENBQUwsQ0FBaUJwTyxTQUFwQztBQUNEOztBQUNELGFBQU9waEIsTUFBUDtBQUNEOztBQUVELFFBQUl1dkIsS0FBSyxDQUFDcE8sTUFBTixLQUFpQkEsTUFBckIsRUFBNkI7QUFDM0JuaEIsWUFBTSxDQUFDb2hCLFNBQVAsR0FBbUJtTyxLQUFLLENBQUNuTyxTQUF6QjtBQUNELEtBRkQsTUFFTztBQUNMcGhCLFlBQU0sQ0FBQ29oQixTQUFQLEdBQW1CLFNBQW5CO0FBQ0Q7O0FBRUQsV0FBT3BoQixNQUFQO0FBQ0QsR0FoTXNCOztBQWtNdkI7Ozs7OztBQU1Bc3FCLHFCQUFtQixFQUFFLCtCQUFZO0FBQy9CLFdBQU8sS0FBS2xxQixLQUFMLENBQVd5SixjQUFYLENBQTBCLE1BQTFCLENBQVA7QUFDRCxHQTFNc0I7O0FBNE12Qjs7Ozs7O0FBTUE0bEIsaUJBQWUsRUFBRSwyQkFBWTtBQUMzQixhQUFTQyxPQUFULENBQWlCN00sSUFBakIsRUFBdUI7QUFDckIsYUFBTyxDQUFDQSxJQUFJLENBQUMxQixNQUFOLEVBQWMwQixJQUFJLENBQUN6QixTQUFuQixDQUFQO0FBQ0Q7O0FBRUQsUUFBTUEsU0FBUyxHQUFHLEtBQUswTixnQkFBTCxFQUFsQjs7QUFDQSxRQUFJLENBQUMxTixTQUFMLEVBQWdCO0FBQ2QsYUFBTyxJQUFQO0FBQ0Q7O0FBRUQsUUFBSSxLQUFLaGhCLEtBQUwsQ0FBV2lpQixlQUFmLEVBQWdDO0FBQzlCLFVBQUksQ0FBQ2pCLFNBQVMsQ0FBQ3JoQixNQUFmLEVBQXVCO0FBQ3JCLGVBQU8sSUFBUDtBQUNEOztBQUNELGFBQU9xaEIsU0FBUyxDQUFDdlksR0FBVixDQUFjNm1CLE9BQWQsQ0FBUDtBQUNEOztBQUVELFdBQU8sQ0FBQ0EsT0FBTyxDQUFDdE8sU0FBRCxDQUFSLENBQVA7QUFDRDtBQXBPc0IsQ0FBekI7QUF1T2V5TiwrRUFBZixFOzs7Ozs7Ozs7Ozs7QUNqUEE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7OztBQVFBO0FBQ0E7QUFFQTs7OztBQUdBLElBQU1jLGlCQUFpQixHQUFHO0FBRXhCOzs7Ozs7QUFNQUMsaUJBQWUsRUFBRSx5QkFBVTdHLFFBQVYsRUFBb0I3cEIsTUFBcEIsRUFBNEI7QUFDM0MsUUFBTWttQixHQUFHLEdBQUc5WixxRUFBZSxDQUFDeWQsUUFBRCxDQUEzQixDQUQyQyxDQUczQzs7QUFDQSxRQUFJLENBQUMsS0FBSzlZLEtBQUwsQ0FBVzZULFFBQVgsQ0FBb0JqYSxjQUFwQixDQUFtQ3ViLEdBQW5DLENBQUwsRUFBOEM7QUFDNUMsV0FBS25WLEtBQUwsQ0FBVzZULFFBQVgsQ0FBb0JzQixHQUFwQixJQUEyQjtBQUN6Qm5SLFVBQUUsRUFBRThVLFFBRHFCO0FBRXpCOEcsV0FBRyxFQUFFO0FBRm9CLE9BQTNCO0FBSUQ7O0FBRUQsU0FBSzVmLEtBQUwsQ0FBVzZULFFBQVgsQ0FBb0JzQixHQUFwQixFQUF5QnlLLEdBQXpCLElBQWdDLEtBQUtDLGFBQUwsQ0FBbUI1d0IsTUFBbkIsQ0FBaEM7QUFFQSxRQUFNNndCLElBQUksR0FBRzVmLDZEQUFXLENBQUMsS0FBS3ZQLElBQU4sQ0FBWCxDQUF1QjBULGFBQXZCLG9CQUFnRDhRLEdBQWhELFNBQWI7O0FBQ0EsUUFBSTJLLElBQUosRUFBVTtBQUNSQSxVQUFJLENBQUN0YSxTQUFMLENBQWV2SSxHQUFmLENBQW1CaE8sTUFBbkI7QUFDRCxLQUZELE1BRU87QUFDTCxXQUFLd2tCLFdBQUw7QUFDRDtBQUNGLEdBM0J1Qjs7QUE2QnhCOzs7Ozs7QUFNQXNNLHNCQUFvQixFQUFFLDhCQUFVckUsU0FBVixFQUFxQnpzQixNQUFyQixFQUE2QjtBQUNqRCxRQUFNK3dCLEdBQUcsR0FBRyxLQUFLSCxhQUFMLENBQW1CNXdCLE1BQW5CLENBQVo7O0FBQ0EsUUFBSWd4QixlQUFKO0FBRmlEO0FBQUE7QUFBQTs7QUFBQTtBQUlqRCwyQkFBaUJ2RSxTQUFqQiw4SEFBNEI7QUFBQSxZQUFqQjFYLEVBQWlCO0FBQzFCLFlBQU1tUixHQUFHLEdBQUc5WixxRUFBZSxDQUFDMkksRUFBRCxDQUEzQjs7QUFFQSxZQUFJLENBQUMsS0FBS2hFLEtBQUwsQ0FBVzZULFFBQVgsQ0FBb0JqYSxjQUFwQixDQUFtQ3ViLEdBQW5DLENBQUwsRUFBOEM7QUFDNUMsZUFBS25WLEtBQUwsQ0FBVzZULFFBQVgsQ0FBb0JzQixHQUFwQixJQUEyQjtBQUN6Qm5SLGNBQUUsRUFBRkEsRUFEeUI7QUFFekI0YixlQUFHLEVBQUU7QUFGb0IsV0FBM0I7QUFJRDs7QUFFRCxhQUFLNWYsS0FBTCxDQUFXNlQsUUFBWCxDQUFvQnNCLEdBQXBCLEVBQXlCeUssR0FBekIsSUFBZ0NJLEdBQWhDOztBQUVBLFlBQUksS0FBS2hnQixLQUFMLENBQVcvTSxJQUFYLENBQWdCa2lCLEdBQWhCLENBQUosRUFBMEI7QUFDeEIsZUFBS2dGLFVBQUwsQ0FBZ0JoRixHQUFoQjs7QUFDQTtBQUNEOztBQUVEOEssdUJBQWUsR0FBRyxJQUFsQjtBQUNEO0FBdEJnRDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQXdCakQsUUFBSUEsZUFBSixFQUFxQjtBQUNuQixXQUFLeE0sV0FBTDtBQUNEO0FBQ0YsR0E5RHVCOztBQWdFeEI7Ozs7OztBQU1BeU0sb0JBQWtCLEVBQUUsNEJBQVVwSCxRQUFWLEVBQW9CN3BCLE1BQXBCLEVBQTRCO0FBQzlDLFFBQU0rd0IsR0FBRyxHQUFHLEtBQUtILGFBQUwsQ0FBbUI1d0IsTUFBbkIsQ0FBWjs7QUFDQSxRQUFNcXNCLEtBQUssR0FBR2pnQixxRUFBZSxDQUFDeWQsUUFBRCxDQUE3QixDQUY4QyxDQUk5Qzs7QUFDQSxRQUFJLENBQUMsS0FBSzlZLEtBQUwsQ0FBVzZULFFBQVgsQ0FBb0J5SCxLQUFwQixDQUFMLEVBQWlDO0FBQy9CO0FBQ0QsS0FQNkMsQ0FTOUM7OztBQUNBLFFBQUksS0FBS3RiLEtBQUwsQ0FBVzZULFFBQVgsQ0FBb0J5SCxLQUFwQixFQUEyQnNFLEdBQTNCLEdBQWlDSSxHQUFyQyxFQUEwQztBQUN4QyxXQUFLaGdCLEtBQUwsQ0FBVzZULFFBQVgsQ0FBb0J5SCxLQUFwQixFQUEyQnNFLEdBQTNCLElBQWtDSSxHQUFsQzs7QUFDQSxVQUFJLENBQUMsS0FBS2hnQixLQUFMLENBQVc2VCxRQUFYLENBQW9CeUgsS0FBcEIsRUFBMkJzRSxHQUFoQyxFQUFxQztBQUNuQztBQUNBLFlBQUksQ0FBQyxLQUFLN0YsVUFBTCxDQUFnQnVCLEtBQWhCLENBQUwsRUFBNkI7QUFDM0IsZUFBS3RCLGFBQUwsQ0FBbUJzQixLQUFuQjtBQUNEOztBQUNELGVBQU8sS0FBS3RiLEtBQUwsQ0FBVzZULFFBQVgsQ0FBb0J5SCxLQUFwQixDQUFQO0FBQ0Q7QUFDRixLQW5CNkMsQ0FxQjlDOzs7QUFDQSxRQUFNd0UsSUFBSSxHQUFHNWYsNkRBQVcsQ0FBQyxLQUFLdlAsSUFBTixDQUFYLENBQXVCMFQsYUFBdkIsb0JBQWdEaVgsS0FBaEQsU0FBYjs7QUFDQSxRQUFJd0UsSUFBSixFQUFVO0FBQ1JBLFVBQUksQ0FBQ3RhLFNBQUwsQ0FBZUMsTUFBZixDQUFzQnhXLE1BQXRCO0FBQ0Q7QUFDRixHQWhHdUI7O0FBa0d4Qjs7Ozs7OztBQU9Ba3hCLGlCQUFlLEVBQUUseUJBQVVySCxRQUFWLEVBQW9CN3BCLE1BQXBCLEVBQTRCO0FBQzNDLFFBQU1rbUIsR0FBRyxHQUFHOVoscUVBQWUsQ0FBQ3lkLFFBQUQsQ0FBM0I7O0FBQ0EsUUFBSSxLQUFLOVksS0FBTCxDQUFXNlQsUUFBWCxDQUFvQnNCLEdBQXBCLENBQUosRUFBOEI7QUFDNUIsYUFBTyxDQUFDLEtBQUtuVixLQUFMLENBQVc2VCxRQUFYLENBQW9Cc0IsR0FBcEIsRUFBeUJ5SyxHQUF6QixHQUErQixLQUFLQyxhQUFMLENBQW1CNXdCLE1BQW5CLENBQWhDLElBQThELENBQXJFO0FBQ0Q7O0FBQ0QsV0FBTyxLQUFQO0FBQ0QsR0EvR3VCOztBQWlIeEI7Ozs7OztBQU1BbXhCLGtCQUFnQixFQUFFLDBCQUFVbnhCLE1BQVYsRUFBa0I7QUFDbEMsUUFBSXFILENBQUo7QUFDQSxRQUFNeWdCLE9BQU8sR0FBRyxFQUFoQjs7QUFDQSxRQUFNaUosR0FBRyxHQUFHLEtBQUtILGFBQUwsQ0FBbUI1d0IsTUFBbkIsQ0FBWjs7QUFFQSxTQUFLcUgsQ0FBTCxJQUFVLEtBQUswSixLQUFMLENBQVc2VCxRQUFyQixFQUErQjtBQUM3QixVQUFJLEtBQUs3VCxLQUFMLENBQVc2VCxRQUFYLENBQW9CdmQsQ0FBcEIsRUFBdUJzcEIsR0FBdkIsR0FBNkJJLEdBQWpDLEVBQXNDO0FBQ3BDakosZUFBTyxDQUFDbm5CLElBQVIsQ0FBYSxLQUFLb1EsS0FBTCxDQUFXNlQsUUFBWCxDQUFvQnZkLENBQXBCLEVBQXVCME4sRUFBcEM7QUFDRDtBQUNGOztBQUNELFdBQU8rUyxPQUFQO0FBQ0QsR0FsSXVCOztBQW9JeEI7Ozs7O0FBS0E2Qyx1QkFBcUIsRUFBRSwrQkFBVTNxQixNQUFWLEVBQWtCO0FBQ3ZDLFFBQUlxSCxDQUFKOztBQUNBLFFBQU0wcEIsR0FBRyxHQUFHLEtBQUtILGFBQUwsQ0FBbUI1d0IsTUFBbkIsQ0FBWjs7QUFFQSxTQUFLcUgsQ0FBTCxJQUFVLEtBQUswSixLQUFMLENBQVc2VCxRQUFyQixFQUErQjtBQUM3QixVQUFJLEtBQUs3VCxLQUFMLENBQVc2VCxRQUFYLENBQW9CdmQsQ0FBcEIsRUFBdUJzcEIsR0FBdkIsR0FBNkJJLEdBQWpDLEVBQXNDO0FBQ3BDLGFBQUtoZ0IsS0FBTCxDQUFXNlQsUUFBWCxDQUFvQnZkLENBQXBCLEVBQXVCc3BCLEdBQXZCLElBQThCSSxHQUE5QjtBQUNEOztBQUNELFVBQUksQ0FBQyxLQUFLaGdCLEtBQUwsQ0FBVzZULFFBQVgsQ0FBb0J2ZCxDQUFwQixFQUF1QnNwQixHQUE1QixFQUFpQztBQUMvQixZQUFJLENBQUMsS0FBSzdGLFVBQUwsQ0FBZ0J6akIsQ0FBaEIsQ0FBRCxJQUF1QixDQUFDLEtBQUt1a0IsVUFBTCxDQUFnQnZrQixDQUFoQixDQUE1QixFQUFnRDtBQUM5QyxlQUFLMGpCLGFBQUwsQ0FBbUIxakIsQ0FBbkI7QUFDRDs7QUFDRCxlQUFPLEtBQUswSixLQUFMLENBQVc2VCxRQUFYLENBQW9CdmQsQ0FBcEIsQ0FBUDtBQUNEO0FBQ0Y7O0FBQ0QsUUFBTXdwQixJQUFJLEdBQUc1Ziw2REFBVyxDQUFDLEtBQUt2UCxJQUFOLENBQVgsQ0FBdUIwVCxhQUF2QiwwQkFBdURwVixNQUF2RCxFQUFiOztBQUNBLFFBQUk2d0IsSUFBSixFQUFVO0FBQ1JBLFVBQUksQ0FBQ3RhLFNBQUwsQ0FBZUMsTUFBZixDQUFzQnhXLE1BQXRCO0FBQ0Q7QUFDRixHQTVKdUI7O0FBOEp4Qjs7Ozs7OztBQU9Bb3hCLG9CQUFrQixFQUFFLDRCQUFVbEwsR0FBVixFQUFlO0FBQ2pDLFFBQU1tTCxLQUFLLEdBQUcsRUFBZDtBQUNBLFFBQU16TSxRQUFRLEdBQUcsS0FBSzdULEtBQUwsQ0FBVzZULFFBQVgsQ0FBb0JzQixHQUFwQixLQUE0QixLQUFLblYsS0FBTCxDQUFXNlQsUUFBWCxDQUFvQnNCLEdBQXBCLEVBQXlCeUssR0FBdEU7O0FBRUEsUUFBSSxDQUFDL0wsUUFBTCxFQUFlO0FBQ2IsYUFBTyxFQUFQO0FBQ0Q7O0FBRUQsU0FBSyxJQUFNdmQsQ0FBWCxJQUFnQixLQUFLMEosS0FBTCxDQUFXNFQsU0FBM0IsRUFBc0M7QUFDcEMsVUFBSUMsUUFBUSxHQUFHLEtBQUs3VCxLQUFMLENBQVc0VCxTQUFYLENBQXFCdGQsQ0FBckIsQ0FBZixFQUF3QztBQUN0Q2dxQixhQUFLLENBQUMxd0IsSUFBTixDQUFXMEcsQ0FBWDtBQUNEO0FBQ0Y7O0FBRUQsV0FBT2dxQixLQUFQO0FBQ0QsR0FwTHVCOztBQXNMeEI7Ozs7Ozs7QUFPQVQsZUFBYSxFQUFFLHVCQUFVVSxVQUFWLEVBQXNCO0FBQ25DLFFBQUl0eEIsTUFBSjtBQUNBLFFBQUlzb0IsTUFBSjs7QUFFQSxRQUFJLEtBQUt2WCxLQUFMLENBQVc0VCxTQUFYLENBQXFCaGEsY0FBckIsQ0FBb0MybUIsVUFBcEMsQ0FBSixFQUFxRDtBQUNuRHR4QixZQUFNLEdBQUcsS0FBSytRLEtBQUwsQ0FBVzRULFNBQVgsQ0FBcUIyTSxVQUFyQixDQUFUO0FBQ0QsS0FGRCxNQUVPO0FBQ0w7QUFDQWhKLFlBQU0sR0FBR3JoQiwwREFBSSxDQUFDLEtBQUs4SixLQUFMLENBQVc0VCxTQUFaLENBQWI7O0FBQ0EsVUFBSTJELE1BQU0sR0FBRyxFQUFiLEVBQWlCO0FBQ2YsY0FBTXpvQixLQUFLLENBQUMsNEJBQUQsQ0FBWDtBQUNEOztBQUNERyxZQUFNLEdBQUcsS0FBSytRLEtBQUwsQ0FBVzRULFNBQVgsQ0FBcUIyTSxVQUFyQixJQUFtQyxLQUFLaEosTUFBakQ7QUFDRDs7QUFFRCxXQUFPdG9CLE1BQVA7QUFDRCxHQTdNdUI7O0FBK014Qjs7Ozs7O0FBTUFvc0IsdUJBQXFCLEVBQUUsaUNBQVk7QUFDakMsUUFBTW1GLEdBQUcsR0FBRyxFQUFaO0FBQ0EsUUFBSWxxQixDQUFKOztBQUVBLFNBQUtBLENBQUwsSUFBVSxLQUFLMEosS0FBTCxDQUFXNlQsUUFBckIsRUFBK0I7QUFDN0IyTSxTQUFHLENBQUM1d0IsSUFBSixDQUFTLEtBQUtvUSxLQUFMLENBQVc2VCxRQUFYLENBQW9CdmQsQ0FBcEIsRUFBdUIwTixFQUFoQztBQUNEOztBQUNELFdBQU93YyxHQUFQO0FBQ0Q7QUE3TnVCLENBQTFCO0FBZ09lZCxnRkFBZixFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzlPQTs7Ozs7OztBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBLElBQU1lLFdBQVcsR0FBRztBQUNsQjs7Ozs7QUFLQXpLLGtCQU5rQiw0QkFNRHRtQixLQU5DLEVBTU07QUFDdEIsUUFBTXlCLE1BQU0sR0FBR3pCLEtBQUssQ0FBQ3lCLE1BQXJCO0FBQ0EsUUFBTXV2QixTQUFTLEdBQUcva0IsNkRBQU8sQ0FBQ3hLLE1BQUQsRUFBUyxPQUFULENBQVAsQ0FBeUIsQ0FBekIsQ0FBbEI7QUFFQSxRQUFJeUssT0FBSjs7QUFFQSxRQUFJekssTUFBTSxDQUFDcVUsU0FBUCxDQUFpQnBVLFFBQWpCLENBQTBCLFlBQTFCLENBQUosRUFBNkM7QUFDM0N3SyxhQUFPLEdBQUdsTSxLQUFLLENBQUN5QixNQUFoQjtBQUNELEtBRkQsTUFFTztBQUNMeUssYUFBTyxHQUFHRCw2REFBTyxDQUFDeEssTUFBRCxFQUFTLGVBQVQsQ0FBUCxDQUFpQyxDQUFqQyxDQUFWO0FBQ0Q7O0FBRUQsUUFDRXlLLE9BQU8sSUFDSixFQUFFOGtCLFNBQVMsSUFBSUEsU0FBUyxDQUFDQyxZQUFWLENBQXVCLFVBQXZCLENBQWYsQ0FGTCxFQUdFO0FBQ0EsV0FBS0MsZ0JBQUwsQ0FBc0JseEIsS0FBdEIsRUFBNkJrTSxPQUE3QixFQUFzQyxDQUFDOGtCLFNBQVMsSUFBSWh4QixLQUFLLENBQUN5QixNQUFwQixFQUE0QmtWLFlBQTVCLENBQXlDLEtBQXpDLENBQXRDO0FBQ0Q7QUFDRixHQXhCaUI7O0FBMEJsQjs7Ozs7OztBQU9BdWEsa0JBakNrQiw0QkFpQ0RseEIsS0FqQ0MsRUFpQ01rTSxPQWpDTixFQWlDZWlsQixHQWpDZixFQWlDb0I7QUFDcEMsUUFBTUMsS0FBSyxHQUFHbGxCLE9BQU8sQ0FBQ3lLLFlBQVIsQ0FBcUIsS0FBckIsQ0FBZDtBQUNBLFFBQU04TyxHQUFHLEdBQUd2WixPQUFPLENBQUNxSyxVQUFSLENBQW1CSSxZQUFuQixDQUFnQyxLQUFoQyxDQUFaO0FBQ0EsUUFBTTBhLFlBQVksR0FBRyxLQUFLNXdCLEtBQUwsQ0FBV21oQixJQUFYLENBQWdCd1AsS0FBaEIsQ0FBckI7QUFDQSxRQUFNaEksUUFBUSxHQUFHLEtBQUs5WSxLQUFMLENBQVdnVSxXQUFYLENBQXVCbUIsR0FBdkIsRUFBNEJuUixFQUE3Qzs7QUFDQSxRQUFNbkcsTUFBTSxHQUFHLEtBQUt1YixxQkFBTCxDQUEyQmpFLEdBQTNCLENBQWYsQ0FMb0MsQ0FPcEM7OztBQUNBLFFBQUkwTCxHQUFKLEVBQVM7QUFDUEUsa0JBQVksQ0FBQzdJLFdBQWIsQ0FBeUIySSxHQUF6QixFQUE4Qm54QixLQUE5QixFQUFxQ29wQixRQUFyQyxFQUErQ2piLE1BQS9DLEVBQXVELElBQXZEO0FBQ0QsS0FGRCxNQUVPLElBQUlrakIsWUFBWSxDQUFDdkwsT0FBakIsRUFBMEI7QUFDL0J1TCxrQkFBWSxDQUFDdkwsT0FBYixDQUFxQjlsQixLQUFyQixFQUE0Qm9wQixRQUE1QixFQUFzQ2piLE1BQXRDLEVBQThDLElBQTlDO0FBQ0QsS0FabUMsQ0FjcEM7OztBQUNBLFFBQUksS0FBSzFOLEtBQUwsQ0FBV21oQixJQUFYLENBQWdCd1AsS0FBaEIsRUFBdUI1TSxNQUEzQixFQUFtQztBQUNqQyxXQUFLMEgsYUFBTCxDQUFtQmhnQixPQUFuQixFQUE0QnVaLEdBQTVCLEVBQWlDMkwsS0FBakM7QUFDRDtBQUNGLEdBbkRpQjtBQXFEbEI7QUFDQXBMLHdCQXREa0Isa0NBc0RLTCxHQXRETCxFQXNEVTNsQixLQXREVixFQXNEaUI7QUFDakMsUUFBTXlCLE1BQU0sR0FBR3pCLEtBQUssQ0FBQ3lCLE1BQXJCO0FBQ0EsUUFBTXV2QixTQUFTLEdBQUcva0IsNkRBQU8sQ0FBQ3hLLE1BQUQsRUFBUyxPQUFULENBQVAsQ0FBeUIsQ0FBekIsQ0FBbEI7QUFDQSxRQUFNMHZCLEdBQUcsR0FBRyxDQUFDSCxTQUFTLElBQUl2dkIsTUFBZCxFQUFzQmtWLFlBQXRCLENBQW1DLEtBQW5DLENBQVo7QUFDQSxRQUFJNkgsT0FBSjs7QUFFQSxRQUFJMlMsR0FBRyxJQUFJeEwsR0FBRyxDQUFDNkMsV0FBZixFQUE0QjtBQUMxQmhLLGFBQU8sR0FBR21ILEdBQUcsQ0FBQzZDLFdBQUosQ0FBZ0IySSxHQUFoQixDQUFWOztBQUNBLFVBQUkzUyxPQUFKLEVBQWE7QUFDWCxlQUFPQSxPQUFPLENBQUN4ZSxLQUFELEVBQVEsSUFBUixDQUFkO0FBQ0Q7QUFDRjs7QUFFRCxRQUFJMmxCLEdBQUcsQ0FBQ0csT0FBUixFQUFpQjtBQUNmSCxTQUFHLENBQUNHLE9BQUosQ0FBWTlsQixLQUFaLEVBQW1CLElBQW5CO0FBQ0Q7QUFDRixHQXRFaUI7O0FBd0VsQjs7O0FBR0ErakIsYUFBVztBQUFBO0FBQUE7QUFBQSwyRUFBRTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDWCxtQkFBSzFTLFFBQUwsQ0FBYztBQUFDc1QsMEJBQVUsRUFBRTtBQUFiLGVBQWQ7O0FBRFcsa0JBR04sS0FBS2xrQixLQUFMLENBQVd3SyxLQUhMO0FBQUE7QUFBQTtBQUFBOztBQUFBOztBQUFBO0FBT0xnWCx1QkFQSyxHQU9PLEtBQUs2TCxZQUFMLEVBUFA7QUFBQTtBQUFBO0FBQUEscUJBV0csS0FBSzFhLFNBQUwsQ0FBZTtBQUN6QndVLHFCQUFLLEVBQUUzRixTQURrQjtBQUV6QjRGLHNCQUFNLEVBQUUsS0FBS3ZYLEtBQUwsQ0FBV3lSLElBQVgsR0FBa0JFLFNBRkQ7QUFHekJpQixvQkFBSSxFQUFFLEtBQUs0TSxlQUFMLEVBSG1CO0FBSXpCL2lCLHNCQUFNLEVBQUUsS0FBSzRiLGtCQUFMLEVBSmlCO0FBS3pCMkkscUJBQUssRUFBRSxLQUFLN0YsaUJBQUw7QUFMa0IsZUFBZixDQVhIOztBQUFBO0FBV1RwbUIsaUJBWFM7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTs7QUFBQSxrQkFtQkgsdUJBQWF6SCw2REFuQlY7QUFBQTtBQUFBO0FBQUE7O0FBQUE7O0FBQUE7QUFBQTs7QUFBQTtBQUFBLGtCQXlCTixLQUFLb1csVUF6QkM7QUFBQTtBQUFBO0FBQUE7O0FBQUE7O0FBQUE7QUFBQSxvQkE2QlAsS0FBSzhaLFlBQUwsTUFBdUIsQ0FBQ3pvQixHQUFHLENBQUM2RSxjQUFKLENBQW1CLE9BQW5CLENBN0JqQjtBQUFBO0FBQUE7QUFBQTs7QUFBQSxvQkE4QkgsSUFBSTlLLEtBQUosQ0FBVSxpRUFBVixDQTlCRzs7QUFBQTtBQWlDWDtBQUNBO0FBQ00yaUIsa0JBbkNLLEdBbUNFLEtBQUs4TCxVQUFMLENBQWdCLEtBQUt2ZCxLQUFMLENBQVd5UixJQUEzQixFQUFpQyxLQUFLK0wsWUFBTCxFQUFqQyxFQUFzRHpvQixHQUFHLENBQUM0ZSxLQUExRCxDQW5DRjs7QUFBQSxvQkFvQ1BsQyxJQUFJLEtBQUssS0FBS3pSLEtBQUwsQ0FBV3lSLElBcENiO0FBQUE7QUFBQTtBQUFBOztBQXFDVCxtQkFBS3pSLEtBQUwsQ0FBV3lSLElBQVgsR0FBa0JBLElBQWxCO0FBQ0EsbUJBQUtnQyxXQUFMO0FBdENTOztBQUFBO0FBMENMeGdCLGtCQTFDSyxHQTBDRSxLQUFLZ29CLGtCQUFMLENBQXdCbG1CLEdBQUcsQ0FBQ2dpQixPQUE1QixDQTFDRjtBQTJDTGlLLG1CQTNDSyxHQTJDRyxLQUFLL0Ysa0JBQUwsQ0FBd0JsbUIsR0FBRyxDQUFDa3NCLFlBQUosSUFBb0IsRUFBNUMsQ0EzQ0g7QUE0Q0x2Rix1QkE1Q0ssR0E0Q09wc0IsTUFBTSxDQUFDNkcsSUFBUCxDQUFZbEQsSUFBSSxDQUFDOGpCLE9BQWpCLEVBQTBCemYsTUFBMUIsQ0FBaUNoSSxNQUFNLENBQUM2RyxJQUFQLENBQVk2cUIsS0FBSyxDQUFDakssT0FBbEIsQ0FBakMsQ0E1Q1A7QUFBQTtBQUFBLHFCQThDTHhpQixpRUFBUyxDQUFDLEtBQUt3TSxRQUFMLENBQWMxUSxJQUFkLENBQW1CLElBQW5CLENBQUQsRUFBMkIsSUFBM0IsQ0FBVCxDQUEwQztBQUM5QzRDLG9CQUFJLEVBQUUzRCxNQUFNLENBQUN3SSxNQUFQLENBQWMsRUFBZCxFQUFrQjdFLElBQUksQ0FBQzhqQixPQUF2QixFQUFnQ2lLLEtBQUssQ0FBQ2pLLE9BQXRDLENBRHdDO0FBRTlDOUMsdUJBQU8sRUFBRTNrQixNQUFNLENBQUM2RyxJQUFQLENBQVlsRCxJQUFJLENBQUM4akIsT0FBakIsQ0FGcUM7QUFHOUNwRCxxQkFBSyxFQUFFNWUsR0FBRyxDQUFDNGUsS0FIbUM7QUFJOUNJLHNCQUFNLEVBQUVoZixHQUFHLENBQUNnZixNQUprQztBQUs5Q0MsMkJBQVcsRUFBRTFrQixNQUFNLENBQUN3SSxNQUFQLENBQWMsRUFBZCxFQUFrQmtwQixLQUFLLENBQUM5RixJQUF4QixFQUE4QmpvQixJQUFJLENBQUNpb0IsSUFBbkMsQ0FMaUM7QUFNOUNwZSxzQkFBTSxFQUFFckQsMERBQUksQ0FBQyxLQUFLdUcsS0FBTCxDQUFXbEQsTUFBWixFQUFvQjRlLFNBQXBCLENBTmtDO0FBTzlDOWdCLHVCQUFPLEVBQUVuQiwwREFBSSxDQUFDLEtBQUt1RyxLQUFMLENBQVdwRixPQUFaLEVBQXFCOGdCLFNBQXJCLENBUGlDO0FBUTlDN0gsd0JBQVEsRUFBRXBhLDBEQUFJLENBQUMsS0FBS3VHLEtBQUwsQ0FBVzZULFFBQVosRUFBc0I2SCxTQUF0QjtBQVJnQyxlQUExQyxDQTlDSzs7QUFBQTtBQXlEWCxtQkFBSzVHLFdBQUw7O0FBQ0EsbUJBQUsvVCxRQUFMLENBQWM7QUFBQ3NULDBCQUFVLEVBQUU7QUFBYixlQUFkOztBQTFEVztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxLQUFGOztBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBLEtBM0VPO0FBd0lsQmtCLG9CQXhJa0IsOEJBd0lDbUQsVUF4SUQsRUF3SWE7QUFDN0IsUUFBTXdJLFFBQVEsR0FBRyxPQUFPeEksVUFBUCxLQUFzQixVQUF0QixHQUFtQ0EsVUFBVSxDQUFDLElBQUQsQ0FBN0MsR0FBc0RBLFVBQXZFOztBQUNBLFFBQUl3SSxRQUFRLEtBQUtscEIsU0FBakIsRUFBNEI7QUFDMUIsYUFBTyxFQUFQO0FBQ0Q7O0FBQ0QsV0FBT2twQixRQUFQO0FBQ0QsR0E5SWlCO0FBZ0psQkMsZUFoSmtCLHlCQWdKSjFLLFFBaEpJLEVBZ0pNNVksTUFoSk4sRUFnSmM7QUFDOUIsUUFBSWxJLEtBQUo7QUFDQSxRQUFJK0IsSUFBSjtBQUNBLFFBQUlwQixDQUFKO0FBQ0EsUUFBTThxQixhQUFhLEdBQUcsRUFBdEI7QUFDQSxRQUFNbFEsTUFBTSxHQUFHLEtBQUsvZ0IsS0FBTCxDQUFXbWhCLElBQVgsQ0FBZ0JtRixRQUFoQixDQUFmO0FBQ0EsUUFBTTRLLFlBQVksR0FBRyxDQUFDblEsTUFBTSxDQUFDdFgsY0FBUCxDQUFzQixRQUF0QixDQUFELElBQW9Dc1gsTUFBTSxDQUFDbFksTUFBaEU7QUFDQSxRQUFNeUQsTUFBTSxHQUFHeVUsTUFBTSxDQUFDemYsTUFBUCxDQUFjMEYsS0FBZCxDQUFvQixDQUFwQixFQUF1QixDQUFDLENBQXhCLENBQWY7O0FBRUEsU0FBS2IsQ0FBQyxHQUFHLENBQVQsRUFBWUEsQ0FBQyxHQUFHbUcsTUFBTSxDQUFDM00sTUFBdkIsRUFBK0J3RyxDQUFDLEVBQWhDLEVBQW9DO0FBQ2xDWCxXQUFLLEdBQUc4RyxNQUFNLENBQUNuRyxDQUFELENBQWQ7QUFDQW9CLFVBQUksR0FBRyxxRUFBT21HLE1BQU0sQ0FBQ2xJLEtBQUQsQ0FBaEIsQ0FBSjs7QUFFQSxVQUFJMHJCLFlBQUosRUFBa0I7QUFDaEIsWUFBSTNwQixJQUFJLEtBQUssUUFBYixFQUF1QjtBQUNyQjBwQix1QkFBYSxDQUFDenJCLEtBQUQsQ0FBYixHQUF1QnFELDREQUFNLENBQUM2RSxNQUFNLENBQUNsSSxLQUFELENBQVAsQ0FBN0I7QUFDQTtBQUNEOztBQUVELFlBQUkrQixJQUFJLEtBQUssUUFBVCxJQUFxQm1HLE1BQU0sQ0FBQ2xJLEtBQUQsQ0FBM0IsSUFBc0MsQ0FBQyxLQUFLcUssS0FBTCxDQUFXbVUsb0JBQVgsQ0FBZ0NzQyxRQUFoQyxDQUEzQyxFQUFzRjtBQUNwRixlQUFLelcsS0FBTCxDQUFXbVUsb0JBQVgsQ0FBZ0NzQyxRQUFoQyxJQUE0QyxJQUE1QztBQUNBcmIsaUJBQU8sQ0FBQ2lCLEtBQVIsQ0FDRSxxR0FDaUVvYSxRQURqRSwrRkFHZUEsUUFIZiw0Q0FERjtBQU1EO0FBQ0Y7O0FBRUQySyxtQkFBYSxDQUFDenJCLEtBQUQsQ0FBYixHQUF1QmtJLE1BQU0sQ0FBQ2xJLEtBQUQsQ0FBN0I7QUFDRDs7QUFFRCxXQUFPeXJCLGFBQVA7QUFDRCxHQWxMaUI7O0FBb0xsQjs7Ozs7Ozs7OztBQVVBRSxjQTlMa0Isd0JBOExMN0ssUUE5TEssRUE4TEs1WSxNQTlMTCxFQThMYTJULFFBOUxiLEVBOEx1QitQLGFBOUx2QixFQThMc0M7QUFDdEQsUUFBTTl2QixNQUFNLEdBQUdnSiwwREFBSSxDQUFDLEtBQUt0SyxLQUFMLENBQVdtaEIsSUFBWCxDQUFnQm1GLFFBQWhCLEVBQTBCaGxCLE1BQTNCLENBQW5CO0FBQ0EsUUFBTXl2QixRQUFRLEdBQUd6dkIsTUFBTSxDQUNyQixLQUFLMHZCLGFBQUwsQ0FBbUIxSyxRQUFuQixFQUE2QjVZLE1BQTdCLENBRHFCLEVBRXJCMlQsUUFGcUIsRUFHckIsS0FBSzJQLGFBQUwsQ0FBbUIxSyxRQUFuQixFQUE2QjhLLGFBQTdCLENBSHFCLEVBSXJCLElBSnFCLENBQXZCO0FBTUEscUJBQVU5b0IsK0RBQVMsQ0FBQ3lvQixRQUFELENBQVQsR0FBc0JBLFFBQXRCLEdBQWlDLEVBQTNDO0FBQ0QsR0F2TWlCOztBQXlNbEI7Ozs7Ozs7O0FBUUFNLGFBak5rQix1QkFpTk5sRyxLQWpOTSxFQWlOQ3pxQixTQWpORCxFQWlOWTtBQUM1QixRQUFJaXdCLEtBQUo7O0FBQ0EsUUFBTWpqQixNQUFNLEdBQUcsS0FBS3ViLHFCQUFMLENBQTJCa0MsS0FBM0IsQ0FBZjs7QUFDQSxRQUFNaUcsYUFBYSxHQUFHLEtBQUt2aEIsS0FBTCxDQUFXL00sSUFBWCxDQUFnQnFvQixLQUFoQixLQUEwQixJQUFoRDtBQUNBLFFBQU05SixRQUFRLEdBQUcsS0FBSytLLFVBQUwsQ0FBZ0IsS0FBS3ZjLEtBQUwsQ0FBV2dVLFdBQVgsQ0FBdUJzSCxLQUF2QixFQUE4QnRYLEVBQTlDLENBQWpCO0FBQ0EsUUFBTXlkLFlBQVksR0FBR3pKLGlEQUFVLENBQzdCbm5CLFNBRDZCLEVBRTdCLEtBQUt3dkIsa0JBQUwsQ0FBd0IvRSxLQUF4QixFQUErQm5nQixJQUEvQixDQUFvQyxHQUFwQyxDQUY2QixFQUc3QjtBQUFDLDZCQUF1QnFXO0FBQXhCLEtBSDZCLENBQS9CO0FBS0EsUUFBSWtRLElBQUksdUJBQWVwRyxLQUFmLHdCQUFnQ21HLFlBQWhDLFFBQVI7O0FBQ0Esb0NBQWNueUIsTUFBTSxDQUFDNkcsSUFBUCxDQUFZLEtBQUtoRyxLQUFMLENBQVdtaEIsSUFBdkIsQ0FBZCxrQ0FBNEM7QUFBdkN3UCxXQUF1Qzs7QUFDMUMsVUFBSSxLQUFLbEosYUFBTCxDQUFtQmtKLEtBQW5CLENBQUosRUFBK0I7QUFDN0IsWUFBTWEsYUFBYSxHQUFHM0osaURBQVUsQ0FBQyxLQUFLRCxlQUFMLENBQXFCK0ksS0FBckIsQ0FBRCxFQUE4QjtBQUM1RCx3QkFBYyxJQUQ4QztBQUU1RCwyQkFBaUIsS0FBS2pHLFVBQUwsQ0FBZ0JTLEtBQWhCLEVBQXVCLEtBQUtQLGFBQUwsQ0FBbUIrRixLQUFuQixDQUF2QixDQUYyQztBQUc1RCx5QkFBZSxLQUFLbEcsU0FBTCxDQUFlVSxLQUFmLEVBQXNCLEtBQUtQLGFBQUwsQ0FBbUIrRixLQUFuQixDQUF0QixDQUg2QztBQUk1RCwyQkFBaUIsS0FBS3BHLFdBQUwsQ0FBaUJZLEtBQWpCLEVBQXdCLEtBQUtQLGFBQUwsQ0FBbUIrRixLQUFuQixDQUF4QjtBQUoyQyxTQUE5QixDQUFoQztBQU1BWSxZQUFJLG9DQUNTWixLQURULHdCQUMwQmEsYUFEMUIsOEJBRUUsS0FBS0wsWUFBTCxDQUFrQlIsS0FBbEIsRUFBeUJqakIsTUFBekIsRUFBaUMyVCxRQUFqQyxFQUEyQytQLGFBQTNDLENBRkYsc0JBQUo7QUFJRDtBQUNGOztBQUNELHFCQUFVRyxJQUFWO0FBQ0QsR0EzT2lCOztBQTZPbEI7Ozs7O0FBS0E1TSxhQWxQa0IseUJBa1BKO0FBQ1osUUFBSSxDQUFDLEtBQUs5VSxLQUFMLENBQVcvTSxJQUFoQixFQUFzQjtBQUNwQjtBQUNEOztBQUVELFFBQUlxRCxDQUFKO0FBQ0EsUUFBSTZlLEdBQUo7QUFDQSxRQUFJeU0sU0FBUyxHQUFHLEVBQWhCO0FBQ0EsUUFBSUMsUUFBUSxHQUFHLEVBQWY7QUFDQSxRQUFNQyxNQUFNLEdBQUcxbkIsMkRBQUssQ0FBQyxLQUFLNEYsS0FBTCxDQUFXZ1UsV0FBWixDQUFMLENBQThCcEIsSUFBOUIsQ0FBbUMsVUFBQzljLENBQUQsRUFBSUMsQ0FBSjtBQUFBLGFBQVVELENBQUMsQ0FBQyxDQUFELENBQUQsQ0FBS3dMLEtBQUwsR0FBYXZMLENBQUMsQ0FBQyxDQUFELENBQUQsQ0FBS3VMLEtBQTVCO0FBQUEsS0FBbkMsQ0FBZjs7QUFFQSxTQUFLaEwsQ0FBQyxHQUFHLENBQVQsRUFBWUEsQ0FBQyxHQUFHd3JCLE1BQU0sQ0FBQ2h5QixNQUF2QixFQUErQndHLENBQUMsRUFBaEMsRUFBb0M7QUFDbEM2ZSxTQUFHLEdBQUcyTSxNQUFNLENBQUN4ckIsQ0FBRCxDQUFOLENBQVUsQ0FBVixDQUFOOztBQUNBLFVBQUksS0FBS3lqQixVQUFMLENBQWdCNUUsR0FBaEIsQ0FBSixFQUEwQjtBQUN4QjBNLGdCQUFRLElBQUksS0FBS0wsV0FBTCxDQUFpQnJNLEdBQWpCLENBQVo7QUFDRCxPQUZELE1BRU8sSUFBSSxLQUFLMEYsVUFBTCxDQUFnQjFGLEdBQWhCLEtBQXdCLEtBQUtrTCxrQkFBTCxDQUF3QmxMLEdBQXhCLEVBQTZCcmxCLE1BQXpELEVBQWlFO0FBQ3RFOHhCLGlCQUFTLElBQUksS0FBS0osV0FBTCxDQUFpQnJNLEdBQWpCLEVBQXNCLFFBQXRCLENBQWI7QUFDRDtBQUNGOztBQUVELFNBQUtlLEtBQUwsQ0FBVzZMLFNBQVgsR0FBdUJILFNBQVMsR0FBR0MsUUFBbkM7QUFDRCxHQXZRaUI7O0FBeVFsQjs7Ozs7OztBQU9BcEgsY0FoUmtCLHdCQWdSTHRGLEdBaFJLLEVBZ1JBNk0sS0FoUkEsRUFnUk87QUFDdkI7QUFDQSxRQUFJLENBQUMsS0FBSzFKLHFCQUFMLENBQTJCMEosS0FBM0IsQ0FBTCxFQUF3QztBQUN0QztBQUNEOztBQUVELFFBQU14USxRQUFRLEdBQUcsS0FBSytLLFVBQUwsQ0FBZ0IsS0FBS3ZjLEtBQUwsQ0FBV2dVLFdBQVgsQ0FBdUJtQixHQUF2QixFQUE0Qm5SLEVBQTVDLENBQWpCLENBTnVCLENBUXZCOztBQVJ1QjtBQUFBO0FBQUE7O0FBQUE7QUFTdkIsMkJBQXFCLEtBQUt1VSxvQkFBTCxDQUEwQnlKLEtBQTFCLENBQXJCLDhIQUF1RDtBQUFBLFlBQTVDOVEsTUFBNEM7O0FBQ3JELFlBQUksS0FBSzBHLGFBQUwsQ0FBbUIxRyxNQUFuQixLQUE4QixDQUFDLEtBQUs2SyxnQkFBTCxDQUFzQjVHLEdBQXRCLEVBQTJCakUsTUFBM0IsQ0FBbkMsRUFBdUU7QUFDckUsZUFBS3NMLFdBQUwsQ0FBaUJySCxHQUFqQixFQUFzQmpFLE1BQXRCLEVBQThCTSxRQUE5QjtBQUNEO0FBQ0Y7QUFic0I7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQWN4QixHQTlSaUI7QUFnU2xCZ0ssV0FoU2tCLHFCQWdTUkYsS0FoU1EsRUFnU0Q7QUFDZnBiLGlFQUFXLENBQUMsS0FBS3ZQLElBQU4sQ0FBWCxDQUF1QnN4QixTQUF2QixDQUFpQzNHLEtBQWpDO0FBQ0QsR0FsU2lCO0FBb1NsQm5GLGVBcFNrQix5QkFvU0orTCxZQXBTSSxFQW9TVTtBQUMxQixRQUFJQyxlQUFlLEdBQUcsS0FBdEI7QUFDQSxRQUFJN3JCLENBQUo7QUFDQSxRQUFJekYsU0FBSjtBQUNBLFFBQUl1eEIsYUFBYSxHQUFHLEVBQXBCOztBQUNBLFFBQU1wZ0IsTUFBTSxHQUFHLEtBQUtpVCxXQUFMLEVBQWYsQ0FMMEIsQ0FPMUI7OztBQUNBLFFBQUksS0FBS2pWLEtBQUwsQ0FBVytULE1BQWYsRUFBdUI7QUFDckIsd0NBQVV6a0IsTUFBTSxDQUFDNkcsSUFBUCxDQUFZLEtBQUtoRyxLQUFMLENBQVdtaEIsSUFBdkIsQ0FBVixxQ0FBd0M7QUFBbkNoYixTQUFtQzs7QUFDdEMsWUFBSSxDQUFDLEtBQUtzaEIsYUFBTCxDQUFtQnRoQixDQUFuQixDQUFMLEVBQTRCO0FBQzFCO0FBQ0Q7O0FBRUR6RixpQkFBUyxHQUFHLEtBQUtWLEtBQUwsQ0FBV21oQixJQUFYLENBQWdCaGIsQ0FBaEIsRUFBbUJ6RixTQUEvQjs7QUFDQSxZQUFJQSxTQUFKLEVBQWU7QUFDYnV4Qix1QkFBYSwwQkFBa0J2eEIsU0FBbEIsUUFBYjtBQUNELFNBRkQsTUFFTztBQUNMdXhCLHVCQUFhLElBQUksTUFBakI7QUFDRDs7QUFFRCxZQUFJLEtBQUtwaUIsS0FBTCxDQUFXK1QsTUFBWCxDQUFrQm5hLGNBQWxCLENBQWlDdEQsQ0FBakMsQ0FBSixFQUF5QztBQUN2QzhyQix1QkFBYSxJQUFJLEtBQUtkLFlBQUwsQ0FBa0JockIsQ0FBbEIsRUFBcUIsS0FBSzBKLEtBQUwsQ0FBVytULE1BQWhDLEVBQXdDLEtBQXhDLEVBQStDLEtBQUsvVCxLQUFMLENBQVcrVCxNQUExRCxDQUFqQjtBQUNBb08seUJBQWUsR0FBRyxJQUFsQjtBQUNEOztBQUVEQyxxQkFBYSxJQUFJLE9BQWpCO0FBQ0Q7QUFDRjs7QUFFRCxRQUFJLENBQUNELGVBQUwsRUFBc0I7QUFDcEIsYUFBTyxJQUFQO0FBQ0Q7O0FBRUQsUUFBSUQsWUFBSixFQUFrQjtBQUNoQixhQUNFO0FBQU8sbUJBQVcsRUFBQyxHQUFuQjtBQUF1QixpQkFBUyxFQUFDO0FBQWpDLFNBQ0UsNkVBQVdsZ0IsTUFBTSxDQUFDa1QsUUFBbEIsQ0FERixFQUVFO0FBQUksK0JBQXVCLEVBQUU7QUFBQ1ksZ0JBQU0sRUFBRXNNO0FBQVQ7QUFBN0IsUUFGRixDQURGO0FBTUQ7O0FBRUQsV0FDRTtBQUFPLGVBQVMsRUFBQztBQUFqQixPQUNFO0FBQUksNkJBQXVCLEVBQUU7QUFBQ3RNLGNBQU0sRUFBRXNNO0FBQVQ7QUFBN0IsTUFERixDQURGO0FBS0QsR0FwVmlCO0FBc1ZsQjVGLGFBdFZrQix1QkFzVk5sQixLQXRWTSxFQXNWQ3BLLE1BdFZELEVBc1ZTcUwsVUF0VlQsRUFzVnFCO0FBQUE7O0FBQ3JDLFFBQU04RixJQUFJLEdBQUduaUIsNkRBQVcsQ0FBQyxLQUFLdlAsSUFBTixDQUFYLENBQXVCMFQsYUFBdkIsb0JBQWdEaVgsS0FBaEQsd0JBQWtFcEssTUFBbEUsT0FBYjtBQUNBLFFBQU1xUSxhQUFhLEdBQUcsS0FBS3ZoQixLQUFMLENBQVcvTSxJQUFYLENBQWdCcW9CLEtBQWhCLEtBQTBCLElBQWhEOztBQUVBLFFBQU1nSCxRQUFRLEdBQUcsS0FBS2hCLFlBQUwsQ0FBa0JwUSxNQUFsQixFQUEwQixLQUFLa0kscUJBQUwsQ0FBMkJrQyxLQUEzQixDQUExQixFQUE2RGlCLFVBQTdELEVBQXlFZ0YsYUFBekUsQ0FBakI7O0FBRUEsUUFBSTtBQUNGYyxVQUFJLENBQUNOLFNBQUwsR0FBaUJPLFFBQWpCO0FBQ0QsS0FGRCxDQUVFLE9BQU9qeEIsQ0FBUCxFQUFVLENBQ1Y7QUFDQTtBQUNBO0FBQ0Q7O0FBRURneEIsUUFBSSxDQUFDN2MsU0FBTCxDQUFlQyxNQUFmLENBQXNCLGVBQXRCLEVBQXVDLGFBQXZDLEVBQXNELGVBQXREO0FBQ0EsUUFBTThjLGFBQWEsR0FBRyxFQUF0Qjs7QUFDQSxRQUFJLEtBQUsxSCxVQUFMLENBQWdCUyxLQUFoQixFQUF1QixLQUFLUCxhQUFMLENBQW1CN0osTUFBbkIsQ0FBdkIsQ0FBSixFQUF3RDtBQUN0RHFSLG1CQUFhLENBQUMzeUIsSUFBZCxDQUFtQixlQUFuQjtBQUNEOztBQUNELFFBQUksS0FBS2dyQixTQUFMLENBQWVVLEtBQWYsRUFBc0IsS0FBS1AsYUFBTCxDQUFtQjdKLE1BQW5CLENBQXRCLENBQUosRUFBdUQ7QUFDckRxUixtQkFBYSxDQUFDM3lCLElBQWQsQ0FBbUIsYUFBbkI7QUFDRDs7QUFDRCxRQUFJLEtBQUs4cUIsV0FBTCxDQUFpQlksS0FBakIsRUFBd0IsS0FBS1AsYUFBTCxDQUFtQjdKLE1BQW5CLENBQXhCLENBQUosRUFBeUQ7QUFDdkRxUixtQkFBYSxDQUFDM3lCLElBQWQsQ0FBbUIsZUFBbkI7QUFDRDs7QUFDRCx1QkFBQXl5QixJQUFJLENBQUM3YyxTQUFMLEVBQWV2SSxHQUFmLHdCQUFzQnNsQixhQUF0QjtBQUNELEdBaFhpQjtBQWtYWnBJLFlBbFhZO0FBQUE7QUFBQTtBQUFBLDZGQWtYRGhGLEdBbFhDO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxrQkFtWFgsS0FBS25WLEtBQUwsQ0FBVy9NLElBblhBO0FBQUE7QUFBQTtBQUFBOztBQUFBOztBQUFBO0FBQUEsbUJBdVhaLEtBQUsrTSxLQUFMLENBQVcvTSxJQUFYLENBQWdCa2lCLEdBQWhCLENBdlhZO0FBQUE7QUFBQTtBQUFBOztBQXdYUjNELHNCQXhYUSxHQXdYRyxLQUFLK0ssVUFBTCxDQUFnQixLQUFLdmMsS0FBTCxDQUFXZ1UsV0FBWCxDQUF1Qm1CLEdBQXZCLEVBQTRCblIsRUFBNUMsQ0F4WEg7QUF5WFJ1Tix5QkF6WFEsR0F5WE1qaUIsTUFBTSxDQUFDNkcsSUFBUCxDQUFZLEtBQUtoRyxLQUFMLENBQVdtaEIsSUFBdkIsRUFBNkJrUixNQUE3QixDQUFvQyxLQUFLNUssYUFBekMsQ0F6WE47QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUEyWGQsZ0NBQXlCckcsV0FBekIsMkhBQXNDO0FBQTNCc0YsMEJBQTJCOztBQUNwQyxvQkFBSSxDQUFDLEtBQUtrRixnQkFBTCxDQUFzQjVHLEdBQXRCLEVBQTJCMEIsVUFBM0IsQ0FBTCxFQUE2QztBQUMzQyx1QkFBSzJGLFdBQUwsQ0FBaUJySCxHQUFqQixFQUFzQjBCLFVBQXRCLEVBQWtDckYsUUFBbEM7QUFDRDtBQUNGOztBQS9YYTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBOztBQUFBO0FBQUE7O0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBLHFCQWlZUixLQUFLaUMsV0FBTCxFQWpZUTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBLENBQXBCO0FBc1llZ04sMEVBQWYsRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3JaQTs7Ozs7OztBQVFBO0FBQ0E7QUFFQTs7Ozs7OztJQU1NL3pCLGlCOzs7OztBQUNKLCtCQUFjO0FBQUE7O0FBQUE7QUFFYjtBQUVEOzs7Ozs7Ozs7OztBQU1PO0FBQVk7QUFDakIsYUFBTzBHLE9BQU8sQ0FBQ0MsT0FBUixFQUFQO0FBQ0Q7QUFFRDs7Ozs7Ozs7Ozs7Ozs7OztBQVlLO0FBQWM7QUFDakIsYUFBT0QsT0FBTyxDQUFDQyxPQUFSLENBQWdCO0FBQ3JCMGpCLGVBQU8sRUFBRSxFQURZO0FBQ1I7QUFDYnlKLFdBQUcsRUFBRSxFQUZnQjtBQUVaO0FBQ1RTLG9CQUFZLEVBQUUsQ0FITyxDQUdMOztBQUhLLE9BQWhCLENBQVA7QUFLRDtBQUVEOzs7Ozs7Ozs7OztBQU9VO0FBQWdCO0FBQ3hCLGFBQU83dEIsT0FBTyxDQUFDQyxPQUFSLEVBQVA7QUFDRDtBQUVEOzs7Ozs7Ozs7O0FBTU87QUFBYTtBQUNsQixhQUFPRCxPQUFPLENBQUNDLE9BQVIsQ0FBZ0IsRUFBaEIsQ0FBUDtBQUNEO0FBRUQ7Ozs7Ozs7Ozs7O0FBT2M7QUFBc0I7QUFDbEMsYUFBT0QsT0FBTyxDQUFDQyxPQUFSLENBQWdCLElBQUl6SCwyRUFBSixFQUFoQixDQUFQO0FBQ0Q7QUFFRDs7Ozs7Ozs7Ozs4Q0FPMEI7QUFDeEIsYUFBTyxFQUFQO0FBQ0Q7Ozs7RUE1RTZCNEQsc0Q7O0FBK0VqQjlDLGdGQUFmLEU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDaEdBOzs7Ozs7O0FBUUE7QUFDQTtBQUNBOztJQUVNVCxtQjs7Ozs7QUFDSjs7Ozs7Ozs7Ozs7QUFXQSxpQ0FBMEI7QUFBQTs7QUFBQSxRQUFkeVUsT0FBYyx1RUFBSixFQUFJOztBQUFBOztBQUN4QjtBQUVBLFVBQUt5SSxLQUFMLEdBQWE3USxnRUFBUyxDQUFDb0ksT0FBTyxDQUFDek4sSUFBVCxDQUFULElBQTJCLEVBQXhDO0FBQ0EsVUFBS3d2QixHQUFMLEdBQVcsQ0FBWDtBQUNBLFVBQUtDLGVBQUwsR0FBdUJoaUIsT0FBTyxDQUFDaWlCLGNBQS9COztBQUNBLFFBQUlqaUIsT0FBTyxDQUFDdUksVUFBWixFQUF3QjtBQUN0QnRXLGlFQUFJLENBQUMsOERBQUQsQ0FBSjtBQUNEOztBQUNELFVBQUt1YSxVQUFMLEdBQWtCeE0sT0FBTyxDQUFDekMsU0FBUixJQUFxQnlDLE9BQU8sQ0FBQ3VJLFVBQTdCLElBQTJDLElBQUl6ZCxvRUFBSixFQUE3RDtBQUNBLFVBQUtvM0IsZUFBTCxHQUF1QmxpQixPQUFPLENBQUNtaUIsY0FBUixJQUEwQixFQUFqRDtBQVZ3QjtBQVd6QjtBQUVEOzs7Ozs7Ozs7NEJBS1E1dkIsSSxFQUFNO0FBQ1osVUFBTTZ2QixXQUFXLEdBQUcsS0FBSzNaLEtBQUwsQ0FBV3hQLE1BQVgsQ0FBa0IsVUFBQzdHLE1BQUQsUUFBZ0M7QUFBQTtBQUFBLFlBQXRCZ21CLFFBQXNCO0FBQUEsWUFBWmpiLE1BQVk7O0FBQ3BFL0ssY0FBTSxDQUFDRixJQUFJLENBQUNDLFNBQUwsQ0FBZWltQixRQUFmLENBQUQsQ0FBTixHQUFtQ2piLE1BQW5DO0FBQ0EsZUFBTy9LLE1BQVA7QUFDRCxPQUhtQixFQUdqQixFQUhpQixDQUFwQjs7QUFLQSxVQUFNaXdCLGlCQUFpQixHQUFHLEVBQTFCO0FBQ0EsVUFBTUMsY0FBYyxHQUFHLEVBQXZCO0FBRUEsVUFBTXRILFNBQVMsR0FBRyxFQUFsQjtBQVRZO0FBQUE7QUFBQTs7QUFBQTtBQVdaLDZCQUFpQ3pvQixJQUFqQyw4SEFBdUM7QUFBQTtBQUFBLGNBQTNCNmxCLFFBQTJCO0FBQUEsY0FBakJqYixNQUFpQjs7QUFDckMsY0FBTW1HLEVBQUUsR0FBR3BSLElBQUksQ0FBQ0MsU0FBTCxDQUFlaW1CLFFBQWYsQ0FBWDtBQUVBNEMsbUJBQVMsQ0FBQzlyQixJQUFWLENBQWVvVSxFQUFmOztBQUVBLGNBQUksQ0FBQzhlLFdBQVcsQ0FBQzllLEVBQUQsQ0FBaEIsRUFBc0I7QUFDcEIrZSw2QkFBaUIsQ0FBQ256QixJQUFsQixDQUF1QmtwQixRQUF2QjtBQUNBO0FBQ0Q7O0FBRUQsY0FBSSxDQUFDdmlCLDhEQUFPLENBQUNzSCxNQUFELEVBQVNpbEIsV0FBVyxDQUFDOWUsRUFBRCxDQUFwQixDQUFaLEVBQXVDO0FBQ3JDZ2YsMEJBQWMsQ0FBQ3B6QixJQUFmLENBQW9CaU8sTUFBcEI7QUFDRDtBQUNGO0FBeEJXO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBMEJaLFVBQU1vbEIsaUJBQWlCLEdBQUdwekIsOERBQU8sQ0FBQ1AsTUFBTSxDQUFDNkcsSUFBUCxDQUFZMnNCLFdBQVosQ0FBRCxFQUEyQnBILFNBQTNCLENBQVAsQ0FBNkM5aUIsR0FBN0MsQ0FBaURoRyxJQUFJLENBQUNjLEtBQXRELENBQTFCO0FBRUEsV0FBS3lWLEtBQUwsR0FBYTdRLGdFQUFTLENBQUNyRixJQUFELENBQXRCOztBQUVBLFVBQUk4dkIsaUJBQWlCLENBQUNqekIsTUFBdEIsRUFBOEI7QUFDNUIsYUFBS3VaLE9BQUwsQ0FBYSxRQUFiLEVBQXVCLENBQUMwWixpQkFBRCxDQUF2QjtBQUNEOztBQUVELFVBQUlFLGlCQUFpQixDQUFDbnpCLE1BQXRCLEVBQThCO0FBQzVCLGFBQUt1WixPQUFMLENBQWEsUUFBYixFQUF1QjRaLGlCQUF2QjtBQUNEOztBQUVELFVBQUlELGNBQWMsQ0FBQ2x6QixNQUFuQixFQUEyQjtBQUN6QixhQUFLdVosT0FBTCxDQUFhLFFBQWIsRUFBdUIyWixjQUF2QjtBQUNEO0FBQ0Y7Ozs4QkFFUztBQUNSLGFBQU8sS0FBSzdaLEtBQVo7QUFDRDtBQUVEOzs7Ozs7Ozs7Ozs7OEZBTWEyUCxROzs7OztBQUNYLHFCQUFLM1AsS0FBTCxHQUFhLEtBQUtBLEtBQUwsQ0FBV3FaLE1BQVgsQ0FBa0IsVUFBQTNrQixNQUFNLEVBQUk7QUFDdkMseUJBQU9BLE1BQU0sQ0FBQyxDQUFELENBQU4sS0FBY2liLFFBQXJCO0FBQ0QsaUJBRlksQ0FBYjtBQUdBLHFCQUFLelAsT0FBTCxDQUFhLFFBQWIsRUFBdUJ5UCxRQUF2QjtpREFDT0EsUTs7Ozs7Ozs7Ozs7Ozs7OztBQUdUOzs7Ozs7Ozs7OzsrRkFLYWpiLE07Ozs7Ozs7QUFDUG1HLGtCLEdBQUssS0FBS2tmLE1BQUwsRTtBQUNMQyw0QixHQUFlOXFCLDREQUFLLENBQUN3RixNQUFELEMsRUFDeEI7O0FBQ0Esb0JBQUl2SSxLQUFLLENBQUNDLE9BQU4sQ0FBYzR0QixZQUFkLEtBQStCQSxZQUFZLENBQUNyekIsTUFBYixLQUF3QixDQUEzRCxFQUE4RDtBQUM1RGtVLG9CQUFFLEdBQUdtZixZQUFZLENBQUMsQ0FBRCxDQUFqQjtBQUNBQSw4QkFBWSxHQUFHQSxZQUFZLENBQUMsQ0FBRCxDQUEzQjtBQUNEOzs7Ozs7O0FBRUQsa0NBQW9CLEtBQUtQLGVBQXpCLDJIQUEwQztBQUEvQmp0Qix1QkFBK0I7O0FBQ3hDLHNCQUFJLENBQUN3dEIsWUFBWSxDQUFDdnBCLGNBQWIsQ0FBNEJqRSxLQUE1QixDQUFMLEVBQXlDO0FBQ3ZDd3RCLGdDQUFZLENBQUN4dEIsS0FBRCxDQUFaLEdBQXNCLElBQXRCO0FBQ0Q7QUFDRjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozt1QkFFOEIsS0FBSytTLGFBQUwsQ0FBbUJ5YSxZQUFuQixDOzs7QUFBekJ4bUIsZ0M7O29CQUNEQSxnQkFBZ0IsQ0FBQ3BFLE9BQWpCLEU7Ozs7O3NCQUNHb0UsZ0I7OztrREFHRCxLQUFLeW1CLE9BQUwsQ0FBYUQsWUFBYixFQUEyQm5mLEVBQTNCLEM7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHVDs7Ozs7Ozs7Ozs7Ozs7eUJBV0s3USxRLEVBQVU7QUFDYixVQUFJRixJQUFJLEdBQUdxRixnRUFBUyxDQUFDLEtBQUs2USxLQUFOLENBQXBCO0FBQ0EsVUFBTXJXLE1BQU0sR0FBRyxFQUFmLENBRmEsQ0FJYjs7QUFDQSxVQUFJSyxRQUFRLENBQUM2dEIsS0FBVCxJQUFrQjd0QixRQUFRLENBQUM2dEIsS0FBVCxDQUFlbHhCLE1BQWYsR0FBd0IsQ0FBOUMsRUFBaUQ7QUFDL0NnRCxjQUFNLENBQUNtdUIsWUFBUCxHQUFzQmh1QixJQUFJLENBQUN1dkIsTUFBTCxDQUFZLFVBQUEza0IsTUFBTTtBQUFBLGlCQUFJMUssUUFBUSxDQUFDNnRCLEtBQVQsQ0FBZS9xQixPQUFmLENBQXVCNEgsTUFBTSxDQUFDLENBQUQsQ0FBN0IsS0FBcUMsQ0FBekM7QUFBQSxTQUFsQixDQUF0QjtBQUNELE9BUFksQ0FTYjs7O0FBQ0EsVUFBSTFLLFFBQVEsQ0FBQ3NKLE1BQWIsRUFBcUI7QUFDbkIvRCxzRUFBTyxDQUFDNUYsTUFBTSxDQUFDbXVCLFlBQVIsRUFBc0IsVUFBQXBqQixNQUFNLEVBQUk7QUFDckNuRix3RUFBTyxDQUFDbUYsTUFBTSxDQUFDLENBQUQsQ0FBUCxFQUFZLFVBQUNqSSxLQUFELEVBQVF3QyxHQUFSLEVBQWdCO0FBQ2pDLGdCQUFJakYsUUFBUSxDQUFDc0osTUFBVCxDQUFnQnhHLE9BQWhCLENBQXdCbUMsR0FBeEIsTUFBaUMsQ0FBQyxDQUF0QyxFQUF5QztBQUN2QyxxQkFBT3lGLE1BQU0sQ0FBQyxDQUFELENBQU4sQ0FBVXpGLEdBQVYsQ0FBUDtBQUNEO0FBQ0YsV0FKTSxDQUFQO0FBS0QsU0FOTSxDQUFQO0FBT0QsT0FsQlksQ0FvQmI7OztBQUNBLFVBQUlqRixRQUFRLENBQUN5ZixJQUFULElBQWlCemYsUUFBUSxDQUFDeWYsSUFBVCxDQUFjOWlCLE1BQWQsR0FBdUIsQ0FBNUMsRUFBK0M7QUFDN0MsWUFBTXV6QixTQUFTLEdBQUdsd0IsUUFBUSxDQUFDeWYsSUFBVCxDQUFjLENBQWQsRUFBaUIsQ0FBakIsQ0FBbEI7QUFDQSxZQUFNMFEsUUFBUSxHQUFHbndCLFFBQVEsQ0FBQ3lmLElBQVQsQ0FBYyxDQUFkLEVBQWlCLENBQWpCLENBQWpCO0FBRUEzZixZQUFJLEdBQUdBLElBQUksQ0FBQzJmLElBQUwsQ0FBVSxVQUFDMlEsSUFBRCxFQUFPcHZCLElBQVAsRUFBZ0I7QUFDL0IsY0FBSW92QixJQUFJLENBQUMsQ0FBRCxDQUFKLENBQVFGLFNBQVIsSUFBcUJsdkIsSUFBSSxDQUFDLENBQUQsQ0FBSixDQUFRa3ZCLFNBQVIsQ0FBekIsRUFBNkM7QUFDM0MsbUJBQU9DLFFBQVEsS0FBSyxLQUFiLEdBQXFCLENBQUMsQ0FBdEIsR0FBMEIsQ0FBakM7QUFDRCxXQUZELE1BRU8sSUFBSUMsSUFBSSxDQUFDLENBQUQsQ0FBSixDQUFRRixTQUFSLElBQXFCbHZCLElBQUksQ0FBQyxDQUFELENBQUosQ0FBUWt2QixTQUFSLENBQXpCLEVBQTZDO0FBQ2xELG1CQUFPQyxRQUFRLEtBQUssS0FBYixHQUFxQixDQUFyQixHQUF5QixDQUFDLENBQWpDO0FBQ0QsV0FGTSxNQUVBO0FBQ0wsbUJBQU8sQ0FBUDtBQUNEO0FBQ0YsU0FSTSxDQUFQO0FBU0QsT0FsQ1ksQ0FvQ2I7OztBQUNBLFVBQUksS0FBS1osZUFBTCxJQUF3QnZ2QixRQUFRLENBQUNxd0IsT0FBckMsRUFBOEM7QUFDNUN2d0IsWUFBSSxHQUFHcUYsZ0VBQVMsQ0FBQyxLQUFLb3FCLGVBQUwsQ0FBcUJ6dkIsSUFBckIsRUFBMkJFLFFBQVEsQ0FBQ3F3QixPQUFwQyxDQUFELENBQWhCO0FBQ0Q7O0FBRUQxd0IsWUFBTSxDQUFDNmdCLEtBQVAsR0FBZTFnQixJQUFJLENBQUNuRCxNQUFwQixDQXpDYSxDQTJDYjs7QUFDQSxVQUFJcUQsUUFBUSxDQUFDb2tCLE1BQVQsSUFBbUJwa0IsUUFBUSxDQUFDbWtCLEtBQWhDLEVBQXVDO0FBQ3JDLFlBQU1tTSxLQUFLLEdBQUd0d0IsUUFBUSxDQUFDb2tCLE1BQVQsSUFBbUIsQ0FBakM7QUFDQSxZQUFNbU0sR0FBRyxHQUFJdndCLFFBQVEsQ0FBQ29rQixNQUFULEdBQWtCcGtCLFFBQVEsQ0FBQ21rQixLQUE1QixJQUFzQ3JrQixJQUFJLENBQUNuRCxNQUF2RDtBQUNBbUQsWUFBSSxHQUFHQSxJQUFJLENBQUNrRSxLQUFMLENBQVdzc0IsS0FBWCxFQUFrQkMsR0FBbEIsQ0FBUDtBQUNELE9BaERZLENBa0RiOzs7QUFDQSxVQUFJdndCLFFBQVEsQ0FBQ3NKLE1BQWIsRUFBcUI7QUFDbkIvRCxzRUFBTyxDQUFDekYsSUFBRCxFQUFPLFVBQUE0SyxNQUFNLEVBQUk7QUFDdEJuRix3RUFBTyxDQUFDbUYsTUFBTSxDQUFDLENBQUQsQ0FBUCxFQUFZLFVBQUNqSSxLQUFELEVBQVF3QyxHQUFSLEVBQWdCO0FBQ2pDLGdCQUFJakYsUUFBUSxDQUFDc0osTUFBVCxDQUFnQnhHLE9BQWhCLENBQXdCbUMsR0FBeEIsTUFBaUMsQ0FBQyxDQUF0QyxFQUF5QztBQUN2QyxxQkFBT3lGLE1BQU0sQ0FBQyxDQUFELENBQU4sQ0FBVXpGLEdBQVYsQ0FBUDtBQUNEO0FBQ0YsV0FKTSxDQUFQO0FBS0QsU0FOTSxDQUFQO0FBT0Q7O0FBRUR0RixZQUFNLENBQUNpa0IsT0FBUCxHQUFpQjlqQixJQUFqQjtBQUVBLGFBQU9HLE9BQU8sQ0FBQ0MsT0FBUixDQUFnQlAsTUFBaEIsQ0FBUDtBQUNEO0FBRUQ7Ozs7Ozs7Ozs4QkFNVWtSLEUsRUFBSXZILE0sRUFBUTtBQUNwQixVQUFNb0IsTUFBTSxHQUFHdkYsZ0VBQVMsQ0FBQyxLQUFLcXJCLGNBQUwsQ0FBb0IzZixFQUFwQixDQUFELENBQXhCOztBQUNBLFVBQUksQ0FBQ25HLE1BQUwsRUFBYTtBQUNYLGVBQU96SyxPQUFPLENBQUNFLE1BQVIsQ0FBZSxJQUFJeEUsS0FBSixDQUFVLG1CQUFWLENBQWYsQ0FBUDtBQUNEOztBQUVELFVBQU04MEIsWUFBWSxHQUFHL2xCLE1BQU0sQ0FBQyxDQUFELENBQTNCLENBTm9CLENBUXBCOztBQUNBLFVBQUlwQixNQUFKLEVBQVk7QUFDVi9ELHNFQUFPLENBQUNrckIsWUFBRCxFQUFlLFVBQUNodUIsS0FBRCxFQUFRd0MsR0FBUixFQUFnQjtBQUNwQyxjQUFJcUUsTUFBTSxDQUFDeEcsT0FBUCxDQUFlbUMsR0FBZixNQUF3QixDQUFDLENBQTdCLEVBQWdDO0FBQzlCLG1CQUFPd3JCLFlBQVksQ0FBQ3hyQixHQUFELENBQW5CO0FBQ0Q7QUFDRixTQUpNLENBQVA7QUFLRDs7QUFFRCxhQUFPaEYsT0FBTyxDQUFDQyxPQUFSLENBQWdCdXdCLFlBQWhCLENBQVA7QUFDRDtBQUVEOzs7Ozs7Ozs7Ozs7K0ZBTWFocEIsTzs7Ozs7Ozs7O29CQUNOQSxPQUFPLENBQUM5SyxNOzs7OztrREFDSixFOzs7QUFHSCt6Qiw4QixHQUFpQixFOzt1QkFFRnp3QixPQUFPLENBQUNpTCxHQUFSLENBQ25CekQsT0FBTyxDQUFDaEMsR0FBUjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEseUZBQ0U7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLDJIQUFRa2dCLFFBQVIsYUFBa0JsZSxPQUFsQjtBQUFBO0FBQUEsbUNBQzRCLE1BQUksQ0FBQzhOLGFBQUwsQ0FBbUI5TixPQUFuQixDQUQ1Qjs7QUFBQTtBQUNRd08sdUNBRFI7O0FBQUEsZ0NBR09BLFdBQVcsQ0FBQzdRLE9BQVosRUFIUDtBQUFBO0FBQUE7QUFBQTs7QUFBQSw4REFJVyxDQUFDdWdCLFFBQUQsRUFBVzFQLFdBQVgsQ0FKWDs7QUFBQTtBQU9FeWEsMENBQWMsQ0FBQ2owQixJQUFmLENBQW9CLENBQUNrcEIsUUFBRCxFQUFXbGUsT0FBWCxDQUFwQjtBQVBGLDhEQVFTLENBQUNrZSxRQUFELEVBQVdsZSxPQUFYLENBUlQ7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsbUJBREY7O0FBQUE7QUFBQTtBQUFBO0FBQUEsb0JBRG1CLEM7OztBQUFmOUgsc0I7O0FBZU4sb0JBQUkrd0IsY0FBYyxDQUFDL3pCLE1BQW5CLEVBQTJCO0FBQ3pCO0FBQ0EsaURBQWtDK3pCLGNBQWxDLHFDQUFrRDtBQUFBLDhJQUF0Qy9LLFFBQXNDLDBCQUE1QmxlLFFBQTRCO0FBQ2hEdEwsMEJBQU0sQ0FBQ3dJLE1BQVAsQ0FBYyxLQUFLNnJCLGNBQUwsQ0FBb0I3SyxRQUFwQixFQUE4QixDQUE5QixDQUFkLEVBQWdEbGUsUUFBaEQ7QUFDRDs7QUFFRCx1QkFBS3lPLE9BQUwsQ0FBYSxRQUFiLEVBQXVCd2EsY0FBdkI7QUFDRDs7a0RBRU0vd0IsTTs7Ozs7Ozs7Ozs7Ozs7OztBQUdUOzs7Ozs7OztrQ0FLYytLLE0sRUFBUTtBQUNwQixhQUFPLEtBQUtxUCxVQUFMLENBQWdCeEUsYUFBaEIsQ0FBOEI3SyxNQUE5QixDQUFQO0FBQ0Q7QUFFRDs7Ozs7Ozs7OzRDQU13QnBCLE0sRUFBUTtBQUM5QixhQUFPLEtBQUt5USxVQUFMLENBQWdCcFMsdUJBQWhCLENBQXdDMkIsTUFBeEMsQ0FBUDtBQUNEOzs7NkJBRVE7QUFDUCxhQUFPLEtBQUtrbkIsY0FBTCxDQUFvQixLQUFLbEIsR0FBekIsQ0FBUCxFQUFzQztBQUNwQyxhQUFLQSxHQUFMO0FBQ0Q7O0FBQ0QsYUFBTyxLQUFLQSxHQUFMLEVBQVA7QUFDRDs7O21DQUVjemUsRSxFQUFJO0FBQ2pCLGFBQU9uTCwyREFBSSxDQUFDLEtBQUtzUSxLQUFOLEVBQWEsVUFBQXRMLE1BQU07QUFBQSxlQUFJQSxNQUFNLENBQUMsQ0FBRCxDQUFOLEtBQWNtRyxFQUFsQjtBQUFBLE9BQW5CLENBQVg7QUFDRDs7OzRCQUVPbkcsTSxFQUFRbUcsRSxFQUFJO0FBQ2xCLFdBQUttRixLQUFMLDZGQUFpQixLQUFLQSxLQUF0QixJQUE2QixDQUFDbkYsRUFBRCxFQUFLbkcsTUFBTCxDQUE3QjtBQUNBLFdBQUt3TCxPQUFMLENBQWEsUUFBYixFQUF1QixDQUFDckYsRUFBRCxDQUF2QjtBQUNBLGFBQU9BLEVBQVA7QUFDRDs7OztFQXhTK0J0WCwyRDs7QUEyU25CVCxrRkFBZixFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3ZUQTs7Ozs7OztBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBRUEsSUFBTTYzQixxQkFBcUIsR0FBRyxTQUE5QixDLENBQXlDOztBQUV6Qzs7Ozs7OztJQU1NQyxjOzs7OzsyQkFDVUMsaUIsRUFBbUJDLFcsRUFBYTtBQUM1QyxhQUFPLElBQUlGLGNBQUosQ0FBbUJDLGlCQUFuQixFQUFzQ0MsV0FBdEMsQ0FBUDtBQUNEOzs7QUFFRCw0QkFBNEU7QUFBQTs7QUFBQSxRQUFoRUQsaUJBQWdFLHVFQUE1QyxLQUE0QztBQUFBLFFBQXJDQyxXQUFxQyx1RUFBdkJILHFCQUF1Qjs7QUFBQTs7QUFDMUUsUUFBTUksTUFBTSxHQUFHQyw4Q0FBTSxDQUFDO0FBQ3BCQyxZQUFNLEVBQUU7QUFDTkMsZ0JBQVEsRUFBRUo7QUFESjtBQURZLEtBQUQsQ0FBckI7QUFNQSxTQUFLOWIsV0FBTCxHQUFtQjtBQUNqQm1jLGFBQU8sRUFBRSxDQUFDL29CLGtFQUFZO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSwrRUFBQyxpQkFBT0UsR0FBUCxFQUFZQyxHQUFaLEVBQWlCdkgsSUFBakI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ2ZoQiwwQkFEZSxHQUNKLEVBREk7O0FBRXJCLHNCQUFJc0ksR0FBRyxDQUFDNE0sS0FBSixDQUFVaVAsS0FBZCxFQUFxQjtBQUNuQm5rQiw0QkFBUSxDQUFDbWtCLEtBQVQsR0FBaUJ2WSxRQUFRLENBQUN0RCxHQUFHLENBQUM0TSxLQUFKLENBQVVpUCxLQUFYLENBQXpCO0FBQ0Q7O0FBQ0Qsc0JBQUk3YixHQUFHLENBQUM0TSxLQUFKLENBQVVrUCxNQUFkLEVBQXNCO0FBQ3BCcGtCLDRCQUFRLENBQUNva0IsTUFBVCxHQUFrQnhZLFFBQVEsQ0FBQ3RELEdBQUcsQ0FBQzRNLEtBQUosQ0FBVWtQLE1BQVgsQ0FBMUI7QUFDRDs7QUFDRCxzQkFBSTliLEdBQUcsQ0FBQzRNLEtBQUosQ0FBVXVLLElBQWQsRUFBb0I7QUFDbEJ6Ziw0QkFBUSxDQUFDeWYsSUFBVCxHQUFnQmhnQixJQUFJLENBQUNjLEtBQUwsQ0FBVytILEdBQUcsQ0FBQzRNLEtBQUosQ0FBVXVLLElBQXJCLENBQWhCO0FBQ0Q7O0FBQ0Qsc0JBQUluWCxHQUFHLENBQUM0TSxLQUFKLENBQVU1TCxNQUFkLEVBQXNCO0FBQ3BCdEosNEJBQVEsQ0FBQ3NKLE1BQVQsR0FBa0I3SixJQUFJLENBQUNjLEtBQUwsQ0FBVytILEdBQUcsQ0FBQzRNLEtBQUosQ0FBVTVMLE1BQXJCLENBQWxCO0FBQ0Q7O0FBQ0Qsc0JBQUloQixHQUFHLENBQUM0TSxLQUFKLENBQVUyWSxLQUFkLEVBQXFCO0FBQ25CN3RCLDRCQUFRLENBQUM2dEIsS0FBVCxHQUFpQnB1QixJQUFJLENBQUNjLEtBQUwsQ0FBVytILEdBQUcsQ0FBQzRNLEtBQUosQ0FBVTJZLEtBQXJCLENBQWpCO0FBQ0Q7O0FBQ0Qsc0JBQUl2bEIsR0FBRyxDQUFDNE0sS0FBSixDQUFVbWIsT0FBZCxFQUF1QjtBQUNyQnJ3Qiw0QkFBUSxDQUFDcXdCLE9BQVQsR0FBbUI1d0IsSUFBSSxDQUFDYyxLQUFMLENBQVcrSCxHQUFHLENBQUM0TSxLQUFKLENBQVVtYixPQUFyQixDQUFuQjtBQUNEOztBQW5Cb0I7QUFBQSx5QkFvQmYsS0FBSSxDQUFDZSxxQkFBTCxDQUEyQjlvQixHQUEzQixFQUFnQ0MsR0FBaEMsRUFBcUN2SCxJQUFyQyxFQUEyQ2hCLFFBQTNDLENBcEJlOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLFNBQUQ7O0FBQUE7QUFBQTtBQUFBO0FBQUEsVUFBYixDQURRO0FBdUJqQnF4QixjQUFRLEVBQUUsQ0FBQ2pwQixrRUFBWTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsK0VBQUMsa0JBQU9FLEdBQVAsRUFBWUMsR0FBWixFQUFpQnZILElBQWpCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNoQmhCLDBCQURnQixHQUNMLEVBREs7O0FBRXRCLHNCQUFJc0ksR0FBRyxDQUFDOUssSUFBSixDQUFTMm1CLEtBQWIsRUFBb0I7QUFDbEJua0IsNEJBQVEsQ0FBQ21rQixLQUFULEdBQWlCdlksUUFBUSxDQUFDdEQsR0FBRyxDQUFDOUssSUFBSixDQUFTMm1CLEtBQVYsQ0FBekI7QUFDRDs7QUFDRCxzQkFBSTdiLEdBQUcsQ0FBQzlLLElBQUosQ0FBUzRtQixNQUFiLEVBQXFCO0FBQ25CcGtCLDRCQUFRLENBQUNva0IsTUFBVCxHQUFrQnhZLFFBQVEsQ0FBQ3RELEdBQUcsQ0FBQzlLLElBQUosQ0FBUzRtQixNQUFWLENBQTFCO0FBQ0Q7O0FBQ0Qsc0JBQUk5YixHQUFHLENBQUM5SyxJQUFKLENBQVNpaUIsSUFBYixFQUFtQjtBQUNqQnpmLDRCQUFRLENBQUN5ZixJQUFULEdBQWdCblgsR0FBRyxDQUFDOUssSUFBSixDQUFTaWlCLElBQXpCO0FBQ0Q7O0FBQ0Qsc0JBQUluWCxHQUFHLENBQUM5SyxJQUFKLENBQVM4TCxNQUFiLEVBQXFCO0FBQ25CdEosNEJBQVEsQ0FBQ3NKLE1BQVQsR0FBa0JoQixHQUFHLENBQUM5SyxJQUFKLENBQVM4TCxNQUEzQjtBQUNEOztBQUNELHNCQUFJaEIsR0FBRyxDQUFDOUssSUFBSixDQUFTcXdCLEtBQWIsRUFBb0I7QUFDbEI3dEIsNEJBQVEsQ0FBQzZ0QixLQUFULEdBQWlCdmxCLEdBQUcsQ0FBQzlLLElBQUosQ0FBU3F3QixLQUExQjtBQUNEOztBQUNELHNCQUFJdmxCLEdBQUcsQ0FBQzlLLElBQUosQ0FBUzZ5QixPQUFiLEVBQXNCO0FBQ3BCcndCLDRCQUFRLENBQUNxd0IsT0FBVCxHQUFtQi9uQixHQUFHLENBQUM5SyxJQUFKLENBQVM2eUIsT0FBNUI7QUFDRDs7QUFuQnFCO0FBQUEseUJBb0JoQixLQUFJLENBQUNlLHFCQUFMLENBQTJCOW9CLEdBQTNCLEVBQWdDQyxHQUFoQyxFQUFxQ3ZILElBQXJDLEVBQTJDaEIsUUFBM0MsQ0FwQmdCOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLFNBQUQ7O0FBQUE7QUFBQTtBQUFBO0FBQUEsVUFBYixDQXZCTztBQTZDakJzVixjQUFRLEVBQUUsQ0FBQ2xOLGtFQUFZO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSwrRUFBQyxrQkFBT0UsR0FBUCxFQUFZQyxHQUFaLEVBQWlCdkgsSUFBakI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ2hCd0csdUJBRGdCLEdBQ1IsS0FBSSxDQUFDMk4sU0FBTCxDQUFlN00sR0FBZixFQUFvQkMsR0FBcEIsQ0FEUTtBQUVoQjVJLHdCQUZnQixHQUVQLEtBQUksQ0FBQ3lWLE9BQUwsQ0FBYSxVQUFiLENBRk87QUFBQTtBQUFBO0FBQUEseUJBSUM1TixLQUFLLENBQUMrTixhQUFOLENBQW9Cak4sR0FBRyxDQUFDOUssSUFBSixDQUFTa04sTUFBN0IsRUFBcUNwQyxHQUFHLENBQUM5SyxJQUFKLENBQVNxVCxFQUE5QyxDQUpEOztBQUFBO0FBSWRsSCx3QkFKYztBQUtwQmhLLHdCQUFNLENBQUMsSUFBRCxFQUFPZ0ssTUFBUCxFQUFlckIsR0FBZixFQUFvQkMsR0FBcEIsRUFBeUJ2SCxJQUF6QixDQUFOO0FBTG9CO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBT3BCckIsd0JBQU0sZUFBTSxJQUFOLEVBQVkySSxHQUFaLEVBQWlCQyxHQUFqQixFQUFzQnZILElBQXRCLENBQU47O0FBUG9CO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLFNBQUQ7O0FBQUE7QUFBQTtBQUFBO0FBQUEsVUFBYixDQTdDTztBQXVEakJnYSxlQUFTLEVBQUUsQ0FBQzVTLGtFQUFZO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSwrRUFBQyxrQkFBT0UsR0FBUCxFQUFZQyxHQUFaLEVBQWlCdkgsSUFBakI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ2pCbWQsc0JBRGlCLEdBQ1Y3VixHQUFHLENBQUM0TSxLQUFKLENBQVVpSixJQUFWLEdBQWlCMWUsSUFBSSxDQUFDYyxLQUFMLENBQVcrSCxHQUFHLENBQUM0TSxLQUFKLENBQVVpSixJQUFyQixDQUFqQixHQUE4QyxJQURwQztBQUVqQndILDBCQUZpQixHQUVOcmQsR0FBRyxDQUFDMUwsTUFBSixDQUFXK29CLFFBQVgsR0FBc0JsbUIsSUFBSSxDQUFDYyxLQUFMLENBQVcrSCxHQUFHLENBQUMxTCxNQUFKLENBQVcrb0IsUUFBdEIsQ0FBdEIsR0FBd0QsSUFGbEQ7QUFHakJuZSx1QkFIaUIsR0FHVCxLQUFJLENBQUMyTixTQUFMLENBQWU3TSxHQUFmLEVBQW9CQyxHQUFwQixDQUhTO0FBSWpCNUksd0JBSmlCLEdBSVIsS0FBSSxDQUFDeVYsT0FBTCxDQUFhLFdBQWIsQ0FKUTtBQUFBO0FBQUE7QUFBQSx5QkFNRTVOLEtBQUssQ0FBQ3dULFNBQU4sQ0FBZ0IySyxRQUFoQixFQUEwQnhILElBQTFCLENBTkY7O0FBQUE7QUFNZjlkLDBCQU5lO0FBT3JCVix3QkFBTSxDQUFDLElBQUQsRUFBT1UsUUFBUCxFQUFpQmlJLEdBQWpCLEVBQXNCQyxHQUF0QixFQUEyQnZILElBQTNCLENBQU47QUFQcUI7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFTckJyQix3QkFBTSxlQUFNLElBQU4sRUFBWTJJLEdBQVosRUFBaUJDLEdBQWpCLEVBQXNCdkgsSUFBdEIsQ0FBTjs7QUFUcUI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsU0FBRDs7QUFBQTtBQUFBO0FBQUE7QUFBQSxVQUFiLENBdkRNO0FBbUVqQmlhLFlBQU0sNEZBQ0E0VixpQkFBaUIsR0FBRyxDQUFDRSxNQUFNLENBQUN6a0IsR0FBUCxFQUFELENBQUgsR0FBb0IsRUFEckMsSUFFSmxFLGtFQUFZO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSwrRUFBQyxrQkFBT0UsR0FBUCxFQUFZQyxHQUFaLEVBQWlCdkgsSUFBakI7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNMd0csdUJBREssR0FDRyxLQUFJLENBQUMyTixTQUFMLENBQWU3TSxHQUFmLEVBQW9CQyxHQUFwQixDQURIO0FBRUw1SSx3QkFGSyxHQUVJLEtBQUksQ0FBQ3lWLE9BQUwsQ0FBYSxRQUFiLENBRko7QUFJUDVYLHNCQUpPLEdBSUE4SyxHQUFHLENBQUM5SyxJQUpKOztBQUFBLHVCQU1QcXpCLGlCQU5PO0FBQUE7QUFBQTtBQUFBOztBQU9IUyxpQ0FQRyxHQU9lLEVBUGY7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFTVCxtQ0FBa0NocEIsR0FBRyxDQUFDaXBCLEtBQXRDLHVIQUE2QztBQUFBLCtDQUFqQ0MsU0FBaUMsZUFBakNBLFNBQWlDLEVBQXRCQyxNQUFzQixlQUF0QkEsTUFBc0I7QUFBQSxpQ0FDakI1b0IsK0RBQVMsQ0FDakM2b0IsU0FBUyxDQUFDRixTQUFELENBRHdCLEVBRWpDLCtDQUZpQyxDQURRLEVBQ3BDN0wsUUFEb0MsY0FDcENBLFFBRG9DLEVBQzFCbmpCLEtBRDBCLGNBQzFCQSxLQUQwQjs7QUFLM0Msd0JBQUksQ0FBQzh1QixlQUFlLENBQUMzTCxRQUFELENBQXBCLEVBQWdDO0FBQzlCMkwscUNBQWUsQ0FBQzNMLFFBQUQsQ0FBZixHQUE0QixFQUE1QjtBQUNEOztBQUNEMkwsbUNBQWUsQ0FBQzNMLFFBQUQsQ0FBZixDQUEwQm5qQixLQUExQixJQUFtQ2l2QixNQUFuQztBQUNEOztBQWxCUTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBOztBQUFBO0FBQUE7O0FBQUE7QUFBQTs7QUFBQTtBQW9CVGowQixzQkFBSSxHQUFHcUwsK0RBQVMsQ0FBQ3JMLElBQUksQ0FBQytoQixJQUFOLEVBQVksdUJBQVosQ0FBVCxDQUNKOVosR0FESSxDQUNBLGlCQUF3QjtBQUFBO0FBQUEsd0JBQXRCa2dCLFFBQXNCO0FBQUEsd0JBQVpqYixNQUFZOztBQUMzQiwyQkFBTyxDQUFDaWIsUUFBRCxpRkFDRmpiLE1BREUsRUFFRjRtQixlQUFlLENBQUMzTCxRQUFELENBRmIsRUFBUDtBQUlELG1CQU5JLENBQVA7O0FBcEJTO0FBQUE7QUFBQTtBQUFBLHlCQThCVW5lLEtBQUssQ0FBQ3lULE1BQU4sQ0FBYXpkLElBQWIsQ0E5QlY7O0FBQUE7QUE4QkhzQyxzQkE5Qkc7QUErQlRILHdCQUFNLENBQUMsSUFBRCxFQUFPRyxJQUFQLEVBQWF3SSxHQUFiLEVBQWtCQyxHQUFsQixFQUF1QnZILElBQXZCLENBQU47QUEvQlM7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFpQ1RyQix3QkFBTSxlQUFNLElBQU4sRUFBWTJJLEdBQVosRUFBaUJDLEdBQWpCLEVBQXNCdkgsSUFBdEIsQ0FBTjs7QUFqQ1M7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsU0FBRDs7QUFBQTtBQUFBO0FBQUE7QUFBQSxVQUZSLEVBbkVXO0FBeUdqQjFJLFlBQU0sNEZBQ0F1NEIsaUJBQWlCLEdBQUcsQ0FBQ0UsTUFBTSxDQUFDemtCLEdBQVAsRUFBRCxDQUFILEdBQW9CLEVBRHJDLElBRUpsRSxrRUFBWTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsK0VBQUMsa0JBQU9FLEdBQVAsRUFBWUMsR0FBWixFQUFpQnZILElBQWpCO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDTHdHLHVCQURLLEdBQ0csS0FBSSxDQUFDMk4sU0FBTCxDQUFlN00sR0FBZixFQUFvQkMsR0FBcEIsQ0FESDtBQUVMNUksd0JBRkssR0FFSSxLQUFJLENBQUN5VixPQUFMLENBQWEsUUFBYixDQUZKO0FBR1A1WCxzQkFITyxHQUdBOEssR0FBRyxDQUFDOUssSUFISjs7QUFBQSx1QkFLUHF6QixpQkFMTztBQUFBO0FBQUE7QUFBQTs7QUFNVHJ6QixzQkFBSSxHQUFHcUwsK0RBQVMsQ0FBQ3JMLElBQUksQ0FBQytoQixJQUFOLENBQWhCO0FBTlM7QUFBQTtBQUFBO0FBQUE7O0FBUVQsb0NBQWtDalgsR0FBRyxDQUFDaXBCLEtBQXRDLDJIQUE2QztBQUFBLGlEQUFqQ0MsU0FBaUMsZ0JBQWpDQSxTQUFpQyxFQUF0QkMsTUFBc0IsZ0JBQXRCQSxNQUFzQjtBQUMzQ2owQix3QkFBSSxDQUFDaUMsSUFBSSxDQUFDYyxLQUFMLENBQVdteEIsU0FBUyxDQUFDRixTQUFELENBQXBCLENBQUQsQ0FBSixHQUF5Q0MsTUFBekM7QUFDRDs7QUFWUTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBOztBQUFBO0FBQUE7O0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQSx5QkFjVWpxQixLQUFLLENBQUNsUCxNQUFOLENBQWFrRixJQUFiLENBZFY7O0FBQUE7QUFjSHNDLHNCQWRHO0FBZVRILHdCQUFNLENBQUMsSUFBRCxFQUFPRyxJQUFQLEVBQWF3SSxHQUFiLEVBQWtCQyxHQUFsQixFQUF1QnZILElBQXZCLENBQU47QUFmUztBQUFBOztBQUFBO0FBQUE7QUFBQTtBQWlCVHJCLHdCQUFNLGVBQU0sSUFBTixFQUFZMkksR0FBWixFQUFpQkMsR0FBakIsRUFBc0J2SCxJQUF0QixDQUFOOztBQWpCUztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxTQUFEOztBQUFBO0FBQUE7QUFBQTtBQUFBLFVBRlI7QUF6R1csS0FBbkI7QUFnSUQ7QUFFRDs7Ozs7Ozs7OzswQkFNTXdHLE0sRUFBTztBQUNYLFVBQUksT0FBT0EsTUFBUCxLQUFpQixVQUFyQixFQUFpQztBQUMvQixhQUFLMk4sU0FBTCxHQUFpQjNOLE1BQWpCO0FBQ0QsT0FGRCxNQUVPO0FBQ0wsYUFBSzJOLFNBQUwsR0FBaUI7QUFBQSxpQkFBTTNOLE1BQU47QUFBQSxTQUFqQjtBQUNEOztBQUNELGFBQU8sSUFBUDtBQUNEOzs7Z0NBRVc7QUFBQTs7QUFDVixhQUFPLElBQUlnTyw4Q0FBTyxDQUFDQyxNQUFaLEdBQ0pqYSxHQURJLENBQ0EsR0FEQSxFQUNLLEtBQUt3WixXQUFMLENBQWlCbWMsT0FEdEIsRUFFSnpiLElBRkksQ0FFQyxPQUZELEVBRVUsS0FBS1YsV0FBTCxDQUFpQnFjLFFBRjNCLEVBR0ozYixJQUhJLENBR0MsYUFIRCxFQUdnQixLQUFLVixXQUFMLENBQWlCTSxRQUhqQyxFQUlKOVosR0FKSSxDQUlBLFlBSkEsRUFJYyxLQUFLd1osV0FBTCxDQUFpQmdHLFNBSi9CLEVBS0oyVyxHQUxJLENBS0EsR0FMQSxFQUtLLEtBQUszYyxXQUFMLENBQWlCaUcsTUFMdEIsRUFNSnZGLElBTkksQ0FNQyxHQU5ELEVBTU0sS0FBS1YsV0FBTCxDQUFpQjFjLE1BTnZCLEVBT0pzNUIsR0FQSSxDQU9BLFVBQUM1eUIsR0FBRCxFQUFNc0osR0FBTixFQUFXQyxHQUFYLEVBQWdCdkgsSUFBaEIsRUFBeUI7QUFDNUIsY0FBSSxDQUFDb1UsT0FBTCxHQUFlcFcsR0FBZixFQUFvQixJQUFwQixFQUEwQnNKLEdBQTFCLEVBQStCQyxHQUEvQixFQUFvQ3ZILElBQXBDO0FBQ0QsT0FUSSxDQUFQO0FBVUQ7Ozt5QkFFSWdVLFcsRUFBYTtBQUNoQixXQUFLVyxjQUFMLENBQW9CLFNBQXBCLEVBQStCWCxXQUEvQjs7QUFDQSxXQUFLVyxjQUFMLENBQW9CLFVBQXBCLEVBQWdDWCxXQUFoQzs7QUFDQSxhQUFPLElBQVA7QUFDRDs7OzZCQUVRQSxXLEVBQWE7QUFDcEIsYUFBTyxLQUFLVyxjQUFMLENBQW9CLFVBQXBCLEVBQWdDWCxXQUFoQyxDQUFQO0FBQ0Q7Ozs4QkFFU0EsVyxFQUFhO0FBQ3JCLGFBQU8sS0FBS1csY0FBTCxDQUFvQixXQUFwQixFQUFpQ1gsV0FBakMsQ0FBUDtBQUNEOzs7MkJBRU1BLFcsRUFBYTtBQUNsQixhQUFPLEtBQUtXLGNBQUwsQ0FBb0IsUUFBcEIsRUFBOEJYLFdBQTlCLENBQVA7QUFDRDs7OzJCQUVNQSxXLEVBQWE7QUFDbEIsYUFBTyxLQUFLVyxjQUFMLENBQW9CLFFBQXBCLEVBQThCWCxXQUE5QixDQUFQO0FBQ0Q7OzttQ0FFY1ksTSxFQUFRWixXLEVBQWE7QUFDbEMsVUFBSSxDQUFDN1MsS0FBSyxDQUFDQyxPQUFOLENBQWM0UyxXQUFkLENBQUwsRUFBaUM7QUFDL0JBLG1CQUFXLEdBQUcsQ0FBQ0EsV0FBRCxDQUFkO0FBQ0Q7O0FBQ0QsV0FBS0EsV0FBTCxDQUFpQlksTUFBakIsSUFBMkJaLFdBQVcsQ0FBQzdRLE1BQVosQ0FBbUIsS0FBSzZRLFdBQUwsQ0FBaUJZLE1BQWpCLENBQW5CLENBQTNCO0FBQ0EsYUFBTyxJQUFQO0FBQ0QsSyxDQUVEOzs7O2dDQUNZO0FBQ1YsWUFBTSxJQUFJamEsS0FBSixDQUFVLHVCQUFWLENBQU47QUFDRDs7OzRCQUVPaWEsTSxFQUFRO0FBQ2QsVUFBSUEsTUFBTSxLQUFLLFFBQWYsRUFBeUI7QUFDdkIsZUFBTyxVQUFDNVcsR0FBRCxFQUFNYyxJQUFOLEVBQVl3SSxHQUFaLEVBQWlCQyxHQUFqQixFQUFzQnZILElBQXRCLEVBQStCO0FBQ3BDLGNBQUloQyxHQUFKLEVBQVM7QUFDUCxtQkFBTzZ5QixJQUFJLENBQUM3eUIsR0FBRCxFQUFNLElBQU4sRUFBWXNKLEdBQVosRUFBaUJDLEdBQWpCLEVBQXNCdkgsSUFBdEIsQ0FBWDtBQUNEOztBQUVEbEIsY0FBSSxHQUFHQSxJQUFJLENBQUMwRyxNQUFMLENBQ0wsVUFBQzdHLE1BQUQsRUFBUytLLE1BQVQsRUFBb0I7QUFDbEIsZ0JBQUksQ0FBQ0EsTUFBTCxFQUFhO0FBQ1gscUJBQU8vSyxNQUFQO0FBQ0Q7O0FBQ0QsZ0JBQUkrSyxNQUFNLENBQUMsQ0FBRCxDQUFOLFlBQXFCL08sS0FBekIsRUFBZ0M7QUFDOUJnRSxvQkFBTSxDQUFDZ0ssTUFBUCxDQUFjbE4sSUFBZCxDQUFtQmlPLE1BQW5CO0FBQ0QsYUFGRCxNQUVPLElBQUlBLE1BQU0sQ0FBQyxDQUFELENBQU4sWUFBcUJqUywyRUFBekIsRUFBMkM7QUFDaERrSCxvQkFBTSxDQUFDbVcsVUFBUCxDQUFrQnJaLElBQWxCLENBQXVCaU8sTUFBdkI7QUFDRCxhQUZNLE1BRUE7QUFDTC9LLG9CQUFNLENBQUM4SCxPQUFQLENBQWVoTCxJQUFmLENBQW9CaU8sTUFBcEI7QUFDRDs7QUFDRCxtQkFBTy9LLE1BQVA7QUFDRCxXQWJJLEVBY0w7QUFBQzhILG1CQUFPLEVBQUUsRUFBVjtBQUFja0Msa0JBQU0sRUFBRSxFQUF0QjtBQUEwQm1NLHNCQUFVLEVBQUU7QUFBdEMsV0FkSyxDQUFQO0FBaUJBK2IsY0FBSSxDQUFDLElBQUQsRUFBTy94QixJQUFQLEVBQWF3SSxHQUFiLEVBQWtCQyxHQUFsQixFQUF1QnZILElBQXZCLENBQUo7QUFDRCxTQXZCRDtBQXdCRDs7QUFFRCxVQUFJNFUsTUFBTSxLQUFLLFFBQWYsRUFBeUI7QUFDdkIsZUFBTyxVQUFDNVcsR0FBRCxFQUFNYyxJQUFOLEVBQVl3SSxHQUFaLEVBQWlCQyxHQUFqQixFQUFzQnZILElBQXRCLEVBQStCO0FBQ3BDLGNBQUloQyxHQUFKLEVBQVM7QUFDUCxnQkFBSSxFQUFFQSxHQUFHLFlBQVl2RywyRUFBakIsQ0FBSixFQUF3QztBQUN0QyxxQkFBT281QixJQUFJLENBQUM3eUIsR0FBRCxFQUFNLElBQU4sRUFBWXNKLEdBQVosRUFBaUJDLEdBQWpCLEVBQXNCdkgsSUFBdEIsQ0FBWDtBQUNEOztBQUNELG1CQUFPNndCLElBQUksQ0FBQyxJQUFELEVBQU87QUFBQy94QixrQkFBSSxFQUFFLElBQVA7QUFBYW9KLG1CQUFLLEVBQUVsSztBQUFwQixhQUFQLEVBQWlDc0osR0FBakMsRUFBc0NDLEdBQXRDLEVBQTJDdkgsSUFBM0MsQ0FBWDtBQUNEOztBQUNELGlCQUFPNndCLElBQUksQ0FBQyxJQUFELEVBQU87QUFBQy94QixnQkFBSSxFQUFFQSxJQUFQO0FBQWFvSixpQkFBSyxFQUFFO0FBQXBCLFdBQVAsRUFBa0NaLEdBQWxDLEVBQXVDQyxHQUF2QyxFQUE0Q3ZILElBQTVDLENBQVg7QUFDRCxTQVJEO0FBU0Q7O0FBRUQsYUFBTzZ3QixJQUFQOztBQUVBLGVBQVNBLElBQVQsQ0FBYzd5QixHQUFkLEVBQW1CYyxJQUFuQixFQUF5QndJLEdBQXpCLEVBQThCQyxHQUE5QixFQUFtQ3ZILElBQW5DLEVBQXlDO0FBQ3ZDLFlBQUloQyxHQUFKLEVBQVM7QUFDUGdDLGNBQUksQ0FBQ2hDLEdBQUQsQ0FBSjtBQUNELFNBRkQsTUFFTztBQUNMdUosYUFBRyxDQUFDTyxJQUFKLENBQVNoSixJQUFUO0FBQ0Q7QUFDRjtBQUNGOzs7Ozs7K0ZBRTJCd0ksRyxFQUFLQyxHLEVBQUt2SCxJLEVBQU1oQixROzs7Ozs7QUFDcEN3SCxxQixHQUFRLEtBQUsyTixTQUFMLENBQWU3TSxHQUFmLEVBQW9CQyxHQUFwQixDO0FBQ1I1SSxzQixHQUFTLEtBQUt5VixPQUFMLENBQWEsTUFBYixDOzs7dUJBRVU1TixLQUFLLENBQUNrRyxJQUFOLENBQVcxTixRQUFYLEM7OztBQUFqQkssd0I7QUFDTlYsc0JBQU0sQ0FBQyxJQUFELEVBQU9VLFFBQVAsRUFBaUJpSSxHQUFqQixFQUFzQkMsR0FBdEIsRUFBMkJ2SCxJQUEzQixDQUFOOzs7Ozs7O0FBRUFyQixzQkFBTSxlQUFNLElBQU4sRUFBWTJJLEdBQVosRUFBaUJDLEdBQWpCLEVBQXNCdkgsSUFBdEIsQ0FBTjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBS1M0dkIsNkVBQWYsRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNqU0E7Ozs7Ozs7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUEsSUFBTWtCLGNBQWMsR0FBRyxJQUF2QjtBQUVBOzs7Ozs7Ozs7Ozs7SUFXTWw1QixZOzs7OztBQUNKLDhCQUF3RTtBQUFBOztBQUFBLFFBQTNEa2hCLEdBQTJELFFBQTNEQSxHQUEyRDtBQUFBLFFBQXREaFAsU0FBc0QsUUFBdERBLFNBQXNEO0FBQUEsUUFBM0MxSyxHQUEyQyxRQUEzQ0EsR0FBMkM7QUFBQSxRQUF0QzJ4QixnQkFBc0MsUUFBdENBLGdCQUFzQztBQUFBLFFBQXBCbEIsaUJBQW9CLFFBQXBCQSxpQkFBb0I7O0FBQUE7O0FBQ3RFOztBQUVBLFFBQUksQ0FBQy9XLEdBQUwsRUFBVTtBQUNSLFlBQU0sSUFBSW5lLEtBQUosQ0FBVSxvREFBVixDQUFOO0FBQ0Q7O0FBRUQsVUFBS29lLFVBQUwsR0FBa0JqUCxTQUFTLElBQUksSUFBSXpTLHFFQUFKLEVBQS9CO0FBQ0EsVUFBSzJoQixJQUFMLEdBQVk1WixHQUFHLElBQUlMLDJEQUFuQjtBQUNBLFVBQUtpeUIsaUJBQUwsR0FBeUJELGdCQUFnQixJQUFJLEtBQTdDO0FBQ0EsVUFBS0UseUJBQUwsR0FBaUNwQixpQkFBaUIsSUFBSSxLQUF0RDtBQUNBLFVBQUs1VyxPQUFMLEdBQWVILEdBQUcsQ0FDZjVULE9BRFksQ0FDSixVQURJLEVBQ1EsTUFEUixFQUNnQjtBQURoQixLQUVaQSxPQUZZLENBRUosYUFGSSxFQUVXLEtBRlgsQ0FBZixDQVhzRSxDQWFwQzs7QUFib0M7QUFjdkU7QUFFRDs7Ozs7Ozs7Ozs7OzhGQUthd0UsTTs7Ozs7OztBQUNMd25CLHdCLEdBQVcsSUFBSUMsUUFBSixFOztBQUVqQixvQkFBSSxLQUFLRix5QkFBVCxFQUFvQztBQUM1QkcsOEJBRDRCLEdBQ2IsRUFEYTs7QUFFbEMsaURBQTRCajJCLE1BQU0sQ0FBQ29HLE9BQVAsQ0FBZW1JLE1BQWYsQ0FBNUIscUNBQW9EO0FBQUEsOElBQXhDMm5CLElBQXdDLDBCQUFsQzV2QixLQUFrQzs7QUFDbEQsd0JBQUlBLEtBQUssWUFBWXNDLElBQXJCLEVBQTJCO0FBQ3pCbXRCLDhCQUFRLENBQUNJLE1BQVQsQ0FBZ0I3eUIsSUFBSSxDQUFDQyxTQUFMLENBQWUyeUIsSUFBZixDQUFoQixFQUFzQzV2QixLQUF0QztBQUNELHFCQUZELE1BRU87QUFDTDJ2QixrQ0FBWSxDQUFDQyxJQUFELENBQVosR0FBcUI1dkIsS0FBckI7QUFDRDtBQUNGOztBQUNEeXZCLDBCQUFRLENBQUNJLE1BQVQsQ0FBZ0IsTUFBaEIsRUFBd0I3eUIsSUFBSSxDQUFDQyxTQUFMLENBQWUweUIsWUFBZixDQUF4QjtBQUNEOzs7dUJBRWdCLEtBQUtwWSxJQUFMO0FBQ2ZwRSx3QkFBTSxFQUFFLE1BRE87QUFFZnlFLHFCQUFHLEVBQUUsS0FBS0osT0FGSztBQUdmemMsc0JBQUksRUFBRSxLQUFLeTBCLHlCQUFMLEdBQWlDQyxRQUFqQyxHQUE0Q3p5QixJQUFJLENBQUNDLFNBQUwsQ0FBZWdMLE1BQWY7QUFIbkMsbUJBSVosQ0FBQyxLQUFLdW5CLHlCQUFOLElBQW1DO0FBQUMzWCx5QkFBTyxFQUFFO0FBQUMsb0NBQWdCO0FBQWpCO0FBQVYsaUJBSnZCLEU7OztBQUFiOWMsb0I7QUFPSkEsb0JBQUksR0FBR2lDLElBQUksQ0FBQ2MsS0FBTCxDQUFXL0MsSUFBWCxDQUFQOztxQkFFSUEsSUFBSSxDQUFDMEwsSzs7Ozs7c0JBQ0R6USw0RUFBZ0IsQ0FBQzhRLGNBQWpCLENBQWdDL0wsSUFBSSxDQUFDMEwsS0FBckMsQzs7O0FBR1IscUJBQUtnTixPQUFMLENBQWEsUUFBYixFQUF1QixDQUFDMVksSUFBSSxDQUFDc0MsSUFBTixDQUF2QjtpREFFT3RDLElBQUksQ0FBQ3NDLEk7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHZDs7Ozs7Ozs7Ozs7Ozs7Ozs7K0ZBV1dFLFE7Ozs7OztBQUNIdXlCLHdCLEdBQVcsS0FBS0MsWUFBTCxDQUFrQnh5QixRQUFsQixDOztzQkFFYm1hLDJDQUFHLENBQUNqTyxNQUFKLENBQVdxbUIsUUFBWCxFQUFxQjUxQixNQUFyQixHQUE4Qm0xQixjOzs7Ozs7dUJBQ25CLEtBQUtXLGdCQUFMLENBQXNCenlCLFFBQXRCLEM7Ozs7Ozs7dUJBR1EsS0FBS2dhLElBQUwsQ0FBVTtBQUMvQnBFLHdCQUFNLEVBQUUsS0FEdUI7QUFFL0J5RSxxQkFBRyxFQUFFRiwyQ0FBRyxDQUFDak8sTUFBSixDQUFXcW1CLFFBQVg7QUFGMEIsaUJBQVYsQzs7O0FBQWpCbHlCLHdCO2tEQUtDWixJQUFJLENBQUNjLEtBQUwsQ0FBV0YsUUFBWCxDOzs7Ozs7Ozs7Ozs7Ozs7O0FBR1Q7Ozs7Ozs7Ozs7OzsrRkFNZ0J3USxFLEVBQUl2SCxNOzs7Ozs7QUFDWjRRLHlCLEdBQVlDLDJDQUFHLENBQUM1WixLQUFKLENBQVUsS0FBSzBaLE9BQWYsRUFBd0IsSUFBeEIsQztBQUNsQkMseUJBQVMsQ0FBQ2hGLEtBQVYsQ0FBZ0JpSixJQUFoQixHQUF1QjFlLElBQUksQ0FBQ0MsU0FBTCxDQUFlNEosTUFBZixDQUF2QixDLENBQStDOztBQUMvQzRRLHlCQUFTLENBQUN3WSxRQUFWLEdBQXFCdlksMkNBQUcsQ0FBQ2phLE9BQUosQ0FBWWdhLFNBQVMsQ0FBQ3dZLFFBQXRCLEVBQWdDanpCLElBQUksQ0FBQ0MsU0FBTCxDQUFlbVIsRUFBZixDQUFoQyxDQUFyQjtBQUNBLHVCQUFPcUosU0FBUyxDQUFDRSxNQUFqQjs7dUJBRW1CLEtBQUtKLElBQUwsQ0FBVTtBQUMzQnBFLHdCQUFNLEVBQUUsS0FEbUI7QUFFM0J5RSxxQkFBRyxFQUFFRiwyQ0FBRyxDQUFDak8sTUFBSixDQUFXZ08sU0FBWDtBQUZzQixpQkFBVixDOzs7QUFBYjFjLG9CO2tEQUtDaUMsSUFBSSxDQUFDYyxLQUFMLENBQVcvQyxJQUFYLEM7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHVDs7Ozs7Ozs7Ozs7OytGQU1haUssTzs7Ozs7OztBQUNMa3JCLCtCLEdBQWtCLElBQUlSLFFBQUosRTs7cUJBRXBCLEtBQUtGLHlCOzs7OztBQUNEVyxxQyxHQUF3QixFOzs7Ozs7OztzQkFFbEJqTixRO3NCQUFVamIsTTs7QUFDcEIsc0JBQU1tb0IsY0FBYyxHQUFHLEVBQXZCOztBQUNBLG1EQUFvQjEyQixNQUFNLENBQUM2RyxJQUFQLENBQVkwSCxNQUFaLENBQXBCLG9DQUF5QztBQUFwQyx3QkFBTWxJLEtBQUssb0JBQVg7O0FBQ0gsd0JBQUlrSSxNQUFNLENBQUNsSSxLQUFELENBQU4sWUFBeUJ1QyxJQUE3QixFQUFtQztBQUNqQzR0QixxQ0FBZSxDQUFDTCxNQUFoQixDQUF1Qjd5QixJQUFJLENBQUNDLFNBQUwsQ0FBZTtBQUFDaW1CLGdDQUFRLEVBQVJBLFFBQUQ7QUFBV25qQiw2QkFBSyxFQUFMQTtBQUFYLHVCQUFmLENBQXZCLEVBQTBEa0ksTUFBTSxDQUFDbEksS0FBRCxDQUFoRTtBQUNBcXdCLG9DQUFjLENBQUNwMkIsSUFBZixDQUFvQitGLEtBQXBCO0FBQ0Q7QUFDRjs7QUFFRCxzQkFBTXN3QixjQUFjLEdBQUczMkIsTUFBTSxDQUFDNkcsSUFBUCxDQUFZMEgsTUFBWixFQUNwQjJrQixNQURvQixDQUNiLFVBQUFwcUIsR0FBRztBQUFBLDJCQUFJLENBQUM0dEIsY0FBYyxDQUFDdHpCLFFBQWYsQ0FBd0IwRixHQUF4QixDQUFMO0FBQUEsbUJBRFUsRUFFcEJ1QixNQUZvQixDQUViLFVBQUN1c0IsR0FBRCxFQUFNOXRCLEdBQU47QUFBQSwwR0FBbUI4dEIsR0FBbkIsbUZBQXlCOXRCLEdBQXpCLEVBQStCeUYsTUFBTSxDQUFDekYsR0FBRCxDQUFyQztBQUFBLG1CQUZhLEVBRWlDLEVBRmpDLENBQXZCO0FBSUEydEIsdUNBQXFCLENBQUNuMkIsSUFBdEIsQ0FBMkIsQ0FBQ2twQixRQUFELEVBQVdtTixjQUFYLENBQTNCOzs7QUFiRixpQ0FBaUNyckIsT0FBakMsdUhBQTBDO0FBQUE7QUFjekM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVEa3JCLCtCQUFlLENBQUNMLE1BQWhCLENBQXVCLE1BQXZCLEVBQStCN3lCLElBQUksQ0FBQ0MsU0FBTCxDQUFla3pCLHFCQUFmLENBQS9COzs7O3VCQUdlLEtBQUs1WSxJQUFMO0FBQ2ZwRSx3QkFBTSxFQUFFO0FBRE8sbUJBRVosQ0FBQyxLQUFLcWMseUJBQU4sSUFBbUM7QUFDcEMzWCx5QkFBTyxFQUFFO0FBQ1Asb0NBQWdCO0FBRFQ7QUFEMkIsaUJBRnZCO0FBT2ZELHFCQUFHLEVBQUUsS0FBS0osT0FQSztBQVFmemMsc0JBQUksRUFBRSxLQUFLeTBCLHlCQUFMLEdBQWlDVSxlQUFqQyxHQUFtRGx6QixJQUFJLENBQUNDLFNBQUwsQ0FBZStILE9BQWY7QUFSMUMsbUI7OztBQUFiakssb0I7QUFXSkEsb0JBQUksR0FBR2lDLElBQUksQ0FBQ2MsS0FBTCxDQUFXL0MsSUFBWCxDQUFQO0FBQ00rSyxtQixHQUFNLEU7O0FBRVosb0JBQUkvSyxJQUFJLENBQUNpSyxPQUFMLElBQWdCakssSUFBSSxDQUFDaUssT0FBTCxDQUFhOUssTUFBakMsRUFBeUM7QUFDdkMsdUJBQUt1WixPQUFMLENBQWEsUUFBYixFQUF1QjFZLElBQUksQ0FBQ2lLLE9BQTVCO0FBQ0FjLHFCQUFHLENBQUM5TCxJQUFKLE9BQUE4TCxHQUFHLGtGQUFTL0ssSUFBSSxDQUFDaUssT0FBZCxFQUFIO0FBQ0Q7O3NCQUNHakssSUFBSSxDQUFDc1ksVUFBTCxJQUFtQnRZLElBQUksQ0FBQ3NZLFVBQUwsQ0FBZ0JuWixNOzs7Ozs7Ozs7O0FBQ3JDLGtDQUFvQmEsSUFBSSxDQUFDc1ksVUFBekIsMkhBQXFDO0FBQTFCNU0sdUJBQTBCOztBQUNuQyxzQkFBSUEsS0FBSyxJQUFJQSxLQUFLLENBQUMsQ0FBRCxDQUFsQixFQUF1QjtBQUNyQkEseUJBQUssQ0FBQyxDQUFELENBQUwsR0FBV3pRLDRFQUFnQixDQUFDOFEsY0FBakIsQ0FBZ0NMLEtBQUssQ0FBQyxDQUFELENBQXJDLENBQVg7QUFDQVgsdUJBQUcsQ0FBQzlMLElBQUosQ0FBU3lNLEtBQVQ7QUFDRDtBQUNGOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7c0JBRUMxTCxJQUFJLENBQUNtTSxNQUFMLElBQWVuTSxJQUFJLENBQUNtTSxNQUFMLENBQVloTixNOzs7Ozs7Ozs7O0FBQzdCLGtDQUFvQmEsSUFBSSxDQUFDbU0sTUFBekIsMkhBQWlDO0FBQXRCVCx3QkFBc0I7O0FBQy9CLHNCQUFJQSxNQUFLLElBQUlBLE1BQUssQ0FBQyxDQUFELENBQWxCLEVBQXVCO0FBQ3JCQSwwQkFBSyxDQUFDLENBQUQsQ0FBTCxHQUFXL00sTUFBTSxDQUFDd0ksTUFBUCxDQUFjLElBQUloSixLQUFKLEVBQWQsRUFBMkJ1TixNQUFLLENBQUMsQ0FBRCxDQUFoQyxDQUFYLENBRHFCLENBQzRCOztBQUNqRFgsdUJBQUcsQ0FBQzlMLElBQUosQ0FBU3lNLE1BQVQ7QUFDRDtBQUNGOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7a0RBR0lYLEc7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHVDs7Ozs7Ozs7Ozs7OytGQU1vQm1DLE0sRUFBUWliLFE7Ozs7OztxQkFDdEIsS0FBS3FNLGlCOzs7Ozs7dUJBQ00sS0FBS2pZLFVBQUwsQ0FBZ0J4RSxhQUFoQixDQUE4QjdLLE1BQTlCLEM7Ozs7OztBQUdUd1AseUIsR0FBWUMsMkNBQUcsQ0FBQzVaLEtBQUosQ0FBVSxLQUFLMFosT0FBZixFQUF3QixJQUF4QixDO0FBQ2xCQyx5QkFBUyxDQUFDd1ksUUFBVixHQUFxQnZZLDJDQUFHLENBQUNqYSxPQUFKLENBQVlnYSxTQUFTLENBQUN3WSxRQUF0QixFQUFnQyxZQUFoQyxDQUFyQjs7O3VCQUltQixLQUFLMVksSUFBTCxDQUFVO0FBQ3pCcEUsd0JBQU0sRUFBRSxNQURpQjtBQUV6QnlFLHFCQUFHLEVBQUVGLDJDQUFHLENBQUNqTyxNQUFKLENBQVdnTyxTQUFYLENBRm9CO0FBR3pCMWMsc0JBQUksRUFBRTtBQUNKa04sMEJBQU0sRUFBTkEsTUFESTtBQUVKbUcsc0JBQUUsRUFBRThVO0FBRkEsbUJBSG1CO0FBT3pCN2Msc0JBQUksRUFBRTtBQVBtQixpQkFBVixDOzs7QUFBakJ6SSx3Qjs7Ozs7Ozs7c0JBVUksYUFBSXRFLFVBQUosS0FBbUIsRzs7Ozs7O3VCQUlVLEtBQUtnZSxVQUFMLENBQWdCeEUsYUFBaEIsQ0FBOEI3SyxNQUE5QixDOzs7QUFBekJsQixnQzs7b0JBQ0RBLGdCQUFnQixDQUFDcEUsT0FBakIsRTs7Ozs7a0RBQ0lvRSxnQjs7Ozs7O2tEQU1OL1EsNEVBQWdCLENBQUM4USxjQUFqQixDQUFnQ2xKLFFBQWhDLEM7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHVDs7Ozs7Ozs7OzRDQU13QmlKLE0sRUFBUTtBQUM5QixhQUFPLEtBQUt5USxVQUFMLENBQWdCcFMsdUJBQWhCLENBQXdDMkIsTUFBeEMsQ0FBUDtBQUNEOzs7aUNBRVl0SixRLEVBQVU7QUFDckIsVUFBTWthLFNBQVMsR0FBR0MsMkNBQUcsQ0FBQzVaLEtBQUosQ0FBVSxLQUFLMFosT0FBZixFQUF3QixJQUF4QixDQUFsQjtBQUNBQyxlQUFTLENBQUNoRixLQUFWLENBQWdCNUwsTUFBaEIsR0FBeUI3SixJQUFJLENBQUNDLFNBQUwsQ0FBZU0sUUFBUSxDQUFDc0osTUFBeEIsQ0FBekI7QUFDQTRRLGVBQVMsQ0FBQ2hGLEtBQVYsQ0FBZ0JrUCxNQUFoQixHQUF5QnBrQixRQUFRLENBQUNva0IsTUFBVCxJQUFtQixDQUE1Qzs7QUFDQSxVQUFJcGtCLFFBQVEsQ0FBQ21rQixLQUFiLEVBQW9CO0FBQ2xCakssaUJBQVMsQ0FBQ2hGLEtBQVYsQ0FBZ0JpUCxLQUFoQixHQUF3Qm5rQixRQUFRLENBQUNta0IsS0FBakM7QUFDRDs7QUFDRCxVQUFJbmtCLFFBQVEsQ0FBQ3F3QixPQUFiLEVBQXNCO0FBQ3BCblcsaUJBQVMsQ0FBQ2hGLEtBQVYsQ0FBZ0JtYixPQUFoQixHQUEwQjV3QixJQUFJLENBQUNDLFNBQUwsQ0FBZU0sUUFBUSxDQUFDcXdCLE9BQXhCLENBQTFCO0FBQ0Q7O0FBQ0QsVUFBSXJ3QixRQUFRLENBQUN5ZixJQUFiLEVBQW1CO0FBQ2pCdkYsaUJBQVMsQ0FBQ2hGLEtBQVYsQ0FBZ0J1SyxJQUFoQixHQUF1QmhnQixJQUFJLENBQUNDLFNBQUwsQ0FBZU0sUUFBUSxDQUFDeWYsSUFBeEIsQ0FBdkI7QUFDRDs7QUFDRCxVQUFJemYsUUFBUSxDQUFDNnRCLEtBQWIsRUFBb0I7QUFDbEIzVCxpQkFBUyxDQUFDaEYsS0FBVixDQUFnQjJZLEtBQWhCLEdBQXdCcHVCLElBQUksQ0FBQ0MsU0FBTCxDQUFlTSxRQUFRLENBQUM2dEIsS0FBeEIsQ0FBeEI7QUFDRDs7QUFDRCxhQUFPM1QsU0FBUyxDQUFDRSxNQUFqQjtBQUVBLGFBQU9GLFNBQVA7QUFDRDs7Ozs7OytGQUVzQmxhLFE7Ozs7OztBQUNmZ3pCLDJCLEdBQWMsRTtBQUNwQkEsMkJBQVcsQ0FBQzFwQixNQUFaLEdBQXFCdEosUUFBUSxDQUFDc0osTUFBOUI7QUFDQTBwQiwyQkFBVyxDQUFDNU8sTUFBWixHQUFxQnBrQixRQUFRLENBQUNva0IsTUFBVCxJQUFtQixDQUF4Qzs7QUFDQSxvQkFBSXBrQixRQUFRLENBQUNta0IsS0FBYixFQUFvQjtBQUNsQjZPLDZCQUFXLENBQUM3TyxLQUFaLEdBQW9CbmtCLFFBQVEsQ0FBQ21rQixLQUE3QjtBQUNEOztBQUNELG9CQUFJbmtCLFFBQVEsQ0FBQ3F3QixPQUFiLEVBQXNCO0FBQ3BCMkMsNkJBQVcsQ0FBQzNDLE9BQVosR0FBc0Jyd0IsUUFBUSxDQUFDcXdCLE9BQS9CO0FBQ0Q7O0FBQ0Qsb0JBQUlyd0IsUUFBUSxDQUFDeWYsSUFBYixFQUFtQjtBQUNqQnVULDZCQUFXLENBQUN2VCxJQUFaLEdBQW1CemYsUUFBUSxDQUFDeWYsSUFBNUI7QUFDRDs7QUFDRCxvQkFBSXpmLFFBQVEsQ0FBQzZ0QixLQUFiLEVBQW9CO0FBQ2xCbUYsNkJBQVcsQ0FBQ25GLEtBQVosR0FBb0I3dEIsUUFBUSxDQUFDNnRCLEtBQTdCO0FBQ0Q7O0FBRUszVCx5QixHQUFZQywyQ0FBRyxDQUFDNVosS0FBSixDQUFVLEtBQUswWixPQUFmLEVBQXdCLElBQXhCLEM7QUFDbEJDLHlCQUFTLENBQUN3WSxRQUFWLEdBQXFCdlksMkNBQUcsQ0FBQ2phLE9BQUosQ0FBWWdhLFNBQVMsQ0FBQ3dZLFFBQXRCLEVBQWdDLE1BQWhDLENBQXJCOzt1QkFFYSxLQUFLMVksSUFBTCxDQUFVO0FBQ3JCcEUsd0JBQU0sRUFBRSxNQURhO0FBRXJCOU0sc0JBQUksRUFBRSxJQUZlO0FBR3JCdVIscUJBQUcsRUFBRUYsMkNBQUcsQ0FBQ2pPLE1BQUosQ0FBV2dPLFNBQVgsQ0FIZ0I7QUFJckIxYyxzQkFBSSxFQUFFdzFCO0FBSmUsaUJBQVYsQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztFQXRRVXo1QiwyRDs7QUErUVpYLDJFQUFmLEU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzFTQTs7Ozs7OztBQVFBO0FBRUE7Ozs7Ozs7QUFNQSxTQUFTZCxnQkFBVCxDQUEwQjBQLEtBQTFCLEVBQWlDNm9CLE9BQWpDLEVBQTBDO0FBQ3hDLFNBQU96ckIsOERBQVEsQ0FBQzRDLEtBQUQsRUFBUTtBQUNma0csUUFEZTtBQUFBO0FBQUE7QUFBQSw4RkFDVkgsT0FEVTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRW5CQSx1QkFBTyxDQUFDOGlCLE9BQVIsa0ZBQ0tBLE9BREwsRUFFSzlpQixPQUFPLENBQUM4aUIsT0FGYjtBQUZtQjtBQUFBLHVCQU1ON29CLEtBQUssQ0FBQ2tHLElBQU4sQ0FBV0gsT0FBWCxDQU5NOztBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQSxHQUFSLENBQWY7QUFTRDs7QUFFY3pWLCtFQUFmLEU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDNUJBOzs7Ozs7OztBQVFBOzs7SUFHTTBCLGlCOzs7Ozs7Ozs7O0FBQ0o7Ozs7Ozs7QUFNSztBQUFZO0FBQ2YsYUFBT3lHLE9BQU8sQ0FBQ0MsT0FBUixDQUFnQixFQUFoQixDQUFQO0FBQ0Q7QUFFRDs7Ozs7Ozs7OztBQU1TO0FBQVE7QUFDZixhQUFPRCxPQUFPLENBQUNDLE9BQVIsQ0FBZ0IsRUFBaEIsQ0FBUDtBQUNEOzs7Ozs7QUFHWTFHLGdGQUFmLEU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDakNBOzs7Ozs7O0FBUUE7QUFDQTtBQUVBOzs7Ozs7O0lBTU15NUIsYzs7Ozs7NkJBQ1k7QUFDZCxhQUFPLElBQUlBLGNBQUosRUFBUDtBQUNEOzs7QUFFRCw0QkFBYztBQUFBOztBQUFBOztBQUNaLFNBQUtqZSxXQUFMLEdBQW1CO0FBQ2pCdEgsVUFBSSxFQUFFLENBQUN0RixrRUFBWTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsK0VBQUMsaUJBQU9FLEdBQVAsRUFBWUMsR0FBWixFQUFpQnZILElBQWpCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNad0csdUJBRFksR0FDSixLQUFJLENBQUMyTixTQUFMLENBQWU3TSxHQUFmLEVBQW9CQyxHQUFwQixDQURJO0FBQUE7QUFBQTtBQUFBLHlCQUdPZixLQUFLLENBQUNrRyxJQUFOLENBQVdwRixHQUFHLENBQUM0TSxLQUFKLENBQVVnZSxDQUFyQixDQUhQOztBQUFBO0FBR1Y3eUIsMEJBSFU7O0FBSWhCLHVCQUFJLENBQUMrVSxPQUFMLENBQWEsSUFBYixFQUFtQi9VLFFBQW5CLEVBQTZCaUksR0FBN0IsRUFBa0NDLEdBQWxDLEVBQXVDdkgsSUFBdkM7O0FBSmdCO0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQU1oQix1QkFBSSxDQUFDb1UsT0FBTCxjQUFrQixJQUFsQixFQUF3QjlNLEdBQXhCLEVBQTZCQyxHQUE3QixFQUFrQ3ZILElBQWxDOztBQU5nQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxTQUFEOztBQUFBO0FBQUE7QUFBQTtBQUFBLFVBQWIsQ0FEVztBQVVqQjhQLGNBQVEsRUFBRSxDQUFDMUksa0VBQVk7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLCtFQUFDLGtCQUFPRSxHQUFQLEVBQVlDLEdBQVosRUFBaUJ2SCxJQUFqQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDaEI2UCxvQkFEZ0IsR0FDWHBSLElBQUksQ0FBQ2MsS0FBTCxDQUFXK0gsR0FBRyxDQUFDMUwsTUFBSixDQUFXaVUsRUFBdEIsQ0FEVztBQUVoQnJKLHVCQUZnQixHQUVSLEtBQUksQ0FBQzJOLFNBQUwsQ0FBZTdNLEdBQWYsRUFBb0JDLEdBQXBCLENBRlE7QUFBQTtBQUFBO0FBQUEseUJBSUdmLEtBQUssQ0FBQ3NKLFFBQU4sQ0FBZUQsRUFBZixDQUpIOztBQUFBO0FBSWR4USwwQkFKYzs7QUFLcEIsdUJBQUksQ0FBQytVLE9BQUwsQ0FBYSxJQUFiLEVBQW1CL1UsUUFBbkIsRUFBNkJpSSxHQUE3QixFQUFrQ0MsR0FBbEMsRUFBdUN2SCxJQUF2Qzs7QUFMb0I7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBT3BCLHVCQUFJLENBQUNvVSxPQUFMLGVBQWtCLElBQWxCLEVBQXdCOU0sR0FBeEIsRUFBNkJDLEdBQTdCLEVBQWtDdkgsSUFBbEM7O0FBUG9CO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLFNBQUQ7O0FBQUE7QUFBQTtBQUFBO0FBQUEsVUFBYjtBQVZPLEtBQW5CO0FBcUJEO0FBRUQ7Ozs7Ozs7Ozs7MEJBTU13RyxNLEVBQU87QUFDWCxVQUFJLE9BQU9BLE1BQVAsS0FBaUIsVUFBckIsRUFBaUM7QUFDL0IsYUFBSzJOLFNBQUwsR0FBaUIzTixNQUFqQjtBQUNELE9BRkQsTUFFTztBQUNMLGFBQUsyTixTQUFMLEdBQWlCO0FBQUEsaUJBQU0zTixNQUFOO0FBQUEsU0FBakI7QUFDRDs7QUFDRCxhQUFPLElBQVA7QUFDRDs7O2dDQUVXO0FBQ1YsYUFBTyxJQUFJZ08sOENBQU8sQ0FBQ0MsTUFBWixHQUNKamEsR0FESSxDQUNBLEdBREEsRUFDSyxLQUFLd1osV0FBTCxDQUFpQnRILElBRHRCLEVBRUpsUyxHQUZJLENBRUEsWUFGQSxFQUVjLEtBQUt3WixXQUFMLENBQWlCbEUsUUFGL0IsQ0FBUDtBQUdEOzs7eUJBRUlrRSxXLEVBQWE7QUFDaEIsVUFBSSxDQUFDN1MsS0FBSyxDQUFDQyxPQUFOLENBQWM0UyxXQUFkLENBQUwsRUFBaUM7QUFDL0JBLG1CQUFXLEdBQUcsQ0FBQ0EsV0FBRCxDQUFkO0FBQ0Q7O0FBQ0QsV0FBS0EsV0FBTCxDQUFpQnRILElBQWpCLEdBQXdCc0gsV0FBVyxDQUFDN1EsTUFBWixDQUFtQixLQUFLNlEsV0FBTCxDQUFpQnRILElBQXBDLENBQXhCO0FBQ0EsYUFBTyxJQUFQO0FBQ0Q7Ozs2QkFFUXNILFcsRUFBYTtBQUNwQixVQUFJLENBQUM3UyxLQUFLLENBQUNDLE9BQU4sQ0FBYzRTLFdBQWQsQ0FBTCxFQUFpQztBQUMvQkEsbUJBQVcsR0FBRyxDQUFDQSxXQUFELENBQWQ7QUFDRDs7QUFDRCxXQUFLQSxXQUFMLENBQWlCbEUsUUFBakIsR0FBNEJrRSxXQUFXLENBQUM3USxNQUFaLENBQW1CLEtBQUs2USxXQUFMLENBQWlCbEUsUUFBcEMsQ0FBNUI7QUFDQSxhQUFPLElBQVA7QUFDRCxLLENBRUQ7Ozs7Z0NBQ1k7QUFDVixZQUFNblYsS0FBSyxDQUFDLHVCQUFELENBQVg7QUFDRDs7OzRCQUVPcUQsRyxFQUFLYyxJLEVBQU13SSxHLEVBQUtDLEcsRUFBS3ZILEksRUFBTTtBQUNqQyxVQUFJaEMsR0FBSixFQUFTO0FBQ1BnQyxZQUFJLENBQUNoQyxHQUFELENBQUo7QUFDRCxPQUZELE1BRU87QUFDTCxZQUFJLE9BQU9jLElBQVAsS0FBZ0IsUUFBcEIsRUFBOEI7QUFDNUJBLGNBQUksR0FBR0EsSUFBSSxDQUFDd0MsUUFBTCxFQUFQO0FBQ0Q7O0FBQ0RpRyxXQUFHLENBQUNPLElBQUosQ0FBU2hKLElBQVQ7QUFDRDtBQUNGOzs7Ozs7QUFHWW16Qiw2RUFBZixFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3BHQTs7Ozs7OztBQVFBO0FBQ0E7O0lBRU1FLHVCOzs7QUFDSjs7Ozs7OztBQU9BLG1DQUFZQyxNQUFaLEVBQW9CaHpCLEdBQXBCLEVBQXlCO0FBQUE7O0FBQ3ZCLFNBQUtpekIsT0FBTCxHQUFlRCxNQUFmO0FBQ0EsU0FBS3BaLElBQUwsR0FBWTVaLEdBQUcsSUFBSUwsMERBQW5CO0FBQ0EsU0FBS2thLE9BQUwsR0FBZW1aLE1BQU0sQ0FDbEJsdEIsT0FEWSxDQUNKLFVBREksRUFDUSxNQURSLEVBQ2dCO0FBRGhCLEtBRVpBLE9BRlksQ0FFSixhQUZJLEVBRVcsS0FGWCxDQUFmLENBSHVCLENBS1c7QUFDbkM7QUFFRDs7Ozs7Ozs7Ozs7OzhGQUtXa1UsTTs7Ozs7O0FBQ0hGLHlCLEdBQVlDLDBDQUFHLENBQUM1WixLQUFKLENBQVUsS0FBSzBaLE9BQWYsRUFBd0IsSUFBeEIsQztBQUNsQix1QkFBT0MsU0FBUyxDQUFDRSxNQUFqQjs7QUFDQSxvQkFBSUEsTUFBSixFQUFZO0FBQ1ZGLDJCQUFTLENBQUNoRixLQUFWLENBQWdCZ2UsQ0FBaEIsR0FBb0I5WSxNQUFwQjtBQUNEOzs7dUJBRWtCLEtBQUtKLElBQUwsQ0FBVTtBQUMzQnBFLHdCQUFNLEVBQUUsS0FEbUI7QUFFM0IwRSx5QkFBTyxFQUFFO0FBQ1Asb0NBQWdCO0FBRFQsbUJBRmtCO0FBSzNCRCxxQkFBRyxFQUFFRiwwQ0FBRyxDQUFDak8sTUFBSixDQUFXZ08sU0FBWDtBQUxzQixpQkFBVixDOzs7QUFBYjFjLG9CO2lEQVFDaUMsSUFBSSxDQUFDYyxLQUFMLENBQVcvQyxJQUFYLEM7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHVDs7Ozs7Ozs7Ozs7K0ZBS2VxVCxFOzs7Ozs7QUFDUHFKLHlCLEdBQVlDLDBDQUFHLENBQUM1WixLQUFKLENBQVUsS0FBSzBaLE9BQWYsRUFBd0IsSUFBeEIsQztBQUNsQkMseUJBQVMsQ0FBQ3dZLFFBQVYsR0FBcUJ2WSwwQ0FBRyxDQUFDamEsT0FBSixDQUFZZ2EsU0FBUyxDQUFDd1ksUUFBdEIsa0JBQXlDanpCLElBQUksQ0FBQ0MsU0FBTCxDQUFlbVIsRUFBZixDQUF6QyxFQUFyQjs7dUJBRWlCLEtBQUttSixJQUFMLENBQVU7QUFDekJwRSx3QkFBTSxFQUFFLEtBRGlCO0FBRXpCMEUseUJBQU8sRUFBRTtBQUNQLG9DQUFnQjtBQURULG1CQUZnQjtBQUt6QkQscUJBQUcsRUFBRUYsMENBQUcsQ0FBQ2pPLE1BQUosQ0FBV2dPLFNBQVg7QUFMb0IsaUJBQVYsQzs7O0FBQWIxYyxvQjtBQVFKQSxvQkFBSSxHQUFHaUMsSUFBSSxDQUFDYyxLQUFMLENBQVcvQyxJQUFYLENBQVA7a0RBRU9BLEk7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUlJMjFCLHNGQUFmLEU7Ozs7Ozs7Ozs7OztBQ3pFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7OztBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQUcsZ0RBQWEsQ0FBQ0MsY0FBZCxHQUErQjNDLG1FQUFjLENBQUN0NEIsTUFBOUM7QUFDQWc3QixnREFBYSxDQUFDRSxjQUFkLEdBQStCUCw0REFBYyxDQUFDMzZCLE1BQTlDO0FBQ0FnN0IsZ0RBQWEsQ0FBQ0csY0FBZCxHQUErQjFlLDREQUFjLENBQUN6YyxNQUE5QztBQUNBZzdCLGdEQUFhLENBQUNqUCxLQUFkLEdBQXNCQSxvRUFBdEI7QUFFZWlQLCtHQUFmLEU7Ozs7Ozs7Ozs7O0FDbkJBLG9EOzs7Ozs7Ozs7OztBQ0FBLHlFOzs7Ozs7Ozs7OztBQ0FBLG9FOzs7Ozs7Ozs7OztBQ0FBLGtFOzs7Ozs7Ozs7OztBQ0FBLCtEOzs7Ozs7Ozs7OztBQ0FBLGtFOzs7Ozs7Ozs7OztBQ0FBLDJEOzs7Ozs7Ozs7OztBQ0FBLGtFOzs7Ozs7Ozs7OztBQ0FBLDREOzs7Ozs7Ozs7OztBQ0FBLGdFOzs7Ozs7Ozs7OztBQ0FBLDJFOzs7Ozs7Ozs7OztBQ0FBLDZFOzs7Ozs7Ozs7OztBQ0FBLGlFOzs7Ozs7Ozs7OztBQ0FBLHFFOzs7Ozs7Ozs7OztBQ0FBLDBEOzs7Ozs7Ozs7OztBQ0FBLHVEOzs7Ozs7Ozs7OztBQ0FBLHVDOzs7Ozs7Ozs7OztBQ0FBLCtDOzs7Ozs7Ozs7OztBQ0FBLDBDOzs7Ozs7Ozs7OztBQ0FBLG9DOzs7Ozs7Ozs7OztBQ0FBLG1DOzs7Ozs7Ozs7OztBQ0FBLG1DOzs7Ozs7Ozs7OztBQ0FBLHVDOzs7Ozs7Ozs7OztBQ0FBLGtDOzs7Ozs7Ozs7OztBQ0FBLDZDOzs7Ozs7Ozs7OztBQ0FBLHNDOzs7Ozs7Ozs7OztBQ0FBLGdEOzs7Ozs7Ozs7OztBQ0FBLGdDOzs7Ozs7Ozs7OztBQ0FBLGdDIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiVUlLZXJuZWxcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wiVUlLZXJuZWxcIl0gPSBmYWN0b3J5KCk7XG59KShnbG9iYWwsIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSBcIi4vc3JjL25vZGUuanNcIik7XG4iLCIvKlxuICogQ29weXJpZ2h0ICjRgSkgMjAxNS1wcmVzZW50LCBTb2Z0SW5kZXggTExDLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG5pbXBvcnQgJy4vY29tbW9uL3NldEltbWVkaWF0ZSc7XG5pbXBvcnQgdmFyaWFibGVzIGZyb20gJy4vY29tbW9uL3ZhcmlhYmxlcyc7XG5pbXBvcnQgYXBwbHlHcmlkRmlsdGVycyBmcm9tICcuL2dyaWQvbW9kZWxzL2FwcGx5R3JpZEZpbHRlcnMnO1xuaW1wb3J0IEdyaWRDb21wb25lbnQgZnJvbSAnLi9ncmlkL0NvbXBvbmVudCc7XG5pbXBvcnQgRm9ybVNlcnZpY2UgZnJvbSAnLi9mb3JtL0Zvcm1TZXJ2aWNlJztcbmltcG9ydCBjb25uZWN0Rm9ybSBmcm9tICcuL2Zvcm0vY29ubmVjdEZvcm0nO1xuaW1wb3J0IFZhbGlkYXRvciBmcm9tICcuL2NvbW1vbi92YWxpZGF0aW9uL1ZhbGlkYXRvcic7XG5pbXBvcnQgZXhwb3J0R3JpZERhdGEgZnJvbSAnLi9ncmlkL2V4cG9ydC9leHBvcnRHcmlkRGF0YSc7XG5pbXBvcnQgdG9KU09OIGZyb20gJy4vZ3JpZC9leHBvcnQvZXhwb3J0ZXJzL3RvSlNPTic7XG5pbXBvcnQgVmFsaWRhdGlvbkVycm9ycyBmcm9tICcuL2NvbW1vbi92YWxpZGF0aW9uL1ZhbGlkYXRpb25FcnJvcnMnO1xuaW1wb3J0IEdyaWRYaHJNb2RlbCBmcm9tICcuL2dyaWQvbW9kZWxzL0dyaWRYaHJNb2RlbCc7XG5pbXBvcnQgR3JpZENvbGxlY3Rpb25Nb2RlbCBmcm9tICcuL2dyaWQvbW9kZWxzL0dyaWRDb2xsZWN0aW9uTW9kZWwnO1xuaW1wb3J0IEV2ZW50cyBmcm9tICcuL2NvbW1vbi9FdmVudHMnO1xuaW1wb3J0IEZvcm1Nb2RlbCBmcm9tICcuL2Zvcm0vRm9ybU1vZGVsJztcbmltcG9ydCBGb3JtWGhyTW9kZWwgZnJvbSAnLi9mb3JtL0Zvcm1YaHJNb2RlbCc7XG5pbXBvcnQgTGlzdFhock1vZGVsIGZyb20gJy4vbGlzdC9MaXN0WGhyTW9kZWwnO1xuaW1wb3J0IEFic3RyYWN0Rm9ybU1vZGVsIGZyb20gJy4vZm9ybS9BYnN0cmFjdEZvcm1Nb2RlbCc7XG5pbXBvcnQgQWJzdHJhY3RHcmlkTW9kZWwgZnJvbSAnLi9ncmlkL21vZGVscy9BYnN0cmFjdEdyaWRNb2RlbCc7XG5pbXBvcnQgQWJzdHJhY3RMaXN0TW9kZWwgZnJvbSAnLi9saXN0L0Fic3RyYWN0TGlzdE1vZGVsJztcbmltcG9ydCBUb0Zvcm1VcGRhdGUgZnJvbSAnLi9mb3JtL2FkYXB0ZXJzL0dyaWRUb0Zvcm1VcGRhdGUnO1xuaW1wb3J0IFRvRm9ybUNyZWF0ZSBmcm9tICcuL2Zvcm0vYWRhcHRlcnMvR3JpZFRvRm9ybUNyZWF0ZSc7XG5pbXBvcnQgU2VsZWN0IGZyb20gJy4vZWRpdG9ycy9TZWxlY3QnO1xuaW1wb3J0IFN1Z2dlc3RCb3ggZnJvbSAnLi9lZGl0b3JzL1N1Z2dlc3RCb3gnO1xuaW1wb3J0IERhdGVQaWNrZXIgZnJvbSAnLi9lZGl0b3JzL0RhdGVQaWNrZXInO1xuaW1wb3J0IENoZWNrYm94IGZyb20gJy4vZWRpdG9ycy9DaGVja2JveCc7XG5pbXBvcnQgTnVtYmVyIGZyb20gJy4vZWRpdG9ycy9OdW1iZXInO1xuaW1wb3J0IEFyZ3VtZW50c0Vycm9yIGZyb20gJy4vY29tbW9uL0FyZ3VtZW50c0Vycm9yJztcbmltcG9ydCBUaHJvdHRsZUVycm9yIGZyb20gJy4vY29tbW9uL1Rocm90dGxlRXJyb3InO1xuaW1wb3J0IGJvb2xlYW5WYWxpZGF0aW9uUnVsZSBmcm9tICcuL2NvbW1vbi92YWxpZGF0aW9uL3J1bGVzL2Jvb2xlYW4nO1xuaW1wb3J0IGRhdGVWYWxpZGF0aW9uUnVsZSBmcm9tICcuL2NvbW1vbi92YWxpZGF0aW9uL3J1bGVzL2RhdGUnO1xuaW1wb3J0IGVudW1WYWxpZGF0aW9uUnVsZSBmcm9tICcuL2NvbW1vbi92YWxpZGF0aW9uL3J1bGVzL2VudW0nO1xuaW1wb3J0IHNldFZhbGlkYXRpb25SdWxlIGZyb20gJy4vY29tbW9uL3ZhbGlkYXRpb24vcnVsZXMvc2V0JztcbmltcG9ydCBmbG9hdFZhbGlkYXRpb25SdWxlIGZyb20gJy4vY29tbW9uL3ZhbGlkYXRpb24vcnVsZXMvZmxvYXQnO1xuaW1wb3J0IHJlZ0V4cFZhbGlkYXRpb25SdWxlIGZyb20gJy4vY29tbW9uL3ZhbGlkYXRpb24vcnVsZXMvcmVnRXhwJztcbmltcG9ydCBub3ROdWxsVmFsaWRhdGlvblJ1bGUgZnJvbSAnLi9jb21tb24vdmFsaWRhdGlvbi9ydWxlcy9ub3ROdWxsJztcbmltcG9ydCBudW1iZXJWYWxpZGF0aW9uUnVsZSBmcm9tICcuL2NvbW1vbi92YWxpZGF0aW9uL3J1bGVzL251bWJlcic7XG5pbXBvcnQgbm90RW1wdHlWYWxpZGF0aW9uUnVsZSBmcm9tICcuL2NvbW1vbi92YWxpZGF0aW9uL3J1bGVzL25vdEVtcHR5JztcbmltcG9ydCBGb3JtTWl4aW4gZnJvbSAnLi9mb3JtL21peGluJztcblxuaWYgKCFnbG9iYWwuX2JhYmVsUG9seWZpbGwpIHtcbiAgcmVxdWlyZSgnQGJhYmVsL3BvbHlmaWxsL2Jyb3dzZXInKTtcbn1cblxuY29uc3QgVUlLZXJuZWwgPSB7XG4gIGFwcGx5R3JpZEZpbHRlcnMsXG4gIEdyaWQ6IEdyaWRDb21wb25lbnQsXG4gIEZvcm06IEZvcm1TZXJ2aWNlLFxuICBjb25uZWN0Rm9ybSxcbiAgY3JlYXRlVmFsaWRhdG9yOiBWYWxpZGF0b3IuY3JlYXRlLFxuICBleHBvcnRHcmlkRGF0YSxcbiAgdG9KU09OLFxuICBWYWxpZGF0aW9uRXJyb3JzLFxuICBNb2RlbHM6IHtcbiAgICBHcmlkOiB7XG4gICAgICBYaHI6IEdyaWRYaHJNb2RlbCxcbiAgICAgIENvbGxlY3Rpb246IEdyaWRDb2xsZWN0aW9uTW9kZWxcbiAgICB9LFxuICAgIEV2ZW50cyxcbiAgICBGb3JtOiBGb3JtTW9kZWwsXG4gICAgRm9ybVhocjogRm9ybVhock1vZGVsLFxuICAgIExpc3Q6IHtcbiAgICAgIFhocjogTGlzdFhock1vZGVsXG4gICAgfVxuICB9LFxuICBBYnN0cmFjdE1vZGVsczoge1xuICAgIEZvcm06IEFic3RyYWN0Rm9ybU1vZGVsLFxuICAgIEdyaWQ6IEFic3RyYWN0R3JpZE1vZGVsLFxuICAgIExpc3Q6IEFic3RyYWN0TGlzdE1vZGVsXG4gIH0sXG4gIEFkYXB0ZXJzOiB7XG4gICAgR3JpZDoge1xuICAgICAgVG9Gb3JtVXBkYXRlLFxuICAgICAgVG9Gb3JtQ3JlYXRlXG4gICAgfVxuICB9LFxuICBFZGl0b3JzOiB7XG4gICAgU2VsZWN0LFxuICAgIFN1Z2dlc3RCb3gsXG4gICAgRGF0ZVBpY2tlcixcbiAgICBDaGVja2JveCxcbiAgICBOdW1iZXJcbiAgfSxcbiAgQXJndW1lbnRzRXJyb3IsXG4gIFRocm90dGxlRXJyb3IsXG4gIFZhbGlkYXRvcnM6IHtcbiAgICBib29sZWFuOiBib29sZWFuVmFsaWRhdGlvblJ1bGUsXG4gICAgZGF0ZTogZGF0ZVZhbGlkYXRpb25SdWxlLFxuICAgIGVudW06IGVudW1WYWxpZGF0aW9uUnVsZSxcbiAgICBzZXQ6IHNldFZhbGlkYXRpb25SdWxlLFxuICAgIGZsb2F0OiBmbG9hdFZhbGlkYXRpb25SdWxlLFxuICAgIHJlZ0V4cDogcmVnRXhwVmFsaWRhdGlvblJ1bGUsXG4gICAgbm90TnVsbDogbm90TnVsbFZhbGlkYXRpb25SdWxlLFxuICAgIG51bWJlcjogbnVtYmVyVmFsaWRhdGlvblJ1bGUsXG4gICAgbm90RW1wdHk6IG5vdEVtcHR5VmFsaWRhdGlvblJ1bGVcbiAgfSxcbiAgTWl4aW5zOiB7XG4gICAgRm9ybTogRm9ybU1peGluXG4gIH0sXG4gIF9nZXQ6IHZhcmlhYmxlcy5nZXQsXG4gIF9zZXQ6IHZhcmlhYmxlcy5zZXRcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFVJS2VybmVsO1xuIiwiLypcbiAqIENvcHlyaWdodCAo0YEpIDIwMTUtcHJlc2VudCwgU29mdEluZGV4IExMQy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxuaW1wb3J0IHtnZXRTdGFja30gZnJvbSAnLi91dGlscyc7XG5cbmZ1bmN0aW9uIEFyZ3VtZW50c0Vycm9yKG1lc3NhZ2UpIHtcbiAgRXJyb3IuY2FsbCh0aGlzLCBtZXNzYWdlKTtcblxuICB0aGlzLm5hbWUgPSAnQXJndW1lbnRzRXJyb3InO1xuICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICB0aGlzLnN0YXR1cyA9IHRoaXMuc3RhdHVzQ29kZSA9IDQyMjtcbiAgdGhpcy5zdGFjayA9IGdldFN0YWNrKCk7XG59XG5cbkFyZ3VtZW50c0Vycm9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKTtcbkFyZ3VtZW50c0Vycm9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEFyZ3VtZW50c0Vycm9yO1xuXG5leHBvcnQgZGVmYXVsdCBBcmd1bWVudHNFcnJvcjtcbiIsIi8qXG4gKiBDb3B5cmlnaHQgKNGBKSAyMDE1LXByZXNlbnQsIFNvZnRJbmRleCBMTEMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbmltcG9ydCB7d2l0aG91dH0gZnJvbSAnLi91dGlscyc7XG5cbi8qKlxuICogRXZlbnRzIGNvbnRyb2wgbW9kZWxcbiAqL1xuY2xhc3MgRXZlbnRzTW9kZWwge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLl9zdWJzY3JpYmVycyA9IHt9O1xuICB9XG5cbiAgLyoqXG4gICAqIFN1YnNjcmliZSB0byBpbm5lciBtb2RlbCBldmVudFxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gICAgICBldmVudCAgIEV2ZW50IElEXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259ICAgIGNiICAgICAgQ2FsbEJhY2sgZnVuY3Rpb25cbiAgICovXG4gIG9uKGV2ZW50LCBjYikge1xuICAgIGlmICh0eXBlb2YgdGhpcy5fc3Vic2NyaWJlcnNbZXZlbnRdICE9PSAnb2JqZWN0Jykge1xuICAgICAgdGhpcy5fc3Vic2NyaWJlcnNbZXZlbnRdID0gW107XG4gICAgfVxuICAgIHRoaXMuX3N1YnNjcmliZXJzW2V2ZW50XS5wdXNoKGNiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVbnN1YnNjcmliZSBmcm9tIGlubmVyIG1vZGVsIGV2ZW50XG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSAgICAgIGV2ZW50ICAgRXZlbnQgSURcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gICAgY2IgICAgICBDYWxsQmFjayBmdW5jdGlvblxuICAgKi9cbiAgb2ZmKGV2ZW50LCBjYikge1xuICAgIGlmICh0aGlzLl9zdWJzY3JpYmVyc1tldmVudF0pIHtcbiAgICAgIHRoaXMuX3N1YnNjcmliZXJzW2V2ZW50XSA9IHdpdGhvdXQodGhpcy5fc3Vic2NyaWJlcnNbZXZlbnRdLCBjYik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRyaWdnZXIgaW5uZXIgbW9kZWwgZXZlbnRcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9ICBldmVudCAgIEV2ZW50IElEXG4gICAqIEBwYXJhbSB7Li4uKn0gICAgcGFyYW1zXG4gICAqL1xuICB0cmlnZ2VyKGV2ZW50LCAuLi5wYXJhbXMpIHtcbiAgICBpZiAoIXRoaXMuX3N1YnNjcmliZXJzW2V2ZW50XSB8fCAhdGhpcy5fc3Vic2NyaWJlcnNbZXZlbnRdLmxlbmd0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IHN1YnNjcmliZXIgb2YgdGhpcy5fc3Vic2NyaWJlcnNbZXZlbnRdKSB7XG4gICAgICBzdWJzY3JpYmVyKC4uLnBhcmFtcyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG51bWJlciBvZiBsaXN0ZW5lcnMgbGlzdGVuaW5nIHRvIHRoZSBldmVudFxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnQgbmFtZVxuICAgKi9cbiAgbGlzdGVuZXJDb3VudChldmVudCkge1xuICAgIHJldHVybiB0aGlzLl9zdWJzY3JpYmVyc1tldmVudF0gPyB0aGlzLl9zdWJzY3JpYmVyc1tldmVudF0ubGVuZ3RoIDogMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGFsbCBsaXN0ZW5lcnMgb2YgdGhlIHNwZWNpZmllZCBldmVudFxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnQgbmFtZVxuICAgKi9cbiAgcmVtb3ZlQWxsTGlzdGVuZXJzKGV2ZW50KSB7XG4gICAgdGhpcy5fc3Vic2NyaWJlcnNbZXZlbnRdID0gW107XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRXZlbnRzTW9kZWw7XG4iLCIvKlxuICogQ29weXJpZ2h0ICjRgSkgMjAxNS1wcmVzZW50LCBTb2Z0SW5kZXggTExDLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG5pbXBvcnQgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IHtvbWl0fSBmcm9tICcuL3V0aWxzJztcblxuY29uc3QgcG9ydGFsQ2xhc3MgPSAnX19wb3J0YWwnO1xuXG5jbGFzcyBQb3J0YWwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLl9vbkRvY3VtZW50TW91c2VEb3duID0gdGhpcy5fb25Eb2N1bWVudE1vdXNlRG93bi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX29uRG9jdW1lbnRNb3VzZVNjcm9sbCA9IHRoaXMuX29uRG9jdW1lbnRNb3VzZVNjcm9sbC5iaW5kKHRoaXMpO1xuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5fb25Eb2N1bWVudE1vdXNlRG93biwgZmFsc2UpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuX29uRG9jdW1lbnRNb3VzZVNjcm9sbCwgdHJ1ZSk7XG5cbiAgICBjb25zdCBwb3J0YWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHBvcnRhbCk7XG4gICAgcG9ydGFsLmNsYXNzTmFtZSA9IHBvcnRhbENsYXNzO1xuICAgIHRoaXMucG9ydGFsID0gcG9ydGFsO1xuICAgIHRoaXMucmVuZGVyUG9ydGFsKCk7XG4gIH1cblxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLl9vbkRvY3VtZW50TW91c2VEb3duLCBmYWxzZSk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5fb25Eb2N1bWVudE1vdXNlU2Nyb2xsLCB0cnVlKTtcblxuICAgIFJlYWN0RE9NLnVubW91bnRDb21wb25lbnRBdE5vZGUodGhpcy5wb3J0YWwpO1xuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGhpcy5wb3J0YWwpO1xuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgIHRoaXMucmVuZGVyUG9ydGFsKCk7XG4gIH1cblxuICBfaXNEb2N1bWVudEV2ZW50T3duZXIodGFyZ2V0KSB7XG4gICAgcmV0dXJuICh0YXJnZXQgPT09IHRoaXMucG9ydGFsIHx8IHRoaXMucG9ydGFsLmNvbnRhaW5zKHRhcmdldCkpO1xuICB9XG5cbiAgX29uRG9jdW1lbnRNb3VzZURvd24oZSkge1xuICAgIGlmICh0aGlzLnByb3BzLm9uRG9jdW1lbnRNb3VzZURvd24pIHtcbiAgICAgIHRoaXMucHJvcHMub25Eb2N1bWVudE1vdXNlRG93bihlLCB0aGlzLl9pc0RvY3VtZW50RXZlbnRPd25lcihlLnRhcmdldCkpO1xuICAgIH1cbiAgfVxuXG4gIF9vbkRvY3VtZW50TW91c2VTY3JvbGwoZSkge1xuICAgIGlmICh0aGlzLnByb3BzLm9uRG9jdW1lbnRNb3VzZVNjcm9sbCkge1xuICAgICAgdGhpcy5wcm9wcy5vbkRvY3VtZW50TW91c2VTY3JvbGwoZSwgdGhpcy5faXNEb2N1bWVudEV2ZW50T3duZXIoZS50YXJnZXQpKTtcbiAgICB9XG4gIH1cblxuICByZW5kZXJQb3J0YWwoKSB7XG4gICAgUmVhY3RET00ucmVuZGVyKFxuICAgICAgPGRpdlxuICAgICAgICB7Li4ub21pdCh0aGlzLnByb3BzLCBbJ29uRG9jdW1lbnRNb3VzZURvd24nLCAnb25Eb2N1bWVudE1vdXNlU2Nyb2xsJ10pfVxuICAgICAgPlxuICAgICAgICB7dGhpcy5wcm9wcy5jaGlsZHJlbn1cbiAgICAgIDwvZGl2PixcbiAgICAgIHRoaXMucG9ydGFsXG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5Qb3J0YWwucHJvcFR5cGVzID0ge1xuICBjaGlsZHJlbjogUHJvcFR5cGVzLm5vZGUsXG4gIG9uRG9jdW1lbnRNb3VzZURvd246IFByb3BUeXBlcy5mdW5jLFxuICBvbkRvY3VtZW50TW91c2VTY3JvbGw6IFByb3BUeXBlcy5mdW5jLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgUG9ydGFsO1xuIiwiLypcbiAqIENvcHlyaWdodCAo0YEpIDIwMTUtcHJlc2VudCwgU29mdEluZGV4IExMQy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxuaW1wb3J0IHtnZXRTdGFja30gZnJvbSAnLi91dGlscyc7XG5cbmZ1bmN0aW9uIFRocm90dGxlRXJyb3IoKSB7XG4gIEVycm9yLmNhbGwodGhpcyk7XG5cbiAgdGhpcy5uYW1lID0gJ1Rocm90dGxlRXJyb3InO1xuICB0aGlzLm1lc3NhZ2UgPSAnVG9vIG1hbnkgZnVuY3Rpb24gY2FsbCc7XG4gIHRoaXMuc3RhY2sgPSBnZXRTdGFjaygpO1xufVxuXG5UaHJvdHRsZUVycm9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKTtcblRocm90dGxlRXJyb3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gVGhyb3R0bGVFcnJvcjtcblxuVGhyb3R0bGVFcnJvci5jcmVhdGVXaXRoUGFyZW50U3RhY2sgPSBmdW5jdGlvbiAoc3RhY2spIHtcbiAgY29uc3QgZXJyID0gbmV3IFRocm90dGxlRXJyb3IoKTtcbiAgZXJyLnN0YWNrICs9ICdcXG4nICsgc3RhY2s7XG4gIHJldHVybiBlcnI7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBUaHJvdHRsZUVycm9yO1xuIiwiLypcbiAqIENvcHlyaWdodCAo0YEpIDIwMTUtcHJlc2VudCwgU29mdEluZGV4IExMQy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxuaW1wb3J0IHt3YXJufSBmcm9tICcuLi9jb21tb24vdXRpbHMnO1xuXG5jb25zdCBmdW5jdGlvbnNOYW1lcyA9IFtdO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKGZ1bmMsIGhpZGVXYXJuaW5nID0gZmFsc2UpIHtcbiAgY29uc3QgZnVuY05hbWUgPSBmdW5jLm5hbWU7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgY29uc3QgbGFzdEFyZ3VtZW50SW5kZXggPSBhcmdzLmxlbmd0aCAtIDE7XG4gICAgY29uc3QgY2IgPSBhcmdzW2xhc3RBcmd1bWVudEluZGV4XTtcblxuICAgIGlmICh0eXBlb2YgY2IgPT09ICdmdW5jdGlvbicgJiYgIWNiLl9faWdub3JlVUlLZXJuZWxXYXJuaW5nKSB7XG4gICAgICBpZiAoIWZ1bmN0aW9uc05hbWVzLmluY2x1ZGVzKGZ1bmNOYW1lKSAmJiAhaGlkZVdhcm5pbmcpIHtcbiAgICAgICAgd2FybihgWW91IGFyZSB1c2luZyBjYWxsYmFjayBpbjogJyR7ZnVuY05hbWV9Jy4gVXNlIHByb21pc2UgaW5zdGVhZC5cXG4ke0pTT04uc3RyaW5naWZ5KGFyZ3MpfWApO1xuICAgICAgICBmdW5jdGlvbnNOYW1lcy5wdXNoKGZ1bmNOYW1lKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgIGlmIChyZXN1bHQgJiYgcmVzdWx0LnRoZW4pIHtcbiAgICAgICAgcmVzdWx0XG4gICAgICAgICAgLnRoZW4oZGF0YSA9PiB7XG4gICAgICAgICAgICBjYihudWxsLCBkYXRhKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgY2IoZXJyKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpcywgYXJncyk7XG4gICAgfVxuICB9O1xufVxuIiwiLypcbiAqIENvcHlyaWdodCAo0YEpIDIwMTUtcHJlc2VudCwgU29mdEluZGV4IExMQy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxuaW1wb3J0IHZhcmlhYmxlcyBmcm9tICcuL3ZhcmlhYmxlcyc7XG5pbXBvcnQgeGhyIGZyb20gJ3hocic7XG5cbmZ1bmN0aW9uIGRlZmF1bHRYaHIoc2V0dGluZ3MpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICB4aHIoc2V0dGluZ3MsIChlcnIsIHJlc3BvbnNlLCBib2R5KSA9PiB7XG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzQ29kZSA9PT0gMjAwKSB7XG4gICAgICAgIHJlc29sdmUoYm9keSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKCFlcnIpIHtcbiAgICAgICAgZXJyID0gbmV3IEVycm9yKCk7XG4gICAgICAgIGVyci5zdGF0dXNDb2RlID0gcmVzcG9uc2Uuc3RhdHVzQ29kZTtcbiAgICAgICAgZXJyLm1lc3NhZ2UgPSAnU3RhdHVzIENvZGU6ICcgKyBlcnIuc3RhdHVzQ29kZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGJvZHkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBwYXJzZWRCb2R5ID0gSlNPTi5wYXJzZShib2R5KTtcbiAgICAgICAgICBlcnIubWVzc2FnZSA9IHBhcnNlZEJvZHkubWVzc2FnZSB8fCBib2R5O1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgZXJyLm1lc3NhZ2UgPSBib2R5O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJlamVjdChlcnIpO1xuICAgIH0pO1xuICB9KTtcbn1cblxuaWYgKCF2YXJpYWJsZXMuZ2V0KCd4aHInKSkge1xuICB2YXJpYWJsZXMuc2V0KCd4aHInLCBkZWZhdWx0WGhyKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgKHNldHRpbmdzKSA9PiB2YXJpYWJsZXMuZ2V0KCd4aHInKShzZXR0aW5ncyk7XG4iLCIvKlxuICogQ29weXJpZ2h0ICjRgSkgMjAxNS1wcmVzZW50LCBTb2Z0SW5kZXggTExDLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHdpbmRvdy5zZXRJbW1lZGlhdGUgIT09ICdmdW5jdGlvbicpIHtcbiAgd2luZG93LnNldEltbWVkaWF0ZSA9ICgoKCkgPT4ge1xuICAgIGxldCBoZWFkID0ge307XG4gICAgbGV0IHRhaWwgPSBoZWFkO1xuICAgIGNvbnN0IElEID0gTWF0aC5yYW5kb20oKTtcblxuICAgIGZ1bmN0aW9uIG9uTWVzc2FnZShlKSB7XG4gICAgICBpZiAoZS5kYXRhICE9PSBJRCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBoZWFkID0gaGVhZC5uZXh0O1xuICAgICAgY29uc3QgZnVuYyA9IGhlYWQuZnVuYztcbiAgICAgIGRlbGV0ZSBoZWFkLmZ1bmM7XG4gICAgICBmdW5jKCk7XG4gICAgfVxuXG4gICAgaWYgKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIG9uTWVzc2FnZSwgZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB3aW5kb3cuYXR0YWNoRXZlbnQoJ29ubWVzc2FnZScsIG9uTWVzc2FnZSk7XG4gICAgfVxuICAgIHJldHVybiB3aW5kb3cucG9zdE1lc3NhZ2UgPyBmdW5jID0+IHtcbiAgICAgIHRhaWwgPSB0YWlsLm5leHQgPSB7ZnVuYzogZnVuY307XG4gICAgICB3aW5kb3cucG9zdE1lc3NhZ2UoSUQsICcqJyk7XG4gICAgfSA6IGZ1bmMgPT4ge1xuICAgICAgc2V0VGltZW91dChmdW5jLCAwKTtcbiAgICB9O1xuICB9KSgpKTtcbn1cbiIsIi8qXG4gKiBDb3B5cmlnaHQgKNGBKSAyMDE1LXByZXNlbnQsIFNvZnRJbmRleCBMTEMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbmltcG9ydCB7d2Fybn0gZnJvbSAnLi4vY29tbW9uL3V0aWxzJztcblxuY29uc3QgZnVuY3Rpb25zTmFtZXMgPSBbXTtcblxuZnVuY3Rpb24gdG9Qcm9taXNlKGZ1bmMsIGhpZGVXYXJuaW5nKSB7XG4gIGNvbnN0IGZ1bmNOYW1lID0gZnVuYy5uYW1lO1xuXG4gIGZ1bmN0aW9uIHByb21pc2VXYXJuKHRleHQpIHtcbiAgICBpZiAoIWhpZGVXYXJuaW5nKSB7XG4gICAgICBpZiAoIWZ1bmN0aW9uc05hbWVzLmluY2x1ZGVzKGZ1bmNOYW1lKSkge1xuICAgICAgICB3YXJuKHRleHQpO1xuICAgICAgICBmdW5jdGlvbnNOYW1lcy5wdXNoKGZ1bmNOYW1lKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKC4uLm1haW5Bcmd1bWVudHMpIHtcbiAgICBsZXQgcHJvbWlzZTtcbiAgICBjb25zdCBjYWxsYmFja1Byb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBmdW5jdGlvbiB0b1Byb21pc2VDYWxsYmFjayhlcnIsIGRhdGEpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIHJldHVybiByZWplY3QoZXJyKTtcbiAgICAgICAgfVxuICAgICAgICByZXNvbHZlKGRhdGEpO1xuICAgICAgfVxuICAgICAgdG9Qcm9taXNlQ2FsbGJhY2suX19pZ25vcmVVSUtlcm5lbFdhcm5pbmcgPSB0cnVlO1xuICAgICAgbWFpbkFyZ3VtZW50cy5wdXNoKHRvUHJvbWlzZUNhbGxiYWNrKTtcbiAgICAgIHByb21pc2UgPSBmdW5jKC4uLm1haW5Bcmd1bWVudHMpO1xuICAgIH0pO1xuXG4gICAgaWYgKHByb21pc2UpIHtcbiAgICAgIGlmIChwcm9taXNlLnRoZW4gJiYgcHJvbWlzZS5jYXRjaCkge1xuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICAgIH1cbiAgICAgIHByb21pc2VXYXJuKFxuICAgICAgICBgVGhlIHJldHVybiB2YWx1ZSBpcyBub3QgYSBQcm9taXNlIGluICcke2Z1bmNOYW1lfScuXFxuYCArXG4gICAgICAgIGBBcmd1bWVudHM6ICR7SlNPTi5zdHJpbmdpZnkobWFpbkFyZ3VtZW50cyl9XFxuYCArXG4gICAgICAgIGBSZXR1cm5zOiAke0pTT04uc3RyaW5naWZ5KHByb21pc2UpfWBcbiAgICAgICk7XG4gICAgICByZXR1cm4gY2FsbGJhY2tQcm9taXNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBwcm9taXNlV2FybihcbiAgICAgICAgYFlvdSBhcmUgdXNpbmcgY2FsbGJhY2sgaW46ICcke2Z1bmNOYW1lfScuIFVzZSBwcm9taXNlIGluc3RlYWQuXFxuYCArXG4gICAgICAgIGBBcmd1bWVudHM6ICR7SlNPTi5zdHJpbmdpZnkobWFpbkFyZ3VtZW50cyl9YFxuICAgICAgKTtcbiAgICAgIHJldHVybiBjYWxsYmFja1Byb21pc2U7XG4gICAgfVxuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCB0b1Byb21pc2U7XG4iLCIvKlxuICogQ29weXJpZ2h0ICjRgSkgMjAxNS1wcmVzZW50LCBTb2Z0SW5kZXggTExDLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG5pbXBvcnQgVGhyb3R0bGVFcnJvciBmcm9tICcuL1Rocm90dGxlRXJyb3InO1xuaW1wb3J0IEFyZ3VtZW50c0Vycm9yIGZyb20gJy4vQXJndW1lbnRzRXJyb3InO1xuXG5mdW5jdGlvbiBiYXNlQ2xvbmUob2JqLCBpc0RlZXApIHtcbiAgbGV0IGNsb25lZDtcbiAgY29uc3QgZXM2dHlwZXMgPSBbJ1tvYmplY3QgU2V0XScsICdbb2JqZWN0IFdlYWtTZXRdJywgJ1tvYmplY3QgTWFwXScsICdbb2JqZWN0IFdlYWtNYXBdJ107XG5cbiAgaWYgKCEob2JqIGluc3RhbmNlb2YgT2JqZWN0KSB8fCBvYmogaW5zdGFuY2VvZiBEYXRlIHx8IG9iaiBpbnN0YW5jZW9mIEZ1bmN0aW9uIHx8IG9iaiBpbnN0YW5jZW9mIFJlZ0V4cCkge1xuICAgIHJldHVybiBvYmo7XG4gIH1cblxuICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7XG4gICAgY2xvbmVkID0gW107XG4gICAgZm9yIChjb25zdCBlbCBvZiBvYmopIHtcbiAgICAgIGNsb25lZC5wdXNoKGlzRGVlcCA/IGJhc2VDbG9uZShlbCwgdHJ1ZSkgOiBlbCk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGVzNnR5cGVzLmluY2x1ZGVzKG9iai50b1N0cmluZygpKSkge1xuICAgIGNsb25lZCA9IG5ldyBvYmouY29uc3RydWN0b3Iob2JqKTtcbiAgfSBlbHNlIHtcbiAgICBjbG9uZWQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IFtmaWVsZCwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKG9iaikpIHtcbiAgICAgIGNsb25lZFtmaWVsZF0gPSBpc0RlZXAgPyBiYXNlQ2xvbmUodmFsdWUsIHRydWUpIDogdmFsdWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBjbG9uZWQ7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdHdvIGFycmF5cyBpbnRlcnNlY3Rpb24gZXhpc3RzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0ludGVyc2VjdGlvbihhLCBiKSB7XG4gIGxldCBjO1xuICBpZiAoYS5sZW5ndGggPiBiLmxlbmd0aCkge1xuICAgIGMgPSBhO1xuICAgIGEgPSBiO1xuICAgIGIgPSBjO1xuICB9XG4gIGZvciAoY29uc3QgZWwgb2YgYSkge1xuICAgIGlmIChpbmRleE9mKGIsIGVsKSA+IC0xKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIERlZmluZSBvYmplY3Qgc2l6ZVxuICpcbiAqIEBwYXJhbSAgIHtPYmplY3R9ICAgIG9iaiAgICAgT2JqZWN0XG4gKiBAcmV0dXJuICB7bnVtYmVyfSAgICBPYmplY3Qgc2l6ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2l6ZShvYmopIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKG9iaikubGVuZ3RoO1xufVxuXG4vKipcbiAqIEVsZW1lbnQgcG9zaXRpb24gKGlzRXF1YWwgY2hlY2tpbmcpXG4gKlxuICogQHBhcmFtICAge0FycmF5fSAgIGFyciAgIEFycmF5XG4gKiBAcGFyYW0gICB7Kn0gICAgICAgaXRlbSAgRWxlbWVudCBpdGVtXG4gKiBAcmV0dXJuICB7bnVtYmVyfVxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5kZXhPZihhcnIsIGl0ZW0pIHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoaXNFcXVhbChhcnJbaV0sIGl0ZW0pKSB7XG4gICAgICByZXR1cm4gaTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIC0xO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdGhyb3R0bGUoZnVuYykge1xuICBsZXQgd29ya2VkID0gZmFsc2U7XG4gIGxldCBuZXh0QXJndW1lbnRzO1xuICBsZXQgbmV4dFJlc29sdmU7XG4gIGxldCBuZXh0UmVqZWN0O1xuXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aCAtIDFdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gdGhyb3R0bGVDYWxsYmFjayhmdW5jKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhyb3R0bGVQcm9taXNlKGZ1bmMpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICB9O1xuXG4gIC8vIGl0IGlzIHN0aWxsIHVzZWQgaW4gRm9ybU1peGluLl92YWxpZGF0ZUZvcm0gc28gd2UgY2FuJ3QgcmVtb3ZlIGl0IHlldFxuICBmdW5jdGlvbiB0aHJvdHRsZUNhbGxiYWNrKGZ1bmMpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gcnVuKCkge1xuICAgICAgY29uc3QgY3R4ID0gdGhpczsgLy8gRnVuY3Rpb24gY29udGV4dFxuICAgICAgY29uc3QgY2IgPSBhcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aCAtIDFdO1xuICAgICAgY29uc3QgYXJndW1lbnRzQXJyYXkgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG5cbiAgICAgIGlmICh3b3JrZWQpIHtcbiAgICAgICAgLy8gU2V0IGFzIHRoZSBuZXh0IGNhbGxcbiAgICAgICAgbmV4dEFyZ3VtZW50cyA9IGFyZ3VtZW50cztcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB3b3JrZWQgPSB0cnVlO1xuXG4gICAgICBjb25zdCBjYldyYXBwZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghbmV4dFdvcmtlcigpICYmIHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGNiLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIGlmICh0eXBlb2YgY2IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgYXJndW1lbnRzQXJyYXlbYXJndW1lbnRzQXJyYXkubGVuZ3RoIC0gMV0gPSBjYldyYXBwZXI7XG4gICAgICAgIGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzQXJyYXkuY29uY2F0KG5leHRXb3JrZXIpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzQXJyYXkuY29uY2F0KGNiV3JhcHBlciwgbmV4dFdvcmtlcikpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBuZXh0V29ya2VyKCkge1xuICAgICAgICB3b3JrZWQgPSBmYWxzZTtcbiAgICAgICAgaWYgKG5leHRBcmd1bWVudHMpIHtcbiAgICAgICAgICBjb25zdCBhcmdzID0gbmV4dEFyZ3VtZW50cztcbiAgICAgICAgICBuZXh0QXJndW1lbnRzID0gbnVsbDtcbiAgICAgICAgICBydW4uYXBwbHkoY3R4LCBhcmdzKTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRocm90dGxlUHJvbWlzZShmdW5jKSB7XG4gICAgLyoqXG4gICAgICogQHRocm93cyB7VGhyb3R0bGVFcnJvcn0gVG9vIG1hbnkgZnVuY3Rpb24gY2FsbFxuICAgICAqL1xuICAgIHJldHVybiBmdW5jdGlvbiBydW4oLi4uYXJncykge1xuICAgICAgY29uc3QgcGFyZW50U3RhY2sgPSBnZXRTdGFjaygyKTtcblxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgaWYgKHdvcmtlZCkge1xuICAgICAgICAgIGlmIChuZXh0QXJndW1lbnRzKSB7XG4gICAgICAgICAgICBuZXh0UmVqZWN0KFRocm90dGxlRXJyb3IuY3JlYXRlV2l0aFBhcmVudFN0YWNrKHBhcmVudFN0YWNrKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIG5leHRBcmd1bWVudHMgPSBhcmdzO1xuICAgICAgICAgIG5leHRSZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgICAgICBuZXh0UmVqZWN0ID0gcmVqZWN0O1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHdvcmtlZCA9IHRydWU7XG5cbiAgICAgICAgZnVuYy5hcHBseSh0aGlzLCBhcmdzKVxuICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgICAgICB3b3JrZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChuZXh0QXJndW1lbnRzKSB7XG4gICAgICAgICAgICAgIG5leHRSZXNvbHZlKHJ1bi5hcHBseSh0aGlzLCBuZXh0QXJndW1lbnRzKSk7XG4gICAgICAgICAgICAgIG5leHRBcmd1bWVudHMgPSBudWxsO1xuXG4gICAgICAgICAgICAgIHJlamVjdChUaHJvdHRsZUVycm9yLmNyZWF0ZVdpdGhQYXJlbnRTdGFjayhwYXJlbnRTdGFjaykpO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICAgIHdvcmtlZCA9IGZhbHNlO1xuICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVZhbHVlRnJvbUV2ZW50KGV2ZW50KSB7XG4gIGlmIChcbiAgICBldmVudCAmJiB0eXBlb2YgZXZlbnQgPT09ICdvYmplY3QnICYmXG4gICAgZXZlbnQudGFyZ2V0ICYmIFsnSU5QVVQnLCAnVEVYVEFSRUEnLCAnU0VMRUNUJ10uaW5kZXhPZihldmVudC50YXJnZXQudGFnTmFtZSkgPj0gMFxuICApIHtcbiAgICBzd2l0Y2ggKGV2ZW50LnRhcmdldC50eXBlKSB7XG4gICAgY2FzZSAnY2hlY2tib3gnOlxuICAgICAgcmV0dXJuIGV2ZW50LnRhcmdldC5jaGVja2VkO1xuICAgIH1cbiAgICByZXR1cm4gZXZlbnQudGFyZ2V0LnZhbHVlO1xuICB9XG4gIHJldHVybiBldmVudDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIERlY29yYXRvcihvYmosIGRlY29yKSB7XG4gIE9iamVjdC5hc3NpZ24odGhpcywgZGVjb3IpO1xuXG4gIGZvciAoY29uc3QgaSBpbiBvYmopIHtcbiAgICBpZiAodHlwZW9mIG9ialtpXSA9PT0gJ2Z1bmN0aW9uJyAmJiAhZGVjb3JbaV0pIHtcbiAgICAgIHRoaXNbaV0gPSBvYmpbaV0uYmluZChvYmopO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVjb3JhdGUob2JqLCBkZWNvcikge1xuICBEZWNvcmF0b3IucHJvdG90eXBlID0gb2JqO1xuICByZXR1cm4gbmV3IERlY29yYXRvcihvYmosIGRlY29yKTtcbn1cblxuLyoqXG4gKiBDaGVja2luZyBhdCBlcXVhbHMgcGFyYW1zXG4gKlxuICogQHBhcmFtIGFcbiAqIEBwYXJhbSBiXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRXF1YWwoYSwgYikge1xuICBpZiAoXG4gICAgYSA9PT0gbnVsbFxuICAgIHx8IGIgPT09IG51bGxcbiAgICB8fCBhID09PSB1bmRlZmluZWRcbiAgICB8fCBiID09PSB1bmRlZmluZWRcbiAgICB8fCB0eXBlb2YgYSA9PT0gJ2Z1bmN0aW9uJ1xuICAgIHx8IHR5cGVvZiBiID09PSAnZnVuY3Rpb24nXG4gICAgfHwgYSBpbnN0YW5jZW9mIFJlZ0V4cFxuICAgIHx8IGIgaW5zdGFuY2VvZiBSZWdFeHBcbiAgKSB7XG4gICAgcmV0dXJuIGEgPT09IGI7XG4gIH1cblxuICBpZiAoYSA9PT0gYiB8fCBhLnZhbHVlT2YoKSA9PT0gYi52YWx1ZU9mKCkgfHwgYSAhPT0gYSAmJiBiICE9PSBiKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBpZiAoXG4gICAgKEFycmF5LmlzQXJyYXkoYSkgJiYgKCFBcnJheS5pc0FycmF5KGIpIHx8IGEubGVuZ3RoICE9PSBiLmxlbmd0aCkpXG4gICAgfHwgdHlwZW9mIGEgIT09ICdvYmplY3QnXG4gICAgfHwgdHlwZW9mIGIgIT09ICdvYmplY3QnXG4gICkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgRmlsZSA9PT0gJ2Z1bmN0aW9uJyAmJiBhIGluc3RhbmNlb2YgRmlsZSAmJiBiIGluc3RhbmNlb2YgRmlsZSkge1xuICAgIHJldHVybiBhLnNpemUgPT09IGIuc2l6ZSAmJiBhLm5hbWUgPT09IGIubmFtZTtcbiAgfVxuXG4gIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhhKTtcbiAgcmV0dXJuIChcbiAgICBPYmplY3Qua2V5cyhiKS5ldmVyeShrZXkgPT4ga2V5cy5pbmNsdWRlcyhrZXkpKVxuICAgICYmIGtleXMuZXZlcnkoa2V5ID0+IGlzRXF1YWwoYVtrZXldLCBiW2tleV0pKVxuICApO1xufVxuXG4vKipcbiAqIENsb25lIG9iamVjdFxuICpcbiAqIEBwYXJhbSBvYmpcbiAqIEByZXR1cm5zIHsqfVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xvbmUob2JqKSB7XG4gIHJldHVybiBiYXNlQ2xvbmUob2JqLCBmYWxzZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZURlZXAob2JqKSB7XG4gIHJldHVybiBiYXNlQ2xvbmUob2JqLCB0cnVlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRW1wdHkodmFsdWUpIHtcbiAgaWYgKCF2YWx1ZSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgIHJldHVybiB2YWx1ZS5sZW5ndGggPT09IDA7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXModmFsdWUpLmxlbmd0aCA9PT0gMDtcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiB2YWx1ZS50cmltKCkubGVuZ3RoID09PSAwO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRGVmaW5lZCh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09IHVuZGVmaW5lZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvckVhY2gob2JqLCBmdW5jLCBjdHgpIHtcbiAgZm9yIChjb25zdCBpIGluIG9iaikge1xuICAgIGZ1bmMuY2FsbChjdHgsIG9ialtpXSwgaSk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBsdWNrKGFyciwgZmllbGQpIHtcbiAgcmV0dXJuIGFyci5tYXAoaXRlbSA9PiBpdGVtW2ZpZWxkXSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaW5kKGFyciwgZnVuYykge1xuICBmb3IgKGNvbnN0IGkgaW4gYXJyKSB7XG4gICAgaWYgKGZ1bmMoYXJyW2ldLCBpKSkge1xuICAgICAgcmV0dXJuIGFycltpXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaW5kSW5kZXgob2JqLCBmdW5jKSB7XG4gIGZvciAoY29uc3QgaSBpbiBvYmopIHtcbiAgICBpZiAoZnVuYyhvYmpbaV0sIGkpKSB7XG4gICAgICByZXR1cm4gaTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIC0xO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gb21pdChvYmosIHByZWRpY2F0ZSkge1xuICBjb25zdCByZXN1bHQgPSB7fTtcbiAgZm9yIChjb25zdCBbZmllbGQsIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhvYmopKSB7XG4gICAgaWYgKFxuICAgICAgKHR5cGVvZiBwcmVkaWNhdGUgPT09ICdzdHJpbmcnICYmIHByZWRpY2F0ZSAhPT0gZmllbGQpIHx8XG4gICAgICAoQXJyYXkuaXNBcnJheShwcmVkaWNhdGUpICYmICFwcmVkaWNhdGUuaW5jbHVkZXMoZmllbGQpKSB8fFxuICAgICAgKHR5cGVvZiBwcmVkaWNhdGUgPT09ICdmdW5jdGlvbicgJiYgIXByZWRpY2F0ZSh2YWx1ZSwgZmllbGQpKVxuICAgICkge1xuICAgICAgcmVzdWx0W2ZpZWxkXSA9IHZhbHVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZXNjYXBlKHN0cmluZykge1xuICBjb25zdCByZVVuZXNjYXBlZCA9IC9bJjw+XCInYF0vZztcbiAgY29uc3QgZXNjYXBlcyA9IHtcbiAgICAnJic6ICcmYW1wOycsXG4gICAgJzwnOiAnJmx0OycsXG4gICAgJz4nOiAnJmd0OycsXG4gICAgJ1wiJzogJyZxdW90OycsXG4gICAgJ1xcJyc6ICcmIzM5OycsXG4gICAgJ2AnOiAnJiM5NjsnXG4gIH07XG4gIHN0cmluZyA9IGAke3N0cmluZyA9PT0gbnVsbCA/ICcnIDogc3RyaW5nLnRvU3RyaW5nKCl9YDtcbiAgaWYgKHN0cmluZyAmJiByZVVuZXNjYXBlZC50ZXN0KHN0cmluZykpIHtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UocmVVbmVzY2FwZWQsIGNociA9PiBlc2NhcGVzW2Nocl0pO1xuICB9XG4gIHJldHVybiBzdHJpbmc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB6aXBPYmplY3Qoa2V5cywgdmFsdWVzKSB7XG4gIGNvbnN0IHJlc3VsdCA9IHt9O1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICByZXN1bHRba2V5c1tpXV0gPSB2YWx1ZXNbaV07XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBpY2sob2JqLCBrZXlzLCBkZWZhdWx0VmFsdWUpIHtcbiAgcmV0dXJuIGtleXMucmVkdWNlKChyZXN1bHQsIGtleSkgPT4ge1xuICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgcmVzdWx0W2tleV0gPSBvYmpba2V5XTtcbiAgICB9IGVsc2UgaWYgKGRlZmF1bHRWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXN1bHRba2V5XSA9IGRlZmF1bHRWYWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSwge30pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbWFwS2V5cyhvYmplY3QsIGl0ZXJhdGVlKSB7XG4gIGNvbnN0IHJlc3VsdCA9IHt9O1xuXG4gIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKG9iamVjdCkpIHtcbiAgICByZXN1bHRbaXRlcmF0ZWUodmFsdWUsIGtleSldID0gdmFsdWU7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVkdWNlKG9iaiwgZnVuYywgdmFsdWUpIHtcbiAgZm9yIChjb25zdCBpIGluIG9iaikge1xuICAgIHZhbHVlID0gZnVuYyh2YWx1ZSwgb2JqW2ldLCBpKTtcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1bmlvbiguLi5hcmdzKSB7XG4gIGNvbnN0IGVsZW1lbnRzID0ge307XG4gIGZvciAoY29uc3QgYXJnIG9mIGFyZ3MpIHtcbiAgICBmb3IgKGNvbnN0IGVsIG9mIGFyZykge1xuICAgICAgZWxlbWVudHNbZWxdID0gZWw7XG4gICAgfVxuICB9XG4gIHJldHVybiBPYmplY3QudmFsdWVzKGVsZW1lbnRzKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGF0KG9iaiwga2V5cykge1xuICBjb25zdCByZXN1bHQgPSBbXTtcbiAgaWYgKCFBcnJheS5pc0FycmF5KGtleXMpKSB7XG4gICAgcmV0dXJuIFtvYmpba2V5c11dO1xuICB9XG4gIGZvciAoY29uc3Qga2V5IG9mIGtleXMpIHtcbiAgICByZXN1bHQucHVzaChvYmpba2V5XSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhaXJzKG9iaikge1xuICBjb25zdCByZXN1bHQgPSBbXTtcbiAgZm9yIChjb25zdCBpIGluIG9iaikge1xuICAgIHJlc3VsdC5wdXNoKFtpLCBvYmpbaV1dKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdG9EYXRlKHZhbHVlKSB7XG4gIGxldCBkYXRlO1xuXG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKHZhbHVlKTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgZGF0ZSA9IG5ldyBEYXRlKHZhbHVlKTtcbiAgICBkYXRlLnNldFRpbWUoZGF0ZS5nZXRUaW1lKCkgKyAoZGF0ZS5nZXRUaW1lem9uZU9mZnNldCgpICogNjAgKiAxMDAwKSk7IC8vIENvbnZlcnQgVVRDIHRvIGxvY2FsIHRpbWVcbiAgICByZXR1cm4gZGF0ZTtcbiAgfVxuXG4gIHJldHVybiBuZXcgRGF0ZSh2YWx1ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB3aXRob3V0KGFyciwgZWwpIHtcbiAgY29uc3QgcmVzdWx0ID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZWwpID8gaW5kZXhPZihlbCwgYXJyW2ldKSA+IC0xIDogaXNFcXVhbChhcnJbaV0sIGVsKSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIHJlc3VsdC5wdXNoKGFycltpXSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxhc3QoYXJyKSB7XG4gIHJldHVybiBhcnJbYXJyLmxlbmd0aCAtIDFdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVjb3JkQ2hhbmdlcyhtb2RlbCwgZGF0YSwgY2hhbmdlcywgbmV3Q2hhbmdlcykge1xuICBjb25zdCByZXN1bHQgPSBPYmplY3QuYXNzaWduKHt9LCBjaGFuZ2VzLCBuZXdDaGFuZ2VzKTtcblxuICBmb3IgKGNvbnN0IGkgaW4gcmVzdWx0KSB7XG4gICAgaWYgKGlzRXF1YWwoZGF0YVtpXSwgcmVzdWx0W2ldKSkge1xuICAgICAgZGVsZXRlIHJlc3VsdFtpXTtcbiAgICB9XG4gIH1cblxuICBPYmplY3QuYXNzaWduKHJlc3VsdCwgcGljayhcbiAgICBkYXRhLFxuICAgIG1vZGVsLmdldFZhbGlkYXRpb25EZXBlbmRlbmN5KE9iamVjdC5rZXlzKHJlc3VsdCkpXG4gICkpO1xuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTdGFjayhkZWVwID0gMCkge1xuICAvLyBXZSBhZGQgaGVyZSB0cnkuLmNhdGNoIGJlY2F1c2UgaW4gSUUgRXJyb3Iuc3RhY2sgaXMgYXZhaWxhYmxlIG9ubHlcbiAgLy8gZm9yIHRocm93biBlcnJvcnM6IGh0dHBzOi8vbXNkbi5taWNyb3NvZnQuY29tL3J1LXJ1L2xpYnJhcnkvd2luZG93cy9hcHBzL2hoNjk5ODUwLmFzcHhcblxuICBsZXQgc3RhY2sgPSAnJztcbiAgY29uc3Qgc3RhY2tUcmFjZUxpbWl0RGVmYXVsdCA9IEVycm9yLnN0YWNrVHJhY2VMaW1pdDtcbiAgRXJyb3Iuc3RhY2tUcmFjZUxpbWl0ID0gZGVlcCArIDEyO1xuICB0cnkge1xuICAgIHRocm93IG5ldyBFcnJvcigpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKGUuc3RhY2spIHsgLy8gRXJyb3Iuc3RhY2sgaXMgdW5hdmFpbGFibGUgaW4gb2xkIGJyb3dzZXJzXG4gICAgICBzdGFjayA9IGUuc3RhY2tcbiAgICAgICAgLnNwbGl0KCdcXG4nKVxuICAgICAgICAuc2xpY2UoMiArIGRlZXApIC8vIEhlcmUgd2UgZGVsZXRlIHJvd3MgJ0Vycm9yJyBhbmQgJ2F0IGdldFN0YWNrKHV0aWxzLmpzOjQyNyknXG4gICAgICAgIC5qb2luKCdcXG4nKTtcbiAgICB9XG4gIH1cblxuICBFcnJvci5zdGFja1RyYWNlTGltaXQgPSBzdGFja1RyYWNlTGltaXREZWZhdWx0O1xuICByZXR1cm4gc3RhY2s7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB3YXJuKG1lc3NhZ2UpIHtcbiAgY29uc29sZS53YXJuKG1lc3NhZ2UsICdcXG4nLCBnZXRTdGFjaygxKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0b0VuY29kZWRTdHJpbmcodmFsdWUpIHtcbiAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudCgodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IHZhbHVlIDogSlNPTi5zdHJpbmdpZnkodmFsdWUpKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhc3luY0hhbmRsZXIocm91dGVyKSB7XG4gIHJldHVybiAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICBjb25zdCBwcm9taXNlID0gcm91dGVyKHJlcSwgcmVzLCBuZXh0KTtcbiAgICBpZiAocHJvbWlzZSAmJiBwcm9taXNlLnRoZW4pIHtcbiAgICAgIHJldHVybiBwcm9taXNlLmNhdGNoKG5leHQpO1xuICAgIH1cbiAgICBuZXh0KG5ldyBFcnJvcignYXN5bmNIYW5kbGVyIGV4cGVjdGVkIHRvIHRha2UgYXN5bmMgZnVuY3Rpb24uJykpO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyZW50cyhlbGVtZW50LCBzZWxlY3Rvcikge1xuICBjb25zdCByZXN1bHQgPSBbXTtcbiAgd2hpbGUgKChlbGVtZW50ID0gZWxlbWVudC5wYXJlbnRFbGVtZW50KSkge1xuICAgIGlmIChlbGVtZW50Lm1hdGNoZXMoc2VsZWN0b3IpKSB7XG4gICAgICByZXN1bHQucHVzaChlbGVtZW50KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSnNvbihqc29uLCBlcnJvck1lc3NhZ2UgPSAnSW5jb3JyZWN0IEpTT04nKSB7XG4gIGxldCByZXN1bHQ7XG5cbiAgdHJ5IHtcbiAgICByZXN1bHQgPSBKU09OLnBhcnNlKGpzb24pO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICB0aHJvdyBuZXcgQXJndW1lbnRzRXJyb3IoZXJyb3JNZXNzYWdlKTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG4iLCIvKlxuICogQ29weXJpZ2h0ICjRgSkgMjAxNS1wcmVzZW50LCBTb2Z0SW5kZXggTExDLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG5jbGFzcyBWYWxpZGF0aW9uRXJyb3JzIHtcbiAgLyoqXG4gICAqIEZpZWxkIGVycm9ycyBjb250cm9sIG1hbmFnZXJcbiAgICogQGNvbnN0cnVjdG9yXG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLl9maWVsZHMgPSBuZXcgTWFwKCk7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydCBKU09OIHRvIFZhbGlkYXRpb25FcnJvcnMgb2JqZWN0XG4gICAqXG4gICAqIEBwYXJhbSAgIHt7OnN0cmluZ1tdfX0gICAgICBqc29uT2JqZWN0XG4gICAqIEByZXR1cm4gIHtWYWxpZGF0aW9uRXJyb3JzfVxuICAgKiBAc3RhdGljXG4gICAqL1xuICBzdGF0aWMgY3JlYXRlRnJvbUpTT04oanNvbk9iamVjdCkge1xuICAgIGNvbnN0IHZhbGlkYXRpb25FcnJvcnMgPSBuZXcgVmFsaWRhdGlvbkVycm9ycygpO1xuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGpzb25PYmplY3QpKSB7XG4gICAgICB2YWx1ZS5mb3JFYWNoKGVyck1lc3NhZ2UgPT4gdmFsaWRhdGlvbkVycm9ycy5hZGQoa2V5LCBlcnJNZXNzYWdlKSk7XG4gICAgfVxuICAgIHJldHVybiB2YWxpZGF0aW9uRXJyb3JzO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBWYWxpZGF0aW9uRXJyb3JzIG9iamVjdCB3aXRoIG9uZSBlcnJvclxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gICAgICAgICAgICAgICAgICBmaWVsZFxuICAgKiBAcGFyYW0ge3N0cmluZ3x7ZXJyb3I6IHN0cmluZ319ICBlcnJvclxuICAgKiBAcmV0dXJuIHtWYWxpZGF0aW9uRXJyb3JzfVxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZVdpdGhFcnJvcihmaWVsZCwgZXJyb3IpIHtcbiAgICBjb25zdCB2YWxpZGF0aW9uRXJyb3JzID0gbmV3IFZhbGlkYXRpb25FcnJvcnMoKTtcbiAgICB2YWxpZGF0aW9uRXJyb3JzLmFkZChmaWVsZCwgZXJyb3IpO1xuICAgIHJldHVybiB2YWxpZGF0aW9uRXJyb3JzO1xuICB9XG5cbiAgc3RhdGljIG1lcmdlID0gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICBjb25zdCBqc29uRXJyb3JzID0gW3t9XTtcblxuICAgIGZvciAoY29uc3QgYXJnIG9mIGFyZ3MpIHtcbiAgICAgIGpzb25FcnJvcnMucHVzaChhcmcudG9KU09OKCkpO1xuICAgIH1cblxuICAgIC8vIFRPRE8gTmVlZCBkZWVwIG1lcmdlXG4gICAgcmV0dXJuIFZhbGlkYXRpb25FcnJvcnMuY3JlYXRlRnJvbUpTT04oT2JqZWN0LmFzc2lnbiguLi5qc29uRXJyb3JzKSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFkZCBhbiBlcnJvclxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gICAgICAgICAgICAgICAgICBmaWVsZCAgICAgICBGaWVsZCBuYW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfHtzdHJpbmcgbWVzc2FnZX19IGVycm9yICAgICAgIEVycm9yIHRleHRcbiAgICogQHJldHVybiB7VmFsaWRhdGlvbkVycm9yc31cbiAgICovXG4gIGFkZChmaWVsZCwgZXJyb3IpIHtcbiAgICBlcnJvciA9IHRoaXMuX2Zvcm1FcnJvclZhbHVlKGVycm9yKTtcbiAgICBpZiAoIXRoaXMuX2ZpZWxkcy5oYXMoZmllbGQpKSB7XG4gICAgICB0aGlzLl9maWVsZHMuc2V0KGZpZWxkLCBbZXJyb3JdKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBjb25zdCBmaWVsZEVycm9ycyA9IHRoaXMuX2ZpZWxkcy5nZXQoZmllbGQpO1xuICAgIGlmICghZmllbGRFcnJvcnMuaW5jbHVkZXMoZXJyb3IpKSB7XG4gICAgICBmaWVsZEVycm9ycy5wdXNoKGVycm9yKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogRmllbGQgaGFzIGVycm9yIGZsYWdcbiAgICpcbiAgICogQHBhcmFtICAge3N0cmluZ30gICAgICBmaWVsZCAgICAgRmllbGQgbmFtZVxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICovXG4gIGhhc0Vycm9yKGZpZWxkKSB7XG4gICAgcmV0dXJuIHRoaXMuX2ZpZWxkcy5oYXMoZmllbGQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBmaWVsZCBlcnJvcnNcbiAgICpcbiAgICogQHBhcmFtICAge3N0cmluZ30gICAgICBmaWVsZCAgICAgRmllbGQgbmFtZVxuICAgKiBAcmV0dXJucyB7QXJyYXl8bnVsbH0gIEVycm9ycyBhcnJheSBvciBudWxsXG4gICAqL1xuICBnZXRGaWVsZEVycm9ycyhmaWVsZCkge1xuICAgIHJldHVybiB0aGlzLl9maWVsZHMuZ2V0KGZpZWxkKSB8fCBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBmaWVsZCBlcnJvcnMgbWVzc2FnZVxuICAgKlxuICAgKiBAcGFyYW0gICB7c3RyaW5nfSAgICAgIGZpZWxkICAgICBGaWVsZCBuYW1lXG4gICAqIEByZXR1cm5zIHtBcnJheXxudWxsfSAgRXJyb3JzIGFycmF5IG9yIG51bGxcbiAgICovXG4gIGdldEZpZWxkRXJyb3JNZXNzYWdlcyhmaWVsZCkge1xuICAgIGNvbnN0IGZpZWxkRXJyb3JzID0gdGhpcy5fZmllbGRzLmdldChmaWVsZCk7XG4gICAgaWYgKGZpZWxkRXJyb3JzKSB7XG4gICAgICByZXR1cm4gZmllbGRFcnJvcnMubWFwKGVycm9yID0+IGVycm9yLm1lc3NhZ2UpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgZmllbGQgbmFtZXMgYXJyYXksIHRoYXQgY29udGFpbiBlcnJvcnNcbiAgICpcbiAgICogQHJldHVybnMge3N0cmluZ1tdfG51bGx9XG4gICAqL1xuICBnZXRGYWlsZWRGaWVsZHMoKSB7XG4gICAgY29uc3QgZmllbGRzID0gWy4uLnRoaXMuX2ZpZWxkcy5rZXlzKCldO1xuICAgIHJldHVybiBmaWVsZHMubGVuZ3RoID8gZmllbGRzIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBFcnJvcnMgYWJzZW5jZSBjaGVja1xuICAgKlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gRXJyb3JzIHByZXNlbmNlXG4gICAqL1xuICBpc0VtcHR5KCkge1xuICAgIHJldHVybiB0aGlzLl9maWVsZHMuc2l6ZSA9PT0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhciBzcGVjaWZpYyBmaWVsZCBlcnJvcnNcbiAgICpcbiAgICogQHBhcmFtICAge3N0cmluZ30gIGZpZWxkICBGaWVsZCBuYW1lXG4gICAqIEByZXR1cm5zIHtWYWxpZGF0aW9uRXJyb3JzfVxuICAgKi9cbiAgY2xlYXJGaWVsZChmaWVsZCkge1xuICAgIHRoaXMuX2ZpZWxkcy5kZWxldGUoZmllbGQpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFyIGVycm9ycyBsaXN0XG4gICAqXG4gICAqIEByZXR1cm4ge1ZhbGlkYXRpb25FcnJvcnN9XG4gICAqL1xuICBjbGVhcigpIHtcbiAgICB0aGlzLl9maWVsZHMgPSBuZXcgTWFwKCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydCBlcnJvcnMgdG8gSlNPTlxuICAgKlxuICAgKiBAcmV0dXJuIHt7W3N0cmluZ106IEFycmF5PHN0cmluZz59fVxuICAgKi9cbiAgdG9KU09OKCkge1xuICAgIGNvbnN0IGpzb24gPSB7fTtcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiB0aGlzLl9maWVsZHMpIHtcbiAgICAgIGpzb25ba2V5XSA9IHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4ganNvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbG9uZSBvYmplY3RcbiAgICpcbiAgICogQHJldHVybiB7VmFsaWRhdGlvbkVycm9yc31cbiAgICovXG4gIGNsb25lKCkge1xuICAgIHJldHVybiBWYWxpZGF0aW9uRXJyb3JzLmNyZWF0ZUZyb21KU09OKHRoaXMudG9KU09OKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIE1lcmdlIG9iamVjdFxuICAgKlxuICAgKiBAcmV0dXJuIHtWYWxpZGF0aW9uRXJyb3JzfVxuICAgKi9cbiAgbWVyZ2UodmFsaWRhdGlvbkVycm9ycykge1xuICAgIGZvciAoY29uc3QgW2ZpZWxkLCBuZXdFcnJvcnNdIG9mIHZhbGlkYXRpb25FcnJvcnMuZ2V0RXJyb3JzKCkpIHtcbiAgICAgIGxldCBlcnJvcnMgPSB0aGlzLl9maWVsZHMuZ2V0KGZpZWxkKTtcbiAgICAgIGlmICghZXJyb3JzKSB7XG4gICAgICAgIGVycm9ycyA9IFtdO1xuICAgICAgICB0aGlzLl9maWVsZHMuc2V0KGZpZWxkLCBlcnJvcnMpO1xuICAgICAgfVxuICAgICAgZXJyb3JzLnB1c2goLi4ubmV3RXJyb3JzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgZXJyb3JzIGl0ZXJhdG9yXG4gICAqXG4gICAqIEByZXR1cm4ge1tzdHJpbmcsIHN0cmluZ1tdXVtdfVxuICAgKi9cbiAgZ2V0RXJyb3JzKCkge1xuICAgIHJldHVybiB0aGlzLl9maWVsZHM7XG4gIH1cblxuICBfZm9ybUVycm9yVmFsdWUoZXJyb3IpIHtcbiAgICBpZiAodHlwZW9mIGVycm9yID09PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbWVzc2FnZTogZXJyb3JcbiAgICAgIH07XG4gICAgfVxuICAgIGlmICghZXJyb3IubWVzc2FnZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGVycm9yIHZhbHVlLiBFcnJvciBtdXN0IGJlIHN0cmluZyBvciBvYmplY3Qgd2l0aCBcIm1lc3NhZ2VcIiBwcm9wZXJ0eS4nKTtcbiAgICB9XG4gICAgcmV0dXJuIGVycm9yO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFZhbGlkYXRpb25FcnJvcnM7XG4iLCIvKlxuICogQ29weXJpZ2h0ICjRgSkgMjAxNS1wcmVzZW50LCBTb2Z0SW5kZXggTExDLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG5pbXBvcnQgVmFsaWRhdGlvbkVycm9ycyBmcm9tICcuL1ZhbGlkYXRpb25FcnJvcnMnO1xuaW1wb3J0IEFyZ3VtZW50c0Vycm9yIGZyb20gJy4uL0FyZ3VtZW50c0Vycm9yJztcbmltcG9ydCB7cGx1Y2ssIGlzSW50ZXJzZWN0aW9ufSBmcm9tICcuLi91dGlscyc7XG5cbmNsYXNzIFZhbGlkYXRvciB7XG4gIC8qKlxuICAgKiBWYWxpZGF0aW9uIGNoZWNrIG1vZGVsXG4gICAqXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fc2V0dGluZ3MgPSB7XG4gICAgICB2YWxpZGF0b3JzOiB7fSxcbiAgICAgIGdyb3VwVmFsaWRhdG9yczogW10sXG4gICAgICBhc3luY1ZhbGlkYXRvcnM6IHt9LFxuICAgICAgYXN5bmNHcm91cFZhbGlkYXRvcnM6IFtdLFxuICAgICAgYXN5bmNEZXBlbmRlbmllczogW11cbiAgICB9O1xuICB9XG5cbiAgc3RhdGljIGNyZWF0ZSgpIHtcbiAgICByZXR1cm4gbmV3IFZhbGlkYXRvcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBmaWVsZCBzeW5jIHZhbGlkYXRvcnNcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9ICAgICAgZmllbGQgICAgICAgRmllbGQgbmFtZVxuICAgKiBAcGFyYW0gey4uLkZ1bmN0aW9ufSB2YWxpZGF0b3JzICBGaWVsZCB2YWxpZGF0b3JzXG4gICAqIEByZXR1cm5zIHtWYWxpZGF0b3J9IHZhbGlkYXRvclxuICAgKi9cbiAgZmllbGQoZmllbGQsIC4uLnZhbGlkYXRvcnMpIHtcbiAgICBpZiAoIXRoaXMuX3NldHRpbmdzLnZhbGlkYXRvcnNbZmllbGRdKSB7XG4gICAgICB0aGlzLl9zZXR0aW5ncy52YWxpZGF0b3JzW2ZpZWxkXSA9IFtdO1xuICAgIH1cbiAgICB0aGlzLl9zZXR0aW5ncy52YWxpZGF0b3JzW2ZpZWxkXSA9IHRoaXMuX3NldHRpbmdzLnZhbGlkYXRvcnNbZmllbGRdLmNvbmNhdCh2YWxpZGF0b3JzKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBTcGVjaWZ5IG11bHRpcGxlIHN5bmMgdmFsaWRhdG9ycyBmb3IgZmllbGRzIGdyb3VwXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXl9ICAgICAgZmllbGRzICAgICAgICAgICAgICBGaWVsZHMgYXJyYXlcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gICB2YWxpZGF0b3JGdW5jdGlvbiAgIFZhbGlkYXRvciBmdW5jdGlvblxuICAgKiBAcmV0dXJucyB7VmFsaWRhdG9yfSB2YWxpZGF0b3JcbiAgICovXG4gIGZpZWxkcyhmaWVsZHMsIHZhbGlkYXRvckZ1bmN0aW9uKSB7XG4gICAgdGhpcy5fc2V0dGluZ3MuZ3JvdXBWYWxpZGF0b3JzLnB1c2goe1xuICAgICAgZmllbGRzOiBmaWVsZHMsXG4gICAgICBmbjogdmFsaWRhdG9yRnVuY3Rpb25cbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBQb2ludCB3aGljaCBmaWVsZHMgc2VydmVyIHZhbGlkYXRpb24gbmVlZHNcbiAgICpcbiAgICogQHBhcmFtIHtBcnJheX0gICBmaWVsZHMgICBGaWVsZHMgYXJyYXlcbiAgICogQHJldHVybnMge1ZhbGlkYXRvcn0gdmFsaWRhdG9yXG4gICAqL1xuICBhc3luY0RlcGVuZGVuY2UoZmllbGRzKSB7XG4gICAgdGhpcy5fc2V0dGluZ3MuYXN5bmNEZXBlbmRlbmllcy5wdXNoKGZpZWxkcyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGZpZWxkIGFzeW5jIHZhbGlkYXRvcnNcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9ICAgICBmaWVsZCAgICAgICAgICAgICAgIEZpZWxkIG5hbWVcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gICB2YWxpZGF0b3JGdW5jdGlvbiAgIFZhbGlkYXRvciBmdW5jdGlvblxuICAgKiBAcmV0dXJucyB7VmFsaWRhdG9yfSB2YWxpZGF0b3JcbiAgICovXG4gIGFzeW5jRmllbGQoZmllbGQsIHZhbGlkYXRvckZ1bmN0aW9uKSB7XG4gICAgaWYgKCF0aGlzLl9zZXR0aW5ncy5hc3luY1ZhbGlkYXRvcnNbZmllbGRdKSB7XG4gICAgICB0aGlzLl9zZXR0aW5ncy5hc3luY1ZhbGlkYXRvcnNbZmllbGRdID0gW107XG4gICAgfVxuICAgIHRoaXMuX3NldHRpbmdzLmFzeW5jVmFsaWRhdG9yc1tmaWVsZF0ucHVzaCh2YWxpZGF0b3JGdW5jdGlvbik7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU3BlY2lmeSBtdWx0aXBsZSBhc3luYyB2YWxpZGF0b3JzIGZvciBmaWVsZHMgZ3JvdXBcbiAgICpcbiAgICogQHBhcmFtIHtBcnJheX0gICAgICBmaWVsZHMgICAgICAgICAgICAgIEZpZWxkcyBhcnJheVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSAgIHZhbGlkYXRvckZ1bmN0aW9uICAgVmFsaWRhdG9yIGZ1bmN0aW9uXG4gICAqIEByZXR1cm5zIHtWYWxpZGF0b3J9IHZhbGlkYXRvclxuICAgKi9cbiAgYXN5bmNGaWVsZHMoZmllbGRzLCB2YWxpZGF0b3JGdW5jdGlvbikge1xuICAgIHRoaXMuX3NldHRpbmdzLmFzeW5jR3JvdXBWYWxpZGF0b3JzLnB1c2goe1xuICAgICAgZmllbGRzOiBmaWVsZHMsXG4gICAgICBmbjogdmFsaWRhdG9yRnVuY3Rpb25cbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYWxsIGRlcGVuZGVudCBmaWVsZHMgdmFsaWRhdGlvbiBuZWVkc1xuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5fSAgIGZpZWxkcyAgICBGaWVsZHMgYXJyYXlcbiAgICogQHJldHVybnMge0FycmF5fSBmaWVsZHNcbiAgICovXG4gIGdldFZhbGlkYXRpb25EZXBlbmRlbmN5KGZpZWxkcykge1xuICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuICAgIGxldCBsZW5ndGg7XG4gICAgY29uc3QgZ3JvdXBzID0gcGx1Y2soXG4gICAgICB0aGlzLl9zZXR0aW5ncy5ncm91cFZhbGlkYXRvcnMuY29uY2F0KHRoaXMuX3NldHRpbmdzLmFzeW5jR3JvdXBWYWxpZGF0b3JzKSxcbiAgICAgICdmaWVsZHMnXG4gICAgKS5jb25jYXQodGhpcy5fc2V0dGluZ3MuYXN5bmNEZXBlbmRlbmllcyk7XG5cbiAgICB3aGlsZSAobGVuZ3RoICE9PSByZXN1bHQubGVuZ3RoKSB7XG4gICAgICBsZW5ndGggPSByZXN1bHQubGVuZ3RoO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGdyb3Vwcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoIWlzSW50ZXJzZWN0aW9uKGdyb3Vwc1tpXSwgZmllbGRzKSAmJiAhaXNJbnRlcnNlY3Rpb24oZ3JvdXBzW2ldLCByZXN1bHQpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBncm91cHNbaV0ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICBjb25zdCBmaWVsZCA9IGdyb3Vwc1tpXVtqXTtcbiAgICAgICAgICBpZiAoZmllbGRzLmluZGV4T2YoZmllbGQpID49IDAgfHwgcmVzdWx0LmluZGV4T2YoZmllbGQpID49IDApIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXN1bHQucHVzaChmaWVsZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBjbGllbnQgcmVjb3JkIHZhbGlkaXR5XG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSAgcmVjb3JkICAgUmVjb3JkXG4gICAqIEByZXR1cm5zIHtWYWxpZGF0aW9uRXJyb3JzfG51bGx9IFJlY29yZCB2YWxpZGl0eVxuICAgKi9cbiAgYXN5bmMgaXNWYWxpZFJlY29yZChyZWNvcmQpIHtcbiAgICBjb25zdCBmaWVsZHMgPSBPYmplY3Qua2V5cyhyZWNvcmQpO1xuICAgIGNvbnN0IGVycm9ycyA9IG5ldyBWYWxpZGF0aW9uRXJyb3JzKCk7XG4gICAgY29uc3QgYXdhaXRTdGFjayA9IFtdO1xuICAgIGNvbnN0IHByb21pc2VzID0gW107XG5cbiAgICBjb25zdCBkZXBlbmRlbnRGaWVsZHMgPSB0aGlzLmdldFZhbGlkYXRpb25EZXBlbmRlbmN5KGZpZWxkcyk7XG4gICAgaWYgKGRlcGVuZGVudEZpZWxkcy5sZW5ndGgpIHtcbiAgICAgIHRocm93IG5ldyBBcmd1bWVudHNFcnJvcignTm90IGVub3VnaCBmaWVsZHMgZm9yIHZhbGlkYXRvcjogJyArIGRlcGVuZGVudEZpZWxkcy5qb2luKCcsICcpKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgc3luYyBhbmQgYXN5bmMgdmFsaWRhdG9yc1xuICAgIGZvciAoY29uc3QgW2ZpZWxkLCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMocmVjb3JkKSkge1xuICAgICAgY29uc3QgdmFsaWRhdG9ycyA9IHRoaXMuX3NldHRpbmdzLnZhbGlkYXRvcnNbZmllbGRdO1xuICAgICAgaWYgKHZhbGlkYXRvcnMpIHtcbiAgICAgICAgZm9yIChjb25zdCB2YWxpZGF0b3Igb2YgdmFsaWRhdG9ycykge1xuICAgICAgICAgIGNvbnN0IGVycm9yID0gdmFsaWRhdG9yKHZhbHVlKTtcbiAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGVycm9ycy5hZGQoZmllbGQsIGVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgYXN5bmNWYWxpZGF0b3JzID0gdGhpcy5fc2V0dGluZ3MuYXN5bmNWYWxpZGF0b3JzW2ZpZWxkXTtcbiAgICAgIGlmIChhc3luY1ZhbGlkYXRvcnMpIHtcbiAgICAgICAgZm9yIChjb25zdCBhc3luY1ZhbGlkYXRvciBvZiBhc3luY1ZhbGlkYXRvcnMpIHtcbiAgICAgICAgICBhd2FpdFN0YWNrLnB1c2goZmllbGQpO1xuICAgICAgICAgIHByb21pc2VzLnB1c2goXG4gICAgICAgICAgICBhd2FpdCBhc3luY1ZhbGlkYXRvcih2YWx1ZSlcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQWRkIHN5bmMgYW5kIGFzeW5jIGdyb3VwIHZhbGlkYXRvcnNcbiAgICBmb3IgKGNvbnN0IGdyb3VwVmFsaWRhdG9yIG9mIHRoaXMuX3NldHRpbmdzLmdyb3VwVmFsaWRhdG9ycykge1xuICAgICAgaWYgKGlzSW50ZXJzZWN0aW9uKGdyb3VwVmFsaWRhdG9yLmZpZWxkcywgZmllbGRzKSkge1xuICAgICAgICBncm91cFZhbGlkYXRvci5mbihyZWNvcmQsIGVycm9ycyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBhc3luY0dyb3VwVmFsaWRhdG9yIG9mIHRoaXMuX3NldHRpbmdzLmFzeW5jR3JvdXBWYWxpZGF0b3JzKSB7XG4gICAgICBpZiAoaXNJbnRlcnNlY3Rpb24oYXN5bmNHcm91cFZhbGlkYXRvci5maWVsZHMsIGZpZWxkcykpIHtcbiAgICAgICAgYXdhaXRTdGFjay5wdXNoKG51bGwpO1xuICAgICAgICBwcm9taXNlcy5wdXNoKFxuICAgICAgICAgIGF3YWl0IGFzeW5jR3JvdXBWYWxpZGF0b3IuZm4ocmVjb3JkLCBlcnJvcnMpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgYXN5bmNFcnJvcnMgPSBhd2FpdCBQcm9taXNlLmFsbChwcm9taXNlcyk7XG4gICAgd2hpbGUgKGFzeW5jRXJyb3JzLmxlbmd0aCkge1xuICAgICAgY29uc3QgZXJyb3IgPSBhc3luY0Vycm9ycy5wb3AoKTtcbiAgICAgIGNvbnN0IGZpZWxkID0gYXdhaXRTdGFjay5wb3AoKTtcblxuICAgICAgaWYgKGVycm9yICYmIGZpZWxkKSB7XG4gICAgICAgIGVycm9ycy5hZGQoZmllbGQsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZXJyb3JzO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFZhbGlkYXRvcjtcbiIsIi8qXG4gKiBDb3B5cmlnaHQgKNGBKSAyMDE1LXByZXNlbnQsIFNvZnRJbmRleCBMTEMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbmltcG9ydCB7aXNEZWZpbmVkfSBmcm9tICcuLi8uLi91dGlscyc7XG5cbmZ1bmN0aW9uIGJhc2VWYWxpZGF0b3Iobm90TnVsbCwgZXJyb3IsIHZhbHVlKSB7XG4gIGVycm9yID0gZXJyb3IgfHwgJ05vdCBib29sZWFuJztcbiAgaWYgKCFpc0RlZmluZWQodmFsdWUpKSB7XG4gICAgaWYgKG5vdE51bGwpIHtcbiAgICAgIHJldHVybiBlcnJvcjtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgcmV0dXJuIGVycm9yO1xuICB9XG59XG5cbi8qKlxuICogQ3JlYXRlIGJvb2xlYW4gdmFsaWRhdG9yXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGVycm9yIEVycm9yIG1lc3NhZ2VcbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gVmFsaWRhdG9yXG4gKi9cbmNvbnN0IHZhbGlkYXRvciA9IGVycm9yID0+IGJhc2VWYWxpZGF0b3IuYmluZChudWxsLCBmYWxzZSwgZXJyb3IpO1xudmFsaWRhdG9yLm5vdE51bGwgPSBlcnJvciA9PiBiYXNlVmFsaWRhdG9yLmJpbmQobnVsbCwgdHJ1ZSwgZXJyb3IpO1xuXG5leHBvcnQgZGVmYXVsdCB2YWxpZGF0b3I7XG4iLCIvKlxuICogQ29weXJpZ2h0ICjRgSkgMjAxNS1wcmVzZW50LCBTb2Z0SW5kZXggTExDLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG5pbXBvcnQge2lzRGVmaW5lZCwgdG9EYXRlfSBmcm9tICcuLi8uLi91dGlscyc7XG5cbmZ1bmN0aW9uIGJhc2VWYWxpZGF0b3Iobm90TnVsbCwgbWluLCBtYXgsIGVycm9yLCB2YWx1ZSkge1xuICBlcnJvciA9IGVycm9yIHx8ICdJbnZhbGlkIGRhdGUnO1xuXG4gIGlmICghaXNEZWZpbmVkKHZhbHVlKSkge1xuICAgIGlmIChub3ROdWxsKSB7XG4gICAgICByZXR1cm4gZXJyb3I7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHR5cGVPZlZhbHVlID0gdHlwZW9mIHZhbHVlO1xuICBpZiAodHlwZU9mVmFsdWUgIT09ICdudW1iZXInICYmIHR5cGVPZlZhbHVlICE9PSAnc3RyaW5nJyAmJiAhKHZhbHVlIGluc3RhbmNlb2YgRGF0ZSkpIHtcbiAgICByZXR1cm4gZXJyb3I7XG4gIH1cblxuICB2YWx1ZSA9IHRvRGF0ZSh2YWx1ZSk7XG4gIGlmIChpc05hTih2YWx1ZSkpIHtcbiAgICByZXR1cm4gZXJyb3I7XG4gIH1cblxuICBpZiAobWluICYmIHRvRGF0ZShtaW4pID4gdmFsdWUpIHtcbiAgICByZXR1cm4gZXJyb3I7XG4gIH1cbiAgaWYgKG1heCAmJiB0b0RhdGUobWF4KSA8IHZhbHVlKSB7XG4gICAgcmV0dXJuIGVycm9yO1xuICB9XG59XG5cbi8qKlxuICogQ3JlYXRlIGRhdGUgdmFsaWRhdG9yXG4gKlxuICogQHBhcmFtIHtEYXRlfSAgICBbbWluXSAgIE1pbiBkYXRlXG4gKiBAcGFyYW0ge0RhdGV9ICAgIFttYXhdICAgTWF4IGRhdGVcbiAqIEBwYXJhbSB7c3RyaW5nfSAgZXJyb3IgICBFcnJvciBtZXNzYWdlXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFZhbGlkYXRvclxuICovXG5jb25zdCB2YWxpZGF0b3IgPSAobWluLCBtYXgsIGVycm9yKSA9PiBiYXNlVmFsaWRhdG9yLmJpbmQobnVsbCwgZmFsc2UsIG1pbiwgbWF4LCBlcnJvcik7XG52YWxpZGF0b3Iubm90TnVsbCA9IChtaW4sIG1heCwgZXJyb3IpID0+IGJhc2VWYWxpZGF0b3IuYmluZChudWxsLCB0cnVlLCBtaW4sIG1heCwgZXJyb3IpO1xuXG5leHBvcnQgZGVmYXVsdCB2YWxpZGF0b3I7XG4iLCIvKlxuICogQ29weXJpZ2h0ICjRgSkgMjAxNS1wcmVzZW50LCBTb2Z0SW5kZXggTExDLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG5pbXBvcnQge2lzRGVmaW5lZH0gZnJvbSAnLi4vLi4vdXRpbHMnO1xuXG5mdW5jdGlvbiBiYXNlVmFsaWRhdG9yKG5vdE51bGwsIHZhcmlhbnRzLCBlcnJvciwgdmFsdWUpIHtcbiAgZXJyb3IgPSBlcnJvciB8fCAnTm90IGluIHZhcmlhbnRzJztcbiAgaWYgKCFpc0RlZmluZWQodmFsdWUpKSB7XG4gICAgaWYgKG5vdE51bGwpIHtcbiAgICAgIHJldHVybiBlcnJvcjtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKHZhcmlhbnRzLmluZGV4T2YodmFsdWUpIDwgMCkge1xuICAgIHJldHVybiBlcnJvcjtcbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZSBlbnVtIHZhbGlkYXRvclxuICpcbiAqIEBwYXJhbSB2YXJpYW50c1xuICogQHBhcmFtIHtzdHJpbmd9IGVycm9yIEVycm9yIG1lc3NhZ2VcbiAqIEByZXR1cm5zIHtGdW5jdGlvbn1cbiAqL1xuY29uc3QgdmFsaWRhdG9yID0gKHZhcmlhbnRzLCBlcnJvcikgPT4gYmFzZVZhbGlkYXRvci5iaW5kKG51bGwsIGZhbHNlLCB2YXJpYW50cywgZXJyb3IpO1xudmFsaWRhdG9yLm5vdE51bGwgPSAodmFyaWFudHMsIGVycm9yKSA9PiBiYXNlVmFsaWRhdG9yLmJpbmQobnVsbCwgdHJ1ZSwgdmFyaWFudHMsIGVycm9yKTtcblxuZXhwb3J0IGRlZmF1bHQgdmFsaWRhdG9yO1xuIiwiLypcbiAqIENvcHlyaWdodCAo0YEpIDIwMTUtcHJlc2VudCwgU29mdEluZGV4IExMQy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxuaW1wb3J0IHtpc0RlZmluZWR9IGZyb20gJy4uLy4uL3V0aWxzJztcblxuZnVuY3Rpb24gYmFzZVZhbGlkYXRvcihub3ROdWxsLCBtaW4sIG1heCwgZXJyb3IsIHZhbHVlKSB7XG4gIGVycm9yID0gZXJyb3IgfHwgJ0ludmFsaWQgZmxvYXQnO1xuICBpZiAoIWlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICBpZiAobm90TnVsbCkge1xuICAgICAgcmV0dXJuIGVycm9yO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoXG4gICAgdHlwZW9mIHZhbHVlICE9PSAnbnVtYmVyJyB8fFxuICAgIGlzTmFOKHZhbHVlKSB8fFxuICAgICFpc0Zpbml0ZSh2YWx1ZSkgfHxcbiAgICB0eXBlb2YgbWluID09PSAnbnVtYmVyJyAmJiB2YWx1ZSA8IG1pbiB8fFxuICAgIHR5cGVvZiBtYXggPT09ICdudW1iZXInICYmIHZhbHVlID4gbWF4XG4gICkge1xuICAgIHJldHVybiBlcnJvcjtcbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZSBmbG9hdCB2YWxpZGF0b3JcbiAqXG4gKiBAcGFyYW0gbWluXG4gKiBAcGFyYW0gbWF4XG4gKiBAcGFyYW0ge3N0cmluZ30gZXJyb3IgRXJyb3IgbWVzc2FnZVxuICogQHJldHVybnMge0Z1bmN0aW9ufVxuICovXG5jb25zdCB2YWxpZGF0b3IgPSAobWluLCBtYXgsIGVycm9yKSA9PiBiYXNlVmFsaWRhdG9yLmJpbmQobnVsbCwgZmFsc2UsIG1pbiwgbWF4LCBlcnJvcik7XG52YWxpZGF0b3Iubm90TnVsbCA9IChtaW4sIG1heCwgZXJyb3IpID0+IGJhc2VWYWxpZGF0b3IuYmluZChudWxsLCB0cnVlLCBtaW4sIG1heCwgZXJyb3IpO1xuXG5leHBvcnQgZGVmYXVsdCB2YWxpZGF0b3I7XG4iLCIvKlxuICogQ29weXJpZ2h0ICjRgSkgMjAxNS1wcmVzZW50LCBTb2Z0SW5kZXggTExDLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG5pbXBvcnQge2lzRW1wdHl9IGZyb20gJy4uLy4uL3V0aWxzJztcblxuLyoqXG4gKiBDaGVjayBpZiB2YWx1ZSBpcyBub3QgZW1wdHkgc3RyaW5nLCBhcnJheSBhbmQgb2JqZWN0LiBOb3QgbnVsbCwgdW5kZWZpbmVkLCAwXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IFtlcnJvcj1cIkNhbiBub3QgYmUgZW1wdHlcIl0gRXJyb3IgbWVzc2FnZVxuICogQHJldHVybnMge0Z1bmN0aW9ufVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgZXJyb3IgPSBlcnJvciB8fCAnQ2FuIG5vdCBiZSBlbXB0eSc7XG4gIHJldHVybiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICBpZiAoXG4gICAgICBpc0VtcHR5KHZhbHVlKSB8fFxuICAgICAgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgKFxuICAgICAgICBpc05hTih2YWx1ZSkgfHxcbiAgICAgICAgIWlzRmluaXRlKHZhbHVlKVxuICAgICAgKSlcbiAgICApIHtcbiAgICAgIHJldHVybiBlcnJvcjtcbiAgICB9XG4gIH07XG59XG4iLCIvKlxuICogQ29weXJpZ2h0ICjRgSkgMjAxNS1wcmVzZW50LCBTb2Z0SW5kZXggTExDLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG5pbXBvcnQge2lzRGVmaW5lZH0gZnJvbSAnLi4vLi4vdXRpbHMnO1xuXG4vKipcbiAqIENyZWF0ZSBOVUxMIHZhbGlkYXRvclxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBbZXJyb3IgPSBcIkNhbiBub3QgYmUgZW1wdHlcIl0gRXJyb3IgbWVzc2FnZVxuICogQHJldHVybnMge0Z1bmN0aW9ufVxuICovXG5leHBvcnQgZGVmYXVsdCBlcnJvciA9PiB7XG4gIGVycm9yID0gZXJyb3IgfHwgJ0NhbiBub3QgYmUgZW1wdHknO1xuICByZXR1cm4gdmFsdWUgPT4ge1xuICAgIGlmIChcbiAgICAgICFpc0RlZmluZWQodmFsdWUpIHx8XG4gICAgICB2YWx1ZSA9PT0gJycgfHxcbiAgICAgICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInICYmIChcbiAgICAgICAgaXNOYU4odmFsdWUpIHx8XG4gICAgICAgICFpc0Zpbml0ZSh2YWx1ZSlcbiAgICAgICkpXG4gICAgKSB7XG4gICAgICByZXR1cm4gZXJyb3I7XG4gICAgfVxuICB9O1xufTtcbiIsIi8qXG4gKiBDb3B5cmlnaHQgKNGBKSAyMDE1LXByZXNlbnQsIFNvZnRJbmRleCBMTEMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbmltcG9ydCB7aXNEZWZpbmVkfSBmcm9tICcuLi8uLi91dGlscyc7XG5cbmZ1bmN0aW9uIGJhc2VWYWxpZGF0b3Iobm90TnVsbCwgbWluLCBtYXgsIGVycm9yLCB2YWx1ZSkge1xuICBlcnJvciA9IGVycm9yIHx8ICdJbnZhbGlkIG51bWJlcic7XG4gIGlmICghaXNEZWZpbmVkKHZhbHVlKSkge1xuICAgIGlmIChub3ROdWxsKSB7XG4gICAgICByZXR1cm4gZXJyb3I7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChcbiAgICB0eXBlb2YgdmFsdWUgIT09ICdudW1iZXInIHx8XG4gICAgaXNOYU4odmFsdWUpIHx8XG4gICAgcGFyc2VJbnQodmFsdWUsIDEwKS50b1N0cmluZygpICE9PSB2YWx1ZS50b1N0cmluZygpIHx8XG4gICAgdHlwZW9mIG1pbiA9PT0gJ251bWJlcicgJiYgdmFsdWUgPCBtaW4gfHxcbiAgICB0eXBlb2YgbWF4ID09PSAnbnVtYmVyJyAmJiB2YWx1ZSA+IG1heFxuICApIHtcbiAgICByZXR1cm4gZXJyb3I7XG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGUgcmFuZ2UgTnVtYmVyIHZhbGlkYXRvclxuICpcbiAqIEBwYXJhbSBtaW5cbiAqIEBwYXJhbSBtYXhcbiAqIEBwYXJhbSB7c3RyaW5nfSBlcnJvciBFcnJvciBtZXNzYWdlXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259XG4gKi9cbmNvbnN0IHZhbGlkYXRvciA9IChtaW4sIG1heCwgZXJyb3IpID0+IGJhc2VWYWxpZGF0b3IuYmluZChudWxsLCBmYWxzZSwgbWluLCBtYXgsIGVycm9yKTtcbnZhbGlkYXRvci5ub3ROdWxsID0gKG1pbiwgbWF4LCBlcnJvcikgPT4gYmFzZVZhbGlkYXRvci5iaW5kKG51bGwsIHRydWUsIG1pbiwgbWF4LCBlcnJvcik7XG5cbmV4cG9ydCBkZWZhdWx0IHZhbGlkYXRvcjtcbiIsIi8qXG4gKiBDb3B5cmlnaHQgKNGBKSAyMDE1LXByZXNlbnQsIFNvZnRJbmRleCBMTEMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbmltcG9ydCB7aXNEZWZpbmVkfSBmcm9tICcuLi8uLi91dGlscyc7XG5cbmZ1bmN0aW9uIGJhc2VWYWxpZGF0b3Iobm90TnVsbCwgcmVnRXhwLCBlcnJvciwgdmFsdWUpIHtcbiAgZXJyb3IgPSBlcnJvciB8fCAnSW52YWxpZCB2YWx1ZSc7XG4gIGlmICghaXNEZWZpbmVkKHZhbHVlKSB8fCB2YWx1ZSA9PT0gJycpIHtcbiAgICBpZiAobm90TnVsbCkge1xuICAgICAgcmV0dXJuIGVycm9yO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJyB8fCAhcmVnRXhwLnRlc3QodmFsdWUpKSB7XG4gICAgcmV0dXJuIGVycm9yO1xuICB9XG59XG5cbi8qKlxuICogQ3JlYXRlIFJlZ0V4IHZhbGlkYXRvclxuICpcbiAqIEBwYXJhbSByZWdFeHBcbiAqIEBwYXJhbSB7c3RyaW5nfSBlcnJvciBFcnJvciBtZXNzYWdlXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259XG4gKi9cbmNvbnN0IHZhbGlkYXRvciA9IChyZWdFeHAsIGVycm9yKSA9PiBiYXNlVmFsaWRhdG9yLmJpbmQobnVsbCwgZmFsc2UsIHJlZ0V4cCwgZXJyb3IpO1xudmFsaWRhdG9yLm5vdE51bGwgPSAocmVnRXhwLCBlcnJvcikgPT4gYmFzZVZhbGlkYXRvci5iaW5kKG51bGwsIHRydWUsIHJlZ0V4cCwgZXJyb3IpO1xuXG5leHBvcnQgZGVmYXVsdCB2YWxpZGF0b3I7XG4iLCIvKlxuICogQ29weXJpZ2h0ICjRgSkgMjAxNS1wcmVzZW50LCBTb2Z0SW5kZXggTExDLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG5pbXBvcnQge2lzRGVmaW5lZH0gZnJvbSAnLi4vLi4vdXRpbHMnO1xuXG5mdW5jdGlvbiBiYXNlVmFsaWRhdG9yKG5vdE51bGwsIHZhcmlhbnRzLCBlcnJvciwgdmFsdWVzKSB7XG4gIGVycm9yID0gZXJyb3IgfHwgJ05vdCBpbiB2YXJpYW50cyc7XG4gIGlmICghaXNEZWZpbmVkKHZhbHVlcykgfHwgIXZhbHVlcy5sZW5ndGgpIHtcbiAgICBpZiAobm90TnVsbCkge1xuICAgICAgcmV0dXJuIGVycm9yO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cblxuICBmb3IgKGNvbnN0IHZhbHVlIG9mIHZhbHVlcykge1xuICAgIGlmICh2YXJpYW50cy5pbmRleE9mKHZhbHVlKSA8IDApIHtcbiAgICAgIHJldHVybiBlcnJvcjtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGUgc2V0IHZhbGlkYXRvclxuICpcbiAqIEBwYXJhbSB2YXJpYW50c1xuICogQHBhcmFtIHtzdHJpbmd9IGVycm9yIEVycm9yIG1lc3NhZ2VcbiAqIEByZXR1cm5zIHtGdW5jdGlvbn1cbiAqL1xuY29uc3QgdmFsaWRhdG9yID0gKHZhcmlhbnRzLCBlcnJvcikgPT4gYmFzZVZhbGlkYXRvci5iaW5kKG51bGwsIGZhbHNlLCB2YXJpYW50cywgZXJyb3IpO1xudmFsaWRhdG9yLm5vdE51bGwgPSAodmFyaWFudHMsIGVycm9yKSA9PiBiYXNlVmFsaWRhdG9yLmJpbmQobnVsbCwgdHJ1ZSwgdmFyaWFudHMsIGVycm9yKTtcblxuZXhwb3J0IGRlZmF1bHQgdmFsaWRhdG9yO1xuIiwiLypcbiAqIENvcHlyaWdodCAo0YEpIDIwMTUtcHJlc2VudCwgU29mdEluZGV4IExMQy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxuY29uc3QgdmFyaWFibGVzID0ge307XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgZ2V0OiBrZXkgPT4gdmFyaWFibGVzW2tleV0sXG4gIHNldDogKGtleSwgdmFsdWUpID0+IHtcbiAgICB2YXJpYWJsZXNba2V5XSA9IHZhbHVlO1xuICB9XG59O1xuIiwiLypcbiAqIENvcHlyaWdodCAo0YEpIDIwMTUtcHJlc2VudCwgU29mdEluZGV4IExMQy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5cbmZ1bmN0aW9uIENoZWNrYm94KHByb3BzKSB7XG4gIGNvbnN0IHtpbmRldGVybWluYXRlLCAuLi5vdGhlclByb3BzfSA9IHByb3BzO1xuICByZXR1cm4gKFxuICAgIDxpbnB1dFxuICAgICAgey4uLm90aGVyUHJvcHN9XG4gICAgICB0eXBlPVwiY2hlY2tib3hcIlxuICAgICAgcmVmPXtpbnB1dCA9PiB7XG4gICAgICAgIGlmIChpbnB1dCkge1xuICAgICAgICAgIGlucHV0LmluZGV0ZXJtaW5hdGUgPSBpbmRldGVybWluYXRlO1xuICAgICAgICB9XG4gICAgICB9fVxuICAgIC8+XG4gICk7XG59XG5cbkNoZWNrYm94LnByb3BUeXBlcyA9IHtcbiAgaW5kZXRlcm1pbmF0ZTogUHJvcFR5cGVzLmJvb2xcbn07XG5cbmV4cG9ydCBkZWZhdWx0IENoZWNrYm94O1xuIiwiLypcbiAqIENvcHlyaWdodCAo0YEpIDIwMTUtcHJlc2VudCwgU29mdEluZGV4IExMQy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBEYXRlUGlja2VyIGZyb20gJ3JlYWN0LWRhdGVwaWNrZXInO1xuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCB7b21pdH0gZnJvbSAnLi4vY29tbW9uL3V0aWxzJztcblxuY2xhc3MgRGF0ZVBpY2tlckVkaXRvciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgZm9ybWF0OiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIHRleHRGb3JtYXQ6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgbWluOiBQcm9wVHlwZXMuYW55LFxuICAgIG1heDogUHJvcFR5cGVzLmFueSxcbiAgICB2YWx1ZTogUHJvcFR5cGVzLmFueSxcbiAgICBzaG93OiBQcm9wVHlwZXMuYm9vbCxcbiAgICBvbkJsdXI6IFByb3BUeXBlcy5mdW5jLFxuICAgIG9uQ2hhbmdlOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkXG4gIH07XG5cbiAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICB0ZXh0Rm9ybWF0OiAnWVlZWS1NTS1ERCdcbiAgfTtcblxuICBvbkNoYW5nZShkYXRlKSB7XG4gICAgaWYgKGRhdGUpIHtcbiAgICAgIGRhdGUgPSBkYXRlLmZvcm1hdCh0aGlzLnByb3BzLmZvcm1hdCk7XG4gICAgfVxuICAgIHRoaXMucHJvcHMub25DaGFuZ2UoZGF0ZSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3Qgb3RoZXJQcm9wcyA9IG9taXQodGhpcy5wcm9wcywgWyd0ZXh0Rm9ybWF0JywgJ3ZhbHVlJywgJ29uQ2hhbmdlJywgJ21pbicsICdtYXgnXSk7XG4gICAgcmV0dXJuIChcbiAgICAgIDxEYXRlUGlja2VyXG4gICAgICAgIHsuLi5vdGhlclByb3BzfVxuICAgICAgICBkYXRlRm9ybWF0PXt0aGlzLnByb3BzLnRleHRGb3JtYXR9XG4gICAgICAgIHNlbGVjdGVkPXt0aGlzLnByb3BzLnZhbHVlICYmIG1vbWVudCh0aGlzLnByb3BzLnZhbHVlKX1cbiAgICAgICAgb25DaGFuZ2U9ezo6dGhpcy5vbkNoYW5nZX1cbiAgICAgICAgbWluRGF0ZT17dGhpcy5wcm9wcy5taW4gJiYgbW9tZW50KHRoaXMucHJvcHMubWluKX1cbiAgICAgICAgbWF4RGF0ZT17dGhpcy5wcm9wcy5tYXggJiYgbW9tZW50KHRoaXMucHJvcHMubWF4KX1cbiAgICAgICAgdG9kYXlCdXR0b249eydUb2RheSd9XG4gICAgICAvPlxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRGF0ZVBpY2tlckVkaXRvcjtcbiIsIi8qXG4gKiBDb3B5cmlnaHQgKNGBKSAyMDE1LXByZXNlbnQsIFNvZnRJbmRleCBMTEMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbmltcG9ydCBmbG9hdFZhbGlkYXRvciBmcm9tICcuLi9jb21tb24vdmFsaWRhdGlvbi9ydWxlcy9mbG9hdCc7XG5pbXBvcnQge2lzRXF1YWwsIG9taXR9IGZyb20gJy4uL2NvbW1vbi91dGlscyc7XG5pbXBvcnQge2ZpbmRET01Ob2RlfSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5cbmNvbnN0IGlzSW52YWxpZEZsb2F0ID0gZmxvYXRWYWxpZGF0b3IobnVsbCwgbnVsbCwgdHJ1ZSk7XG5cbmNsYXNzIE51bWJlckVkaXRvciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgb25DaGFuZ2U6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgdmFsdWU6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1xuICAgICAgUHJvcFR5cGVzLm51bWJlcixcbiAgICAgIC8vIFN0cmluZyBzaG91bGQgYmUgYWxsb3dlZCwgYmVjYXVzZSB3aGVuIHdlIHN0YXJ0IHR5cGluZyBuZWdhdGl2ZSBudW1iZXIsXG4gICAgICAvLyB0aGVyZSBpcyBhcHBlYXJpbmcgYSB3YXJuaW5nIGluIGNvbnNvbGUgYWZ0ZXIgJy0nIHN5bWJvbFxuICAgICAgUHJvcFR5cGVzLnN0cmluZ1xuICAgIF0pXG4gIH07XG5cbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIHZhbHVlOiBwcm9wcy52YWx1ZVxuICAgIH07XG4gIH1cblxuICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgIGlmICghaXNFcXVhbCh0aGlzLnN0YXRlLnZhbHVlLCBuZXh0UHJvcHMudmFsdWUpKSB7XG4gICAgICBmaW5kRE9NTm9kZSh0aGlzLmlucHV0KS52YWx1ZSA9IHRoaXMuc3RhdGUudmFsdWUgPSBuZXh0UHJvcHMudmFsdWU7XG4gICAgfVxuICB9XG5cbiAgX29uQ2hhbmdlSGFuZGxlcihlKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgY29uc3QgdmFsdWVBc051bWJlciA9IHBhcnNlRmxvYXQodGFyZ2V0LnZhbHVlKTsgLy8gRWRnZSBkb2Vzbid0IHN1cHBvcnQgXCJ0YXJnZXQudmFsdWVBc051bWJlclwiXG4gICAgaWYgKHRhcmdldC52YWx1ZSA9PT0gJycgJiYgdGFyZ2V0LnZhbGlkaXR5LnZhbGlkKSB7IC8vIEludmFsaWQgbnVtYmVyIHNldCBlbXB0eSBzdHJpbmcgYW5kIHZhbGlkPWZhbHNlIHRvIGV2ZW50XG4gICAgICB0aGlzLnN0YXRlLnZhbHVlID0gbnVsbDtcbiAgICB9IGVsc2UgaWYgKGlzSW52YWxpZEZsb2F0KHZhbHVlQXNOdW1iZXIpKSB7XG4gICAgICB0aGlzLnN0YXRlLnZhbHVlID0gJyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3RhdGUudmFsdWUgPSB2YWx1ZUFzTnVtYmVyO1xuICAgIH1cblxuICAgIHRoaXMucHJvcHMub25DaGFuZ2UodGhpcy5zdGF0ZS52YWx1ZSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxpbnB1dFxuICAgICAgICBzdGVwPVwiYW55XCJcbiAgICAgICAgey4uLm9taXQodGhpcy5wcm9wcywgJ3ZhbHVlJyl9XG4gICAgICAgIHR5cGU9XCJudW1iZXJcIlxuICAgICAgICByZWY9eyhpbnB1dCkgPT4gdGhpcy5pbnB1dCA9IGlucHV0fVxuICAgICAgICBvbkNoYW5nZT17Ojp0aGlzLl9vbkNoYW5nZUhhbmRsZXJ9XG4gICAgICAgIGRlZmF1bHRWYWx1ZT17dGhpcy5wcm9wcy52YWx1ZX1cbiAgICAgIC8+XG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBOdW1iZXJFZGl0b3I7XG4iLCIvKlxuICogQ29weXJpZ2h0ICjRgSkgMjAxNS1wcmVzZW50LCBTb2Z0SW5kZXggTExDLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCB7ZmluZEluZGV4LCBpc0VxdWFsLCBvbWl0fSBmcm9tICcuLi9jb21tb24vdXRpbHMnO1xuXG5jbGFzcyBTZWxlY3RFZGl0b3IgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgIG9wdGlvbnM6IFByb3BUeXBlcy5hcnJheSwgLy8gc2hhcGU6IFtbdmFsdWUsIGxhYmVsLCBwcm9wc10sIC4uLl0gb3IgW2xhYmVsMSwgbGFiZWwyLCAuLi5dXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICBgcHJvcHNgIHdpbGwgYmUgcGFzc2VkIHRvIGVhY2ggY29ycmVzcG9uZGluZyA8b3B0aW9uIC8+XG4gICAgbW9kZWw6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICByZWFkOiBQcm9wVHlwZXMuZnVuY1xuICAgIH0pLFxuICAgIGRpc2FibGVkOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBvbkNoYW5nZTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICBvbkxhYmVsQ2hhbmdlOiBQcm9wVHlwZXMuZnVuYyxcbiAgICB2YWx1ZTogUHJvcFR5cGVzLmFueVxuICB9O1xuXG4gIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgb3B0aW9uczogW11cbiAgfTtcblxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgb3B0aW9uczogcHJvcHMub3B0aW9ucyxcbiAgICAgIGxvYWRpbmc6IEJvb2xlYW4ocHJvcHMubW9kZWwpXG4gICAgfTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIGlmICh0aGlzLnByb3BzLm1vZGVsKSB7XG4gICAgICB0aGlzLnByb3BzLm1vZGVsLnJlYWQoJycpXG4gICAgICAgIC50aGVuKGRhdGEgPT4ge1xuICAgICAgICAgIGRhdGEudW5zaGlmdChbbnVsbCwgJyddKTtcblxuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgb3B0aW9uczogZGF0YSxcbiAgICAgICAgICAgIGxvYWRpbmc6IGZhbHNlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgZ2V0T3B0aW9ucygpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5tb2RlbCA/IHRoaXMuc3RhdGUub3B0aW9ucyA6IHRoaXMucHJvcHMub3B0aW9ucztcbiAgfVxuXG4gIGhhbmRsZUNoYW5nZShlKSB7XG4gICAgbGV0IG9wdGlvbiA9IHRoaXMuZ2V0T3B0aW9ucygpW2UudGFyZ2V0LnZhbHVlXTtcbiAgICBpZiAoIShvcHRpb24gaW5zdGFuY2VvZiBBcnJheSkpIHtcbiAgICAgIG9wdGlvbiA9IFtvcHRpb24sIG9wdGlvbl07XG4gICAgfVxuICAgIHRoaXMucHJvcHMub25DaGFuZ2Uob3B0aW9uWzBdKTtcbiAgICBpZiAodGhpcy5wcm9wcy5vbkxhYmVsQ2hhbmdlKSB7XG4gICAgICB0aGlzLnByb3BzLm9uTGFiZWxDaGFuZ2Uob3B0aW9uWzFdKTtcbiAgICB9XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMuZ2V0T3B0aW9ucygpO1xuICAgIGNvbnN0IHZhbHVlSW5kZXggPSBmaW5kSW5kZXgob3B0aW9ucywgb3B0aW9uID0+IHtcbiAgICAgIHJldHVybiBpc0VxdWFsKG9wdGlvbiBpbnN0YW5jZW9mIEFycmF5ID8gb3B0aW9uWzBdIDogb3B0aW9uLCB0aGlzLnByb3BzLnZhbHVlKTtcbiAgICB9KTtcblxuICAgIHJldHVybiAoXG4gICAgICA8c2VsZWN0XG4gICAgICAgIHsuLi5vbWl0KHRoaXMucHJvcHMsIFsndmFsdWUnLCAnb3B0aW9ucyddKX1cbiAgICAgICAgdmFsdWU9e3ZhbHVlSW5kZXh9XG4gICAgICAgIG9uQ2hhbmdlPXt0aGlzOjp0aGlzLmhhbmRsZUNoYW5nZX1cbiAgICAgICAgZGlzYWJsZWQ9e3RoaXMucHJvcHMuZGlzYWJsZWQgfHwgdGhpcy5zdGF0ZS5sb2FkaW5nfVxuICAgICAgPlxuICAgICAgICB7b3B0aW9ucy5tYXAoKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgY29uc3Qgb3B0aW9uUHJvcHMgPSAoKGl0ZW0gaW5zdGFuY2VvZiBBcnJheSkgJiYgKGl0ZW1bMl0gaW5zdGFuY2VvZiBPYmplY3QpKSA/IGl0ZW1bMl0gOiB7fTtcbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPG9wdGlvbiBrZXk9e2luZGV4fSB2YWx1ZT17aW5kZXh9IHsuLi5vcHRpb25Qcm9wc30+XG4gICAgICAgICAgICAgIHtpdGVtIGluc3RhbmNlb2YgQXJyYXkgPyBpdGVtWzFdIDogaXRlbX1cbiAgICAgICAgICAgIDwvb3B0aW9uPlxuICAgICAgICAgICk7XG4gICAgICAgIH0pfVxuICAgICAgPC9zZWxlY3Q+XG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTZWxlY3RFZGl0b3I7XG4iLCIvKlxuICogQ29weXJpZ2h0ICjRgSkgMjAxNS1wcmVzZW50LCBTb2Z0SW5kZXggTExDLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG5pbXBvcnQgdG9Qcm9taXNlIGZyb20gJy4uL2NvbW1vbi90b1Byb21pc2UnO1xuaW1wb3J0IHt0aHJvdHRsZSwgaXNFcXVhbCwgZmluZEluZGV4LCBwYXJlbnRzLCBvbWl0fSBmcm9tICcuLi9jb21tb24vdXRpbHMnO1xuaW1wb3J0IFBvcnRhbCBmcm9tICcuLi9jb21tb24vUG9ydGFsJztcbmltcG9ydCB7ZmluZERPTU5vZGV9IGZyb20gJ3JlYWN0LWRvbSc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBUaHJvdHRsZUVycm9yIGZyb20gJy4uL2NvbW1vbi9UaHJvdHRsZUVycm9yJztcblxuY29uc3QgcG9wdXBJZCA9ICdfX3N1Z2dlc3RCb3hQb3BVcCc7XG5jb25zdCBjbGFzc2VzID0ge1xuICBvcHRpb246ICdfX3N1Z2dlc3RCb3hQb3BVcC1vcHRpb24nLFxuICBvcHRpb25Gb2N1c2VkOiAnX19zdWdnZXN0Qm94UG9wVXAtb3B0aW9uLWZvY3VzZWQnLFxuICBvcHRpb25TZWxlY3RhYmxlOiAnX19zdWdnZXN0Qm94UG9wVXAtb3B0aW9uLXNlbGVjdGFibGUnLFxuICBvcHRpb25UeXBlczoge1xuICAgIGdyb3VwOiAnX19zdWdnZXN0Qm94UG9wVXAtb3B0aW9uLWdyb3VwJyxcbiAgICBoZWFkZXI6ICdfX3N1Z2dlc3RCb3hQb3BVcC1vcHRpb24taGVhZGVyJyxcbiAgICBzdWJpdGVtOiAnX19zdWdnZXN0Qm94UG9wVXAtb3B0aW9uLXN1Yml0ZW0nLFxuICAgIGVtcHR5OiAnX19zdWdnZXN0Qm94UG9wVXAtb3B0aW9uLWVtcHR5J1xuICB9LFxuICBzZWFyY2hCbG9jazogJ19fc3VnZ2VzdEJveC1zZWFyY2gnLFxuICBzZWxlY3RCdG46ICdfX3N1Z2dlc3RCb3gtc2VsZWN0LWJ0bicsXG4gIGFycm93OiAnX19zdWdnZXN0Qm94LWFycm93JyxcbiAgdXA6ICdfX3N1Z2dlc3RCb3gtdXAnXG59O1xuY29uc3QgVEFCX0tFWSA9IDk7XG5jb25zdCBFTlRFUl9LRVkgPSAxMztcbmNvbnN0IEVTQ0FQRV9LRVkgPSAyNztcbmNvbnN0IEFSUk9XX1VQX0tFWSA9IDM4O1xuY29uc3QgQVJST1dfRE9XTl9LRVkgPSA0MDtcbmNvbnN0IE1JTl9QT1BVUF9IRUlHSFQgPSAxMDA7XG5cbmNsYXNzIFN1Z2dlc3RCb3hFZGl0b3IgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgIGRpc2FibGVkOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBtb2RlbDogUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAgIHJlYWQ6IFByb3BUeXBlcy5mdW5jLFxuICAgICAgZ2V0TGFiZWw6IFByb3BUeXBlcy5mdW5jXG4gICAgfSksXG4gICAgb25DaGFuZ2U6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgb25MYWJlbENoYW5nZTogUHJvcFR5cGVzLmZ1bmMsXG4gICAgb25NZXRhZGF0YUNoYW5nZTogUHJvcFR5cGVzLmZ1bmMsXG4gICAgdmFsdWU6IFByb3BUeXBlcy5hbnksXG4gICAgZGVmYXVsdExhYmVsOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIGxhYmVsOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIG5vdEZvdW5kRWxlbWVudDogUHJvcFR5cGVzLmVsZW1lbnQsXG4gICAgbG9hZGluZ0VsZW1lbnQ6IFByb3BUeXBlcy5lbGVtZW50LFxuICAgIG9uRm9jdXM6IFByb3BUeXBlcy5mdW5jLFxuICAgIHdpdGhFbXB0eU9wdGlvbjogUHJvcFR5cGVzLmJvb2xcbiAgfTtcblxuICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgIGRpc2FibGVkOiBmYWxzZSxcbiAgICBub3RGb3VuZEVsZW1lbnQ6IDxkaXY+Tm90aGluZyBmb3VuZDwvZGl2PixcbiAgICBsb2FkaW5nRWxlbWVudDogPGRpdj5Mb2FkaW5nLi4uPC9kaXY+LFxuICAgIHZhbHVlOiBudWxsLFxuICAgIHdpdGhFbXB0eU9wdGlvbjogZmFsc2VcbiAgfTtcblxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLl9sb2FkRGF0YSA9IHRocm90dGxlKHRoaXMuX2xvYWREYXRhKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgaXNPcGVuZWQ6IGZhbHNlLFxuICAgICAgb3B0aW9uczogW10sXG4gICAgICBzZWxlY3RlZE9wdGlvbktleTogbnVsbCxcbiAgICAgIGxhc3RWYWxpZExhYmVsOiAnJyxcbiAgICAgIGxhYmVsOiAnJyxcbiAgICAgIHBvcHVwU3R5bGVzOiB7fVxuICAgIH07XG4gICAgdGhpcy5fb25JbnB1dEZvY3VzID0gdGhpcy5fb25JbnB1dEZvY3VzLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fb25JbnB1dEtleURvd24gPSB0aGlzLl9vbklucHV0S2V5RG93bi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX29uSW5wdXRWYWx1ZUNoYW5nZSA9IHRoaXMuX29uSW5wdXRWYWx1ZUNoYW5nZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2ZvY3VzT3B0aW9uID0gdGhpcy5fZm9jdXNPcHRpb24uYmluZCh0aGlzKTtcbiAgICB0aGlzLl9vbkRvY3VtZW50TW91c2VEb3duID0gdGhpcy5fb25Eb2N1bWVudE1vdXNlRG93bi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX29uRG9jdW1lbnRNb3VzZVNjcm9sbCA9IHRoaXMuX29uRG9jdW1lbnRNb3VzZVNjcm9sbC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX3RvZ2dsZUxpc3QgPSB0aGlzLl90b2dnbGVMaXN0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5fb3Blbkxpc3QgPSB0aGlzLl9vcGVuTGlzdC5iaW5kKHRoaXMpO1xuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy5faXNNb3VudGVkID0gdHJ1ZTtcbiAgICBpZiAodGhpcy5wcm9wcy5kZWZhdWx0TGFiZWwpIHtcbiAgICAgIHRoaXMuX3NldExhYmVsVG8odGhpcy5wcm9wcy5kZWZhdWx0TGFiZWwsIHRydWUpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5oYXNPd25Qcm9wZXJ0eSgnbGFiZWwnKSkge1xuICAgICAgdGhpcy5fc2V0TGFiZWxUbyh0aGlzLnByb3BzLmxhYmVsLCB0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZ2V0TGFiZWxGcm9tTW9kZWwodGhpcy5wcm9wcy5tb2RlbCwgdGhpcy5wcm9wcy52YWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgdGhpcy5faXNNb3VudGVkID0gZmFsc2U7XG4gIH1cblxuICBzaG91bGRDb21wb25lbnRVcGRhdGUobmV4dFByb3BzLCBuZXh0U3RhdGUpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZSAhPT0gbmV4dFN0YXRlXG4gICAgICB8fCAhaXNFcXVhbCh0aGlzLnByb3BzLnZhbHVlLCBuZXh0UHJvcHMudmFsdWUpXG4gICAgICB8fCB0aGlzLnByb3BzLmRpc2FibGVkICE9PSBuZXh0UHJvcHMuZGlzYWJsZWQ7XG4gIH1cblxuICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgIGlmICghaXNFcXVhbCh0aGlzLnByb3BzLnZhbHVlLCBuZXh0UHJvcHMudmFsdWUpKSB7XG4gICAgICBpZiAoIXRoaXMucHJvcHMuaGFzT3duUHJvcGVydHkoJ2xhYmVsJykpIHtcbiAgICAgICAgdGhpcy5fZ2V0TGFiZWxGcm9tTW9kZWwobmV4dFByb3BzLm1vZGVsLCBuZXh0UHJvcHMudmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5wcm9wcy5sYWJlbCAhPT0gbmV4dFByb3BzLmxhYmVsKSB7XG4gICAgICB0aGlzLl9zZXRMYWJlbFRvKG5leHRQcm9wcy5sYWJlbCwgdHJ1ZSk7XG4gICAgfVxuICB9XG5cbiAgX2dldE9wdGlvbkxhYmVsKG9wdGlvbikge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KG9wdGlvbi5sYWJlbCkgPyBvcHRpb24ubGFiZWxbb3B0aW9uLmxhYmVsLmxlbmd0aCAtIDFdIDogb3B0aW9uLmxhYmVsO1xuICB9XG5cbiAgX3NldExhYmVsVG8obGFiZWwsIG1hcmtBc1ZhbGlkKSB7XG4gICAgaWYgKGxhYmVsID09PSBudWxsIHx8IGxhYmVsID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGxhYmVsID0gJyc7XG4gICAgfVxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgbGFiZWw6IGxhYmVsLFxuICAgICAgbGFzdFZhbGlkTGFiZWw6IG1hcmtBc1ZhbGlkID8gbGFiZWwgOiB0aGlzLnN0YXRlLmxhc3RWYWxpZExhYmVsXG4gICAgfSk7XG4gIH1cblxuICBfZ2V0TGFiZWxGcm9tTW9kZWwobW9kZWwsIGlkKSB7XG4gICAgaWYgKGlkID09PSBudWxsIHx8IGlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiB0aGlzLl9zZXRMYWJlbFRvKCcnLCB0cnVlKTtcbiAgICB9XG5cbiAgICBtb2RlbC5nZXRMYWJlbChpZClcbiAgICAgIC50aGVuKChsYWJlbCkgPT4ge1xuICAgICAgICBpZiAoIXRoaXMuX2lzTW91bnRlZCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zZXRMYWJlbFRvKGxhYmVsLCB0cnVlKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgX3VwZGF0ZUxpc3Qoc2VhcmNoUGF0dGVybikge1xuICAgIGxldCBvcHRpb25zO1xuICAgIHRyeSB7XG4gICAgICBvcHRpb25zID0gYXdhaXQgdGhpcy5fbG9hZERhdGEoc2VhcmNoUGF0dGVybik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaWYgKCEoZSBpbnN0YW5jZW9mIFRocm90dGxlRXJyb3IpKSB7XG4gICAgICAgIHRocm93IGU7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMubGVuZ3RoICYmIHRoaXMucHJvcHMud2l0aEVtcHR5T3B0aW9uKSB7XG4gICAgICBvcHRpb25zLnVuc2hpZnQoe1xuICAgICAgICBpZDogbnVsbCxcbiAgICAgICAgbGFiZWw6ICdcXHUwMEEwJyAvLyBVc2UgdGhpcyBzeW1ib2wgZm9yIHNhdmUgbGluZSBoZWlnaHRcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9pc01vdW50ZWQpIHtcbiAgICAgIGF3YWl0IHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBvcHRpb25zLFxuICAgICAgICBzZWxlY3RlZE9wdGlvbktleTogbnVsbCxcbiAgICAgICAgbG9hZGluZzogZmFsc2VcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAke3BvcHVwSWR9IC5fX3N1Z2dlc3RCb3hQb3BVcC1jb250ZW50YCk7XG4gICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgIGNvbnRlbnQuc3R5bGUgPSB7XG4gICAgICAgIGJvdHRvbTogJ2F1dG8nLFxuICAgICAgICBwb3NpdGlvbjogJ3N0YXRpYydcbiAgICAgIH07XG4gICAgfVxuICAgIHRoaXMuX3Njcm9sbExpc3RUbygpO1xuICB9XG5cbiAgX2xvYWREYXRhKHNlYXJjaFBhdHRlcm4pIHtcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5tb2RlbC5yZWFkKHNlYXJjaFBhdHRlcm4gfHwgJycpO1xuICB9XG5cbiAgYXN5bmMgX29wZW5MaXN0KHNlYXJjaFBhdHRlcm4sIGZvY3VzRmlyc3RPcHRpb24gPSBmYWxzZSkge1xuICAgIGlmICh0aGlzLnByb3BzLmRpc2FibGVkIHx8IHRoaXMuc3RhdGUuaXNPcGVuZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBwb3B1cFN0eWxlcyA9IHRoaXMuX2dldENvbXB1dGVkUG9wdXBTdHlsZXMoKTtcbiAgICBpZiAoIXBvcHVwU3R5bGVzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgYXdhaXQgdG9Qcm9taXNlKDo6dGhpcy5zZXRTdGF0ZSwgdHJ1ZSkoe1xuICAgICAgaXNPcGVuZWQ6IHRydWUsXG4gICAgICBsb2FkaW5nOiB0cnVlLFxuICAgICAgcG9wdXBTdHlsZXNcbiAgICB9KTtcbiAgICBmaW5kRE9NTm9kZSh0aGlzLmlucHV0KS5zZWxlY3QoKTtcblxuICAgIGF3YWl0IHRoaXMuX3VwZGF0ZUxpc3Qoc2VhcmNoUGF0dGVybik7IC8vIFRPRE8gSGFuZGxlIGVycm9yc1xuXG4gICAgaWYgKCF0aGlzLnN0YXRlLm9wdGlvbnMubGVuZ3RoKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGZvY3VzRmlyc3RPcHRpb24pIHtcbiAgICAgIGNvbnN0IGtleSA9IHRoaXMuc3RhdGUub3B0aW9uc1swXS50eXBlICE9PSAnZ3JvdXAnID8gMCA6IDE7XG4gICAgICBhd2FpdCB0aGlzLl9mb2N1c09wdGlvbihrZXksIHRydWUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHNlbGVjdGVkT3B0aW9uS2V5ID0gZmluZEluZGV4KHRoaXMuc3RhdGUub3B0aW9ucywgKG9wdGlvbikgPT4ge1xuICAgICAgcmV0dXJuIGlzRXF1YWwob3B0aW9uLmlkLCB0aGlzLnByb3BzLnZhbHVlKTtcbiAgICB9KTtcblxuICAgIGlmIChzZWxlY3RlZE9wdGlvbktleSAhPT0gLTEpIHtcbiAgICAgIHRoaXMuX2ZvY3VzT3B0aW9uQW5kU2Nyb2xsSW50b1ZpZXcoTnVtYmVyKHNlbGVjdGVkT3B0aW9uS2V5KSk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uSW5wdXRGb2N1cyhlKSB7XG4gICAgYXdhaXQgdGhpcy5fb3Blbkxpc3QoKTtcbiAgICBpZiAoIXRoaXMuX2lzTW91bnRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZpbmRET01Ob2RlKHRoaXMuaW5wdXQpLnNlbGVjdCgpO1xuICAgIGlmICh0aGlzLnByb3BzLm9uRm9jdXMpIHtcbiAgICAgIHRoaXMucHJvcHMub25Gb2N1cyhlKTtcbiAgICB9XG4gIH1cblxuICBfY2xvc2VMaXN0KHNob3VsZEJsdXIpIHtcbiAgICBpZiAoc2hvdWxkQmx1cikge1xuICAgICAgZmluZERPTU5vZGUodGhpcy5pbnB1dCkuYmx1cigpO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuc3RhdGUuaXNPcGVuZWQgfHwgIXRoaXMuX2lzTW91bnRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIG9wdGlvbnM6IFtdLFxuICAgICAgc2VsZWN0ZWRPcHRpb25LZXk6IG51bGwsXG4gICAgICBpc09wZW5lZDogZmFsc2VcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIF90b2dnbGVMaXN0KCkge1xuICAgIGlmICh0aGlzLnN0YXRlLmlzT3BlbmVkKSB7XG4gICAgICB0aGlzLl9jbG9zZUxpc3QoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXdhaXQgdGhpcy5fb3Blbkxpc3QoKTtcbiAgICB9XG4gIH1cblxuICBfc2VsZWN0T3B0aW9uKG9wdGlvbikge1xuICAgIG9wdGlvbiA9IG9wdGlvbiB8fCB7XG4gICAgICBpZDogbnVsbCxcbiAgICAgIGxhYmVsOiAnJyxcbiAgICAgIG1ldGFkYXRhOiB7fVxuICAgIH07XG4gICAgdGhpcy5wcm9wcy5vbkNoYW5nZShvcHRpb24uaWQsIG9wdGlvbik7XG4gICAgaWYgKHRoaXMucHJvcHMub25MYWJlbENoYW5nZSkge1xuICAgICAgdGhpcy5wcm9wcy5vbkxhYmVsQ2hhbmdlKG9wdGlvbi5sYWJlbCk7XG4gICAgfVxuICAgIGlmICh0aGlzLnByb3BzLm9uTWV0YWRhdGFDaGFuZ2UpIHtcbiAgICAgIHRoaXMucHJvcHMub25NZXRhZGF0YUNoYW5nZShvcHRpb24ubWV0YWRhdGEpO1xuICAgIH1cbiAgICBmaW5kRE9NTm9kZSh0aGlzLmlucHV0KS5zZWxlY3QoKTtcbiAgfVxuXG4gIGFzeW5jIF9mb2N1c09wdGlvbihrZXksIHNob3VsZFNldExhYmVsKSB7XG4gICAgaWYgKHNob3VsZFNldExhYmVsID09PSB0cnVlKSB7XG4gICAgICB0aGlzLl9zZXRMYWJlbFRvKHRoaXMuc3RhdGUub3B0aW9uc1trZXldLmxhYmVsKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuc3RhdGUuaXNPcGVuZWQpIHtcbiAgICAgIHRoaXMuX2ZvY3VzT3B0aW9uQW5kU2Nyb2xsSW50b1ZpZXcoa2V5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXdhaXQgdGhpcy5fb3Blbkxpc3QobnVsbCk7XG4gICAgICB0aGlzLl9mb2N1c09wdGlvbkFuZFNjcm9sbEludG9WaWV3KGtleSk7XG4gICAgfVxuICB9XG5cbiAgX2ZvY3VzT3B0aW9uQW5kU2Nyb2xsSW50b1ZpZXcoa2V5KSB7XG4gICAgdGhpcy5zdGF0ZS5zZWxlY3RlZE9wdGlvbktleSA9IGtleTtcbiAgICBjb25zdCBmb2N1c2VkSXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtjbGFzc2VzLm9wdGlvbkZvY3VzZWR9YCk7XG4gICAgY29uc3QgY3VycmVudEl0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtjbGFzc2VzLm9wdGlvbn1bZGF0YS1rZXk9XCIke2tleX1cIl1gKTtcbiAgICBpZiAoZm9jdXNlZEl0ZW1zKSB7XG4gICAgICBmb2N1c2VkSXRlbXMuY2xhc3NMaXN0LnJlbW92ZShjbGFzc2VzLm9wdGlvbkZvY3VzZWQpO1xuICAgIH1cbiAgICBpZiAoY3VycmVudEl0ZW0pIHtcbiAgICAgIGN1cnJlbnRJdGVtLmNsYXNzTGlzdC5hZGQoY2xhc3Nlcy5vcHRpb25Gb2N1c2VkKTtcbiAgICB9XG4gICAgY29uc3QgZG9tT3B0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgIyR7cG9wdXBJZH0gbGlbZGF0YS1rZXk9XCIke2tleX1cIl1gKVswXTtcbiAgICB0aGlzLl9zY3JvbGxMaXN0VG8oZG9tT3B0aW9uKTtcbiAgfVxuXG4gIF9mb2N1c05leHRPcHRpb24oKSB7XG4gICAgaWYgKCF0aGlzLnN0YXRlLm9wdGlvbnMubGVuZ3RoKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdGUuc2VsZWN0ZWRPcHRpb25LZXkgPT09IG51bGwpIHtcbiAgICAgIHRoaXMuc3RhdGUuc2VsZWN0ZWRPcHRpb25LZXkgPSAwO1xuICAgICAgcmV0dXJuIHRoaXMuX2ZvY3VzT3B0aW9uKHRoaXMuc3RhdGUuc2VsZWN0ZWRPcHRpb25LZXksIHRydWUpO1xuICAgIH1cblxuICAgIGxldCBrZXk7XG4gICAgZm9yIChrZXkgPSB0aGlzLnN0YXRlLnNlbGVjdGVkT3B0aW9uS2V5ICsgMTsga2V5IDwgdGhpcy5zdGF0ZS5vcHRpb25zLmxlbmd0aDsga2V5KyspIHtcbiAgICAgIGlmICh0aGlzLnN0YXRlLm9wdGlvbnNba2V5XS5pZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZm9jdXNPcHRpb24oa2V5LCB0cnVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChrZXkgPSAwOyBrZXkgPCB0aGlzLnN0YXRlLnNlbGVjdGVkT3B0aW9uS2V5ICsgMTsga2V5KyspIHtcbiAgICAgIGlmICh0aGlzLnN0YXRlLm9wdGlvbnNba2V5XS5pZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZm9jdXNPcHRpb24oa2V5LCB0cnVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBfZm9jdXNQcmV2T3B0aW9uKCkge1xuICAgIGlmICh0aGlzLnN0YXRlLnNlbGVjdGVkT3B0aW9uS2V5ID09PSBudWxsKSB7XG4gICAgICB0aGlzLnN0YXRlLnNlbGVjdGVkT3B0aW9uS2V5ID0gMDtcbiAgICAgIHJldHVybiB0aGlzLl9mb2N1c09wdGlvbih0aGlzLnN0YXRlLnNlbGVjdGVkT3B0aW9uS2V5KTtcbiAgICB9XG5cbiAgICBsZXQga2V5O1xuICAgIGZvciAoa2V5ID0gdGhpcy5zdGF0ZS5zZWxlY3RlZE9wdGlvbktleSAtIDE7IGtleSA+PSAwOyBrZXktLSkge1xuICAgICAgaWYgKHRoaXMuc3RhdGUub3B0aW9uc1trZXldLmlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9mb2N1c09wdGlvbihrZXksIHRydWUpO1xuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGtleSA9IHRoaXMuc3RhdGUub3B0aW9ucy5sZW5ndGggLSAxOyBrZXkgPiB0aGlzLnN0YXRlLnNlbGVjdGVkT3B0aW9uS2V5IC0gMTsga2V5LS0pIHtcbiAgICAgIGlmICh0aGlzLnN0YXRlLm9wdGlvbnNba2V5XS5pZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZm9jdXNPcHRpb24oa2V5LCB0cnVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBfc2Nyb2xsTGlzdFRvKHRhcmdldCkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke3BvcHVwSWR9OmZpcnN0LWNoaWxkYCk7XG4gICAgaWYgKCFjb250YWluZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIXRhcmdldCkge1xuICAgICAgY29udGFpbmVyLnNjcm9sbFRvcCA9IDA7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRhcmdldC5vZmZzZXRUb3AgLSBjb250YWluZXIuc2Nyb2xsVG9wID49IGNvbnRhaW5lci5jbGllbnRIZWlnaHQgLSB0YXJnZXQuY2xpZW50SGVpZ2h0KSB7XG4gICAgICBjb250YWluZXIuc2Nyb2xsVG9wID0gdGFyZ2V0Lm9mZnNldFRvcCAtIGNvbnRhaW5lci5jbGllbnRIZWlnaHQgKyB0YXJnZXQuY2xpZW50SGVpZ2h0O1xuICAgIH0gZWxzZSBpZiAodGFyZ2V0Lm9mZnNldFRvcCAtIGNvbnRhaW5lci5zY3JvbGxUb3AgPCAwKSB7XG4gICAgICBjb250YWluZXIuc2Nyb2xsVG9wID0gdGFyZ2V0Lm9mZnNldFRvcDtcbiAgICB9XG4gIH1cblxuICBfaXNQYXJlbnRPZihjaGlsZCkge1xuICAgIHdoaWxlIChjaGlsZCkge1xuICAgICAgY2hpbGQgPSBjaGlsZC5wYXJlbnROb2RlO1xuICAgICAgaWYgKGNoaWxkID09PSBmaW5kRE9NTm9kZSh0aGlzKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgX29uRG9jdW1lbnRNb3VzZURvd24oZSwgaXNPd25lcikge1xuICAgIGlmIChlLmJ1dHRvbiAhPT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgaWYgKGlzT3duZXIpIHtcbiAgICAgIGlmICghdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhjbGFzc2VzLm9wdGlvbikpIHtcbiAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudE5vZGU7XG4gICAgICB9XG4gICAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhjbGFzc2VzLm9wdGlvblNlbGVjdGFibGUpICYmIHRoaXMuc3RhdGUuaXNPcGVuZWQpIHtcbiAgICAgICAgdGhpcy5fc2VsZWN0T3B0aW9uKHRoaXMuc3RhdGUub3B0aW9uc1t0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWtleScpXSk7XG4gICAgICAgIHRoaXMuX2Nsb3NlTGlzdCh0cnVlKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gcSB3aGVyZSB0byB0ZXN0XG4gICAgICBpZiAoIXBhcmVudHModGFyZ2V0LCBgLiR7Y2xhc3Nlcy5zZWFyY2hCbG9ja31gKS5sZW5ndGgpIHtcbiAgICAgICAgaWYgKCFmaW5kRE9NTm9kZSh0aGlzLmlucHV0KS52YWx1ZSkge1xuICAgICAgICAgIHRoaXMuX3NlbGVjdE9wdGlvbihudWxsKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl9zZXRMYWJlbFRvKHRoaXMuc3RhdGUubGFzdFZhbGlkTGFiZWwpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoIXRoaXMuX2lzUGFyZW50T2YoZS50YXJnZXQpKSB7XG4gICAgICAgIHRoaXMuX2Nsb3NlTGlzdCh0cnVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBfb25Eb2N1bWVudE1vdXNlU2Nyb2xsKGUsIGlzT3duZXIpIHtcbiAgICBpZiAoIWlzT3duZXIgJiYgdGhpcy5zdGF0ZS5pc09wZW5lZCkge1xuICAgICAgY29uc3QgcG9wdXBTdHlsZXMgPSB0aGlzLl9nZXRDb21wdXRlZFBvcHVwU3R5bGVzKCk7XG4gICAgICBpZiAocG9wdXBTdHlsZXMpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgcG9wdXBTdHlsZXM6IHRoaXMuX2dldENvbXB1dGVkUG9wdXBTdHlsZXMoKVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3NldExhYmVsVG8odGhpcy5zdGF0ZS5sYXN0VmFsaWRMYWJlbCk7XG4gICAgICAgIHRoaXMuX2Nsb3NlTGlzdCh0cnVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBfb25JbnB1dEtleURvd24oZSkge1xuICAgIGlmICh0aGlzLnByb3BzLmRpc2FibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHN3aXRjaCAoZS5rZXlDb2RlKSB7XG4gICAgY2FzZSBBUlJPV19ET1dOX0tFWTpcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmICghdGhpcy5zdGF0ZS5pc09wZW5lZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fb3Blbkxpc3QoJycsIHRydWUpO1xuICAgICAgfVxuICAgICAgdGhpcy5fZm9jdXNOZXh0T3B0aW9uKCk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFSUk9XX1VQX0tFWTpcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmICghdGhpcy5zdGF0ZS5pc09wZW5lZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fb3Blbkxpc3QoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2ZvY3VzUHJldk9wdGlvbigpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBFTlRFUl9LRVk6XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIGlmICh0aGlzLnN0YXRlLnNlbGVjdGVkT3B0aW9uS2V5ID09PSBudWxsKSB7XG4gICAgICAgIHRoaXMuX3NlbGVjdE9wdGlvbihudWxsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3NlbGVjdE9wdGlvbih0aGlzLnN0YXRlLm9wdGlvbnNbdGhpcy5zdGF0ZS5zZWxlY3RlZE9wdGlvbktleV0pO1xuICAgICAgfVxuICAgICAgdGhpcy5fY2xvc2VMaXN0KCk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFRBQl9LRVk6XG4gICAgY2FzZSBFU0NBUEVfS0VZOlxuICAgICAgaWYgKGUua2V5Q29kZSA9PT0gRVNDQVBFX0tFWSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG4gICAgICBpZiAoIWUudGFyZ2V0LnZhbHVlIHx8ICF0aGlzLnByb3BzLnZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3NldExhYmVsVG8oJycpO1xuICAgICAgICB0aGlzLl9zZWxlY3RPcHRpb24obnVsbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9zZXRMYWJlbFRvKHRoaXMuc3RhdGUubGFzdFZhbGlkTGFiZWwpO1xuICAgICAgfVxuICAgICAgdGhpcy5fY2xvc2VMaXN0KCk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25JbnB1dFZhbHVlQ2hhbmdlKGUpIHtcbiAgICB0aGlzLl9zZXRMYWJlbFRvKGUudGFyZ2V0LnZhbHVlKTtcbiAgICBpZiAodGhpcy5zdGF0ZS5pc09wZW5lZCkge1xuICAgICAgYXdhaXQgdGhpcy5fdXBkYXRlTGlzdChlLnRhcmdldC52YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGF3YWl0IHRoaXMuX29wZW5MaXN0KGUudGFyZ2V0LnZhbHVlKTtcbiAgICB9XG4gIH1cblxuICBfZ2V0Q29tcHV0ZWRQb3B1cFN0eWxlcygpIHtcbiAgICBjb25zdCBpbnB1dFN0eWxlcyA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGZpbmRET01Ob2RlKHRoaXMuaW5wdXQpKTtcbiAgICBjb25zdCBwb3B1cFN0eWxlID0ge307XG5cbiAgICBjb25zdCBpbnB1dE9mZnNldCA9IGZpbmRET01Ob2RlKHRoaXMuaW5wdXQpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGNvbnN0IGlucHV0V2lkdGggPSBpbnB1dFN0eWxlcy53aWR0aDtcbiAgICBjb25zdCBpbnB1dEhlaWdodCA9IHBhcnNlSW50KGlucHV0U3R5bGVzLmhlaWdodCk7XG5cbiAgICBpZiAoaW5wdXRPZmZzZXQudG9wICsgaW5wdXRIZWlnaHQgPD0gMCB8fCBpbnB1dE9mZnNldC50b3AgPj0gd2luZG93LmlubmVySGVpZ2h0KSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBvZmZzZXRUb3AgPSBpbnB1dE9mZnNldC50b3AgKyBpbnB1dEhlaWdodDtcbiAgICBjb25zdCBvZmZzZXRMZWZ0ID0gaW5wdXRPZmZzZXQubGVmdDtcblxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uc3QgYXZhaWxhYmxlU3BhY2UgPSB3aW5kb3cuaW5uZXJIZWlnaHQgLSBvZmZzZXRUb3A7XG4gICAgICBpZiAoYXZhaWxhYmxlU3BhY2UgPCBNSU5fUE9QVVBfSEVJR0hUKSB7XG4gICAgICAgIHBvcHVwU3R5bGUubWF4SGVpZ2h0ID0gaW5wdXRPZmZzZXQudG9wO1xuICAgICAgICBwb3B1cFN0eWxlLmJvdHRvbSA9IC1pbnB1dE9mZnNldC50b3A7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwb3B1cFN0eWxlLm1heEhlaWdodCA9IGF2YWlsYWJsZVNwYWNlO1xuICAgICAgICBwb3B1cFN0eWxlLnRvcCA9IG9mZnNldFRvcDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBwb3B1cFN0eWxlLm1pbldpZHRoID0gaW5wdXRXaWR0aDtcbiAgICBwb3B1cFN0eWxlLmxlZnQgPSBvZmZzZXRMZWZ0O1xuXG4gICAgcmV0dXJuIHBvcHVwU3R5bGU7XG4gIH1cblxuICBmb2N1cygpIHtcbiAgICBmaW5kRE9NTm9kZSh0aGlzLmlucHV0KS5mb2N1cygpO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IGFycm93Q2xhc3NlcyA9IFtjbGFzc2VzLmFycm93XTtcbiAgICBsZXQgb3B0aW9ucztcbiAgICBsZXQgb3B0aW9uc1BvcHVwID0gbnVsbDtcblxuICAgIGlmICh0aGlzLnN0YXRlLmlzT3BlbmVkKSB7XG4gICAgICBhcnJvd0NsYXNzZXMucHVzaChjbGFzc2VzLnVwKTtcblxuICAgICAgaWYgKHRoaXMuc3RhdGUubG9hZGluZykge1xuICAgICAgICBvcHRpb25zID0gKFxuICAgICAgICAgIDxsaSBjbGFzc05hbWU9e1tjbGFzc2VzLm9wdGlvbiwgY2xhc3Nlcy5vcHRpb25UeXBlcy5lbXB0eV0uam9pbignICcpfT5cbiAgICAgICAgICAgIHt0aGlzLnByb3BzLmxvYWRpbmdFbGVtZW50fVxuICAgICAgICAgIDwvbGk+XG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIXRoaXMuc3RhdGUub3B0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICBvcHRpb25zID0gKFxuICAgICAgICAgICAgPGxpIGNsYXNzTmFtZT17W2NsYXNzZXMub3B0aW9uLCBjbGFzc2VzLm9wdGlvblR5cGVzLmVtcHR5XS5qb2luKCcgJyl9PlxuICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5ub3RGb3VuZEVsZW1lbnR9XG4gICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb3B0aW9ucyA9IHRoaXMuc3RhdGUub3B0aW9ucy5tYXAoKG9wdGlvbiwga2V5KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvcHRpb25DbGFzc05hbWVzID0gW2NsYXNzZXMub3B0aW9uXTtcbiAgICAgICAgICAgIGlmIChrZXkgPT09IHRoaXMuc3RhdGUuc2VsZWN0ZWRPcHRpb25LZXkpIHtcbiAgICAgICAgICAgICAgb3B0aW9uQ2xhc3NOYW1lcy5wdXNoKGNsYXNzZXMub3B0aW9uRm9jdXNlZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChvcHRpb24uaWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICBvcHRpb25DbGFzc05hbWVzLnB1c2goY2xhc3Nlcy5vcHRpb25TZWxlY3RhYmxlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG9wdGlvbi50eXBlKSB7XG4gICAgICAgICAgICAgIG9wdGlvbkNsYXNzTmFtZXMucHVzaChjbGFzc2VzLm9wdGlvblR5cGVzW29wdGlvbi50eXBlXSB8fCBvcHRpb24udHlwZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDxsaVxuICAgICAgICAgICAgICAgIGtleT17a2V5fVxuICAgICAgICAgICAgICAgIGRhdGEta2V5PXtrZXl9XG4gICAgICAgICAgICAgICAgb25Nb3VzZU92ZXI9e3RoaXMuX2ZvY3VzT3B0aW9uLmJpbmQodGhpcywga2V5KX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e29wdGlvbkNsYXNzTmFtZXMuam9pbignICcpfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgQXJyYXkuaXNBcnJheShvcHRpb24ubGFiZWwpID8gb3B0aW9uLmxhYmVsLm1hcCgobGFiZWwsIGNvbHVtbktleSkgPT4gPGRpdlxuICAgICAgICAgICAgICAgICAgICBrZXk9e2NvbHVtbktleX0+e2xhYmVsfTwvZGl2PikgOiA8ZGl2PntvcHRpb24ubGFiZWx9PC9kaXY+XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBvcHRpb25zUG9wdXAgPSAoXG4gICAgICAgIDxQb3J0YWxcbiAgICAgICAgICBpZD17cG9wdXBJZH1cbiAgICAgICAgICBzdHlsZT17dGhpcy5zdGF0ZS5wb3B1cFN0eWxlc31cbiAgICAgICAgICBvbkRvY3VtZW50TW91c2VEb3duPXt0aGlzLl9vbkRvY3VtZW50TW91c2VEb3dufVxuICAgICAgICAgIG9uRG9jdW1lbnRNb3VzZVNjcm9sbD17dGhpcy5fb25Eb2N1bWVudE1vdXNlU2Nyb2xsfVxuICAgICAgICAgIGNsYXNzTmFtZT0nX19zdWdnZXN0Qm94UG9wVXAnXG4gICAgICAgID5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIl9fc3VnZ2VzdEJveFBvcFVwLWNvbnRlbnRcIj5cbiAgICAgICAgICAgIDx1bD57b3B0aW9uc308L3VsPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L1BvcnRhbD5cbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdfX3N1Z2dlc3RCb3gnPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3Nlcy5zZWFyY2hCbG9ja30+XG4gICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICB7Li4ub21pdCh0aGlzLnByb3BzLFxuICAgICAgICAgICAgICBbJ21vZGVsJywgJ3ZhbHVlJywgJ29uQ2hhbmdlJywgJ29uTGFiZWxDaGFuZ2UnLCAnb25Gb2N1cycsXG4gICAgICAgICAgICAgICAgJ3NlbGVjdCcsICdub3RGb3VuZEVsZW1lbnQnLCAnbG9hZGluZ0VsZW1lbnQnLCAnZGVmYXVsdExhYmVsJywgJ29uTWV0YWRhdGFDaGFuZ2UnLCAnd2l0aEVtcHR5T3B0aW9uJ10pfVxuICAgICAgICAgICAgcmVmPXsoaW5wdXQpID0+IHRoaXMuaW5wdXQgPSBpbnB1dH1cbiAgICAgICAgICAgIHR5cGU9J3RleHQnXG4gICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9vcGVuTGlzdH1cbiAgICAgICAgICAgIG9uRm9jdXM9e3RoaXMuX29uSW5wdXRGb2N1c31cbiAgICAgICAgICAgIG9uS2V5RG93bj17dGhpcy5fb25JbnB1dEtleURvd259XG4gICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25JbnB1dFZhbHVlQ2hhbmdlfVxuICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUubGFiZWx9XG4gICAgICAgICAgLz5cbiAgICAgICAgICA8ZGl2IG9uQ2xpY2s9e3RoaXMuX3RvZ2dsZUxpc3R9IGNsYXNzTmFtZT17Y2xhc3Nlcy5zZWxlY3RCdG59PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2Fycm93Q2xhc3Nlcy5qb2luKCcgJyl9Lz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIHtvcHRpb25zUG9wdXB9XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFN1Z2dlc3RCb3hFZGl0b3I7XG4iLCIvKlxuICogQ29weXJpZ2h0ICjRgSkgMjAxNS1wcmVzZW50LCBTb2Z0SW5kZXggTExDLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG5pbXBvcnQgVmFsaWRhdGlvbkVycm9ycyBmcm9tICcuLi9jb21tb24vdmFsaWRhdGlvbi9WYWxpZGF0aW9uRXJyb3JzJztcbmltcG9ydCBFdmVudHNNb2RlbCBmcm9tICcuLi9jb21tb24vRXZlbnRzJztcblxuY2xhc3MgQWJzdHJhY3RGb3JtTW9kZWwgZXh0ZW5kcyBFdmVudHNNb2RlbCB7XG4gIC8qKlxuICAgKiBBYnN0cmFjdCBmb3JtIG1vZGVsXG4gICAqXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgZGF0YVxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5fSBmaWVsZHMgICAgIFJlcXVpcmVkIGZpZWxkc1xuICAgKiBAcmV0dXJucyB7T2JqZWN0fSAgUHJvbWlzZVxuICAgKiBAYWJzdHJhY3RcbiAgICovXG4gIGdldERhdGEoLypmaWVsZHMqLykge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe30pO1xuICB9XG5cbiAgLyoqXG4gICAqIFByb2Nlc3MgZm9ybSBkYXRhXG4gICAqXG4gICAqIEBwYXJhbSAgIHtPYmplY3R9ICAgICAgY2hhbmdlcyAgICAgRm9ybSBkYXRhXG4gICAqIEByZXR1cm5zIHtPYmplY3R9ICBQcm9taXNlXG4gICAqIEBhYnN0cmFjdFxuICAgKi9cbiAgc3VibWl0KC8qY2hhbmdlcyovKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlY29yZCB2YWxpZGl0eSBjaGVja1xuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gICAgICByZWNvcmQgIFJlY29yZCBvYmplY3RcbiAgICogQHJldHVybnMge09iamVjdH0gIFByb21pc2VcbiAgICogQGFic3RyYWN0XG4gICAqL1xuICBpc1ZhbGlkUmVjb3JkKC8qcmVjb3JkKi8pIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBWYWxpZGF0aW9uRXJyb3JzKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbGwgZGVwZW5kZW50IGZpZWxkcywgdGhhdCBhcmUgcmVxdWlyZWQgZm9yIHZhbGlkYXRpb25cbiAgICpcbiAgICogQHBhcmFtICAge0FycmF5fSAgZmllbGRzICBGaWVsZHMgbGlzdFxuICAgKiBAcmV0dXJucyB7QXJyYXl9ICBEZXBlbmRlbmNpZXNcbiAgICogQGFic3RyYWN0XG4gICAqL1xuICBnZXRWYWxpZGF0aW9uRGVwZW5kZW5jeSgvKmZpZWxkcyovKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEFic3RyYWN0Rm9ybU1vZGVsO1xuIiwiLypcbiAqIENvcHlyaWdodCAo0YEpIDIwMTUtcHJlc2VudCwgU29mdEluZGV4IExMQy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxuaW1wb3J0IFZhbGlkYXRpb25FcnJvcnMgZnJvbSAnLi4vY29tbW9uL3ZhbGlkYXRpb24vVmFsaWRhdGlvbkVycm9ycyc7XG5pbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCB7YXN5bmNIYW5kbGVyfSBmcm9tICcuLi9jb21tb24vdXRpbHMnO1xuXG5jbGFzcyBGb3JtRXhwcmVzc0FwaSB7XG4gIHN0YXRpYyBjcmVhdGUoKSB7XG4gICAgcmV0dXJuIG5ldyBGb3JtRXhwcmVzc0FwaSgpO1xuICB9XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5taWRkbGV3YXJlcyA9IHtcbiAgICAgIGdldERhdGE6IFthc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgICAgIGNvbnN0IGZpZWxkcyA9IHJlcS5xdWVyeS5maWVsZHMgPyBKU09OLnBhcnNlKHJlcS5xdWVyeS5maWVsZHMpIDogbnVsbDtcbiAgICAgICAgY29uc3QgbW9kZWwgPSB0aGlzLl9nZXRNb2RlbChyZXEsIHJlcyk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IG1vZGVsLmdldERhdGEoZmllbGRzKTtcbiAgICAgICAgICB0aGlzLl9yZXN1bHQobnVsbCwgZGF0YSwgcmVxLCByZXMsIG5leHQpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICB0aGlzLl9yZXN1bHQoZXJyLCBudWxsLCByZXEsIHJlcywgbmV4dCk7XG4gICAgICAgIH1cbiAgICAgIH0pXSxcbiAgICAgIHN1Ym1pdDogW2FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICAgICAgY29uc3QgbW9kZWwgPSB0aGlzLl9nZXRNb2RlbChyZXEsIHJlcyk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IG1vZGVsLnN1Ym1pdChyZXEuYm9keSk7XG4gICAgICAgICAgdGhpcy5fcmVzdWx0KG51bGwsIHtkYXRhOiBkYXRhLCBlcnJvcjogbnVsbH0sIHJlcSwgcmVzLCBuZXh0KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgaWYgKGVyciAmJiAhKGVyciBpbnN0YW5jZW9mIFZhbGlkYXRpb25FcnJvcnMpKSB7XG4gICAgICAgICAgICB0aGlzLl9yZXN1bHQoZXJyLCBudWxsLCByZXEsIHJlcywgbmV4dCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuX3Jlc3VsdChudWxsLCB7ZGF0YTogbnVsbCwgZXJyb3I6IGVycn0sIHJlcSwgcmVzLCBuZXh0KTtcbiAgICAgICAgfVxuICAgICAgfSldLFxuICAgICAgdmFsaWRhdGU6IFthc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgICAgIGNvbnN0IG1vZGVsID0gdGhpcy5fZ2V0TW9kZWwocmVxLCByZXMpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBtb2RlbC5pc1ZhbGlkUmVjb3JkKHJlcS5ib2R5KTtcbiAgICAgICAgICB0aGlzLl9yZXN1bHQobnVsbCwgZGF0YSwgcmVxLCByZXMsIG5leHQpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICB0aGlzLl9yZXN1bHQoZXJyLCBudWxsLCByZXEsIHJlcywgbmV4dCk7XG4gICAgICAgIH1cbiAgICAgIH0pXVxuICAgIH07XG4gIH1cblxuICBtb2RlbChtb2RlbCkge1xuICAgIGlmICh0eXBlb2YgbW9kZWwgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRoaXMuX2dldE1vZGVsID0gbW9kZWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2dldE1vZGVsID0gKCkgPT4gbW9kZWw7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgZ2V0Um91dGVyKCkge1xuICAgIHJldHVybiBuZXcgZXhwcmVzcy5Sb3V0ZXIoKVxuICAgICAgLmdldCgnLycsIHRoaXMubWlkZGxld2FyZXMuZ2V0RGF0YSlcbiAgICAgIC5wb3N0KCcvJywgdGhpcy5taWRkbGV3YXJlcy5zdWJtaXQpXG4gICAgICAucG9zdCgnL3ZhbGlkYXRpb24nLCB0aGlzLm1pZGRsZXdhcmVzLnZhbGlkYXRlKTtcbiAgfVxuXG4gIGdldERhdGEobWlkZGxld2FyZXMpIHtcbiAgICByZXR1cm4gdGhpcy5fYWRkTWlkZWx3YXJlcygnZ2V0RGF0YScsIG1pZGRsZXdhcmVzKTtcbiAgfVxuICBzdWJtaXQobWlkZGxld2FyZXMpIHtcbiAgICByZXR1cm4gdGhpcy5fYWRkTWlkZWx3YXJlcygnc3VibWl0JywgbWlkZGxld2FyZXMpO1xuICB9XG4gIHZhbGlkYXRlKG1pZGRsZXdhcmVzKSB7XG4gICAgcmV0dXJuIHRoaXMuX2FkZE1pZGVsd2FyZXMoJ3ZhbGlkYXRlJywgbWlkZGxld2FyZXMpO1xuICB9XG5cbiAgX2FkZE1pZGVsd2FyZXMobWV0aG9kLCBtaWRkbGV3YXJlcykge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShtaWRkbGV3YXJlcykpIHtcbiAgICAgIG1pZGRsZXdhcmVzID0gW21pZGRsZXdhcmVzXTtcbiAgICB9XG4gICAgdGhpcy5taWRkbGV3YXJlc1ttZXRob2RdID0gbWlkZGxld2FyZXMuY29uY2F0KHRoaXMubWlkZGxld2FyZXNbbWV0aG9kXSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvLyBEZWZhdWx0IGltcGxlbWVudGF0aW9uXG4gIF9nZXRNb2RlbCgpIHtcbiAgICB0aHJvdyBFcnJvcignTW9kZWwgaXMgbm90IGRlZmluZWQuJyk7XG4gIH1cblxuICBfcmVzdWx0KGVyciwgZGF0YSwgcmVxLCByZXMsIG5leHQpIHtcbiAgICBpZiAoZXJyKSB7XG4gICAgICBuZXh0KGVycik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlcy5qc29uKGRhdGEpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBGb3JtRXhwcmVzc0FwaTtcbiIsIi8qXG4gKiBDb3B5cmlnaHQgKNGBKSAyMDE1LXByZXNlbnQsIFNvZnRJbmRleCBMTEMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbmltcG9ydCBWYWxpZGF0b3IgZnJvbSAnLi4vY29tbW9uL3ZhbGlkYXRpb24vVmFsaWRhdG9yJztcbmltcG9ydCBBYnN0cmFjdEZvcm1Nb2RlbCBmcm9tICcuL0Fic3RyYWN0Rm9ybU1vZGVsJztcbmltcG9ydCB7Y2xvbmV9IGZyb20gJy4uL2NvbW1vbi91dGlscyc7XG5cbmNsYXNzIEZvcm1Nb2RlbCBleHRlbmRzIEFic3RyYWN0Rm9ybU1vZGVsIHtcbiAgLyoqXG4gICAqIFNpbXBsZSBmb3JtIG1vZGVsXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSAgICBkZWZhdWx0VmFsdWVzIERlZmF1bHQgZm9ybSBmaWVsZCB2YWx1ZXNcbiAgICogQHBhcmFtIHtWYWxpZGF0b3J9IHZhbGlkYXRpb24gICAgVmFsaWRhdGlvblxuICAgKiBAY29uc3RydWN0b3JcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRlZmF1bHRWYWx1ZXMsIHZhbGlkYXRpb24pIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX3ZhbGlkYXRpb24gPSB2YWxpZGF0aW9uIHx8IG5ldyBWYWxpZGF0b3IoKTtcbiAgICB0aGlzLl9kYXRhID0gZGVmYXVsdFZhbHVlcyA/IGNsb25lKGRlZmF1bHRWYWx1ZXMpIDoge307XG4gIH1cblxuICAvKipcbiAgICogR2V0IGRhdGFcbiAgICpcbiAgICogQHBhcmFtIHtBcnJheX0gICAgZmllbGRzICAgICBSZXF1aXJlZCBmaWVsZHNcbiAgICovXG4gIGFzeW5jIGdldERhdGEoZmllbGRzKSB7XG4gICAgbGV0IHJlY29yZCA9IHt9O1xuXG4gICAgaWYgKGZpZWxkcykge1xuICAgICAgZm9yIChjb25zdCBmaWVsZCBvZiBmaWVsZHMpIHtcbiAgICAgICAgcmVjb3JkW2ZpZWxkXSA9IHRoaXMuX2RhdGFbZmllbGRdO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZWNvcmQgPSBjbG9uZSh0aGlzLl9kYXRhKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVjb3JkO1xuICB9XG5cbiAgLyoqXG4gICAqIFByb2Nlc3MgZm9ybSBkYXRhXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSAgICAgIGNoYW5nZXMgICAgIEZvcm0gZGF0YVxuICAgKi9cbiAgYXN5bmMgc3VibWl0KGNoYW5nZXMpIHtcbiAgICBjb25zdCB2YWxpZEVycm9ycyA9IGF3YWl0IHRoaXMuaXNWYWxpZFJlY29yZChjaGFuZ2VzKTtcbiAgICBpZiAoIXZhbGlkRXJyb3JzLmlzRW1wdHkoKSkge1xuICAgICAgdGhyb3cgdmFsaWRFcnJvcnM7XG4gICAgfVxuICAgIE9iamVjdC5hc3NpZ24odGhpcy5fZGF0YSwgY2hhbmdlcyk7XG4gICAgdGhpcy50cmlnZ2VyKCd1cGRhdGUnLCBjaGFuZ2VzKTtcbiAgICByZXR1cm4gY2hhbmdlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBWYWxpZGF0aW9uIGNoZWNrXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSAgICAgIHJlY29yZFxuICAgKi9cbiAgYXN5bmMgaXNWYWxpZFJlY29yZChyZWNvcmQpIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5fdmFsaWRhdGlvbi5pc1ZhbGlkUmVjb3JkKHJlY29yZCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGFsbCBkZXBlbmRlbnQgZmllbGRzLCB0aGF0IGFyZSByZXF1aXJlZCBmb3IgdmFsaWRhdGlvblxuICAgKlxuICAgKiBAcGFyYW0gICB7QXJyYXl9ICBmaWVsZHMgICBGaWVsZHMgbGlzdFxuICAgKiBAcmV0dXJucyB7QXJyYXl9ICBEZXBlbmRlbmNpZXNcbiAgICovXG4gIGdldFZhbGlkYXRpb25EZXBlbmRlbmN5KGZpZWxkcykge1xuICAgIHJldHVybiB0aGlzLl92YWxpZGF0aW9uLmdldFZhbGlkYXRpb25EZXBlbmRlbmN5KGZpZWxkcyk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRm9ybU1vZGVsO1xuIiwiLypcbiAqIENvcHlyaWdodCAo0YEpIDIwMTUtcHJlc2VudCwgU29mdEluZGV4IExMQy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxuaW1wb3J0IEV2ZW50RW1pdHRlciBmcm9tICcuLi9jb21tb24vRXZlbnRzJztcbmltcG9ydCBWYWxpZGF0b3IgZnJvbSAnLi4vY29tbW9uL3ZhbGlkYXRpb24vVmFsaWRhdG9yJztcbmltcG9ydCBWYWxpZGF0aW9uRXJyb3JzIGZyb20gJy4uL2NvbW1vbi92YWxpZGF0aW9uL1ZhbGlkYXRpb25FcnJvcnMnO1xuaW1wb3J0IHt0aHJvdHRsZSwgcGFyc2VWYWx1ZUZyb21FdmVudCwgZ2V0UmVjb3JkQ2hhbmdlcywgaXNFcXVhbCwgaXNFbXB0eX0gZnJvbSAnLi4vY29tbW9uL3V0aWxzJztcbmltcG9ydCBUaHJvdHRsZUVycm9yIGZyb20gJy4uL2NvbW1vbi9UaHJvdHRsZUVycm9yJztcblxuY2xhc3MgRm9ybVNlcnZpY2Uge1xuICBjb25zdHJ1Y3RvcihmaWVsZHMgPSBudWxsKSB7XG4gICAgdGhpcy5fZGF0YSA9IG51bGw7XG4gICAgdGhpcy5fY2hhbmdlcyA9IG51bGw7XG4gICAgdGhpcy5fZXJyb3JzID0gbmV3IFZhbGlkYXRpb25FcnJvcnMoKTtcbiAgICB0aGlzLl93YXJuaW5ncyA9IG5ldyBWYWxpZGF0aW9uRXJyb3JzKCk7XG4gICAgdGhpcy5fd2FybmluZ3NWYWxpZGF0b3IgPSBudWxsO1xuICAgIHRoaXMuX2V2ZW50RW1pdHRlciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICB0aGlzLl9pc05vdEluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICB0aGlzLmZpZWxkcyA9IGZpZWxkcztcbiAgICB0aGlzLl92YWxpZGF0ZUZvcm0gPSB0aHJvdHRsZSh0aGlzLl92YWxpZGF0ZUZvcm0uYmluZCh0aGlzKSk7XG4gICAgdGhpcy52YWxpZGF0ZUZvcm0gPSB0aGlzLnZhbGlkYXRlRm9ybS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX29uTW9kZWxDaGFuZ2UgPSB0aGlzLl9vbk1vZGVsQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5jbGVhckNoYW5nZXMgPSB0aGlzLmNsZWFyQ2hhbmdlcy5iaW5kKHRoaXMpO1xuICAgIHRoaXMuY2xlYXJFcnJvciA9IHRoaXMuY2xlYXJFcnJvci5iaW5kKHRoaXMpO1xuICAgIHRoaXMuY2xlYXJWYWxpZGF0aW9uID0gdGhpcy5jbGVhclZhbGlkYXRpb24uYmluZCh0aGlzKTtcbiAgICB0aGlzLnVwZGF0ZUZpZWxkID0gdGhpcy51cGRhdGVGaWVsZC5iaW5kKHRoaXMpO1xuICAgIHRoaXMudmFsaWRhdGVGaWVsZCA9IHRoaXMudmFsaWRhdGVGaWVsZC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2dldERhdGEgPSB0aGlzLl9nZXREYXRhLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fZ2V0Q2hhbmdlcyA9IHRoaXMuX2dldENoYW5nZXMuYmluZCh0aGlzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIGZvcm1cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9ICAgICAgICAgICAgc2V0dGluZ3MgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbmZpZ3VyYXRpb25cbiAgICogQHBhcmFtIHtBcnJheX0gICAgICAgICAgICAgc2V0dGluZ3MuZmllbGRzICAgICAgICAgICAgICAgICAgICAgICAgIEZpZWxkcyBsaXN0LCB0aGF0IGFyZSByZXF1aXJlZCB0byBkaXNwbGF5XG4gICAqIEBwYXJhbSB7Rm9ybU1vZGVsfSAgICAgICAgIHNldHRpbmdzLm1vZGVsICAgICAgICAgICAgICAgICAgICAgICAgICBNb2RlbCBvZiBmb3JtXG4gICAqIEBwYXJhbSB7T2JqZWN0fSAgICAgICAgICAgIFtzZXR0aW5ncy5kYXRhXSAgICAgICAgICAgICAgICAgICAgICAgICBQcmVzZXQgZGF0YVxuICAgKiBAcGFyYW0ge09iamVjdH0gICAgICAgICAgICBbc2V0dGluZ3MuY2hhbmdlcyAgICAgICAgICAgICAgICAgICAgICAgUHJlc2V0IGNoYW5nZXNcbiAgICogQHBhcmFtIHtib29sfSAgICAgICAgICAgICAgW3NldHRpbmdzLnN1Ym1pdEFsbD1mYWxzZV0gICAgICAgICAgICAgIFNlbmQgYWxsIGZvcm0gZm9yIHZhbGlkaXR5IGNoZWNrXG4gICAqIEBwYXJhbSB7Ym9vbH0gICAgICAgICAgICAgIFtzZXR0aW5ncy5wYXJ0aWFsRXJyb3JDaGVja2luZz1mYWxzZV0gICBBY3RpdmF0ZSBwYXJ0aWFsIGdyYWR1YWwgZm9ybSB2YWxpZGF0aW9uXG4gICAqIEBwYXJhbSB7Ym9vbH0gICAgICAgICAgICAgIFtzZXR0aW5ncy5zaG93RGVwZW5kZW50RmllbGRzPWZhbHNlXSAgICBNYXJrIHRoZSBmaWVsZHMgd2hpY2ggYXJlIGludm9sdmVkIGluIHRoZSBncm91cCB2YWxpZGF0aW9uXG4gICAqIEBwYXJhbSB7VmFsaWRhdG9yfSAgICAgICAgIFtzZXR0aW5ncy53YXJuaW5nc1ZhbGlkYXRvcl0gICAgICAgICAgICBXYXJuaW5ncyB2YWxpZGF0b3IgZm9yIGZpZWxkc1xuICAgKi9cbiAgYXN5bmMgaW5pdChzZXR0aW5ncykge1xuICAgIGlmICghc2V0dGluZ3MubW9kZWwpIHtcbiAgICAgIHRocm93IEVycm9yKCdZb3UgbXVzdCBzcGVjaWZ5IHRoZSBtb2RlbCcpO1xuICAgIH1cblxuICAgIHRoaXMuX2RhdGEgPSBzZXR0aW5ncy5kYXRhIHx8IG51bGw7XG4gICAgdGhpcy5fY2hhbmdlcyA9IHNldHRpbmdzLmNoYW5nZXMgfHwge307XG4gICAgdGhpcy5faXNTdWJtaXR0aW5nID0gZmFsc2U7XG4gICAgdGhpcy5zaG93RGVwZW5kZW50RmllbGRzID0gc2V0dGluZ3Muc2hvd0RlcGVuZGVudEZpZWxkcyB8fCBmYWxzZTtcbiAgICB0aGlzLl9wYXJ0aWFsRXJyb3JDaGVja2luZyA9IHNldHRpbmdzLnBhcnRpYWxFcnJvckNoZWNraW5nOyAvLyBDdXJyZW50IG1vZGVcbiAgICB0aGlzLl9wYXJ0aWFsRXJyb3JDaGVja2luZ0RlZmF1bHQgPSBzZXR0aW5ncy5wYXJ0aWFsRXJyb3JDaGVja2luZzsgLy8gRGVmYXVsdCBtb2RlXG4gICAgdGhpcy5tb2RlbCA9IHNldHRpbmdzLm1vZGVsOyAvLyBGb3JtTW9kZWxcbiAgICB0aGlzLnN1Ym1pdEFsbCA9IHNldHRpbmdzLnN1Ym1pdEFsbDtcbiAgICB0aGlzLl93YXJuaW5nc1ZhbGlkYXRvciA9IHNldHRpbmdzLndhcm5pbmdzVmFsaWRhdG9yIHx8IG5ldyBWYWxpZGF0b3IoKTtcblxuICAgIHRoaXMudmFsaWRhdGluZyA9IGZhbHNlO1xuICAgIHRoaXMuX2hpZGRlblZhbGlkYXRpb25GaWVsZHMgPSBbXTtcbiAgICB0aGlzLnN1Ym1pdHRpbmcgPSBmYWxzZTtcbiAgICB0aGlzLl9pc05vdEluaXRpYWxpemVkID0gZmFsc2U7XG5cbiAgICBpZiAoc2V0dGluZ3MuaGFzT3duUHJvcGVydHkoJ2ZpZWxkcycpKSB7XG4gICAgICB0aGlzLmZpZWxkcyA9IHNldHRpbmdzLmZpZWxkcztcbiAgICB9XG4gICAgaWYgKCF0aGlzLl9kYXRhKSB7XG4gICAgICB0aGlzLl9kYXRhID0gYXdhaXQgc2V0dGluZ3MubW9kZWwuZ2V0RGF0YSh0aGlzLmZpZWxkcyk7XG4gICAgfVxuXG4gICAgdGhpcy5tb2RlbC5vbigndXBkYXRlJywgdGhpcy5fb25Nb2RlbENoYW5nZSk7XG4gICAgdGhpcy5fc2V0U3RhdGUoKTtcblxuICAgIGlmICghc2V0dGluZ3MucGFydGlhbEVycm9yQ2hlY2tpbmcpIHtcbiAgICAgIGF3YWl0IHRoaXMudmFsaWRhdGVGb3JtKCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0QWxsKCkge1xuICAgIGNvbnN0IGlzTG9hZGVkID0gdGhpcy5faXNMb2FkZWQoKTtcblxuICAgIGlmICghaXNMb2FkZWQpIHtcbiAgICAgIGNvbnN0IGVtcHR5RGF0YSA9IHtcbiAgICAgICAgaXNMb2FkZWQsXG4gICAgICAgIGRhdGE6IHt9LFxuICAgICAgICBvcmlnaW5hbERhdGE6IHt9LFxuICAgICAgICBjaGFuZ2VzOiB7fSxcbiAgICAgICAgZXJyb3JzOiBuZXcgVmFsaWRhdGlvbkVycm9ycygpLFxuICAgICAgICB3YXJuaW5nczogbmV3IFZhbGlkYXRpb25FcnJvcnMoKSxcbiAgICAgICAgaXNTdWJtaXR0aW5nOiBmYWxzZVxuICAgICAgfTtcbiAgICAgIGVtcHR5RGF0YS5maWVsZHMgPSB0aGlzLl9nZXRGaWVsZHMoZW1wdHlEYXRhLmRhdGEsIGVtcHR5RGF0YS5jaGFuZ2VzLCBlbXB0eURhdGEuZXJyb3JzLCBlbXB0eURhdGEud2FybmluZ3MpO1xuICAgICAgcmV0dXJuIGVtcHR5RGF0YTtcbiAgICB9XG5cbiAgICBjb25zdCBkYXRhID0gdGhpcy5fZ2V0RGF0YSgpO1xuICAgIGNvbnN0IGNoYW5nZXMgPSB0aGlzLl9nZXRDaGFuZ2VzRmllbGRzKCk7XG4gICAgY29uc3QgZXJyb3JzID0gdGhpcy5fZ2V0RGlzcGxheWVkRXJyb3JzKHRoaXMuX2Vycm9ycyk7XG4gICAgY29uc3Qgd2FybmluZ3MgPSB0aGlzLl9nZXREaXNwbGF5ZWRFcnJvcnModGhpcy5fd2FybmluZ3MpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlzTG9hZGVkLFxuICAgICAgZGF0YSxcbiAgICAgIG9yaWdpbmFsRGF0YTogdGhpcy5fZGF0YSxcbiAgICAgIGNoYW5nZXMsXG4gICAgICBlcnJvcnMsXG4gICAgICB3YXJuaW5ncyxcbiAgICAgIC8vIE5vdGUgdGhhdCB3ZSByZXR1cm4gZXJyb3JzIGFuZCB3YXJuaW5ncyBib3RoIGluIGJ1bmNoIGFzIGEgcHJvcGVydHkgYW5kIGZvciBlYWNoIGZpZWxkIHNlcGFyYXRlbHlcbiAgICAgIC8vIC0gaXQgaXMgcmVkdW5kYW50bHksIGJ1dCBoYW5keSA6KVxuICAgICAgZmllbGRzOiB0aGlzLl9nZXRGaWVsZHMoZGF0YSwgY2hhbmdlcywgZXJyb3JzLCB3YXJuaW5ncyksXG4gICAgICBpc1N1Ym1pdHRpbmc6IHRoaXMuX2lzU3VibWl0dGluZ1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIGZvcm0gdmFsdWUuIElzIHVzZWQgYXMgdGhlIEVkaXRvcnMgb25DaGFuZ2UgaGFuZGxlclxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gIGZpZWxkICBQYXJhbWV0ZXJcbiAgICogQHBhcmFtIHsqfSAgICAgICB2YWx1ZSAgRXZlbnQgb3IgZGF0YVxuICAgKi9cbiAgYXN5bmMgdXBkYXRlRmllbGQoZmllbGQsIHZhbHVlKSB7XG4gICAgYXdhaXQgdGhpcy5zZXQoe1xuICAgICAgW2ZpZWxkXTogcGFyc2VWYWx1ZUZyb21FdmVudCh2YWx1ZSlcbiAgICB9KTtcbiAgfVxuXG4gIGFkZENoYW5nZUxpc3RlbmVyKGZ1bmMpIHtcbiAgICB0aGlzLl9ldmVudEVtaXR0ZXIub24oJ3VwZGF0ZScsIGZ1bmMpO1xuICB9XG5cbiAgcmVtb3ZlQ2hhbmdlTGlzdGVuZXIoZnVuYykge1xuICAgIHRoaXMuX2V2ZW50RW1pdHRlci5vZmYoJ3VwZGF0ZScsIGZ1bmMpO1xuICAgIGlmICh0aGlzLl9ldmVudEVtaXR0ZXIubGlzdGVuZXJDb3VudCgndXBkYXRlJykgPT09IDAgJiYgIXRoaXMuX2lzTm90SW5pdGlhbGl6ZWQpIHtcbiAgICAgIHRoaXMubW9kZWwub2ZmKCd1cGRhdGUnLCB0aGlzLl9vbk1vZGVsQ2hhbmdlKTtcbiAgICB9XG4gIH1cblxuICByZW1vdmVBbGxMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fZXZlbnRFbWl0dGVyLnJlbW92ZUFsbExpc3RlbmVycygndXBkYXRlJyk7XG4gICAgdGhpcy5tb2RlbC5vZmYoJ3VwZGF0ZScsIHRoaXMuX29uTW9kZWxDaGFuZ2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfSBmaWVsZHNcbiAgICovXG4gIGNsZWFyVmFsaWRhdGlvbihmaWVsZHMpIHtcbiAgICBpZiAodGhpcy5faXNOb3RJbml0aWFsaXplZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFdlIGtlZXAgaW5mbyBhYm91dCBfaGlkZGVuVmFsaWRhdGlvbkZpZWxkcyBmb3IgY2FzZXMgd2hlbiBjbGVhclZhbGlkYXRpb24gd2FzIGNhbGxlZCB3aGlsZSB2YWxpZGF0ZUZvcm0gd2FzXG4gICAgLy8gY2FsbGVkIGFuZCBoYXZlbid0IGZpbmlzaGVkLCBzbyB0aGVuIG9sZCB2YWxpZGF0aW9uIHJlc3VsdCBzaG91bGRuJ3Qgc2hvdyBlcnJvcnMgZm9yIF9oaWRkZW5WYWxpZGF0aW9uRmllbGRzXG4gICAgLy8gZmllbGRzLCBidXQgdGhlIG5leHQgY2FsbGVkIHZhbGlkYXRpb25zIHdpbGwgY2xlYXIgX2hpZGRlblZhbGlkYXRpb25GaWVsZHMgc28gdGhlIGZpZWxkcyB3aWxsIGdldCBlcnJvcnMgYWdhaW4uXG4gICAgLy8gVXNlIGNhc2U6IGEgdXNlciBjaGFuZ2VkIGZpZWxkICduYW1lJywgYSB2YWxpZGF0aW9uIHN0YXJ0ZWQsIHRoZSB1c2VyIGZvY3VzZWQgZmllbGQgJ2FnZScgc28gd2UgY2FsbGVkXG4gICAgLy8gY2xlYXJWYWxpZGF0aW9uKCdhZ2UnKSwgdGhlIHZhbGlkYXRpb24gZmluaXNoZWQgYW5kIHJldHVybmVkIGVycm9ycyBmb3IgZmllbGRzICduYW1lJyBhbmQgJ2FnZScsIGJ1dCB3ZVxuICAgIC8vIHNob3VsZG4ndCBzaG93IGVycm9yIGZvciBmaWVsZCAnYWdlJyBiZWNhdXNlIHRoZSB1c2VyIGhhcyBqdXN0IGZvY3VzZWQgaXQuIFRoZW4gdXNlciBibHVyZWQgZmllbGQgJ2FnZScsIGEgbmV3XG4gICAgLy8gdmFsaWRhdGlvbiBzdGF0ZWQgYW5kIGl0IHNob3VsZCBzaG93IGVycm9ycyBmb3IgZmllbGQgJ2FnZScuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZmllbGRzKSkge1xuICAgICAgdGhpcy5faGlkZGVuVmFsaWRhdGlvbkZpZWxkcy5wdXNoKC4uLmZpZWxkcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGRlblZhbGlkYXRpb25GaWVsZHMucHVzaChmaWVsZHMpO1xuICAgIH1cblxuICAgIHRoaXMuX3NldFN0YXRlKCk7XG4gIH1cblxuICBjbGVhckVycm9yKGZpZWxkKSB7XG4gICAgY29uc29sZS53YXJuKCdEZXByZWNhdGVkOiBGb3JtU2VydmljZSBtZXRob2QgXCJjbGVhckVycm9yXCIgcmVuYW1lZCB0byBcImNsZWFyVmFsaWRhdGlvblwiJyk7XG4gICAgdGhpcy5jbGVhclZhbGlkYXRpb24oZmllbGQpO1xuICB9XG5cbiAgYXN5bmMgdmFsaWRhdGVGaWVsZChmaWVsZCwgdmFsdWUpIHtcbiAgICBhd2FpdCB0aGlzLnNldCh7XG4gICAgICBbZmllbGRdOiBwYXJzZVZhbHVlRnJvbUV2ZW50KHZhbHVlKVxuICAgIH0sIHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBkYXRhIGluIHRoZSBmb3JtXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSAgICBkYXRhICAgICAgICAgICAgICBEYXRhXG4gICAqIEBwYXJhbSB7Ym9vbH0gICAgICBbdmFsaWRhdGU9ZmFsc2VdICBWYWxpZGF0ZSBmb3JtXG4gICAqL1xuICBhc3luYyBzZXQoZGF0YSwgdmFsaWRhdGUpIHtcbiAgICBpZiAoIXRoaXMuX2lzTG9hZGVkKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9jaGFuZ2VzID0gZ2V0UmVjb3JkQ2hhbmdlcyh0aGlzLm1vZGVsLCB0aGlzLl9kYXRhLCB0aGlzLl9jaGFuZ2VzLCBkYXRhKTtcblxuICAgIHRoaXMuX3NldFN0YXRlKCk7XG5cbiAgICBpZiAodmFsaWRhdGUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHRoaXMudmFsaWRhdGVGb3JtKCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGlmICghKGUgaW5zdGFuY2VvZiBUaHJvdHRsZUVycm9yKSkge1xuICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBzdWJtaXREYXRhKGRhdGEpIHtcbiAgICBpZiAodGhpcy5faXNOb3RJbml0aWFsaXplZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGF3YWl0IHRoaXMuc2V0KGRhdGEpO1xuICAgIHJldHVybiBhd2FpdCB0aGlzLnN1Ym1pdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbmQgZm9ybSBkYXRhIHRvIHRoZSBtb2RlbFxuICAgKi9cbiAgYXN5bmMgc3VibWl0KCkge1xuICAgIGlmICh0aGlzLl9pc05vdEluaXRpYWxpemVkIHx8IHRoaXMuX2lzU3VibWl0dGluZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGNoYW5nZXMgPSB0aGlzLl9nZXRDaGFuZ2VzKCk7XG5cbiAgICB0aGlzLl9pc1N1Ym1pdHRpbmcgPSB0cnVlO1xuICAgIHRoaXMuX3BhcnRpYWxFcnJvckNoZWNraW5nID0gZmFsc2U7XG4gICAgY29uc3QgY291bnRPZkhpZGRlblZhbGlkYXRpb25GaWVsZHNUb1JlbW92ZSA9IHRoaXMuX2hpZGRlblZhbGlkYXRpb25GaWVsZHMubGVuZ3RoO1xuXG4gICAgdGhpcy5fc2V0U3RhdGUoKTtcblxuICAgIC8vIFNlbmQgY2hhbmdlcyB0byBtb2RlbFxuICAgIGxldCBkYXRhO1xuICAgIGxldCB2YWxpZGF0aW9uRXJyb3JzO1xuICAgIHRyeSB7XG4gICAgICBkYXRhID0gYXdhaXQgdGhpcy5tb2RlbC5zdWJtaXQoY2hhbmdlcyk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBpZiAoIShlcnIgaW5zdGFuY2VvZiBWYWxpZGF0aW9uRXJyb3JzKSkge1xuICAgICAgICB0aGlzLl9pc1N1Ym1pdHRpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fc2V0U3RhdGUoKTtcbiAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgfVxuICAgICAgdmFsaWRhdGlvbkVycm9ycyA9IGVycjtcbiAgICB9XG5cbiAgICB0aGlzLl9pc1N1Ym1pdHRpbmcgPSBmYWxzZTtcblxuICAgIGNvbnN0IG5ld0NoYW5nZXMgPSB0aGlzLl9nZXRDaGFuZ2VzKCk7XG4gICAgY29uc3QgYWN0dWFsQ2hhbmdlcyA9IGlzRXF1YWwoY2hhbmdlcywgbmV3Q2hhbmdlcyk7XG5cbiAgICBpZiAoYWN0dWFsQ2hhbmdlcykge1xuICAgICAgaWYgKHZhbGlkYXRpb25FcnJvcnMpIHtcbiAgICAgICAgdGhpcy5fZXJyb3JzID0gdmFsaWRhdGlvbkVycm9ycztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2Vycm9ycyA9IG5ldyBWYWxpZGF0aW9uRXJyb3JzKCk7XG4gICAgICAgIHRoaXMuX2NoYW5nZXMgPSB7fTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLl9oaWRkZW5WYWxpZGF0aW9uRmllbGRzLnNwbGljZSgwLCBjb3VudE9mSGlkZGVuVmFsaWRhdGlvbkZpZWxkc1RvUmVtb3ZlKTtcblxuICAgIHRoaXMuX3NldFN0YXRlKCk7XG5cbiAgICBpZiAodmFsaWRhdGlvbkVycm9ycykge1xuICAgICAgdGhyb3cgdmFsaWRhdGlvbkVycm9ycztcbiAgICB9XG5cbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuXG4gIGNsZWFyRmllbGRDaGFuZ2VzKGZpZWxkKSB7XG4gICAgaWYgKHRoaXMuX2lzTm90SW5pdGlhbGl6ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9lcnJvcnMuY2xlYXJGaWVsZChmaWVsZCk7XG4gICAgdGhpcy5fd2FybmluZ3MuY2xlYXJGaWVsZChmaWVsZCk7XG4gICAgZGVsZXRlIHRoaXMuX2NoYW5nZXNbZmllbGRdO1xuICAgIHRoaXMuX3NldFN0YXRlKCk7XG4gIH1cblxuICBjbGVhckNoYW5nZXMoKSB7XG4gICAgaWYgKHRoaXMuX2lzTm90SW5pdGlhbGl6ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9lcnJvcnMuY2xlYXIoKTtcbiAgICB0aGlzLl93YXJuaW5ncy5jbGVhcigpO1xuICAgIHRoaXMuX2NoYW5nZXMgPSB7fTtcbiAgICB0aGlzLl9wYXJ0aWFsRXJyb3JDaGVja2luZyA9IHRoaXMuX3BhcnRpYWxFcnJvckNoZWNraW5nRGVmYXVsdDtcbiAgICB0aGlzLl9zZXRTdGF0ZSgpO1xuICB9XG5cbiAgc2V0UGFydGlhbEVycm9yQ2hlY2tpbmcodmFsdWUpIHtcbiAgICB0aGlzLl9wYXJ0aWFsRXJyb3JDaGVja2luZyA9IHZhbHVlO1xuICAgIHRoaXMuX3NldFN0YXRlKCk7XG4gIH1cblxuICBnZXRQYXJ0aWFsRXJyb3JDaGVja2luZygpIHtcbiAgICByZXR1cm4gdGhpcy5fcGFydGlhbEVycm9yQ2hlY2tpbmc7XG4gIH1cblxuICBhc3luYyB2YWxpZGF0ZUZvcm0oKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLl92YWxpZGF0ZUZvcm0oKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBpZiAoIShlIGluc3RhbmNlb2YgVGhyb3R0bGVFcnJvcikpIHtcbiAgICAgICAgdGhyb3cgZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBfdmFsaWRhdGVGb3JtKCkge1xuICAgIGlmICh0aGlzLl9pc05vdEluaXRpYWxpemVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gV2Ugc2hvdWxkIHJlbW92ZSBvbmx5IHRob3NlIGhpZGRlblZhbGlkYXRpb25GaWVsZHMgdGhhdCB3ZXJlIHByZXNlbnQgYmVmb3JlIHZhbGlkYXRpb24gc3RhcnRlZCBhbmQga2VlcCB0aG9zZVxuICAgIC8vIHRoYXQgd2VyZSBhZGRlZCBhZnRlciB2YWxpZGF0aW9uIHN0YXJ0ZWQgKHNvIGl0IGlzIHBvc3NpYmxlIGFuZCBvayB0aGF0IGZpZWxkICduYW1lJyBtYXkgYmUgcHJlc2VudCAyIHRpbWVzOlxuICAgIC8vIDEgZm9yIG9sZCB2YWxpZGF0aW9uIGNhbGwgYW5kIDEgZm9yIHRoZSBuZXcpLlxuICAgIC8vIFRha2UgaW50byBhY2NvdW50IHRoYXQgX3ZhbGlkYXRlRm9ybSBpcyB0aHJvdHRsZWQsIHNvIG5leHQgY2FsbHMgd2lsbCBiZSBza2lwcGVkIG9yIHNjaGVkdWxlZCBhZnRlciBjdXJyZW50IGNhbGxcbiAgICAvLyBmaW5pc2hlcy4gSXQgbWVhbnMgd2UgZG9uJ3QgbmVlZCB0byBjYXJlIGFib3V0IHBhcmFsbGVsIGNhbGxzIGJlY2F1c2UgdGhleSBhcmUgaW1wb3NzaWJsZS5cbiAgICBjb25zdCBjb3VudE9mSGlkZGVuVmFsaWRhdGlvbkZpZWxkc1RvUmVtb3ZlID0gdGhpcy5faGlkZGVuVmFsaWRhdGlvbkZpZWxkcy5sZW5ndGg7XG4gICAgdGhpcy52YWxpZGF0aW5nID0gdHJ1ZTtcblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIHRoaXMuX3J1blZhbGlkYXRvcih0aGlzLm1vZGVsLCB0aGlzLl9nZXRDaGFuZ2VzLCAnX2Vycm9ycycpLFxuICAgICAgICB0aGlzLl9ydW5WYWxpZGF0b3IodGhpcy5fd2FybmluZ3NWYWxpZGF0b3IsIHRoaXMuX2dldERhdGEsICdfd2FybmluZ3MnKVxuICAgICAgXSk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMudmFsaWRhdGluZyA9IGZhbHNlO1xuXG4gICAgICB0aGlzLl9oaWRkZW5WYWxpZGF0aW9uRmllbGRzLnNwbGljZSgwLCBjb3VudE9mSGlkZGVuVmFsaWRhdGlvbkZpZWxkc1RvUmVtb3ZlKTtcblxuICAgICAgdGhpcy5fc2V0U3RhdGUoKTtcbiAgICB9XG5cbiAgICBjb25zdCBkaXNwbGF5ZWRFcnJvcnMgPSB0aGlzLl9nZXREaXNwbGF5ZWRFcnJvcnModGhpcy5fZXJyb3JzKTtcbiAgICBjb25zdCBkaXNwbGF5ZWRXYXJuaW5nID0gdGhpcy5fZ2V0RGlzcGxheWVkRXJyb3JzKHRoaXMuX3dhcm5pbmdzKTtcblxuICAgIHJldHVybiB7XG4gICAgICBlcnJvcnM6ICFkaXNwbGF5ZWRFcnJvcnMuaXNFbXB0eSgpID8gZGlzcGxheWVkRXJyb3JzIDogbnVsbCxcbiAgICAgIHdhcm5pbmdzOiAhZGlzcGxheWVkV2FybmluZy5pc0VtcHR5KCkgPyBkaXNwbGF5ZWRXYXJuaW5nIDogbnVsbCxcbiAgICB9O1xuICB9XG5cbiAgX2dldEZpZWxkcyhkYXRhLCBjaGFuZ2VzLCBlcnJvcnMsIHdhcm5pbmdzKSB7XG4gICAgY29uc3QgcHJveHkgPSBuZXcgUHJveHkoe30sIHtcbiAgICAgIGdldCh0YXJnZXQsIGZpZWxkTmFtZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHZhbHVlOiBkYXRhW2ZpZWxkTmFtZV0sXG4gICAgICAgICAgaXNDaGFuZ2VkOiBjaGFuZ2VzLmhhc093blByb3BlcnR5KGZpZWxkTmFtZSksXG4gICAgICAgICAgZXJyb3JzOiBlcnJvcnMuZ2V0RmllbGRFcnJvck1lc3NhZ2VzKGZpZWxkTmFtZSksXG4gICAgICAgICAgd2FybmluZ3M6IHdhcm5pbmdzLmdldEZpZWxkRXJyb3JNZXNzYWdlcyhmaWVsZE5hbWUpXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBFeHBsaWNpdCBkZWNsYXJhdGlvbiBvZiBmaWVsZHMgaW4gYW4gb2JqZWN0XG4gICAgaWYgKHRoaXMuZmllbGRzKSB7XG4gICAgICBmb3IgKGNvbnN0IGZpZWxkIG9mIHRoaXMuZmllbGRzKSB7XG4gICAgICAgIHByb3h5W2ZpZWxkXSA9IHByb3h5W2ZpZWxkXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcHJveHk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaXMgZGF0YSBsb2FkZWRcbiAgICpcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICBfaXNMb2FkZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RhdGEgIT09IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGZvcm0gY2hhbmdlc1xuICAgKlxuICAgKiBAcmV0dXJuIHt7fX1cbiAgICovXG4gIF9nZXRDaGFuZ2VzRmllbGRzKCkgeyAvLyBUT0RPIF9nZXRDaGFuZ2VzXG4gICAgY29uc3QgY2hhbmdlcyA9IHt9O1xuICAgIGZvciAoY29uc3QgZmllbGQgaW4gdGhpcy5fY2hhbmdlcykge1xuICAgICAgaWYgKCF0aGlzLl9pc0RlcGVuZGVudEZpZWxkKGZpZWxkKSkge1xuICAgICAgICBjaGFuZ2VzW2ZpZWxkXSA9IHRoaXMuX2NoYW5nZXNbZmllbGRdO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY2hhbmdlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBGaWx0ZXIgZXJyb3JzIGRlcGVuZGluZyBvbiB0aGUgcGFydGlhbEVycm9yQ2hlY2tpbmcgbW9kZSBhbmQgY2xlYXJWYWxpZGF0aW9uIG1ldGhvZFxuICAgKlxuICAgKiBAcGFyYW0ge1ZhbGlkYXRpb25FcnJvcnN9ICB2YWxpZGF0aW9uRXJyb3JzXG4gICAqIEByZXR1cm5zIHtWYWxpZGF0aW9uRXJyb3JzfSBGb3JtIGZpZWxkc1xuICAgKi9cbiAgX2dldERpc3BsYXllZEVycm9ycyh2YWxpZGF0aW9uRXJyb3JzKSB7XG4gICAgY29uc3QgZmlsdGVyZWRFcnJvcnMgPSB2YWxpZGF0aW9uRXJyb3JzLmNsb25lKCk7XG5cbiAgICBmb3IgKGNvbnN0IGZpZWxkIG9mIHZhbGlkYXRpb25FcnJvcnMuZ2V0RXJyb3JzKCkua2V5cygpKSB7XG4gICAgICBjb25zdCBpc0ZpZWxkUHJpc3RpbmUgPSAhdGhpcy5fY2hhbmdlcy5oYXNPd25Qcm9wZXJ0eShmaWVsZClcbiAgICAgICAgfHwgaXNFcXVhbCh0aGlzLl9jaGFuZ2VzW2ZpZWxkXSwgdGhpcy5fZGF0YVtmaWVsZF0pO1xuICAgICAgaWYgKHRoaXMuX2hpZGRlblZhbGlkYXRpb25GaWVsZHMuaW5jbHVkZXMoZmllbGQpIHx8IHRoaXMuX3BhcnRpYWxFcnJvckNoZWNraW5nICYmIGlzRmllbGRQcmlzdGluZSkge1xuICAgICAgICBmaWx0ZXJlZEVycm9ycy5jbGVhckZpZWxkKGZpZWxkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmlsdGVyZWRFcnJvcnM7XG4gIH1cblxuICBfc2V0U3RhdGUoKSB7XG4gICAgdGhpcy5fZXZlbnRFbWl0dGVyLnRyaWdnZXIoJ3VwZGF0ZScsIHRoaXMuZ2V0QWxsKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIE1vZGVsIHJlY29yZHMgY2hhbmdlcyBoYW5kbGVyXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjaGFuZ2VzICBDaGFuZ2VzXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfb25Nb2RlbENoYW5nZShjaGFuZ2VzKSB7XG4gICAgdGhpcy5fZGF0YSA9IHsuLi50aGlzLl9kYXRhLCAuLi5jaGFuZ2VzfTtcbiAgICB0aGlzLl9zZXRTdGF0ZSgpO1xuICB9XG5cbiAgX2dldERhdGEoKSB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHRoaXMuX2RhdGEsIHRoaXMuX2NoYW5nZXMpO1xuICB9XG5cbiAgX2dldENoYW5nZXMoKSB7XG4gICAgLy8gU2VuZCBhbGwgZGF0YSBvciBqdXN0IGNoYW5nZWQgZmllbGRzIGluIGFkZGljdGlvbiBvZiBmb3JtIGNvbmZpZ3VyYXRpb25cbiAgICBpZiAodGhpcy5zdWJtaXRBbGwpIHtcbiAgICAgIHJldHVybiB0aGlzLl9nZXREYXRhKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9jaGFuZ2VzO1xuICB9XG5cbiAgX2lzRGVwZW5kZW50RmllbGQoZmllbGQpIHtcbiAgICByZXR1cm4gdGhpcy5fY2hhbmdlcy5oYXNPd25Qcm9wZXJ0eShmaWVsZCkgJiYgaXNFcXVhbCh0aGlzLl9jaGFuZ2VzW2ZpZWxkXSwgdGhpcy5fZGF0YVtmaWVsZF0pO1xuICB9XG5cbiAgYXN5bmMgX3J1blZhbGlkYXRvcih2YWxpZGF0b3IsIGdldERhdGEsIG91dHB1dCkge1xuICAgIGNvbnN0IGRhdGEgPSBnZXREYXRhKCk7XG4gICAgaWYgKGlzRW1wdHkoZGF0YSkpIHtcbiAgICAgIHRoaXNbb3V0cHV0XS5jbGVhcigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgdmFsaWRFcnJvcnM7XG5cbiAgICB0cnkge1xuICAgICAgdmFsaWRFcnJvcnMgPSBhd2FpdCB2YWxpZGF0b3IuaXNWYWxpZFJlY29yZChkYXRhKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB0aGlzW291dHB1dF0uY2xlYXIoKTtcbiAgICAgIHRocm93IGU7XG4gICAgfVxuXG4gICAgaWYgKGlzRXF1YWwoZGF0YSwgZ2V0RGF0YSgpKSkge1xuICAgICAgdGhpc1tvdXRwdXRdID0gdmFsaWRFcnJvcnM7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1TZXJ2aWNlO1xuIiwiLypcbiAqIENvcHlyaWdodCAo0YEpIDIwMTUtcHJlc2VudCwgU29mdEluZGV4IExMQy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxuaW1wb3J0IFZhbGlkYXRpb25FcnJvcnMgZnJvbSAnLi4vY29tbW9uL3ZhbGlkYXRpb24vVmFsaWRhdGlvbkVycm9ycyc7XG5pbXBvcnQgVmFsaWRhdG9yIGZyb20gJy4uL2NvbW1vbi92YWxpZGF0aW9uL1ZhbGlkYXRvcic7XG5pbXBvcnQgZGVmYXVsdFhociBmcm9tICcuLi9jb21tb24vZGVmYXVsdFhocic7XG5pbXBvcnQgRXZlbnRzTW9kZWwgZnJvbSAnLi4vY29tbW9uL0V2ZW50cyc7XG5pbXBvcnQgdXJsIGZyb20gJ3VybCc7XG5cbmNsYXNzIEZvcm1YaHJNb2RlbCBleHRlbmRzIEV2ZW50c01vZGVsIHtcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgaWYgKCFzZXR0aW5ncy5hcGkpIHtcbiAgICAgIHRocm93IEVycm9yKCdJbml0aWFsaXphdGlvbiBwcm9ibGVtOiBcXCdhcGlcXCcgbXVzdCBiZSBzcGVjaWZpZWQuJyk7XG4gICAgfVxuXG4gICAgdGhpcy5fdmFsaWRhdG9yID0gc2V0dGluZ3MudmFsaWRhdG9yIHx8IG5ldyBWYWxpZGF0b3IoKTtcbiAgICB0aGlzLl94aHIgPSBzZXR0aW5ncy54aHIgfHwgZGVmYXVsdFhocjtcbiAgICB0aGlzLl9hcGlVcmwgPSBzZXR0aW5ncy5hcGlcbiAgICAgIC5yZXBsYWNlKC8oW14vXSlcXD8vLCAnJDEvPycpIC8vIEFkZCBcIi9cIiBiZWZvcmUgXCI/XCJcbiAgICAgIC5yZXBsYWNlKC9eW14/XSpbXi9dJC8sICckJi8nKTsgLy8gQWRkIFwiL1wiIHRvIHRoZSBlbmRcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEoZmllbGRzKSB7XG4gICAgY29uc3QgcGFyc2VkVXJsID0gdXJsLnBhcnNlKHRoaXMuX2FwaVVybCwgdHJ1ZSk7XG4gICAgcGFyc2VkVXJsLnF1ZXJ5LmZpZWxkcyA9IEpTT04uc3RyaW5naWZ5KGZpZWxkcyk7XG4gICAgZGVsZXRlIHBhcnNlZFVybC5zZWFyY2g7XG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuX3hocih7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgdXJpOiB1cmwuZm9ybWF0KHBhcnNlZFVybClcbiAgICB9KTtcblxuICAgIHJldHVybiBKU09OLnBhcnNlKHJlc3BvbnNlKTtcbiAgfVxuXG4gIGFzeW5jIHN1Ym1pdChjaGFuZ2VzKSB7XG4gICAgbGV0IGJvZHkgPSBhd2FpdCB0aGlzLl94aHIoe1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdDb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgIH0sXG4gICAgICB1cmk6IHRoaXMuX2FwaVVybCxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGNoYW5nZXMpXG4gICAgfSk7XG5cbiAgICBib2R5ID0gSlNPTi5wYXJzZShib2R5KTtcblxuICAgIGlmIChib2R5LmVycm9yKSB7XG4gICAgICB0aHJvdyBWYWxpZGF0aW9uRXJyb3JzLmNyZWF0ZUZyb21KU09OKGJvZHkuZXJyb3IpO1xuICAgIH1cblxuICAgIHRoaXMudHJpZ2dlcigndXBkYXRlJywgYm9keS5kYXRhKTtcbiAgICByZXR1cm4gYm9keS5kYXRhO1xuICB9XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRpb24gY2hlY2tcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9ICAgICAgcmVjb3JkXG4gICAqL1xuICBpc1ZhbGlkUmVjb3JkKHJlY29yZCkge1xuICAgIHJldHVybiB0aGlzLl92YWxpZGF0b3IuaXNWYWxpZFJlY29yZChyZWNvcmQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbGwgZGVwZW5kZW50IGZpZWxkcywgdGhhdCBhcmUgcmVxdWlyZWQgZm9yIHZhbGlkYXRpb25cbiAgICpcbiAgICogQHBhcmFtICAge0FycmF5fSAgZmllbGRzICAgRmllbGRzIGxpc3RcbiAgICogQHJldHVybnMge0FycmF5fSAgRGVwZW5kZW5jaWVzXG4gICAqL1xuICBnZXRWYWxpZGF0aW9uRGVwZW5kZW5jeShmaWVsZHMpIHtcbiAgICByZXR1cm4gdGhpcy5fdmFsaWRhdG9yLmdldFZhbGlkYXRpb25EZXBlbmRlbmN5KGZpZWxkcyk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRm9ybVhock1vZGVsO1xuIiwiLypcbiAqIENvcHlyaWdodCAo0YEpIDIwMTUtcHJlc2VudCwgU29mdEluZGV4IExMQy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxuaW1wb3J0IEV2ZW50cyBmcm9tICcuLi8uLi9jb21tb24vRXZlbnRzJztcbmltcG9ydCB7cGlja30gZnJvbSAnLi4vLi4vY29tbW9uL3V0aWxzJztcblxuY2xhc3MgR3JpZFRvRm9ybUNyZWF0ZSBleHRlbmRzIEV2ZW50cyB7XG4gIC8qKlxuICAgKiBBZGFwdGVyIGFsbG93cyB0byB1c2UgR3JpZCBtb2RlbCBhcyBhIG1vZGVsIGZvciBuZXcgZm9ybSByZWNvcmQgY3JlYXRpb25cbiAgICpcbiAgICogQHBhcmFtIHtBYnN0cmFjdEdyaWRNb2RlbH0gICBtb2RlbCAgICAgICAgICAgR3JpZCBtb2RlbFxuICAgKiBAcGFyYW0ge09iamVjdH0gICAgICAgICAgICAgIFtpbml0aWFsRGF0YV0gICBEZWZhdWx0IGZpZWxkIHZhbHVlc1xuICAgKiBAY29uc3RydWN0b3JcbiAgICovXG4gIGNvbnN0cnVjdG9yKG1vZGVsLCBpbml0aWFsRGF0YSkge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLl9hZGFwdGVyID0ge1xuICAgICAgbW9kZWw6IG1vZGVsLFxuICAgICAgaW5pdGlhbERhdGE6IGluaXRpYWxEYXRhIHx8IHt9XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgZGF0YVxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5fSAgICAgZmllbGRzICAgICBSZXF1aXJlZCBmaWVsZHNcbiAgICovXG4gIGFzeW5jIGdldERhdGEoZmllbGRzKSB7XG4gICAgaWYgKGZpZWxkcyAmJiBmaWVsZHMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gcGljayh0aGlzLl9hZGFwdGVyLmluaXRpYWxEYXRhLCBmaWVsZHMpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fYWRhcHRlci5pbml0aWFsRGF0YTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgbmV3IHJlY29yZFxuICAgKlxuICAgKiBAcGFyYW0gICB7T2JqZWN0fSAgICAgIGRhdGEgICAgICBSZWNvcmRcbiAgICovXG4gIGFzeW5jIHN1Ym1pdChkYXRhKSB7XG4gICAgY29uc3QgbW9kZWwgPSB0aGlzLl9hZGFwdGVyLm1vZGVsO1xuICAgIHJldHVybiBhd2FpdCBtb2RlbC5jcmVhdGUoZGF0YSk7XG4gIH1cblxuICAvKipcbiAgICogVmFsaWRhdGlvbiBjaGVja2luZ1xuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gICAgICByZWNvcmQgIFJlY29yZCBvYmplY3RcbiAgICovXG4gIGFzeW5jIGlzVmFsaWRSZWNvcmQocmVjb3JkKSB7XG4gICAgY29uc3QgbW9kZWwgPSB0aGlzLl9hZGFwdGVyLm1vZGVsO1xuICAgIHJldHVybiBhd2FpdCBtb2RlbC5pc1ZhbGlkUmVjb3JkKHJlY29yZCwgbnVsbCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGFsbCBkZXBlbmRlbnQgZmllbGRzLCB0aGF0IGFyZSByZXF1aXJlZCBmb3IgdmFsaWRhdGlvblxuICAgKlxuICAgKiBAcGFyYW0gICB7QXJyYXl9ICBmaWVsZHNcbiAgICogQHJldHVybnMge0FycmF5fSAgRGVwZW5kZW5jaWVzXG4gICAqL1xuICBnZXRWYWxpZGF0aW9uRGVwZW5kZW5jeShmaWVsZHMpIHtcbiAgICByZXR1cm4gdGhpcy5fYWRhcHRlci5tb2RlbC5nZXRWYWxpZGF0aW9uRGVwZW5kZW5jeShmaWVsZHMpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEdyaWRUb0Zvcm1DcmVhdGU7XG4iLCIvKlxuICogQ29weXJpZ2h0ICjRgSkgMjAxNS1wcmVzZW50LCBTb2Z0SW5kZXggTExDLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG5pbXBvcnQgVmFsaWRhdGlvbkVycm9ycyBmcm9tICcuLi8uLi9jb21tb24vdmFsaWRhdGlvbi9WYWxpZGF0aW9uRXJyb3JzJztcbmltcG9ydCBFdmVudHMgZnJvbSAnLi4vLi4vY29tbW9uL0V2ZW50cyc7XG5pbXBvcnQge2lzRXF1YWwsIGNsb25lfSBmcm9tICcuLi8uLi9jb21tb24vdXRpbHMnO1xuXG5jbGFzcyBHcmlkVG9Gb3JtVXBkYXRlIGV4dGVuZHMgRXZlbnRzIHtcbiAgLyoqXG4gICAqIEFkYXB0ZXIgdGhhdCBhbGxvd3MgdXMgdG8gdXNlIEdyaWQgbW9kZWwgcmVjb3JkIGFzIGEgZm9ybSBtb2RlbFxuICAgKlxuICAgKiBAcGFyYW0ge0Fic3RyYWN0R3JpZE1vZGVsfSBtb2RlbCAgIEdyaWQgbW9kZWxcbiAgICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfSAgICAgaWQgICAgICBSZWNvcmQgSURcbiAgICogQGNvbnN0cnVjdG9yXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihtb2RlbCwgaWQpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5fYWRhcHRlciA9IHtcbiAgICAgIG1vZGVsOiBtb2RlbCxcbiAgICAgIGlkOiBpZFxuICAgIH07XG5cbiAgICB0aGlzLl9vblVwZGF0ZUhhbmRsZXJzID0gW107XG4gIH1cblxuICAvKipcbiAgICogU3Vic2NyaWJlIHRvIGlubmVyIG1vZGVsIGV2ZW50XG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSAgICAgIGV2ZW50ICAgRXZlbnQgSURcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gICAgY2IgICAgICBDYWxsQmFjayBmdW5jdGlvblxuICAgKi9cbiAgb24oZXZlbnQsIGNiKSB7XG4gICAgY29uc3QgY3R4ID0gdGhpcztcblxuICAgIGlmIChldmVudCAhPT0gJ3VwZGF0ZScpIHtcbiAgICAgIEV2ZW50cy5wcm90b3R5cGUub24uY2FsbCh0aGlzLCBldmVudCwgY2IpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIG9uQ2hhbmdlIGZpbHRlcnMgb3V0IHRhYmxlIGV2ZW50cywgdGhhdCBkbyBub3QgcmVnYXJkIHRvIG91ciByZWNvcmRcbiAgICBmdW5jdGlvbiBvbkNoYW5nZShjaGFuZ2VzKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGlzRXF1YWwoY2hhbmdlc1tpXVswXSwgY3R4Ll9hZGFwdGVyLmlkKSkge1xuICAgICAgICAgIGNiKGNoYW5nZXNbaV1bMV0pO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX29uVXBkYXRlSGFuZGxlcnMucHVzaCh7XG4gICAgICBvcmlnaW5hbENhbGxiYWNrOiBjYixcbiAgICAgIHdyYXBwZWRDYWxsYmFjazogb25DaGFuZ2VcbiAgICB9KTtcblxuICAgIHRoaXMuX2FkYXB0ZXIubW9kZWwub24oJ3VwZGF0ZScsIG9uQ2hhbmdlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVbnN1YnNjcmliZSBmcm9tIGlubmVyIG1vZGVsIGV2ZW50XG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSAgICAgIGV2ZW50ICAgRXZlbnQgSURcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gICAgY2IgICAgICBDYWxsQmFjayBmdW5jdGlvblxuICAgKi9cbiAgb2ZmKGV2ZW50LCBjYikge1xuICAgIGNvbnN0IGN0eCA9IHRoaXM7XG4gICAgY29uc3QgbmV3T25VcGRhdGVIYW5kbGVycyA9IFtdO1xuXG4gICAgaWYgKGV2ZW50ICE9PSAndXBkYXRlJykge1xuICAgICAgRXZlbnRzLnByb3RvdHlwZS5vZmYuY2FsbCh0aGlzLCBldmVudCwgY2IpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX29uVXBkYXRlSGFuZGxlcnMuZm9yRWFjaChoYW5kbGVyID0+IHtcbiAgICAgIGlmIChoYW5kbGVyLm9yaWdpbmFsQ2FsbGJhY2sgPT09IGNiKSB7XG4gICAgICAgIGN0eC5fYWRhcHRlci5tb2RlbC5vZmYoJ3VwZGF0ZScsIGhhbmRsZXIud3JhcHBlZENhbGxiYWNrKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ld09uVXBkYXRlSGFuZGxlcnMucHVzaChoYW5kbGVyKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuX29uVXBkYXRlSGFuZGxlcnMgPSBuZXdPblVwZGF0ZUhhbmRsZXJzO1xuICB9XG5cbiAgbGlzdGVuZXJDb3VudChldmVudCkge1xuICAgIHJldHVybiB0aGlzLl9hZGFwdGVyLm1vZGVsLmxpc3RlbmVyQ291bnQoZXZlbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBkYXRhXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXl9ICAgICBmaWVsZHMgICAgIFJlcXVpcmVkIGZpZWxkc1xuICAgKi9cbiAgYXN5bmMgZ2V0RGF0YShmaWVsZHMpIHtcbiAgICBjb25zdCBtb2RlbCA9IHRoaXMuX2FkYXB0ZXIubW9kZWw7XG4gICAgcmV0dXJuIGF3YWl0IG1vZGVsLmdldFJlY29yZCh0aGlzLl9hZGFwdGVyLmlkLCBmaWVsZHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFwcGx5IGNoYW5nZXNcbiAgICpcbiAgICogQHBhcmFtICAge09iamVjdH0gICAgICBjaGFuZ2VzICAgICBGb3JtIGRhdGFcbiAgICovXG4gIGFzeW5jIHN1Ym1pdChjaGFuZ2VzKSB7XG4gICAgY29uc3QgcmVjb3JkID0gY2xvbmUoY2hhbmdlcyk7XG4gICAgY29uc3QgbW9kZWwgPSB0aGlzLl9hZGFwdGVyLm1vZGVsO1xuXG4gICAgbGV0IHJlc3VsdCA9IGF3YWl0IG1vZGVsLnVwZGF0ZShbW3RoaXMuX2FkYXB0ZXIuaWQsIHJlY29yZF1dKTtcbiAgICByZXN1bHQgPSByZXN1bHRbMF1bMV07XG4gICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIEVycm9yIHx8IHJlc3VsdCBpbnN0YW5jZW9mIFZhbGlkYXRpb25FcnJvcnMpIHtcbiAgICAgIHRocm93IHJlc3VsdDtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWNvcmQgdmFsaWRpdHkgY2hlY2tcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9ICAgICAgcmVjb3JkICBSZWNvcmQgb2JqZWN0XG4gICAqL1xuICBhc3luYyBpc1ZhbGlkUmVjb3JkKHJlY29yZCkge1xuICAgIGNvbnN0IG1vZGVsID0gdGhpcy5fYWRhcHRlci5tb2RlbDtcbiAgICByZXR1cm4gYXdhaXQgbW9kZWwuaXNWYWxpZFJlY29yZChyZWNvcmQsIHRoaXMuX2FkYXB0ZXIuaWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbGwgZGVwZW5kZW50IGZpZWxkcywgdGhhdCBhcmUgcmVxdWlyZWQgZm9yIHZhbGlkYXRpb25cbiAgICpcbiAgICogQHBhcmFtICAge0FycmF5fSAgZmllbGRzICBGaWVsZHMgbGlzdFxuICAgKiBAcmV0dXJucyB7QXJyYXl9ICBEZXBlbmRlbmNpZXNcbiAgICovXG4gIGdldFZhbGlkYXRpb25EZXBlbmRlbmN5KGZpZWxkcykge1xuICAgIHJldHVybiB0aGlzLl9hZGFwdGVyLm1vZGVsLmdldFZhbGlkYXRpb25EZXBlbmRlbmN5KGZpZWxkcyk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgR3JpZFRvRm9ybVVwZGF0ZTtcbiIsIi8qXG4gKiBDb3B5cmlnaHQgKNGBKSAyMDE1LXByZXNlbnQsIFNvZnRJbmRleCBMTEMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgRm9ybVNlcnZpY2UgZnJvbSAnLi9Gb3JtU2VydmljZSc7XG5cbmZ1bmN0aW9uIGNvbm5lY3RGb3JtKGZpZWxkcyA9IG51bGwpIHtcbiAgcmV0dXJuIENvbXBvbmVudCA9PiBjbGFzcyBDb21wb25lbnRXaXRoRm9ybVNlcnZpY2UgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgc3VwZXIoKTtcbiAgICAgIHRoaXMuZm9ybSA9IG5ldyBGb3JtU2VydmljZShmaWVsZHMpO1xuICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMuZm9ybS5nZXRBbGwoKTtcblxuICAgICAgdGhpcy5vbkZvcm1DaGFuZ2UgPSB0aGlzLm9uRm9ybUNoYW5nZS5iaW5kKHRoaXMpO1xuICAgIH1cblxuICAgIGFzeW5jIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLmZvcm0uZ2V0QWxsKCk7XG4gICAgICBpZiAoc3RhdGUuaXNMb2FkZWQpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSk7XG4gICAgICB9XG4gICAgICB0aGlzLmZvcm0uYWRkQ2hhbmdlTGlzdGVuZXIodGhpcy5vbkZvcm1DaGFuZ2UpO1xuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgdGhpcy5mb3JtLnJlbW92ZUNoYW5nZUxpc3RlbmVyKHRoaXMub25Gb3JtQ2hhbmdlKTtcbiAgICB9XG5cbiAgICBvbkZvcm1DaGFuZ2UobmV3Rm9ybVN0YXRlKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKG5ld0Zvcm1TdGF0ZSk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgcmV0dXJuIDxDb21wb25lbnQgey4uLnRoaXMucHJvcHN9IGZvcm1EYXRhPXt0aGlzLnN0YXRlfSBmb3JtU2VydmljZT17dGhpcy5mb3JtfS8+O1xuICAgIH1cbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdEZvcm07XG4iLCIvKlxuICogQ29weXJpZ2h0ICjRgSkgMjAxNS1wcmVzZW50LCBTb2Z0SW5kZXggTExDLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG5pbXBvcnQge3Rocm90dGxlLCBpc0VtcHR5LCBpc0VxdWFsLCBjbG9uZURlZXAsIHBhcnNlVmFsdWVGcm9tRXZlbnQsIGdldFJlY29yZENoYW5nZXMsIGZvckVhY2gsIGNsb25lfSBmcm9tICcuLi9jb21tb24vdXRpbHMnO1xuaW1wb3J0IHRvUHJvbWlzZSBmcm9tICcuLi9jb21tb24vdG9Qcm9taXNlJztcbmltcG9ydCBWYWxpZGF0b3IgZnJvbSAnLi4vY29tbW9uL3ZhbGlkYXRpb24vVmFsaWRhdG9yJztcbmltcG9ydCBWYWxpZGF0aW9uRXJyb3JzIGZyb20gJy4uL2NvbW1vbi92YWxpZGF0aW9uL1ZhbGlkYXRpb25FcnJvcnMnO1xuaW1wb3J0IGNhbGxiYWNraWZ5IGZyb20gJy4uL2NvbW1vbi9jYWxsYmFja2lmeSc7XG5cbi8qKlxuICogR3JpZCBmb3JtIG1peGluXG4gKiBAbWl4aW5cbiAqL1xuY29uc3QgRm9ybU1peGluID0ge1xuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl92YWxpZGF0ZUZvcm0gPSB0aHJvdHRsZSh0aGlzLl92YWxpZGF0ZUZvcm0pO1xuXG4gICAgaWYgKHRoaXMuX2hhbmRsZU1vZGVsQ2hhbmdlLm5hbWUuaW5kZXhPZignYm91bmQgJykgIT09IDApIHsgLy8gU3VwcG9ydCBSZWFjdC5jcmVhdGVDbGFzcyBhbmQgbWl4aW4tZGVjb3JhdG9yc1xuICAgICAgdGhpcy5faGFuZGxlTW9kZWxDaGFuZ2UgPSB0aGlzLl9oYW5kbGVNb2RlbENoYW5nZS5iaW5kKHRoaXMpO1xuICAgICAgdGhpcy5fZ2V0RGF0YSA9IHRoaXMuX2dldERhdGEuYmluZCh0aGlzKTtcbiAgICAgIHRoaXMuX2dldENoYW5nZXMgPSB0aGlzLl9nZXRDaGFuZ2VzLmJpbmQodGhpcyk7XG4gICAgICB0aGlzLnZhbGlkYXRlRm9ybSA9IHRoaXMudmFsaWRhdGVGb3JtLmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIF9mb3JtTWl4aW46IG51bGxcbiAgICB9O1xuICB9LFxuXG4gIGNvbXBvbmVudFdpbGxNb3VudDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2lzVW5tb3VudGVkID0gZmFsc2U7XG4gIH0sXG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQ6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9pc1VubW91bnRlZCA9IHRydWU7XG4gICAgaWYgKCF0aGlzLl9pc05vdEluaXRpYWxpemVkKCkpIHtcbiAgICAgIHRoaXMuc3RhdGUuX2Zvcm1NaXhpbi5tb2RlbC5vZmYoJ3VwZGF0ZScsIHRoaXMuX2hhbmRsZU1vZGVsQ2hhbmdlKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgZm9ybVxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gICAgICAgICAgICBzZXR0aW5ncyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29uZmlndXJhdGlvblxuICAgKiBAcGFyYW0ge0FycmF5fSAgICAgICAgICAgICBzZXR0aW5ncy5maWVsZHMgICAgICAgICAgICAgICAgICAgICAgICAgRmllbGRzIGxpc3QsIHRoYXQgYXJlIHJlcXVpcmVkIHRvIGRpc3BsYXlcbiAgICogQHBhcmFtIHtGb3JtTW9kZWx9ICAgICAgICAgc2V0dGluZ3MubW9kZWwgICAgICAgICAgICAgICAgICAgICAgICAgIE1vZGVsIG9mIGZvcm1cbiAgICogQHBhcmFtIHtPYmplY3R9ICAgICAgICAgICAgW3NldHRpbmdzLmRhdGFdICAgICAgICAgICAgICAgICAgICAgICAgIFByZXNldCBkYXRhXG4gICAqIEBwYXJhbSB7T2JqZWN0fSAgICAgICAgICAgIFtzZXR0aW5ncy5jaGFuZ2VzICAgICAgICAgICAgICAgICAgICAgICBQcmVzZXQgY2hhbmdlc1xuICAgKiBAcGFyYW0ge2Jvb2x9ICAgICAgICAgICAgICBbc2V0dGluZ3Muc3VibWl0QWxsPWZhbHNlXSAgICAgICAgICAgICAgU2VuZCBhbGwgZm9ybSBmb3IgdmFsaWRpdHkgY2hlY2tcbiAgICogQHBhcmFtIHtib29sfSAgICAgICAgICAgICAgW3NldHRpbmdzLnBhcnRpYWxFcnJvckNoZWNraW5nPWZhbHNlXSAgIEFjdGl2YXRlIHBhcnRpYWwgZ3JhZHVhbCBmb3JtIHZhbGlkYXRpb25cbiAgICogQHBhcmFtIHtib29sfSAgICAgICAgICAgICAgW3NldHRpbmdzLnNob3dEZXBlbmRlbnRGaWVsZHM9ZmFsc2VdICAgIE1hcmsgdGhlIGZpZWxkcyB3aGljaCBhcmUgaW52b2x2ZWQgaW4gdGhlIGdyb3VwIHZhbGlkYXRpb25cbiAgICogQHBhcmFtIHtib29sfSAgICAgICAgICAgICAgW3NldHRpbmdzLmF1dG9TdWJtaXRdICAgICAgICAgICAgICAgICAgIEF1dG9tYXRpYyBzdWJtaXQgYmVmb3JlIHVwZGF0ZUZpZWxkXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259ICAgICAgICAgIFtzZXR0aW5ncy5hdXRvU3VibWl0SGFuZGxlcl0gICAgICAgICAgICBBdXRvbWF0aWMgc3VibWl0IGhhbmRsZXJcbiAgICogQHBhcmFtIHtWYWxpZGF0b3J9ICAgICAgICAgW3NldHRpbmdzLndhcm5pbmdzVmFsaWRhdG9yXSAgICAgICAgICAgIFdhcm5pbmdzcyB2YWxpZGF0b3IgZm9yIGZpZWxkc1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSAgICAgICAgICBbY2JdICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2FsbEJhY2sgZnVuY3Rpb25cbiAgICovXG4gIGluaXRGb3JtOiBjYWxsYmFja2lmeShhc3luYyBmdW5jdGlvbiAoc2V0dGluZ3MpIHtcbiAgICB0aGlzLl9pbml0U3RhdGUoc2V0dGluZ3MpO1xuXG4gICAgaWYgKCF0aGlzLnN0YXRlLl9mb3JtTWl4aW4uZGF0YSkge1xuICAgICAgbGV0IGRhdGE7XG4gICAgICBsZXQgZXJyO1xuICAgICAgdHJ5IHtcbiAgICAgICAgZGF0YSA9IGF3YWl0IHNldHRpbmdzLm1vZGVsLmdldERhdGEoc2V0dGluZ3MuZmllbGRzKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgZXJyID0gZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuX2lzVW5tb3VudGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKGVycikge1xuICAgICAgICB0aGlzLnN0YXRlLl9mb3JtTWl4aW4uZ2xvYmFsRXJyb3IgPSBlcnI7XG4gICAgICAgIGF3YWl0IHRvUHJvbWlzZSg6OnRoaXMuc2V0U3RhdGUsIHRydWUpKHRoaXMuc3RhdGUpO1xuICAgICAgICB0aHJvdyBlcnI7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc3RhdGUuX2Zvcm1NaXhpbi5kYXRhID0gZGF0YTtcbiAgICB9XG5cbiAgICB0aGlzLnN0YXRlLl9mb3JtTWl4aW4ubW9kZWwub24oJ3VwZGF0ZScsIHRoaXMuX2hhbmRsZU1vZGVsQ2hhbmdlKTtcbiAgICBhd2FpdCB0b1Byb21pc2UoOjp0aGlzLnNldFN0YXRlLCB0cnVlKSh0aGlzLnN0YXRlKTtcbiAgICBpZiAoIXNldHRpbmdzLnBhcnRpYWxFcnJvckNoZWNraW5nKSB7XG4gICAgICBhd2FpdCB0aGlzLnZhbGlkYXRlRm9ybSgpO1xuICAgIH1cbiAgfSwgdHJ1ZSksXG5cbiAgLyoqXG4gICAqIENoZWNrIGlzIGRhdGEgbG9hZGVkXG4gICAqXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cbiAgaXNMb2FkZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZSAmJiB0aGlzLnN0YXRlLl9mb3JtTWl4aW4gJiZcbiAgICAgIEJvb2xlYW4odGhpcy5zdGF0ZS5fZm9ybU1peGluLmRhdGEgfHwgdGhpcy5zdGF0ZS5fZm9ybU1peGluLmdsb2JhbEVycm9yKTtcbiAgfSxcblxuICAvKipcbiAgICogR2V0IGZvcm0gY2hhbmdlc1xuICAgKlxuICAgKiBAcmV0dXJuIHt7fX1cbiAgICovXG4gIGdldENoYW5nZXM6IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBjaGFuZ2VzID0ge307XG4gICAgZm9yIChjb25zdCBmaWVsZCBpbiB0aGlzLnN0YXRlLl9mb3JtTWl4aW4uY2hhbmdlcykge1xuICAgICAgaWYgKCF0aGlzLl9pc0RlcGVuZGVudEZpZWxkKGZpZWxkKSkge1xuICAgICAgICBjaGFuZ2VzW2ZpZWxkXSA9IHRoaXMuc3RhdGUuX2Zvcm1NaXhpbi5jaGFuZ2VzW2ZpZWxkXTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNoYW5nZXM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGZvcm0gZmllbGQgKG9yIGVudGlyZSBmb3JtKSBpcyBjaGFuZ2VkXG4gICAqXG4gICAqIEBwYXJhbSAge3N0cmluZ30gICBmaWVsZCAgRmllbGQgbmFtZVxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgaGFzQ2hhbmdlczogZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgaWYgKHRoaXMuX2lzTm90SW5pdGlhbGl6ZWQoKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXRlID0gdGhpcy5zdGF0ZS5fZm9ybU1peGluO1xuXG4gICAgaWYgKGZpZWxkID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiAhaXNFbXB0eShzdGF0ZS5jaGFuZ2VzKTtcbiAgICB9XG5cbiAgICBpZiAoIXN0YXRlLnNob3dEZXBlbmRlbnRGaWVsZHMgJiYgdGhpcy5faXNEZXBlbmRlbnRGaWVsZChmaWVsZCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3RhdGUuY2hhbmdlcy5oYXNPd25Qcm9wZXJ0eShmaWVsZCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGZvcm0gZmllbGQgaGFzIHZhbGlkaXR5IGVycm9yc1xuICAgKlxuICAgKiBAcGFyYW0gIHtzdHJpbmd8c3RyaW5nW119ICAgZmllbGQgIEZpZWxkIG5hbWUgb3IgYXJyYXkgb2YgbmFtZXNcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGhhc0Vycm9yOiBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICBpZiAodGhpcy5faXNOb3RJbml0aWFsaXplZCgpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhdGUgPSB0aGlzLnN0YXRlLl9mb3JtTWl4aW47XG5cbiAgICAvLyBDaGVjayBncm91cCBvZiBmaWVsZHNcbiAgICBpZiAoQXJyYXkuaXNBcnJheShmaWVsZCkpIHtcbiAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZmllbGQpIHtcbiAgICAgICAgaWYgKHRoaXMuaGFzRXJyb3IoZW50cnkpKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBJZiBwYXJ0aWFsIGNoZWNrIGlzIG9uIGFuZCBmaWVsZCBpcyBjaGFuZ2VkLFxuICAgIC8vIGRvIG5vdCBkaXNwbGF5IGFuIGVycm9yXG4gICAgaWYgKHN0YXRlLnBhcnRpYWxFcnJvckNoZWNraW5nKSB7XG4gICAgICBpZiAoIXN0YXRlLmNoYW5nZXMuaGFzT3duUHJvcGVydHkoZmllbGQpIHx8IGlzRXF1YWwoc3RhdGUuY2hhbmdlc1tmaWVsZF0sIHN0YXRlLmRhdGFbZmllbGRdKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuX2Zvcm1NaXhpbi5lcnJvcnMuaGFzRXJyb3IoZmllbGQpIHx8IHRoaXMuc3RhdGUuX2Zvcm1NaXhpbi53YXJuaW5ncy5oYXNFcnJvcihmaWVsZCk7XG4gIH0sXG5cbiAgY2xlYXJFcnJvcjogZnVuY3Rpb24gKGZpZWxkLCBjYikge1xuICAgIGlmICh0aGlzLl9pc05vdEluaXRpYWxpemVkKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdGF0ZS5fZm9ybU1peGluLnZhbGlkYXRpbmcpIHtcbiAgICAgIHRoaXMuc3RhdGUuX2Zvcm1NaXhpbi5wZW5kaW5nQ2xlYXJFcnJvcnMucHVzaChmaWVsZCk7XG4gICAgfVxuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZmllbGQpKSB7XG4gICAgICBmaWVsZC5mb3JFYWNoKGZ1bmN0aW9uIChvbmVGaWVsZCkge1xuICAgICAgICB0aGlzLnN0YXRlLl9mb3JtTWl4aW4uZXJyb3JzLmNsZWFyRmllbGQob25lRmllbGQpO1xuICAgICAgICB0aGlzLnN0YXRlLl9mb3JtTWl4aW4ud2FybmluZ3MuY2xlYXJGaWVsZChvbmVGaWVsZCk7XG4gICAgICB9LCB0aGlzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdGF0ZS5fZm9ybU1peGluLmVycm9ycy5jbGVhckZpZWxkKGZpZWxkKTtcbiAgICAgIHRoaXMuc3RhdGUuX2Zvcm1NaXhpbi53YXJuaW5ncy5jbGVhckZpZWxkKGZpZWxkKTtcbiAgICB9XG5cbiAgICB0aGlzLnNldFN0YXRlKHRoaXMuc3RhdGUsIHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJyA/IGNiIDogbnVsbCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCBmb3JtIGRhdGEgd2l0aG91dCBjaGFuZ2VzXG4gICAqXG4gICAqIEByZXR1cm4ge09iamVjdHxudWxsfVxuICAgKi9cbiAgZ2V0T3JpZ2luYWxEYXRhOiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuX2lzTm90SW5pdGlhbGl6ZWQoKSkge1xuICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5fZm9ybU1peGluLmRhdGEgfHwgbnVsbDtcbiAgfSxcblxuICAvKipcbiAgICogR2V0IGZvcm0gZGF0YVxuICAgKlxuICAgKiBAcmV0dXJuIHtPYmplY3R8bnVsbH1cbiAgICovXG4gIGdldERhdGE6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5faXNOb3RJbml0aWFsaXplZCgpKSB7XG4gICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIHJldHVybiBjbG9uZURlZXAodGhpcy5fZ2V0RGF0YSgpKTtcbiAgfSxcblxuICAvKipcbiAgICogR2V0IGZvcm0gZXJyb3JzXG4gICAqXG4gICAqIEByZXR1cm5zIHtWYWxpZGF0aW9uRXJyb3JzfSBGb3JtIGVycm9yc1xuICAgKi9cbiAgZ2V0VmFsaWRhdGlvbkVycm9yczogZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl9pc05vdEluaXRpYWxpemVkKCkpIHtcbiAgICAgIHJldHVybiBuZXcgVmFsaWRhdGlvbkVycm9ycygpO1xuICAgIH1cblxuICAgIGxldCBmaWVsZDtcbiAgICBsZXQgZXJyb3JzID0gVmFsaWRhdGlvbkVycm9ycy5tZXJnZSh0aGlzLnN0YXRlLl9mb3JtTWl4aW4uZXJyb3JzLCB0aGlzLnN0YXRlLl9mb3JtTWl4aW4ud2FybmluZ3MpO1xuXG4gICAgLy8gSWYgZ3JhZHVhbCB2YWxpZGF0aW9uIGlzIG9uLCB3ZSBuZWVkXG4gICAgLy8gdG8gcmVtb3ZlIHVuY2hhbmdlZCByZWNvcmRzIGZyb20gZXJyb3JzIG9iamVjdFxuICAgIGlmICh0aGlzLnN0YXRlLl9mb3JtTWl4aW4ucGFydGlhbEVycm9yQ2hlY2tpbmcpIHtcbiAgICAgIGVycm9ycyA9IHRoaXMuc3RhdGUuX2Zvcm1NaXhpbi5lcnJvcnMuY2xvbmUoKTtcblxuICAgICAgLy8gTG9vayB0aHJvdWdoIGFsbCBmb3JtIGZpZWxkc1xuICAgICAgZm9yIChmaWVsZCBpbiB0aGlzLnN0YXRlLl9mb3JtTWl4aW4uZGF0YSkge1xuICAgICAgICAvLyBJZiBmaWVsZCBpcyB1bmNoYW5nZWQsIHJlbW92ZSBlcnJvcnMsIHRoYXQgcmVnYXJkIHRvIHRoaXMgZmllbGRcbiAgICAgICAgaWYgKFxuICAgICAgICAgICF0aGlzLnN0YXRlLl9mb3JtTWl4aW4uY2hhbmdlcy5oYXNPd25Qcm9wZXJ0eShmaWVsZCkgfHxcbiAgICAgICAgICBpc0VxdWFsKHRoaXMuc3RhdGUuX2Zvcm1NaXhpbi5jaGFuZ2VzW2ZpZWxkXSwgdGhpcy5zdGF0ZS5fZm9ybU1peGluLmRhdGFbZmllbGRdKVxuICAgICAgICApIHtcbiAgICAgICAgICBlcnJvcnMuY2xlYXJGaWVsZChmaWVsZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZXJyb3JzO1xuICB9LFxuXG4gIGdldEZpZWxkRXJyb3JzOiBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICBpZiAodGhpcy5faXNOb3RJbml0aWFsaXplZCgpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gSWYgcGFydGlhbCBjaGVjayBpcyBvbiBhbmQgZmllbGQgaXMgY2hhbmdlZCxcbiAgICAvLyBkbyBub3QgZGlzcGxheSBhbiBlcnJvclxuICAgIGlmICh0aGlzLnN0YXRlLl9mb3JtTWl4aW4ucGFydGlhbEVycm9yQ2hlY2tpbmcgJiYgIXRoaXMuc3RhdGUuX2Zvcm1NaXhpbi5jaGFuZ2VzLmhhc093blByb3BlcnR5KGZpZWxkKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgZXJyb3JzID0gdGhpcy5zdGF0ZS5fZm9ybU1peGluLmVycm9ycy5nZXRGaWVsZEVycm9yTWVzc2FnZXMoZmllbGQpIHx8IFtdO1xuICAgIGNvbnN0IHdhcm5pbmdzID0gdGhpcy5zdGF0ZS5fZm9ybU1peGluLndhcm5pbmdzLmdldEZpZWxkRXJyb3JNZXNzYWdlcyhmaWVsZCkgfHwgW107XG5cbiAgICByZXR1cm4gZXJyb3JzLmNvbmNhdCh3YXJuaW5ncyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCBnbG9iYWwgZXJyb3IgZGF0YSwgaWYgaXQncyBwcmVzZW50XG4gICAqXG4gICAqIEByZXR1cm5zIHtFcnJvcnxudWxsfVxuICAgKi9cbiAgZ2V0R2xvYmFsRXJyb3I6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5faXNOb3RJbml0aWFsaXplZCgpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuX2Zvcm1NaXhpbi5nbG9iYWxFcnJvcjtcbiAgfSxcblxuICAvKipcbiAgICogVXBkYXRlIGZvcm0gdmFsdWUuIElzIHVzZWQgYXMgdGhlIEVkaXRvcnMgb25DaGFuZ2UgaGFuZGxlci5cbiAgICogQ2F1c2VzIGNvbXBvbmVudCByZWRyYXcuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSAgICAgICAgICAgZmllbGQgICBQYXJhbWV0ZXJcbiAgICogQHBhcmFtIHsqfSAgICAgICAgICAgICAgICB2YWx1ZSAgIEV2ZW50IG9yIGRhdGFcbiAgICovXG4gIHVwZGF0ZUZpZWxkOiBmdW5jdGlvbiAoZmllbGQsIHZhbHVlKSB7XG4gICAgaWYgKHRoaXMuX2lzTm90SW5pdGlhbGl6ZWQoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnNldCh7XG4gICAgICBbZmllbGRdOiBwYXJzZVZhbHVlRnJvbUV2ZW50KHZhbHVlKVxuICAgIH0pO1xuICB9LFxuXG4gIHZhbGlkYXRlRmllbGQ6IGZ1bmN0aW9uIChmaWVsZCwgdmFsdWUsIGNiKSB7XG4gICAgdGhpcy5zZXQoe1xuICAgICAgW2ZpZWxkXTogcGFyc2VWYWx1ZUZyb21FdmVudCh2YWx1ZSlcbiAgICB9LCB0cnVlLCBjYik7XG4gIH0sXG5cbiAgdmFsaWRhdGVGb3JtOiBmdW5jdGlvbiAoY2IpIHtcbiAgICB0aGlzLl92YWxpZGF0ZUZvcm0oZnVuY3Rpb24gKGVycikge1xuICAgICAgaWYgKHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gY2IoZXJyKTtcbiAgICAgIH0gZWxzZSBpZiAoZXJyKSB7XG4gICAgICAgIGlmICghKGVyciBpbnN0YW5jZW9mIFZhbGlkYXRpb25FcnJvcnMpKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNldCBkYXRhIGluIHRoZSBmb3JtXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSAgICBkYXRhICAgICAgICAgICAgICBEYXRhXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gICAgICBbdmFsaWRhdGU9ZmFsc2VdICBWYWxpZGF0ZSBmb3JtXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259ICBbY2JdICAgICAgICAgICAgICBDYWxsQmFja1xuICAgKi9cbiAgc2V0OiBmdW5jdGlvbiAoZGF0YSwgdmFsaWRhdGUsIGNiKSB7XG4gICAgaWYgKCF0aGlzLmlzTG9hZGVkKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHZhbGlkYXRlID09PSAnZnVuY3Rpb24nICYmICFjYikge1xuICAgICAgY2IgPSB2YWxpZGF0ZTtcbiAgICAgIHZhbGlkYXRlID0gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhdGUgPSB0aGlzLnN0YXRlLl9mb3JtTWl4aW47XG4gICAgc3RhdGUuY2hhbmdlcyA9IGdldFJlY29yZENoYW5nZXMoc3RhdGUubW9kZWwsIHN0YXRlLmRhdGEsIHN0YXRlLmNoYW5nZXMsIGRhdGEpO1xuXG4gICAgaWYgKHRoaXMuc3RhdGUuX2Zvcm1NaXhpbi5hdXRvU3VibWl0KSB7XG4gICAgICB0aGlzLnN1Ym1pdCgoZXJyLCByZXN1bHQpID0+IHtcbiAgICAgICAgdGhpcy5zdGF0ZS5fZm9ybU1peGluLmF1dG9TdWJtaXRIYW5kbGVyKGVyciwgcmVzdWx0KTtcbiAgICAgICAgaWYgKHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGNiKGVyciwgcmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHZhbGlkYXRlKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHRoaXMuc3RhdGUsICgpID0+IHRoaXMudmFsaWRhdGVGb3JtKGNiKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5zZXRTdGF0ZSh0aGlzLnN0YXRlLCB0eXBlb2YgY2IgPT09ICdmdW5jdGlvbicgPyBjYiA6IG51bGwpO1xuICB9LFxuXG4gIHN1Ym1pdERhdGE6IGZ1bmN0aW9uIChkYXRhLCBjYikge1xuICAgIGlmICh0aGlzLl9pc05vdEluaXRpYWxpemVkKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnNldChkYXRhKTtcbiAgICB0aGlzLnN1Ym1pdChjYik7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNlbmQgZm9ybSBkYXRhIHRvIHRoZSBtb2RlbFxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSAgW2NiXSAgQ2FsbEJhY2sgZnVuY3Rpb25cbiAgICovXG4gIHN1Ym1pdDogY2FsbGJhY2tpZnkoYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl9pc05vdEluaXRpYWxpemVkKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuc3RhdGUuX2Zvcm1NaXhpbi5hdXRvU3VibWl0ICYmIHRoaXMuaXNTdWJtaXR0aW5nKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnN0YXRlLl9mb3JtTWl4aW4uc3VibWl0dGluZyA9IHRydWU7XG5cbiAgICBjb25zdCBjaGFuZ2VzID0gdGhpcy5fZ2V0Q2hhbmdlcygpO1xuXG4gICAgdGhpcy5zdGF0ZS5fZm9ybU1peGluLmdsb2JhbEVycm9yID0gbnVsbDtcbiAgICB0aGlzLnN0YXRlLl9mb3JtTWl4aW4ucGFydGlhbEVycm9yQ2hlY2tpbmcgPSBmYWxzZTtcblxuICAgIHRoaXMuc2V0U3RhdGUodGhpcy5zdGF0ZSk7XG5cbiAgICAvLyBTZW5kIGNoYW5nZXMgdG8gbW9kZWxcbiAgICBsZXQgZGF0YTtcbiAgICBsZXQgZXJyO1xuICAgIHRyeSB7XG4gICAgICBkYXRhID0gYXdhaXQgdGhpcy5zdGF0ZS5fZm9ybU1peGluLm1vZGVsLnN1Ym1pdChjaGFuZ2VzKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBlcnIgPSBlO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9pc1VubW91bnRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuc3RhdGUuX2Zvcm1NaXhpbi5zdWJtaXR0aW5nID0gZmFsc2U7XG5cbiAgICBjb25zdCBuZXdDaGFuZ2VzID0gdGhpcy5fZ2V0Q2hhbmdlcygpO1xuICAgIGNvbnN0IGFjdHVhbENoYW5nZXMgPSBpc0VxdWFsKGNoYW5nZXMsIG5ld0NoYW5nZXMpO1xuICAgIGNvbnN0IHZhbGlkYXRpb25FcnJvciA9IGVyciBpbnN0YW5jZW9mIFZhbGlkYXRpb25FcnJvcnM7XG5cbiAgICAvLyBSZXBsYWNpbmcgZW1wdHkgZXJyb3IgdG8gbnVsbFxuICAgIGlmICh2YWxpZGF0aW9uRXJyb3IgJiYgZXJyLmlzRW1wdHkoKSkge1xuICAgICAgZXJyID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoZXJyKSB7XG4gICAgICBpZiAodmFsaWRhdGlvbkVycm9yKSB7XG4gICAgICAgIGlmIChhY3R1YWxDaGFuZ2VzKSB7XG4gICAgICAgICAgdGhpcy5zdGF0ZS5fZm9ybU1peGluLmVycm9ycyA9IGVycjtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zdGF0ZS5fZm9ybU1peGluLmdsb2JhbEVycm9yID0gZXJyO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoYWN0dWFsQ2hhbmdlcykge1xuICAgICAgdGhpcy5zdGF0ZS5fZm9ybU1peGluLmVycm9ycyA9IG5ldyBWYWxpZGF0aW9uRXJyb3JzKCk7XG4gICAgICB0aGlzLnN0YXRlLl9mb3JtTWl4aW4uY2hhbmdlcyA9IHt9O1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3JFYWNoKGNoYW5nZXMsIGZ1bmN0aW9uICh2YWx1ZSwgZmllbGQpIHtcbiAgICAgICAgaWYgKGlzRXF1YWwodmFsdWUsIG5ld0NoYW5nZXNbZmllbGRdKSkge1xuICAgICAgICAgIGRlbGV0ZSB0aGlzLnN0YXRlLl9mb3JtTWl4aW4uY2hhbmdlc1tmaWVsZF07XG4gICAgICAgIH1cbiAgICAgIH0sIHRoaXMpO1xuICAgIH1cblxuICAgIGF3YWl0IHRvUHJvbWlzZSg6OnRoaXMuc2V0U3RhdGUsIHRydWUpKHRoaXMuc3RhdGUpO1xuXG4gICAgaWYgKGVycikge1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgICByZXR1cm4gZGF0YTtcbiAgfSksXG5cbiAgY2xlYXJGaWVsZENoYW5nZXM6IGZ1bmN0aW9uIChmaWVsZCwgY2IpIHtcbiAgICBpZiAodGhpcy5faXNOb3RJbml0aWFsaXplZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5zdGF0ZS5fZm9ybU1peGluLmVycm9ycy5jbGVhckZpZWxkKGZpZWxkKTtcbiAgICB0aGlzLnN0YXRlLl9mb3JtTWl4aW4ud2FybmluZ3MuY2xlYXJGaWVsZChmaWVsZCk7XG4gICAgZGVsZXRlIHRoaXMuc3RhdGUuX2Zvcm1NaXhpbi5jaGFuZ2VzW2ZpZWxkXTtcbiAgICB0aGlzLnNldFN0YXRlKHRoaXMuc3RhdGUsIHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJyA/IGNiIDogbnVsbCk7XG4gIH0sXG5cbiAgY2xlYXJDaGFuZ2VzOiBmdW5jdGlvbiAoY2IpIHtcbiAgICBpZiAodGhpcy5faXNOb3RJbml0aWFsaXplZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5zdGF0ZS5fZm9ybU1peGluLmVycm9ycy5jbGVhcigpO1xuICAgIHRoaXMuc3RhdGUuX2Zvcm1NaXhpbi53YXJuaW5ncy5jbGVhcigpO1xuICAgIHRoaXMuc3RhdGUuX2Zvcm1NaXhpbi5jaGFuZ2VzID0ge307XG4gICAgdGhpcy5zdGF0ZS5fZm9ybU1peGluLmdsb2JhbEVycm9yID0gZmFsc2U7XG4gICAgdGhpcy5zdGF0ZS5fZm9ybU1peGluLnBhcnRpYWxFcnJvckNoZWNraW5nID0gdGhpcy5zdGF0ZS5fZm9ybU1peGluLnBhcnRpYWxFcnJvckNoZWNraW5nRGVmYXVsdDtcbiAgICB0aGlzLnNldFN0YXRlKHRoaXMuc3RhdGUsIHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJyA/IGNiIDogbnVsbCk7XG4gIH0sXG5cbiAgc2V0UGFydGlhbEVycm9yQ2hlY2tpbmc6IGZ1bmN0aW9uICh2YWx1ZSwgY2IpIHtcbiAgICB0aGlzLnN0YXRlLl9mb3JtTWl4aW4ucGFydGlhbEVycm9yQ2hlY2tpbmcgPSB2YWx1ZTtcbiAgICB0aGlzLnNldFN0YXRlKHRoaXMuc3RhdGUsIHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJyA/IGNiIDogbnVsbCk7XG4gIH0sXG5cbiAgaXNTdWJtaXR0aW5nOiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuX2lzTm90SW5pdGlhbGl6ZWQoKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnN0YXRlLl9mb3JtTWl4aW4uc3VibWl0dGluZztcbiAgfSxcblxuICAvKipcbiAgICogTW9kZWwgcmVjb3JkcyBjaGFuZ2VzIGhhbmRsZXJcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGNoYW5nZXMgIENoYW5nZXNcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9oYW5kbGVNb2RlbENoYW5nZTogZnVuY3Rpb24gKGNoYW5nZXMpIHtcbiAgICBPYmplY3QuYXNzaWduKHRoaXMuc3RhdGUuX2Zvcm1NaXhpbi5kYXRhLCBjbG9uZURlZXAoY2hhbmdlcykpO1xuICAgIGlmICghdGhpcy5faXNVbm1vdW50ZWQpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUodGhpcy5zdGF0ZSk7XG4gICAgfVxuICB9LFxuXG4gIF9pbml0U3RhdGU6IGZ1bmN0aW9uIChzZXR0aW5ncykge1xuICAgIGlmICghc2V0dGluZ3MubW9kZWwpIHtcbiAgICAgIHRocm93IEVycm9yKCdZb3UgbXVzdCBzcGVjaWZ5IHRoZSBtb2RlbCBmb3JtIGluIHRoaXMuaW5pdEZvcm0oKScpO1xuICAgIH1cblxuICAgIHRoaXMuc3RhdGUuX2Zvcm1NaXhpbiA9IHtcbiAgICAgIGRhdGE6IHNldHRpbmdzLmRhdGEsXG4gICAgICBjaGFuZ2VzOiBzZXR0aW5ncy5jaGFuZ2VzIHx8IHt9LFxuICAgICAgZXJyb3JzOiBuZXcgVmFsaWRhdGlvbkVycm9ycygpLFxuICAgICAgd2FybmluZ3M6IG5ldyBWYWxpZGF0aW9uRXJyb3JzKCksXG4gICAgICBnbG9iYWxFcnJvcjogbnVsbCxcbiAgICAgIHZhbGlkYXRpbmc6IGZhbHNlLFxuICAgICAgcGVuZGluZ0NsZWFyRXJyb3JzOiBbXSxcbiAgICAgIHN1Ym1pdHRpbmc6IGZhbHNlLFxuICAgICAgc2hvd0RlcGVuZGVudEZpZWxkczogc2V0dGluZ3Muc2hvd0RlcGVuZGVudEZpZWxkcyB8fCBmYWxzZSxcbiAgICAgIHdhcm5pbmdzVmFsaWRhdG9yOiBzZXR0aW5ncy53YXJuaW5nc1ZhbGlkYXRvciB8fCBuZXcgVmFsaWRhdG9yKCksXG5cbiAgICAgIHBhcnRpYWxFcnJvckNoZWNraW5nOiBzZXR0aW5ncy5wYXJ0aWFsRXJyb3JDaGVja2luZywgLy8gQ3VycmVudCBtb2RlXG4gICAgICBwYXJ0aWFsRXJyb3JDaGVja2luZ0RlZmF1bHQ6IHNldHRpbmdzLnBhcnRpYWxFcnJvckNoZWNraW5nLCAvLyBEZWZhdWx0IG1vZGVcblxuICAgICAgbW9kZWw6IHNldHRpbmdzLm1vZGVsLCAvLyBGb3JtTW9kZWxcbiAgICAgIGZpZWxkczogc2V0dGluZ3MuZmllbGRzLFxuICAgICAgc3VibWl0QWxsOiBzZXR0aW5ncy5zdWJtaXRBbGwsXG4gICAgICBhdXRvU3VibWl0OiBzZXR0aW5ncy5hdXRvU3VibWl0LFxuICAgICAgYXV0b1N1Ym1pdEhhbmRsZXI6IHNldHRpbmdzLmF1dG9TdWJtaXRIYW5kbGVyXG4gICAgfTtcbiAgfSxcblxuICBfaXNOb3RJbml0aWFsaXplZDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAhdGhpcy5zdGF0ZSB8fCAhdGhpcy5zdGF0ZS5fZm9ybU1peGluO1xuICB9LFxuXG4gIF92YWxpZGF0ZUZvcm06IGZ1bmN0aW9uIChjYiwgc3RvcCkge1xuICAgIGlmICh0aGlzLl9pc05vdEluaXRpYWxpemVkKCkpIHtcbiAgICAgIHJldHVybiBzdG9wKCk7XG4gICAgfVxuXG4gICAgbGV0IGNvbXBsZXRlZCA9IDA7XG4gICAgbGV0IGNvbXBsZXRlRXJyb3I7XG4gICAgY29uc3Qgb25Db21wbGV0ZSA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIGxldCBmaWVsZDtcblxuICAgICAgaWYgKHRoaXMuX2lzVW5tb3VudGVkKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIGNvbXBsZXRlRXJyb3IgPSBlcnI7XG4gICAgICB9XG5cbiAgICAgIGlmICgrK2NvbXBsZXRlZCA8IDIpIHsvLyBXYWl0IHR3byBjYWxsYmFja3NcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnN0YXRlLl9mb3JtTWl4aW4udmFsaWRhdGluZyA9IGZhbHNlO1xuXG4gICAgICB3aGlsZSAoZmllbGQgPSB0aGlzLnN0YXRlLl9mb3JtTWl4aW4ucGVuZGluZ0NsZWFyRXJyb3JzLnBvcCgpKSB7XG4gICAgICAgIHRoaXMuc3RhdGUuX2Zvcm1NaXhpbi53YXJuaW5ncy5jbGVhckZpZWxkKGZpZWxkKTtcbiAgICAgICAgdGhpcy5zdGF0ZS5fZm9ybU1peGluLmVycm9ycy5jbGVhckZpZWxkKGZpZWxkKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5zZXRTdGF0ZSh0aGlzLnN0YXRlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChjb21wbGV0ZUVycm9yKSB7XG4gICAgICAgICAgY2IoY29tcGxldGVFcnJvcik7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZXJyb3JzV2l0aFBhcnRpYWxDaGVja2luZyA9IHRoaXMuZ2V0VmFsaWRhdGlvbkVycm9ycygpO1xuICAgICAgICBjYihlcnJvcnNXaXRoUGFydGlhbENoZWNraW5nLmlzRW1wdHkoKSA/IG51bGwgOiBlcnJvcnNXaXRoUGFydGlhbENoZWNraW5nKTtcbiAgICAgIH0pO1xuICAgIH0uYmluZCh0aGlzKTtcblxuICAgIHRoaXMuc3RhdGUuX2Zvcm1NaXhpbi52YWxpZGF0aW5nID0gdHJ1ZTtcblxuICAgIHRoaXMuX3J1blZhbGlkYXRvcih0aGlzLnN0YXRlLl9mb3JtTWl4aW4ubW9kZWwsIHRoaXMuX2dldENoYW5nZXMsICdlcnJvcnMnLCBvbkNvbXBsZXRlKTtcbiAgICB0aGlzLl9ydW5WYWxpZGF0b3IodGhpcy5zdGF0ZS5fZm9ybU1peGluLndhcm5pbmdzVmFsaWRhdG9yLCB0aGlzLl9nZXREYXRhLCAnd2FybmluZ3MnLCBvbkNvbXBsZXRlKTtcbiAgfSxcblxuICBfcnVuVmFsaWRhdG9yOiBmdW5jdGlvbiAodmFsaWRhdG9yLCBnZXREYXRhLCBvdXRwdXQsIGNiKSB7XG4gICAgY29uc3QgZGF0YSA9IGdldERhdGEoKTtcbiAgICB2YWxpZGF0b3IuaXNWYWxpZFJlY29yZChkYXRhKVxuICAgICAgLnRoZW4odmFsaWRFcnJvcnMgPT4ge1xuICAgICAgICBpZiAoIXRoaXMuX2lzVW5tb3VudGVkICYmIGlzRXF1YWwoZGF0YSwgZ2V0RGF0YSgpKSkge1xuICAgICAgICAgIHRoaXMuc3RhdGUuX2Zvcm1NaXhpbltvdXRwdXRdID0gdmFsaWRFcnJvcnM7XG4gICAgICAgIH1cbiAgICAgICAgY2IoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgaWYgKCF0aGlzLl9pc1VubW91bnRlZCAmJiBpc0VxdWFsKGRhdGEsIGdldERhdGEoKSkpIHtcbiAgICAgICAgICB0aGlzLnN0YXRlLl9mb3JtTWl4aW5bb3V0cHV0XS5jbGVhcigpO1xuICAgICAgICB9XG4gICAgICAgIGNiKGVycik7XG4gICAgICB9KTtcbiAgfSxcblxuICBfZ2V0RGF0YTogZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5zdGF0ZS5fZm9ybU1peGluLmRhdGEpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5zdGF0ZS5fZm9ybU1peGluLmRhdGEsIHRoaXMuc3RhdGUuX2Zvcm1NaXhpbi5jaGFuZ2VzKTtcbiAgfSxcblxuICBfZ2V0Q2hhbmdlczogZnVuY3Rpb24gKCkge1xuICAgIC8vIFNlbmQgYWxsIGRhdGEgb3IganVzdCBjaGFuZ2VkIGZpZWxkcyBpbiBhZGRpY3Rpb24gb2YgZm9ybSBjb25maWd1cmF0aW9uXG4gICAgaWYgKHRoaXMuc3RhdGUuX2Zvcm1NaXhpbi5zdWJtaXRBbGwpIHtcbiAgICAgIHJldHVybiB0aGlzLl9nZXREYXRhKCk7XG4gICAgfVxuICAgIHJldHVybiBjbG9uZSh0aGlzLnN0YXRlLl9mb3JtTWl4aW4uY2hhbmdlcyk7XG4gIH0sXG5cbiAgX2lzRGVwZW5kZW50RmllbGQ6IGZ1bmN0aW9uIChmaWVsZCkge1xuICAgIGNvbnN0IHN0YXRlID0gdGhpcy5zdGF0ZS5fZm9ybU1peGluO1xuICAgIHJldHVybiBzdGF0ZS5jaGFuZ2VzLmhhc093blByb3BlcnR5KGZpZWxkKSAmJiBpc0VxdWFsKHN0YXRlLmNoYW5nZXNbZmllbGRdLCBzdGF0ZS5kYXRhW2ZpZWxkXSk7XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1NaXhpbjtcbiIsIi8qXG4gKiBDb3B5cmlnaHQgKNGBKSAyMDE1LXByZXNlbnQsIFNvZnRJbmRleCBMTEMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbi8qKlxuICogUmVhY3QgdGFibGUgY29tcG9uZW50XG4gKi9cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgY3JlYXRlUmVhY3RDbGFzcyBmcm9tICdjcmVhdGUtcmVhY3QtY2xhc3MnO1xuaW1wb3J0IHt0aHJvdHRsZSwgaXNFcXVhbH0gZnJvbSAnLi4vY29tbW9uL3V0aWxzJztcblxuaW1wb3J0IEdyaWRDb2x1bW5zTWl4aW4gZnJvbSAnLi9taXhpbnMvY29sdW1ucyc7XG5pbXBvcnQgZ3JpZE1peGluUGFnaW5hdGlvbiBmcm9tICcuL21peGlucy9wYWdpbmF0aW9uJztcbmltcG9ydCBncmlkTWl4aW5TdGF0dXNlcyBmcm9tICcuL21peGlucy9zdGF0dXNlcyc7XG5pbXBvcnQgZ3JpZE1peGluU29ydGluZyBmcm9tICcuL21peGlucy9zb3J0aW5nJztcbmltcG9ydCBncmlkTWl4aW5EYXRhIGZyb20gJy4vbWl4aW5zL2RhdGEnO1xuaW1wb3J0IGdyaWRNaXhpbkVkaXRvciBmcm9tICcuL21peGlucy9lZGl0b3InO1xuaW1wb3J0IGdyaWRNaXhpblVJIGZyb20gJy4vbWl4aW5zL3VpJztcbmltcG9ydCBncmlkTWl4aW5TZWxlY3QgZnJvbSAnLi9taXhpbnMvc2VsZWN0JztcbmltcG9ydCBUaHJvdHRsZUVycm9yIGZyb20gJy4uL2NvbW1vbi9UaHJvdHRsZUVycm9yJztcblxuY29uc3QgUkVTRVRfTU9ERUwgPSAxIDw8IDA7XG5jb25zdCBSRVNFVF9WSUVXX0NPTFVNTlMgPSAxIDw8IDE7XG5jb25zdCBSRVNFVF9TT1JUID0gMSA8PCAyO1xuY29uc3QgUkVTRVRfVklFV19DT1VOVCA9IDEgPDwgMztcbmNvbnN0IFJFU0VUX1NFTEVDVEVEX0NPTFVNTlMgPSAxIDw8IDQ7XG5jb25zdCBSRVNFVF9CTEFDS19MSVNUX01PREUgPSAxIDw8IDU7XG5cbmNvbnN0IHByb3BUeXBlcyA9ICgoKSA9PiB7XG4gIGNvbnN0IHNvcnRFbGVtZW50UHJvcCA9IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgY29sdW1uOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIGRpcmVjdGlvbjogUHJvcFR5cGVzLmFueVxuICB9KTtcbiAgY29uc3Qgc29ydFByb3AgPSBQcm9wVHlwZXMub25lT2ZUeXBlKFtcbiAgICBzb3J0RWxlbWVudFByb3AsXG4gICAgUHJvcFR5cGVzLmFycmF5T2Yoc29ydEVsZW1lbnRQcm9wKVxuICBdKTtcbiAgcmV0dXJuIHtcbiAgICBjbGFzc05hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgbW9kZWw6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICByZWFkOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgICAgdXBkYXRlOiBQcm9wVHlwZXMuZnVuYyxcbiAgICAgIGlzVmFsaWRSZWNvcmQ6IFByb3BUeXBlcy5mdW5jLFxuICAgICAgZ2V0VmFsaWRhdGlvbkRlcGVuZGVuY3k6IFByb3BUeXBlcy5mdW5jLFxuICAgICAgb246IFByb3BUeXBlcy5mdW5jLFxuICAgICAgb2ZmOiBQcm9wVHlwZXMuZnVuY1xuICAgIH0pLFxuICAgIGNvbHM6IFByb3BUeXBlcy5vYmplY3QsXG4gICAgdmlld0NvbHVtbnM6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1xuICAgICAgUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLnN0cmluZyksXG4gICAgICBQcm9wVHlwZXMub2JqZWN0XG4gICAgXSksXG4gICAgc2VsZWN0ZWQ6IFByb3BUeXBlcy5hcnJheSxcbiAgICAvLyBzb3J0OiBQcm9wVHlwZXMub2JqZWN0LFxuICAgIHBhZ2U6IFByb3BUeXBlcy5udW1iZXIsXG4gICAgZGVmYXVsdFZpZXdDb3VudDogUHJvcFR5cGVzLm51bWJlcixcbiAgICB2aWV3Q291bnQ6IFByb3BUeXBlcy5udW1iZXIsXG4gICAgdmlld1ZhcmlhbnRzOiBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMubnVtYmVyKSxcbiAgICBvbkNoYW5nZVZpZXdDb3VudDogUHJvcFR5cGVzLmZ1bmMsXG4gICAgb25DaGFuZ2U6IFByb3BUeXBlcy5mdW5jLFxuICAgIG9uRXJyb3I6IFByb3BUeXBlcy5mdW5jLFxuICAgIG9uUGFnZUxvYWQ6IFByb3BUeXBlcy5mdW5jLFxuICAgIG9uSW5pdDogUHJvcFR5cGVzLmZ1bmMsXG4gICAgb25EZXN0cm95OiBQcm9wVHlwZXMuZnVuYyxcbiAgICBhdXRvU3VibWl0OiBQcm9wVHlwZXMuYm9vbCxcbiAgICBoZWlnaHQ6IFByb3BUeXBlcy5udW1iZXIsXG4gICAgb25TZWxlY3RlZENoYW5nZTogUHJvcFR5cGVzLmZ1bmMsXG4gICAgb25Tb3J0aW5nOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBtdWx0aXBsZVNvcnRpbmc6IFByb3BUeXBlcy5ib29sLFxuICAgIHNlbGVjdEFsbFN0YXR1czogUHJvcFR5cGVzLmFueSxcbiAgICBvblRvZ2dsZVNlbGVjdGVkOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBvblRvZ2dsZVNlbGVjdEFsbDogUHJvcFR5cGVzLmZ1bmMsXG4gICAgZGVmYXVsdFNvcnQ6IChwcm9wcywgcHJvcE5hbWUsIC4uLnJlc3QpID0+IHtcbiAgICAgIGlmICghcHJvcHMuZGVmYXVsdFNvcnQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgdmFsaWRQcm9wID0gc29ydFByb3AocHJvcHMsIHByb3BOYW1lLCAuLi5yZXN0KTtcbiAgICAgIGlmICh2YWxpZFByb3ApIHtcbiAgICAgICAgcmV0dXJuIHZhbGlkUHJvcDtcbiAgICAgIH1cbiAgICAgIGlmIChwcm9wcy5oYXNPd25Qcm9wZXJ0eSgnc29ydCcpKSB7XG4gICAgICAgIHJldHVybiBFcnJvcignWW91IGNhbiBub3Qgc2V0IFwiZGVmYXVsdFNvcnRcIiB3aGVuIHRoZSBcInNvcnRcIiBwcm9wIGlzIHNwZWNpZmllZCcpO1xuICAgICAgfVxuICAgIH0sXG4gICAgc29ydDogKHByb3BzLCBwcm9wTmFtZSwgLi4ucmVzdCkgPT4ge1xuICAgICAgaWYgKCFwcm9wcy5zb3J0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHZhbGlkUHJvcCA9IHNvcnRQcm9wKHByb3BzLCBwcm9wTmFtZSwgLi4ucmVzdCk7XG4gICAgICBpZiAodmFsaWRQcm9wKSB7XG4gICAgICAgIHJldHVybiB2YWxpZFByb3A7XG4gICAgICB9XG4gICAgICBpZiAoIXByb3BzLm9uU29ydGluZykge1xuICAgICAgICByZXR1cm4gRXJyb3IoJ1lvdSBuZWVkIHRvIGRlZmluZSB0aGUgXCJvblNvcnRpbmdcIiBwcm9wIHdoZW4gXCJzb3J0XCIgaXMgc2V0Jyk7XG4gICAgICB9XG4gICAgfSxcbiAgICBzYXZlRnVsbFJlY29yZDogUHJvcFR5cGVzLmJvb2wsXG4gICAgcGFydGlhbEVycm9yQ2hlY2tpbmc6IFByb3BUeXBlcy5ib29sLFxuICAgIHdhcm5pbmdzVmFsaWRhdG9yOiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgaXNWYWxpZFJlY29yZDogUHJvcFR5cGVzLmZ1bmMsXG4gICAgICBnZXRWYWxpZGF0aW9uRGVwZW5kZW5jeTogUHJvcFR5cGVzLmZ1bmNcbiAgICB9KVxuICB9O1xufSkoKTtcblxuY29uc3QgR3JpZENvbXBvbmVudCA9IGNyZWF0ZVJlYWN0Q2xhc3Moe1xuICAuLi5HcmlkQ29sdW1uc01peGluLFxuICAuLi5ncmlkTWl4aW5QYWdpbmF0aW9uLFxuICAuLi5ncmlkTWl4aW5TdGF0dXNlcyxcbiAgLi4uZ3JpZE1peGluU29ydGluZyxcbiAgLi4uZ3JpZE1peGluRGF0YSxcbiAgLi4uZ3JpZE1peGluRWRpdG9yLFxuICAuLi5ncmlkTWl4aW5VSSxcbiAgLi4uZ3JpZE1peGluU2VsZWN0LFxuXG4gIGdldERlZmF1bHRQcm9wczogKCkgPT4gKHtcbiAgICBwYWdlOiAwLFxuICAgIGRlZmF1bHRWaWV3Q291bnQ6IDAsXG4gICAgcGFydGlhbEVycm9yQ2hlY2tpbmc6IGZhbHNlLFxuICAgIHNlbGVjdGVkOiBbXVxuICB9KSxcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fdGhyb3R0bGVkVXBkYXRlVGFibGUgPSB0aHJvdHRsZSh0aGlzLnVwZGF0ZVRhYmxlKTtcbiAgICB0aGlzLl92YWxpZGF0ZVJvdyA9IHRocm90dGxlKHRoaXMuX3ZhbGlkYXRlUm93KTtcbiAgICBpZiAodGhpcy5wcm9wcy5vbkluaXQpIHtcbiAgICAgIHRoaXMucHJvcHMub25Jbml0KCk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBwYWdlOiB0aGlzLnByb3BzLnBhZ2UsXG4gICAgICB2aWV3Q291bnQ6IHRoaXMucHJvcHMuZGVmYXVsdFZpZXdDb3VudCxcbiAgICAgIGNvdW50OiAwLFxuICAgICAgc3RhdHVzTWFwOiB7XG4gICAgICAgIG5ldzogMSA8PCAwXG4gICAgICB9LFxuICAgICAgc3RhdHVzZXM6IHt9LFxuICAgICAgc29ydDogdGhpcy5fZ2V0RGVmYXVsdFNvcnQoKSxcbiAgICAgIGRhdGE6IG51bGwsXG4gICAgICBjaGFuZ2VzOiB7fSxcbiAgICAgIHdhcm5pbmdzOiB7fSxcbiAgICAgIGVycm9yczoge30sXG4gICAgICB0b3RhbHM6IHt9LFxuICAgICAgcmVjb3Jkc0luZm86IHt9LFxuICAgICAgbWFpbklkczogW10sXG4gICAgICBwYXJ0aWFsRXJyb3JDaGVja2luZzogdGhpcy5wcm9wcy5wYXJ0aWFsRXJyb3JDaGVja2luZyxcbiAgICAgIGVkaXRvcjoge30sXG4gICAgICBjb2xzV2l0aEVzY2FwZUVycm9yczoge30sXG4gICAgICBzZWxlY3RCbGFja0xpc3RNb2RlOiBmYWxzZSxcbiAgICAgIHNlbGVjdGVkOiBbLi4udGhpcy5wcm9wcy5zZWxlY3RlZF0sXG4gICAgICBzaG93TG9hZGVyOiBmYWxzZVxuICAgIH07XG4gIH0sXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5faXNNb3VudGVkID0gdHJ1ZTtcbiAgICBpZiAodGhpcy5wcm9wcy5tb2RlbCkge1xuICAgICAgdGhpcy5wcm9wcy5tb2RlbC5vbignY3JlYXRlJywgdGhpcy5fb25SZWNvcmRzQ3JlYXRlZCk7XG4gICAgICB0aGlzLnByb3BzLm1vZGVsLm9uKCd1cGRhdGUnLCB0aGlzLl9zZXREYXRhKTtcbiAgICAgIHRoaXMucHJvcHMubW9kZWwub24oJ2RlbGV0ZScsIHRoaXMudXBkYXRlVGFibGUpO1xuICAgIH1cbiAgICB0aGlzLnVwZGF0ZVRhYmxlKCk7XG4gIH0sXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50OiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5faXNNb3VudGVkID0gZmFsc2U7XG4gICAgaWYgKHRoaXMucHJvcHMubW9kZWwpIHtcbiAgICAgIHRoaXMucHJvcHMubW9kZWwub2ZmKCdjcmVhdGUnLCB0aGlzLl9vblJlY29yZHNDcmVhdGVkKTtcbiAgICAgIHRoaXMucHJvcHMubW9kZWwub2ZmKCd1cGRhdGUnLCB0aGlzLl9zZXREYXRhKTtcbiAgICAgIHRoaXMucHJvcHMubW9kZWwub2ZmKCdkZWxldGUnLCB0aGlzLnVwZGF0ZVRhYmxlKTtcbiAgICB9XG4gICAgaWYgKHRoaXMucHJvcHMub25EZXN0cm95KSB7XG4gICAgICB0aGlzLnByb3BzLm9uRGVzdHJveSgpO1xuICAgIH1cbiAgfSxcbiAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wczogZnVuY3Rpb24gKG5leHRQcm9wcykge1xuICAgIGNvbnN0IG9sZFByb3BzID0gdGhpcy5wcm9wcztcbiAgICBsZXQgcmVzZXQgPSAwO1xuXG4gICAgaWYgKCFpc0VxdWFsKHRoaXMucHJvcHMubW9kZWwsIG5leHRQcm9wcy5tb2RlbCkpIHtcbiAgICAgIHJlc2V0IHw9IFJFU0VUX01PREVMO1xuICAgIH1cbiAgICBpZiAoIWlzRXF1YWwodGhpcy5wcm9wcy52aWV3Q29sdW1ucywgbmV4dFByb3BzLnZpZXdDb2x1bW5zKSkge1xuICAgICAgcmVzZXQgfD0gUkVTRVRfVklFV19DT0xVTU5TO1xuICAgIH1cbiAgICBpZiAoIWlzRXF1YWwodGhpcy5wcm9wcy5zb3J0LCBuZXh0UHJvcHMuc29ydCkpIHtcbiAgICAgIHJlc2V0IHw9IFJFU0VUX1NPUlQ7XG4gICAgfVxuICAgIGlmICh0aGlzLnByb3BzLnZpZXdDb3VudCAhPT0gbmV4dFByb3BzLnZpZXdDb3VudCkge1xuICAgICAgcmVzZXQgfD0gUkVTRVRfVklFV19DT1VOVDtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgIWlzRXF1YWwodGhpcy5wcm9wcy5zZWxlY3RlZCwgbmV4dFByb3BzLnNlbGVjdGVkKVxuICAgICAgfHwgdGhpcy5wcm9wcy5zZWxlY3RCbGFja0xpc3RNb2RlICE9PSBuZXh0UHJvcHMuc2VsZWN0QmxhY2tMaXN0TW9kZVxuICAgICkge1xuICAgICAgcmVzZXQgfD0gUkVTRVRfU0VMRUNURURfQ09MVU1OUztcbiAgICB9XG4gICAgaWYgKCFpc0VxdWFsKHRoaXMucHJvcHMuYmxhY2tMaXN0TW9kZSwgbmV4dFByb3BzLmJsYWNrTGlzdE1vZGUpKSB7XG4gICAgICByZXNldCB8PSBSRVNFVF9CTEFDS19MSVNUX01PREU7XG4gICAgfVxuXG4gICAgaWYgKCFyZXNldCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChuZXh0UHJvcHMuc2VsZWN0ZWQpIHtcbiAgICAgIHRoaXMuc3RhdGUuc2VsZWN0ZWQgPSBbLi4ubmV4dFByb3BzLnNlbGVjdGVkXTtcbiAgICB9XG4gICAgdGhpcy5zZXRTdGF0ZSh7fSwgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHJlc2V0ICYgUkVTRVRfU09SVCB8fCByZXNldCAmIFJFU0VUX01PREVMIHx8IHJlc2V0ICYgUkVTRVRfVklFV19DT1VOVCkge1xuICAgICAgICBpZiAocmVzZXQgJiBSRVNFVF9NT0RFTCkge1xuICAgICAgICAgIHRoaXMuc3RhdGUuZGF0YSA9IG51bGw7XG4gICAgICAgICAgaWYgKG9sZFByb3BzLm1vZGVsKSB7XG4gICAgICAgICAgICBvbGRQcm9wcy5tb2RlbC5vZmYoJ2NyZWF0ZScsIHRoaXMuX29uUmVjb3Jkc0NyZWF0ZWQpO1xuICAgICAgICAgICAgb2xkUHJvcHMubW9kZWwub2ZmKCd1cGRhdGUnLCB0aGlzLl9zZXREYXRhKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRoaXMucHJvcHMubW9kZWwpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMubW9kZWwub24oJ2NyZWF0ZScsIHRoaXMuX29uUmVjb3Jkc0NyZWF0ZWQpO1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5tb2RlbC5vbigndXBkYXRlJywgdGhpcy5fc2V0RGF0YSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuX3NldFBhZ2UoMCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fdGhyb3R0bGVkVXBkYXRlVGFibGUoKS5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgIGlmICghKGVyciBpbnN0YW5jZW9mIFRocm90dGxlRXJyb3IpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAoKHJlc2V0ICYgUkVTRVRfVklFV19DT0xVTU5TKSB8fCAocmVzZXQgJiBSRVNFVF9TRUxFQ1RFRF9DT0xVTU5TKSB8fCAocmVzZXQgJiBSRVNFVF9CTEFDS19MSVNUX01PREUpKSB7XG4gICAgICAgIHRoaXMuX3JlbmRlckJvZHkoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcbiAgcmVuZGVyU2Nyb2xsYWJsZUdyaWQoZ3JpZENsYXNzTmFtZXMpIHtcbiAgICBjb25zdCBoZWFkZXIgPSB0aGlzLl9mb3JtSGVhZGVyKCk7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtncmlkQ2xhc3NOYW1lcy5qb2luKCcgJyl9PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIndyYXBwZXItZGdyaWQtaGVhZGVyXCI+XG4gICAgICAgICAgPHRhYmxlIGNlbGxTcGFjaW5nPVwiMFwiIGNsYXNzTmFtZT1cImRncmlkLWhlYWRlclwiPlxuICAgICAgICAgICAgPGNvbGdyb3VwPntoZWFkZXIuY29sR3JvdXB9PC9jb2xncm91cD5cbiAgICAgICAgICAgIDx0aGVhZD5cbiAgICAgICAgICAgICAge2hlYWRlci5jb2xzLm1hcCgocm93LCBjb2xLZXkpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgPHRyIGtleT17Y29sS2V5fT5cbiAgICAgICAgICAgICAgICAgICAge3Jvdy5tYXAoKGNvbCwgcm93S2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyID0gdGhpcy5fZ2V0SGVhZGVyQ2VsbEhUTUwoY29sLmhhc093blByb3BlcnR5KCduYW1lJykgPyBjb2wubmFtZSA6IGNvbC5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvcHMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IHJvd0tleSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogY29sLmNsYXNzTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGNvbC5zb3J0ID8gdGhpcy5fc29ydENvbC5iaW5kKHRoaXMsIGNvbC5maWVsZCkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9oYW5kbGVIZWFkZXJDZWxsQ2xpY2suYmluZCh0aGlzLCBjb2wpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29sU3BhbjogY29sLmNvbHMsXG4gICAgICAgICAgICAgICAgICAgICAgICByb3dTcGFuOiBjb2wucm93c1xuICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZiBoZWFkZXIgPT09ICdzdHJpbmcnID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgey4uLnByb3BzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfX2h0bWw6IGhlYWRlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgOiA8dGggey4uLnByb3BzfT57aGVhZGVyfTwvdGg+KTtcbiAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgPC90aGVhZD5cbiAgICAgICAgICA8L3RhYmxlPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdlxuICAgICAgICAgIHN0eWxlPXt7bWF4SGVpZ2h0OiB0aGlzLnByb3BzLmhlaWdodCwgaGVpZ2h0OiB0aGlzLnByb3BzLmhlaWdodH19XG4gICAgICAgICAgY2xhc3NOYW1lPSdkZ3JpZC1ib2R5LXdyYXBwZXIgZGdyaWQtc2Nyb2xsYWJsZSdcbiAgICAgICAgPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZGdyaWQtYm9keVwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3RoaXMuc3RhdGUuc2hvd0xvYWRlciA/ICdkZ3JpZC1sb2FkZXInIDogJyd9IHJlZj17KGxvYWRlcikgPT4gdGhpcy5sb2FkZXIgPSBsb2FkZXIgfS8+XG4gICAgICAgICAgICA8dGFibGVcbiAgICAgICAgICAgICAgY2VsbFNwYWNpbmc9XCIwXCJcbiAgICAgICAgICAgICAgcmVmPXsoYm9keSkgPT4gdGhpcy5ib2R5ID0gYm9keSB9XG4gICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX2hhbmRsZUJvZHlDbGlja31cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPGNvbGdyb3VwPntoZWFkZXIuY29sR3JvdXB9PC9jb2xncm91cD5cbiAgICAgICAgICAgICAgPHRib2R5IGNsYXNzTmFtZT1cImRncmlkLWJvZHktdGFibGVcIiByZWY9eyh0Ym9keSkgPT4gdGhpcy50Qm9keSA9IHRib2R5IH0vPlxuICAgICAgICAgICAgPC90YWJsZT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwid3JhcHBlci10b3RhbHNcIj5cbiAgICAgICAgICB7dGhpcy5fcmVuZGVyVG90YWxzKHRoaXMucHJvcHMuaGVpZ2h0KX1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIHt0aGlzLl9yZW5kZXJQYWdpbmF0aW9uKCl9XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9LFxuICByZW5kZXJHcmlkKGdyaWRDbGFzc05hbWVzKSB7XG4gICAgY29uc3QgaGVhZGVyID0gdGhpcy5fZm9ybUhlYWRlcigpO1xuICAgIGdyaWRDbGFzc05hbWVzID0gZ3JpZENsYXNzTmFtZXMuY29uY2F0KCdkZ3JpZC1ub3Qtc2Nyb2xsYWJsZScpO1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17Z3JpZENsYXNzTmFtZXMuam9pbignICcpfT5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e3RoaXMuc3RhdGUuc2hvd0xvYWRlciA/ICdkZ3JpZC1sb2FkZXInIDogJyd9IHJlZj17KGxvYWRlcikgPT4gdGhpcy5sb2FkZXIgPSBsb2FkZXIgfS8+XG4gICAgICAgIDx0YWJsZVxuICAgICAgICAgIGNlbGxTcGFjaW5nPVwiMFwiXG4gICAgICAgICAgY2xhc3NOYW1lPVwiZGdyaWQtYm9keS10YWJsZVwiXG4gICAgICAgICAgcmVmPXsoYm9keSkgPT4gdGhpcy5ib2R5ID0gYm9keSB9XG4gICAgICAgICAgb25DbGljaz17dGhpcy5faGFuZGxlQm9keUNsaWNrfVxuICAgICAgICA+XG4gICAgICAgICAgPGNvbGdyb3VwPntoZWFkZXIuY29sR3JvdXB9PC9jb2xncm91cD5cbiAgICAgICAgICA8dGhlYWQ+XG4gICAgICAgICAgICB7aGVhZGVyLmNvbHMubWFwKChyb3csIGNvbEtleSkgPT4ge1xuICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDx0ciBrZXk9e2NvbEtleX0+XG4gICAgICAgICAgICAgICAgICB7cm93Lm1hcCgoY29sLCByb3dLZXkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyID0gdGhpcy5fZ2V0SGVhZGVyQ2VsbEhUTUwoY29sLmhhc093blByb3BlcnR5KCduYW1lJykgPyBjb2wubmFtZSA6IGNvbC5pZCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb3BzID0ge1xuICAgICAgICAgICAgICAgICAgICAgIGtleTogcm93S2V5LFxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogY29sLmNsYXNzTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBjb2wuc29ydCA/IHRoaXMuX3NvcnRDb2wuYmluZCh0aGlzLCBjb2wuZmllbGQpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2hhbmRsZUhlYWRlckNlbGxDbGljay5iaW5kKHRoaXMsIGNvbCksXG4gICAgICAgICAgICAgICAgICAgICAgY29sU3BhbjogY29sLmNvbHMsXG4gICAgICAgICAgICAgICAgICAgICAgcm93U3BhbjogY29sLnJvd3NcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlb2YgaGVhZGVyID09PSAnc3RyaW5nJyA/XG4gICAgICAgICAgICAgICAgICAgICAgICA8dGhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgey4uLnByb3BzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTD17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9faHRtbDogaGVhZGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDogPHRoIHsuLi5wcm9wc30+e2hlYWRlcn08L3RoPik7XG4gICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSl9XG4gICAgICAgICAgPC90aGVhZD5cbiAgICAgICAgICA8dGJvZHkgY2xhc3NOYW1lPVwiZGdyaWQtYm9keS10YWJsZVwiIHJlZj17KHRib2R5KSA9PiB0aGlzLnRCb2R5ID0gdGJvZHkgfS8+XG4gICAgICAgICAge3RoaXMuX3JlbmRlclRvdGFscyh0aGlzLnByb3BzLmhlaWdodCl9XG4gICAgICAgIDwvdGFibGU+XG4gICAgICAgIHt0aGlzLl9yZW5kZXJQYWdpbmF0aW9uKCl9XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9LFxuICByZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBncmlkQ2xhc3NOYW1lcyA9IFsnZGF0YS1ncmlkJ107XG5cbiAgICBpZiAodGhpcy5wcm9wcy5jbGFzc05hbWUpIHtcbiAgICAgIGdyaWRDbGFzc05hbWVzLnB1c2godGhpcy5wcm9wcy5jbGFzc05hbWUpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5wcm9wcy5oZWlnaHQpIHtcbiAgICAgIHJldHVybiB0aGlzLnJlbmRlckdyaWQoZ3JpZENsYXNzTmFtZXMpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnJlbmRlclNjcm9sbGFibGVHcmlkKGdyaWRDbGFzc05hbWVzKTtcbiAgfVxufSk7XG5cbkdyaWRDb21wb25lbnQucHJvcFR5cGVzID0gcHJvcFR5cGVzO1xuXG5leHBvcnQgZGVmYXVsdCBHcmlkQ29tcG9uZW50O1xuIiwiLypcbiAqIENvcHlyaWdodCAo0YEpIDIwMTUtcHJlc2VudCwgU29mdEluZGV4IExMQy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxuaW1wb3J0IEFyZ3VtZW50c0Vycm9yIGZyb20gJy4uLy4uL2NvbW1vbi9Bcmd1bWVudHNFcnJvcic7XG5cbmZ1bmN0aW9uIGZvcm1hdENvbHVtbnMoY29sdW1ucywgdmlld0NvbHVtbnMpIHtcbiAgY29uc3QgZm9ybWF0dGVkQ29sdW1ucyA9IHt9O1xuICBsZXQgY29sdW1uSWQ7XG4gIGxldCBpO1xuXG4gIGZvciAoaSA9IDA7IGkgPCB2aWV3Q29sdW1ucy5sZW5ndGg7IGkrKykge1xuICAgIGNvbHVtbklkID0gdmlld0NvbHVtbnNbaV07XG4gICAgZm9ybWF0dGVkQ29sdW1uc1tjb2x1bW5JZF0gPSBgJHtjb2x1bW5zW2NvbHVtbklkXS5wYXJlbnQgPyBjb2x1bW5zW2NvbHVtbklkXS5wYXJlbnQgKyAnICcgOiAnJ30ke2NvbHVtbnNbY29sdW1uSWRdLm5hbWV9YDtcbiAgfVxuXG4gIHJldHVybiBmb3JtYXR0ZWRDb2x1bW5zO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRSZWNvcmQocmVjb3JkLCBjb2x1bW5zLCB2aWV3Q29sdW1ucykge1xuICBjb25zdCBmb3JtYXR0ZWRSZWNvcmQgPSB7fTtcblxuICBmb3IgKGNvbnN0IHZpZXdDb2x1bW4gb2Ygdmlld0NvbHVtbnMpIHtcbiAgICBjb25zdCBjb2x1bW4gPSBjb2x1bW5zW3ZpZXdDb2x1bW5dO1xuICAgIGZvcm1hdHRlZFJlY29yZFt2aWV3Q29sdW1uXSA9IGNvbHVtbi5yZW5kZXJbY29sdW1uLnJlbmRlci5sZW5ndGggLSAxXShyZWNvcmQpO1xuICB9XG5cbiAgcmV0dXJuIGZvcm1hdHRlZFJlY29yZDtcbn1cblxuZnVuY3Rpb24gZm9ybWF0RGF0YShyZWNvcmRzLCB0b3RhbHMsIGNvbHVtbnMsIHZpZXdDb2x1bW5zKSB7XG4gIGNvbnN0IGZvcm1hdHRlZCA9IHtcbiAgICBjb2x1bW5zOiBmb3JtYXRDb2x1bW5zKGNvbHVtbnMsIHZpZXdDb2x1bW5zKSxcbiAgICByZWNvcmRzOiByZWNvcmRzLm1hcChyZWNvcmQgPT4gZm9ybWF0UmVjb3JkKHJlY29yZFsxXSwgY29sdW1ucywgdmlld0NvbHVtbnMpKVxuICB9O1xuICBpZiAodG90YWxzKSB7XG4gICAgZm9ybWF0dGVkLnRvdGFscyA9IGZvcm1hdFJlY29yZCh0b3RhbHMsIGNvbHVtbnMsIHZpZXdDb2x1bW5zKTtcbiAgfVxuICByZXR1cm4gZm9ybWF0dGVkO1xufVxuXG5mdW5jdGlvbiBnZXRGaWVsZHMoY29sdW1ucywgdmlld0NvbHVtbnMpIHtcbiAgY29uc3QgZmllbGRzID0ge307XG4gIGZvciAoY29uc3QgY29sdW1uSWQgb2Ygdmlld0NvbHVtbnMpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbHVtbnNbY29sdW1uSWRdLnJlbmRlci5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgIGZpZWxkc1tjb2x1bW5zW2NvbHVtbklkXS5yZW5kZXJbaV1dID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gT2JqZWN0LmtleXMoZmllbGRzKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3t9fSBjb2x1bW5zXG4gKiBAcGFyYW0ge3N0cmluZ1tdfSB2aWV3Q29sdW1uc1xuICovXG5mdW5jdGlvbiBhc3NlcnRWYWxpZFZpZXdDb2x1bW5zKGNvbHVtbnMsIHZpZXdDb2x1bW5zKSB7XG4gIGlmICghdmlld0NvbHVtbnMgfHwgIXZpZXdDb2x1bW5zLmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBBcmd1bWVudHNFcnJvcignXCJ2aWV3Q29sdW1uc1wiIGNhbmB0IGJlIGVtcHR5Jyk7XG4gIH1cblxuICBjb25zdCBub3RFeGlzdENvbHVtbnMgPSBbXTtcbiAgZm9yIChjb25zdCBjb2x1bW5JZCBvZiB2aWV3Q29sdW1ucykge1xuICAgIGlmICghY29sdW1uc1tjb2x1bW5JZF0pIHtcbiAgICAgIG5vdEV4aXN0Q29sdW1ucy5wdXNoKGNvbHVtbklkKTtcbiAgICB9XG4gIH1cblxuICBpZiAobm90RXhpc3RDb2x1bW5zLmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBBcmd1bWVudHNFcnJvcihgWW91IHRyeWluZyB0byBnZXQgbm90IGV4aXN0IGNvbHVtbnM6ICR7bm90RXhpc3RDb2x1bW5zLmpvaW4oJywgJyl9YCk7XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge3t9fSAgICAgICAgICAgICAgICAgICAgZ3JpZE1vZGVsXG4gKiBAcGFyYW0ge3t9fSAgICAgICAgICAgICAgICAgICAgY29sdW1uc1xuICogQHBhcmFtIHtzdHJpbmdbXX0gICAgICAgICAgICAgIHZpZXdDb2x1bW5zXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSAgICAgICAgICAgICAgZXhwb3J0ZXJcbiAqIEBwYXJhbSB7e319ICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc1xuICogQHBhcmFtIHtbc3RyaW5nLCBzdHJpbmddW119ICAgICAgc2V0dGluZ3Muc29ydFxuICogQHBhcmFtIHtudW1iZXJ9ICAgICAgICAgICAgICAgICAgc2V0dGluZ3MubGltaXRcbiAqIEBwYXJhbSB7bnVtYmVyfSAgICAgICAgICAgICAgICAgIHNldHRpbmdzLm9mZnNldFxuICogQHBhcmFtIHtzdHJpbmdbXX0gICAgICAgICAgICAgICAgc2V0dGluZ3Mudmlld0NvbHVtbnNcbiAqL1xuYXN5bmMgZnVuY3Rpb24gZXhwb3J0R3JpZERhdGEoZ3JpZE1vZGVsLCBjb2x1bW5zLCB2aWV3Q29sdW1ucywgZXhwb3J0ZXIsIHNldHRpbmdzKSB7XG4gIGFzc2VydFZhbGlkVmlld0NvbHVtbnMoY29sdW1ucywgdmlld0NvbHVtbnMpO1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCBncmlkTW9kZWwucmVhZCh7XG4gICAgZmllbGRzOiBnZXRGaWVsZHMoY29sdW1ucywgdmlld0NvbHVtbnMpLFxuICAgIHNvcnQ6IHNldHRpbmdzLnNvcnQgPyBbW3NldHRpbmdzLnNvcnQuY29sdW1uLCBzZXR0aW5ncy5zb3J0LmRpcmVjdGlvbl1dIDogbnVsbCxcbiAgICBsaW1pdDogc2V0dGluZ3MubGltaXQsXG4gICAgb2Zmc2V0OiBzZXR0aW5ncy5vZmZzZXRcbiAgfSk7XG5cbiAgY29uc3QgZGF0YSA9IGZvcm1hdERhdGEocmVzdWx0LnJlY29yZHMsIHJlc3VsdC50b3RhbHMsIGNvbHVtbnMsIHZpZXdDb2x1bW5zKTtcblxuICByZXR1cm4gYXdhaXQgZXhwb3J0ZXIoZGF0YSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGV4cG9ydEdyaWREYXRhO1xuIiwiLypcbiAqIENvcHlyaWdodCAo0YEpIDIwMTUtcHJlc2VudCwgU29mdEluZGV4IExMQy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxuaW1wb3J0IHRvUHJvbWlzZSBmcm9tICcuLi8uLi8uLi9jb21tb24vdG9Qcm9taXNlJztcbmltcG9ydCBjc3YgZnJvbSAnY3N2LXN0cmluZ2lmeSc7XG5cbmFzeW5jIGZ1bmN0aW9uIHRvQ1NWKGRhdGEpIHtcbiAgY29uc3QgY3N2RGF0YSA9IGF3YWl0IHRvUHJvbWlzZShjc3YsIHRydWUpKGRhdGEucmVjb3Jkcy5jb25jYXQoW2RhdGEudG90YWxzXSksIHtcbiAgICBoZWFkZXI6IHRydWUsXG4gICAgY29sdW1uczogZGF0YS5jb2x1bW5zXG4gIH0pO1xuXG4gIHJldHVybiB7XG4gICAgbWltZTogJ3RleHQvY3N2JyxcbiAgICBkYXRhOiBjc3ZEYXRhXG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IHRvQ1NWO1xuIiwiLypcbiAqIENvcHlyaWdodCAo0YEpIDIwMTUtcHJlc2VudCwgU29mdEluZGV4IExMQy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxuYXN5bmMgZnVuY3Rpb24gdG9KU09OKGRhdGEpIHtcbiAgcmV0dXJuIHtcbiAgICBtaW1lOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgZGF0YToge1xuICAgICAgcmVjb3JkczogZGF0YS5yZWNvcmRzLFxuICAgICAgdG90YWxzOiBkYXRhLnRvdGFsc1xuICAgIH1cbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgdG9KU09OO1xuIiwiLypcbiAqIENvcHlyaWdodCAo0YEpIDIwMTUtcHJlc2VudCwgU29mdEluZGV4IExMQy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxuaW1wb3J0IHt1bmlvbn0gZnJvbSAnLi4vLi4vY29tbW9uL3V0aWxzJztcbmltcG9ydCBET00gZnJvbSAncmVhY3QtZG9tLWZhY3Rvcmllcyc7XG5cbmNvbnN0IEdyaWRDb2x1bW5zTWl4aW4gPSB7XG4gIC8qKlxuICAgKiBDb2x1bW4gdmlzaWJpbGl0eSBmbGFnXG4gICAqXG4gICAqIEBwYXJhbSAgIHtzdHJpbmd9ICAgIGlkICBDb2x1bW4gSURcbiAgICogQHJldHVybnMge2Jvb2xlYW59ICAgQ29sdW1uIHZpc2liaWxpdHlcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9pc1ZpZXdDb2x1bW4oaWQpIHtcbiAgICBpZiAoIXRoaXMucHJvcHMudmlld0NvbHVtbnMpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMucHJvcHMudmlld0NvbHVtbnMpKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy52aWV3Q29sdW1ucy5pbmRleE9mKGlkKSA+IC0xO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnByb3BzLnZpZXdDb2x1bW5zW2lkXTtcbiAgfSxcblxuICAvKipcbiAgICogQ29sbGVjdCBkYXRhIGZvciB0YWJsZSBoZWFkZXIgZGlzcGxheVxuICAgKlxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBGb3JtZWQgZGF0YVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2Zvcm1IZWFkZXIoKSB7XG4gICAgY29uc3Qgcm93cyA9IFtbLyogdG9wICovXSwgWy8qIGJvdHRvbSAqL11dO1xuICAgIGNvbnN0IGNvbEdyb3VwID0gW107XG4gICAgbGV0IGxhc3RQYXJlbnQgPSB7bmFtZTogJyd9O1xuXG4gICAgZm9yIChjb25zdCBjb2x1bW5JZCBpbiB0aGlzLnByb3BzLmNvbHMpIHtcbiAgICAgIC8vIFNraXAgY29sdW1uIGlmIGl0J3MgaW52aXNpYmxlXG4gICAgICBpZiAoIXRoaXMuX2lzVmlld0NvbHVtbihjb2x1bW5JZCkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbEdyb3VwLnB1c2goXG4gICAgICAgIERPTS5jb2woe1xuICAgICAgICAgIGtleTogY29sdW1uSWQsXG4gICAgICAgICAgd2lkdGg6IHRoaXMucHJvcHMuY29sc1tjb2x1bW5JZF0ud2lkdGgsXG4gICAgICAgICAgY2xhc3NOYW1lOiB0aGlzLl9nZXRDb2x1bW5DbGFzcyhjb2x1bW5JZClcbiAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGNsYXNzTmFtZXMgPSBbdGhpcy5fZ2V0Q29sdW1uQ2xhc3MoY29sdW1uSWQpXTtcbiAgICAgIGNvbnN0IGFkZEluZm8gPSB7XG4gICAgICAgIGlkOiBjb2x1bW5JZCxcbiAgICAgICAgbmFtZTogdGhpcy5wcm9wcy5jb2xzW2NvbHVtbklkXS5uYW1lLFxuICAgICAgICBvbkNsaWNrOiB0aGlzLnByb3BzLmNvbHNbY29sdW1uSWRdLm9uQ2xpY2ssXG4gICAgICAgIG9uQ2xpY2tSZWZzOiB0aGlzLnByb3BzLmNvbHNbY29sdW1uSWRdLm9uQ2xpY2tSZWZzLFxuICAgICAgICBjb2xzOiAxLFxuICAgICAgICByb3dzOiAxXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBzb3J0UGFyYW1zID0gdGhpcy5fZ2V0U29ydFBhcmFtcyhjb2x1bW5JZCk7XG4gICAgICBpZiAoc29ydFBhcmFtcykge1xuICAgICAgICBjbGFzc05hbWVzLnB1c2goYGRncmlkLSR7c29ydFBhcmFtcy5kaXJlY3Rpb259YCk7XG4gICAgICAgIGFkZEluZm8uZmllbGQgPSBzb3J0UGFyYW1zLmNvbHVtbjtcbiAgICAgICAgYWRkSW5mby5zb3J0ID0gc29ydFBhcmFtcy5kaXJlY3Rpb247XG4gICAgICB9XG5cbiAgICAgIGFkZEluZm8uY2xhc3NOYW1lID0gY2xhc3NOYW1lcy5qb2luKCcgJyk7XG5cbiAgICAgIGlmICh0aGlzLnByb3BzLmNvbHNbY29sdW1uSWRdLnBhcmVudCkge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5jb2xzW2NvbHVtbklkXS5wYXJlbnQgIT09IGxhc3RQYXJlbnQubmFtZSkge1xuICAgICAgICAgIGxhc3RQYXJlbnQgPSByb3dzWzBdW3Jvd3NbMF0ucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLnByb3BzLmNvbHNbY29sdW1uSWRdLnBhcmVudCxcbiAgICAgICAgICAgIGNvbHM6IDEsIHJvd3M6IDFcbiAgICAgICAgICB9KSAtIDFdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxhc3RQYXJlbnQuY29scysrO1xuICAgICAgICB9XG4gICAgICAgIHJvd3NbMV0ucHVzaChhZGRJbmZvKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxhc3RQYXJlbnQgPSB7bmFtZTogJyd9O1xuICAgICAgICBhZGRJbmZvLnJvd3MgPSAyO1xuICAgICAgICByb3dzWzBdLnB1c2goYWRkSW5mbyk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7Y29sczogcm93cywgY29sR3JvdXA6IGNvbEdyb3VwfTtcbiAgfSxcblxuICAvKipcbiAgICogR2V0IHRoZSBuYW1lcyBvZiB0aGUgcGFyYW1ldGVycyB0aGF0IGFyZSByZXF1aXJlZCB0byBkaXNwbGF5IHRoZSBncmlkXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ1tdfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2dldEZpZWxkc1RvUmVuZGVyKCkge1xuICAgIGxldCBpO1xuICAgIGNvbnN0IGNvbHMgPSB0aGlzLnByb3BzLmNvbHM7XG4gICAgbGV0IGNvbHVtbnMgPSBbXTtcbiAgICBmb3IgKGkgaW4gY29scykge1xuICAgICAgY29sdW1ucyA9IHVuaW9uKGNvbHVtbnMsIGNvbHNbaV0ucmVuZGVyLnNsaWNlKDAsIGNvbHNbaV0ucmVuZGVyLmxlbmd0aCAtIDEpKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbHVtbnM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIERvZXMgdGhlIHBhcmFtZXRlcnMgdG8gZGlzcGxheSBncmlkXG4gICAqXG4gICAqIEBwYXJhbSAgIHtzdHJpbmd9ICBmaWVsZFxuICAgKiBAcmV0dXJuICB7Ym9vbGVhbn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9pc0ZpZWxkQWZmZWN0c1JlbmRlcihmaWVsZCkge1xuICAgIGxldCBpO1xuICAgIGNvbnN0IGNvbHMgPSB0aGlzLnByb3BzLmNvbHM7XG4gICAgZm9yIChpIGluIGNvbHMpIHtcbiAgICAgIGlmIChjb2xzW2ldLnJlbmRlci5pbmRleE9mKGZpZWxkKSA+PSAwKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCBkZXBlbmRlbnQgY29sdW1uc1xuICAgKlxuICAgKiBAcGFyYW0gICB7c3RyaW5nfSAgICBmaWVsZFxuICAgKiBAcmV0dXJuICB7c3RyaW5nW119XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfZ2V0RGVwZW5kZW50Q29sdW1ucyhmaWVsZCkge1xuICAgIGNvbnN0IGRlcGVuZGVudENvbHVtbnMgPSBbXTtcbiAgICBjb25zdCBkZXBlbmRlbmN5RmllbGRzID0gW1xuICAgICAgZmllbGQsXG4gICAgICAuLi50aGlzLnByb3BzLm1vZGVsLmdldFZhbGlkYXRpb25EZXBlbmRlbmN5KFtmaWVsZF0pXG4gICAgXTtcblxuICAgIGZvciAoY29uc3QgW2NvbHVtbk5hbWUsIHsgcmVuZGVyIH1dIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMucHJvcHMuY29scykpIHtcbiAgICAgIGlmIChyZW5kZXIuc29tZShyZW5kZXJGaWVsZCA9PiBkZXBlbmRlbmN5RmllbGRzLmluY2x1ZGVzKHJlbmRlckZpZWxkKSkpIHtcbiAgICAgICAgZGVwZW5kZW50Q29sdW1ucy5wdXNoKGNvbHVtbk5hbWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBkZXBlbmRlbnRDb2x1bW5zO1xuICB9LFxuXG4gIF9nZXRDb2x1bW5DbGFzcyhpZCkge1xuICAgIHJldHVybiB0aGlzLnByb3BzLmNvbHNbaWRdLmNsYXNzTmFtZTtcbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgR3JpZENvbHVtbnNNaXhpbjtcbiIsIi8qXG4gKiBDb3B5cmlnaHQgKNGBKSAyMDE1LXByZXNlbnQsIFNvZnRJbmRleCBMTEMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbmltcG9ydCBWYWxpZGF0aW9uRXJyb3JzIGZyb20gJy4uLy4uL2NvbW1vbi92YWxpZGF0aW9uL1ZhbGlkYXRpb25FcnJvcnMnO1xuaW1wb3J0IHtjbG9uZURlZXAsIHJlZHVjZSwgcGljaywgaXNFcXVhbCwgaXNFbXB0eSwgZm9yRWFjaCwgZ2V0UmVjb3JkQ2hhbmdlcywgdG9FbmNvZGVkU3RyaW5nLCBjbG9uZSwgd2Fybn0gZnJvbSAnLi4vLi4vY29tbW9uL3V0aWxzJztcbmltcG9ydCBUaHJvdHRsZUVycm9yIGZyb20gJy4uLy4uL2NvbW1vbi9UaHJvdHRsZUVycm9yJztcblxuY29uc3QgR3JpZERhdGFNaXhpbiA9IHtcbiAgLyoqXG4gICAqIENoYW5nZSB0YWJsZSByZWNvcmRcbiAgICogVGhpcyBtZXRob2QgbWFya3MgY2hhbmdlZCBmaWVsZHMgYW5kIHZhbGlkYXRlcyB0aGVtXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gICAgICAgICByZWNvcmRJZCAgICBSZWNvcmQgSURcbiAgICogQHBhcmFtIHtPYmplY3R9ICAgIGRhdGEgICAgICAgIENoYW5nZWQgZGF0YVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSAgY2IgICAgICAgICAgQ2FsbEJhY2sgZnVuY3Rpb25cbiAgICovXG4gIHNldChyZWNvcmRJZCwgZGF0YSwgY2IpIHsvL1RPRE8gY2IgZG9lcyd0IHVzZWRcbiAgICBjb25zdCByb3cgPSB0aGlzLl9nZXRSb3dJRChyZWNvcmRJZCk7XG4gICAgdGhpcy5fc2V0Um93Q2hhbmdlcyhyb3csIGNsb25lRGVlcChkYXRhKSwgY2IpO1xuXG4gICAgaWYgKHRoaXMucHJvcHMuYXV0b1N1Ym1pdCB8fCB0aGlzLnByb3BzLnJlYWx0aW1lKSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5yZWFsdGltZSkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ0RlcHJlY2F0ZWQ6IEdyaWQgcHJvcCBcInJlYWx0aW1lXCIgcmVuYW1lZCB0byBcImF1dG9TdWJtaXRcIicpO1xuICAgICAgfVxuICAgICAgdGhpcy5zYXZlKHRoaXMucHJvcHMub25SZWFsdGltZVN1Ym1pdCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLm9uQ2hhbmdlKSB7XG4gICAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKHRoaXMuc3RhdGUuY2hhbmdlcywgdGhpcy5zdGF0ZS5kYXRhKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCByZWNvcmQgZGF0YVxuICAgKlxuICAgKiBAcGFyYW0gcmVjb3JkSWRcbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cbiAgZ2V0UmVjb3JkKHJlY29yZElkKSB7XG4gICAgY29uc3Qgcm93ID0gdGhpcy5fZ2V0Um93SUQocmVjb3JkSWQpO1xuICAgIHJldHVybiBjbG9uZURlZXAodGhpcy5fZ2V0UmVjb3JkV2l0aENoYW5nZXMocm93KSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCByZWNvcmQgY2hhbmdlcyBvYmplY3RcbiAgICpcbiAgICogQHBhcmFtICAgeyp9IHJlY29yZElkIFJlY29yZCBJRFxuICAgKiBAcmV0dXJuICB7T2JqZWN0fVxuICAgKi9cbiAgZ2V0UmVjb3JkQ2hhbmdlcyhyZWNvcmRJZCkge1xuICAgIGNvbnN0IHJvdyA9IHRoaXMuX2dldFJvd0lEKHJlY29yZElkKTtcbiAgICByZXR1cm4gdGhpcy5fZ2V0UmVjb3JkQ2hhbmdlcyhyb3cpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgcmVjb3JkIHdhcm5pbmdzIG9iamVjdFxuICAgKlxuICAgKiBAcGFyYW0gICB7Kn0gcmVjb3JkSWQgIFJlY29yZCBJRFxuICAgKiBAcmV0dXJuICB7VmFsaWRhdGlvbkVycm9yc31cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldFJlY29yZFdhcm5pbmdzKHJlY29yZElkKSB7XG4gICAgY29uc3Qgcm93ID0gdGhpcy5fZ2V0Um93SUQocmVjb3JkSWQpO1xuICAgIHJldHVybiB0aGlzLnN0YXRlLndhcm5pbmdzW3Jvd10gfHwgbmV3IFZhbGlkYXRpb25FcnJvcnMoKTtcbiAgfSxcblxuICAvKipcbiAgICogR2V0IHZhbGlkYXRpb24gd2FybmluZ3NcbiAgICpcbiAgICogQHJldHVybiB7QXJyYXl8bnVsbH1cbiAgICovXG4gIGdldFdhcm5pbmdzKCkge1xuICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuICAgIGZvciAoY29uc3QgaSBpbiB0aGlzLnN0YXRlLndhcm5pbmdzKSB7XG4gICAgICByZXN1bHQucHVzaChbXG4gICAgICAgIHRoaXMuc3RhdGUucmVjb3Jkc0luZm9baV0uaWQsXG4gICAgICAgIHRoaXMuc3RhdGUud2FybmluZ3NbaV1cbiAgICAgIF0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0Lmxlbmd0aCA/IHJlc3VsdCA6IG51bGw7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCByZWNvcmQgZXJyb3JzIG9iamVjdFxuICAgKlxuICAgKiBAcGFyYW0gICB7Kn0gcmVjb3JkSWQgIFJlY29yZCBJRFxuICAgKiBAcmV0dXJuICB7VmFsaWRhdGlvbkVycm9yc31cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldFJlY29yZEVycm9ycyhyZWNvcmRJZCkge1xuICAgIGNvbnN0IHJvdyA9IHRoaXMuX2dldFJvd0lEKHJlY29yZElkKTtcbiAgICByZXR1cm4gdGhpcy5fZ2V0UmVjb3JkRXJyb3JzKHJvdyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCB2YWxpZGF0aW9uIGVycm9yc1xuICAgKlxuICAgKiBAcmV0dXJuIHtBcnJheXxudWxsfVxuICAgKi9cbiAgZ2V0RXJyb3JzKCkge1xuICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuICAgIGZvciAoY29uc3QgaSBpbiB0aGlzLnN0YXRlLmVycm9ycykge1xuICAgICAgcmVzdWx0LnB1c2goW1xuICAgICAgICB0aGlzLnN0YXRlLnJlY29yZHNJbmZvW2ldLmlkLFxuICAgICAgICB0aGlzLnN0YXRlLmVycm9yc1tpXVxuICAgICAgXSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQubGVuZ3RoID8gcmVzdWx0IDogbnVsbDtcbiAgfSxcblxuICAvKipcbiAgICogR2V0IHRhYmxlIG1vZGVsXG4gICAqXG4gICAqIEByZXR1cm5zIHtBYnN0cmFjdEdyaWRNb2RlbH1cbiAgICovXG4gIGdldE1vZGVsKCkge1xuICAgIHJldHVybiB0aGlzLnByb3BzLm1vZGVsO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTYXZlIGdyaWQgY2hhbmdlc1xuICAgKi9cbiAgYXN5bmMgc2F2ZSgpIHtcbiAgICBjb25zdCBlcnJvcnMgPSB0aGlzLmdldEVycm9ycygpO1xuXG4gICAgLy8gQ29sbGVjdCBhbGwgdmFsaWQgY2hhbmdlc1xuICAgIGNvbnN0IGNoYW5nZXMgPSByZWR1Y2UodGhpcy5zdGF0ZS5jaGFuZ2VzLCAocmVzdWx0LCByb3dDaGFuZ2VzLCByb3cpID0+IHtcbiAgICAgIGlmICghZXJyb3JzIHx8ICFlcnJvcnNbcm93XSkge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5zYXZlRnVsbFJlY29yZCkge1xuICAgICAgICAgIHJlc3VsdFtyb3ddID0gdGhpcy5fZ2V0UmVjb3JkV2l0aENoYW5nZXMocm93KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHRbcm93XSA9IHt9O1xuICAgICAgICAgIE9iamVjdC5hc3NpZ24ocmVzdWx0W3Jvd10sIHJvd0NoYW5nZXMsIHBpY2soXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmRhdGFbcm93XSxcbiAgICAgICAgICAgIHRoaXMucHJvcHMubW9kZWwuZ2V0VmFsaWRhdGlvbkRlcGVuZGVuY3koT2JqZWN0LmtleXMocmVzdWx0W3Jvd10pKVxuICAgICAgICAgICkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0sIHt9KTtcblxuICAgIC8vIENhbmNlbCBuZXcgcmVjb3JkIGRpc3BsYXlcbiAgICB0aGlzLnJlbW92ZVJlY29yZFN0YXR1c0FsbCgnbmV3Jyk7XG5cbiAgICAvLyBQYXNzIGNoYW5nZXMgdG8gdGFibGUgbW9kZWwgcHJvY2Vzc2luZ1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnByb3BzLm1vZGVsLnVwZGF0ZSh0aGlzLl9kYXRhT2JqZWN0VG9BcnJheShjaGFuZ2VzKSk7XG4gICAgaWYgKCF0aGlzLl9pc01vdW50ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnN0YXRlLnBhcnRpYWxFcnJvckNoZWNraW5nID0gZmFsc2U7XG5cbiAgICBjb25zdCB1bmhhbmRsZWRFcnJvcnMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHJlY29yZCBvZiBkYXRhKSB7XG4gICAgICBjb25zdCByb3cgPSB0aGlzLl9nZXRSb3dJRChyZWNvcmRbMF0pO1xuXG4gICAgICAvLyBTa2lwIHJlY29yZHMgdGhhdCBhcmUgdXNlciBjaGFuZ2VkIHdoaWxlIGRhdGEgcHJvY2Vzc2luZ1xuICAgICAgaWYgKCFpc0VxdWFsKHRoaXMuc3RhdGUuY2hhbmdlc1tyb3ddLCBjaGFuZ2VzW3Jvd10pKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAocmVjb3JkWzFdIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgdW5oYW5kbGVkRXJyb3JzLnB1c2gocmVjb3JkWzFdKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIFByb2Nlc3MgdmFsaWRhdGlvbiBlcnJvcnNcbiAgICAgIGlmIChyZWNvcmRbMV0gaW5zdGFuY2VvZiBWYWxpZGF0aW9uRXJyb3JzKSB7XG4gICAgICAgIHRoaXMuc3RhdGUuZXJyb3JzW3Jvd10gPSByZWNvcmRbMV07XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBDYW5jZWwgY2hhbmdlZCBkYXRhIHN0YXR1cyBvZiB0aGUgcGFyYW1ldGVycywgdGhhdCBhcmUgY2hhbmdlZFxuICAgICAgZm9yRWFjaChjaGFuZ2VzW3Jvd10sIGZ1bmN0aW9uICh2YWx1ZSwgZmllbGQpIHtcbiAgICAgICAgaWYgKGlzRXF1YWwodmFsdWUsIHRoaXMuc3RhdGUuY2hhbmdlc1tyb3ddW2ZpZWxkXSkpIHtcbiAgICAgICAgICBkZWxldGUgdGhpcy5zdGF0ZS5jaGFuZ2VzW3Jvd11bZmllbGRdO1xuICAgICAgICB9XG4gICAgICB9LCB0aGlzKTtcblxuICAgICAgLy8gQ2xlYXIgY2hhbmdlZCBkYXRhIHJvdyBpZiBpdCdzIGVtcHR5XG4gICAgICBpZiAoaXNFbXB0eSh0aGlzLnN0YXRlLmNoYW5nZXNbcm93XSkpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuc3RhdGUuY2hhbmdlc1tyb3ddO1xuICAgICAgICBpZiAoIXRoaXMuX2lzTWFpblJvdyhyb3cpKSB7XG4gICAgICAgICAgdGhpcy5fcmVtb3ZlUmVjb3JkKHJvdyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fcmVuZGVyQm9keSgpO1xuXG4gICAgaWYgKHRoaXMucHJvcHMub25DaGFuZ2UpIHtcbiAgICAgIHRoaXMucHJvcHMub25DaGFuZ2UodGhpcy5zdGF0ZS5jaGFuZ2VzLCB0aGlzLnN0YXRlLmRhdGEpO1xuICAgIH1cblxuICAgIGNvbnN0IGVycm9ySGFuZGxlciA9IHRoaXMucHJvcHMub25FcnJvciB8fCA6OmNvbnNvbGUuZXJyb3I7XG4gICAgdW5oYW5kbGVkRXJyb3JzLmZvckVhY2goZXJyb3IgPT4gZXJyb3JIYW5kbGVyKGVycm9yKSk7XG5cbiAgICByZXR1cm4gZGF0YTtcbiAgfSxcblxuICAvKipcbiAgICogQ2xlYXIgcmVjb3JkIGNoYW5nZXNcbiAgICpcbiAgICogQHBhcmFtIHsqfSByZWNvcmRJZCBSZWNvcmQgSURcbiAgICovXG4gIGNsZWFyUmVjb3JkQ2hhbmdlcyhyZWNvcmRJZCkge1xuICAgIGNvbnN0IHJvdyA9IHRoaXMuX2dldFJvd0lEKHJlY29yZElkKTtcblxuICAgIGRlbGV0ZSB0aGlzLnN0YXRlLmNoYW5nZXNbcm93XTtcbiAgICBkZWxldGUgdGhpcy5zdGF0ZS53YXJuaW5nc1tyb3ddO1xuICAgIGRlbGV0ZSB0aGlzLnN0YXRlLmVycm9yc1tyb3ddO1xuXG4gICAgdGhpcy5fdXBkYXRlUm93KHJvdyk7XG5cbiAgICBpZiAodGhpcy5wcm9wcy5vbkNoYW5nZSkge1xuICAgICAgdGhpcy5wcm9wcy5vbkNoYW5nZSh0aGlzLnN0YXRlLmNoYW5nZXMsIHRoaXMuc3RhdGUuZGF0YSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBDbGVhciBhbGwgdGFibGUgY2hhbmdlc1xuICAgKi9cbiAgY2xlYXJBbGxDaGFuZ2VzKCkge1xuICAgIGxldCBpO1xuICAgIGZvciAoaSBpbiB0aGlzLnN0YXRlLmRhdGEpIHtcbiAgICAgIGlmICghdGhpcy5faXNNYWluUm93KGkpKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnN0YXRlLmRhdGFbaV07XG4gICAgICAgIGRlbGV0ZSB0aGlzLnN0YXRlLnJlY29yZHNJbmZvW2ldO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnN0YXRlLmNoYW5nZXMgPSB7fTtcbiAgICB0aGlzLnN0YXRlLnN0YXR1c2VzID0ge307XG4gICAgdGhpcy5zdGF0ZS53YXJuaW5ncyA9IHt9O1xuICAgIHRoaXMuc3RhdGUuZXJyb3JzID0ge307XG4gICAgdGhpcy5zdGF0ZS5wYXJ0aWFsRXJyb3JDaGVja2luZyA9IHRoaXMucHJvcHMucGFydGlhbEVycm9yQ2hlY2tpbmc7XG5cbiAgICB0aGlzLl9yZW5kZXJCb2R5KCk7XG5cbiAgICBpZiAodGhpcy5wcm9wcy5vbkNoYW5nZSkge1xuICAgICAgdGhpcy5wcm9wcy5vbkNoYW5nZSh0aGlzLnN0YXRlLmNoYW5nZXMsIHRoaXMuc3RhdGUuZGF0YSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBSZXNldCB0byBpbml0aWFsIHRhYmxlIHN0YXRlXG4gICAqL1xuICByZXNldCgpIHtcbiAgICB0aGlzLl9zZXRQYWdlKDApO1xuICAgIGlmICghdGhpcy5faXNTb3J0aW5nUHJvcHNNb2RlKCkpIHtcbiAgICAgIHRoaXMuX3Jlc2V0U29ydGluZygpO1xuICAgIH1cbiAgICB0aGlzLnVwZGF0ZVRhYmxlKCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCByZWNvcmQgY2hhbmdlcyBvYmplY3RcbiAgICpcbiAgICogQHBhcmFtICAge3N0cmluZ30gICAgICAgIHJvdyAgICAgUm93IElEXG4gICAqIEByZXR1cm4gIHtPYmplY3R9XG4gICAqL1xuICBfZ2V0UmVjb3JkQ2hhbmdlcyhyb3cpIHtcbiAgICBpZiAodGhpcy5zdGF0ZS5jaGFuZ2VzLmhhc093blByb3BlcnR5KHJvdykpIHtcbiAgICAgIHJldHVybiBjbG9uZURlZXAodGhpcy5zdGF0ZS5jaGFuZ2VzW3Jvd10pO1xuICAgIH1cbiAgICByZXR1cm4ge307XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNldCByZWNvcmQgZGF0YVxuICAgKlxuICAgKiBAcGFyYW0geyp9ICAgICAgIHJlY29yZElkICBSZWNvcmQgSURcbiAgICogQHBhcmFtIHtPYmplY3R9ICBkYXRhICAgICAgRGF0YVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3NldFJlY29yZERhdGEocmVjb3JkSWQsIGRhdGEpIHtcbiAgICBpZiAoIXRoaXMuX2lzUmVjb3JkTG9hZGVkKHJlY29yZElkKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFRPRE8gZG9uZSB0aHJvdWdoIF9kYXRhQXJyYXlUb09iamVjdFxuICAgIGNvbnN0IHJvdyA9IHRoaXMuX2dldFJvd0lEKHJlY29yZElkKTtcblxuICAgIC8vIEFwcGx5IGFuZCByZWRyYXcgYWxsIHJlY29yZCBjaGFuZ2VzXG4gICAgZm9yIChjb25zdCBmaWVsZCBpbiBkYXRhKSB7XG4gICAgICB0aGlzLnN0YXRlLmRhdGFbcm93XVtmaWVsZF0gPSBjbG9uZURlZXAoZGF0YVtmaWVsZF0pO1xuICAgICAgdGhpcy5fcmVuZGVyQmluZHMocm93LCBmaWVsZCk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBUYWJsZSByb3cgaGFzIHdhcm5pbmcgZmxhZ1xuICAgKlxuICAgKiBAcGFyYW0gICB7c3RyaW5nfSAgICAgICAgcm93ICAgICBSb3cgSURcbiAgICogQHBhcmFtICAge0FycmF5fHN0cmluZ30gIGZpZWxkc1xuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9oYXNXYXJuaW5nKHJvdywgZmllbGRzKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NoZWNrRmllbGRJblZhbGlkYXRpb24ocm93LCBmaWVsZHMsIHRoaXMuc3RhdGUud2FybmluZ3MpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBUYWJsZSByb3cgaGFzIGVycm9yIGZsYWdcbiAgICpcbiAgICogQHBhcmFtICAge3N0cmluZ30gICAgICAgIHJvdyAgICAgUm93IElEXG4gICAqIEBwYXJhbSAgIHtBcnJheXxzdHJpbmd9ICBmaWVsZHNcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfaGFzRXJyb3Iocm93LCBmaWVsZHMpIHtcbiAgICByZXR1cm4gdGhpcy5fY2hlY2tGaWVsZEluVmFsaWRhdGlvbihyb3csIGZpZWxkcywgdGhpcy5zdGF0ZS5lcnJvcnMpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBUYWJsZSByb3cgaGFzIGVycm9yIGluIFwidmFsaWRhdGlvblwiIG9iamVjdFxuICAgKlxuICAgKiBAcGFyYW0gICB7c3RyaW5nfSAgICAgICAgcm93XG4gICAqIEBwYXJhbSAgIHtBcnJheXxzdHJpbmd9ICBmaWVsZHNcbiAgICogQHBhcmFtICAge1ZhbGlkYXRpb259ICAgIHZhbGlkYXRpb25cbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfY2hlY2tGaWVsZEluVmFsaWRhdGlvbihyb3csIGZpZWxkcywgdmFsaWRhdGlvbikge1xuICAgIGxldCBpO1xuXG4gICAgaWYgKCF2YWxpZGF0aW9uW3Jvd10pIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdGF0ZS5wYXJ0aWFsRXJyb3JDaGVja2luZyAmJiAhdGhpcy5zdGF0ZS5jaGFuZ2VzLmhhc093blByb3BlcnR5KHJvdykpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoZmllbGRzKSkge1xuICAgICAgZmllbGRzID0gW2ZpZWxkc107XG4gICAgfVxuXG4gICAgZm9yIChpID0gMDsgaSA8IGZpZWxkcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHZhbGlkYXRpb25bcm93XS5oYXNFcnJvcihmaWVsZHNbaV0pKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRhYmxlIHJvdyBjaGFuZ2VkIGZsYWdcbiAgICpcbiAgICogQHBhcmFtICAge3N0cmluZ30gICAgICAgIHJvdyAgICAgICAgIFJvdyBJRFxuICAgKiBAcGFyYW0gICB7QXJyYXl8c3RyaW5nfSAgW2ZpZWxkc11cbiAgICogQHJldHVybiAge2Jvb2xlYW59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfaXNDaGFuZ2VkKHJvdywgZmllbGRzKSB7XG4gICAgbGV0IGk7XG4gICAgaWYgKCF0aGlzLnN0YXRlLmNoYW5nZXNbcm93XSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChmaWVsZHMpIHtcbiAgICAgIGlmICghQXJyYXkuaXNBcnJheShmaWVsZHMpKSB7XG4gICAgICAgIGZpZWxkcyA9IFtmaWVsZHNdO1xuICAgICAgfVxuICAgICAgZm9yIChpID0gMDsgaSA8IGZpZWxkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5jaGFuZ2VzW3Jvd10uaGFzT3duUHJvcGVydHkoZmllbGRzW2ldKSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCB0YWJsZSByb3cgZXJyb3JzIG9iamVjdFxuICAgKlxuICAgKiBAcGFyYW0gICB7c3RyaW5nfSByb3cgIFJvdyBJRFxuICAgKiBAcmV0dXJuICB7VmFsaWRhdGlvbkVycm9yc31cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9nZXRSZWNvcmRFcnJvcnMocm93KSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuZXJyb3JzW3Jvd10gfHwgbmV3IFZhbGlkYXRpb25FcnJvcnMoKTtcbiAgfSxcblxuICAvKipcbiAgICogUGFzcyBjaGFuZ2VzIHRvIHRoZSB0YWJsZVxuICAgKiBUaGlzIG1ldGhvZCBtYXJrcyBjaGFuZ2VkIGZpZWxkc1xuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gICAgICByb3cgICAgICAgICBSb3cgSURcbiAgICogQHBhcmFtIHtPYmplY3R9ICAgICAgZGF0YSAgICAgICAgQ2hhbmdlZCBkYXRhXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfc2V0Um93Q2hhbmdlcyhyb3csIGRhdGEpIHtcbiAgICBjb25zdCBjaGFuZ2VzID0gdGhpcy5zdGF0ZS5jaGFuZ2VzO1xuXG4gICAgaWYgKCFjaGFuZ2VzW3Jvd10pIHtcbiAgICAgIGNoYW5nZXNbcm93XSA9IHt9O1xuICAgIH1cblxuICAgIGNoYW5nZXNbcm93XSA9IGdldFJlY29yZENoYW5nZXModGhpcy5wcm9wcy5tb2RlbCwgdGhpcy5zdGF0ZS5kYXRhW3Jvd10sIGNoYW5nZXNbcm93XSwgZGF0YSk7XG5cbiAgICBpZiAoaXNFbXB0eShjaGFuZ2VzW3Jvd10pKSB7XG4gICAgICBkZWxldGUgY2hhbmdlc1tyb3ddO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgY29sdW1uIG9mIE9iamVjdC5rZXlzKGRhdGEpKSB7XG4gICAgICB0aGlzLl9yZW5kZXJCaW5kcyhyb3csIGNvbHVtbik7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucHJvcHMub25DaGFuZ2UpIHtcbiAgICAgIHRoaXMucHJvcHMub25DaGFuZ2UodGhpcy5zdGF0ZS5jaGFuZ2VzLCB0aGlzLnN0YXRlLmRhdGEpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogR2V0IHRhYmxlIHJlY29yZCB3aXRoIGNoYW5nZXNcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJvdyBSb3cgSURcbiAgICogQHJldHVybnMge09iamVjdH0gUmVxdWlyZWQgdGFibGUgZGF0YSByZWNvcmRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9nZXRSZWNvcmRXaXRoQ2hhbmdlcyhyb3cpIHtcbiAgICBpZiAodGhpcy5zdGF0ZS5kYXRhW3Jvd10pIHtcbiAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnN0YXRlLmRhdGFbcm93XSwgdGhpcy5zdGF0ZS5jaGFuZ2VzW3Jvd10pO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfSxcblxuICAvKipcbiAgICogU2V0IHRhYmxlIGRhdGFcbiAgICpcbiAgICogQHBhcmFtIHtBcnJheX0gIGNoYW5nZXMgIENoYW5nZXNcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGFzeW5jIF9zZXREYXRhKGNoYW5nZXMpIHtcbiAgICAvLyBBcHBseSBhbGwgY2hhbmdlc1xuICAgIGZvciAoY29uc3QgW2lkLCBkYXRhXSBvZiBjaGFuZ2VzKSB7XG4gICAgICAvLyBGaXJzdGx5IHdlIHVwZGF0ZSB0aGUgc3RhdGVcbiAgICAgIHRoaXMuX3NldFJlY29yZERhdGEoaWQsIGRhdGEpO1xuICAgICAgLy8gVGhlbiB3ZSB2YWxpZGF0ZSB0aGUgdXBkYXRlZCBkYXRhIGluIHN0YXRlXG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB0aGlzLl9jaGVja1dhcm5pbmdzKGlkKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgaWYgKCEoZSBpbnN0YW5jZW9mIFRocm90dGxlRXJyb3IpKSB7XG4gICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogR2V0IHJlY29yZCBmaWVsZCB0aXRsZSB0aGF0IGNoYW5nZXMgY29sdW1uIEVkaXRvclxuICAgKlxuICAgKiBAcGFyYW0gICAgICAge3N0cmluZ30gICAgICAgIGlkICBDb2x1bW4gSURcbiAgICogQHJldHVybnMgICAgIHtBcnJheXxzdHJpbmd9ICAgICBGaWVsZHMgdGhhdCBjaGFuZ2UgRWRpdG9yXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfZ2V0QmluZFBhcmFtKGlkKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvcHMuY29sc1tpZF0uZWRpdG9yRmllbGQgfHwgaWQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRoaXMgbWV0aG9kIGNvbnZlcnRzIGRhdGEgYXJyYXkgdG8gdGhlIG9iamVjdCB3aXRoIGtleXMgcHJlc2VudGVkIGFzIHJlY29yZCBJRCBoYXNoXG4gICAqXG4gICAqIEBwYXJhbSAgIHtBcnJheX0gICAgYXJyICAgICBEYXRhIGFycmF5XG4gICAqIEByZXR1cm5zIHtPYmplY3R9ICAgIE9iamVjdCByZXN1bHRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9kYXRhQXJyYXlUb09iamVjdDogYXJyID0+IHtcbiAgICBsZXQgaTtcbiAgICBjb25zdCByZWNvcmRzID0ge307XG4gICAgY29uc3QgaW5mbyA9IHt9O1xuICAgIGxldCByb3c7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICByb3cgPSB0b0VuY29kZWRTdHJpbmcoYXJyW2ldWzBdKTtcbiAgICAgIHJlY29yZHNbcm93XSA9IGFycltpXVsxXTtcbiAgICAgIGluZm9bcm93XSA9IHtcbiAgICAgICAgaWQ6IGFycltpXVswXSxcbiAgICAgICAgaW5kZXg6IGkgLy8gU29ydCBpbmRleFxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgcmVjb3JkczogcmVjb3JkcyxcbiAgICAgIGluZm86IGluZm9cbiAgICB9O1xuICB9LFxuXG4gIC8qKlxuICAgKiBUaGlzIG1ldGhvZCBjb252ZXJ0cyBkYXRhIG9iamVjdCB0byB0aGUgYXJyYXkgd2l0aCBrZXlzIHByZXNlbnRlZCBhcyByZWNvcmQgSUQgaGFzaFxuICAgKlxuICAgKiBAcGFyYW0gICB7T2JqZWN0fSAgb2JqICAgICBEYXRhIG9iamVjdFxuICAgKiBAcmV0dXJucyB7QXJyYXl9ICAgQXJyYXkgcmVzdWx0XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfZGF0YU9iamVjdFRvQXJyYXkob2JqKSB7XG4gICAgbGV0IGk7XG4gICAgY29uc3QgYXJyID0gW107XG5cbiAgICBmb3IgKGkgaW4gb2JqKSB7XG4gICAgICBhcnIucHVzaChbXG4gICAgICAgIHRoaXMuc3RhdGUucmVjb3Jkc0luZm9baV0uaWQsXG4gICAgICAgIGNsb25lKG9ialtpXSlcbiAgICAgIF0pO1xuICAgIH1cblxuICAgIHJldHVybiBhcnI7XG4gIH0sXG5cbiAgLyoqXG4gICAqIElzIG1haW4gdGFibGUgcm93IGZsYWdcbiAgICpcbiAgICogQHBhcmFtICAge3N0cmluZ30gICAgcm93ICAgICBSb3cgSURcbiAgICogQHJldHVybiAge2Jvb2xlYW59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfaXNNYWluUm93KHJvdykge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLm1haW5JZHMuaW5kZXhPZihyb3cpID49IDA7XG4gIH0sXG5cbiAgX2lzUmVjb3JkTG9hZGVkKHJlY29yZElkKSB7XG4gICAgLy8gVE9ETyBDYW4gYmUgb3B0aW1pemVkXG4gICAgY29uc3Qgcm93ID0gdG9FbmNvZGVkU3RyaW5nKHJlY29yZElkKTtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5kYXRhLmhhc093blByb3BlcnR5KHJvdyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCB0YWJsZSByb3cgSUQgaGF2aW5nIHJlY29yZCBJRFxuICAgKlxuICAgKiBAcGFyYW0gICB7Kn0gICAgICAgcmVjb3JkSWQgICAgUmVjb3JkIElEXG4gICAqIEByZXR1cm4gIHtzdHJpbmd9ICBSb3cgSURcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9nZXRSb3dJRChyZWNvcmRJZCkge1xuICAgIGNvbnN0IHJvdyA9IHRvRW5jb2RlZFN0cmluZyhyZWNvcmRJZCk7XG5cbiAgICBpZiAoIXRoaXMuc3RhdGUuZGF0YS5oYXNPd25Qcm9wZXJ0eShyb3cpKSB7XG4gICAgICB0aHJvdyBFcnJvcignUmVjb3JkIHdpdGggdGhlIElEIGlzIG5vdCBjb250YWluZWQgaW4gdGhlIHRhYmxlLicpO1xuICAgIH1cblxuICAgIHJldHVybiByb3c7XG4gIH0sXG5cbiAgLyoqXG4gICAqIExvYWQgbW9kZWwgZGF0YVxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gICAgICBzZXR0aW5ncyAgICBSZXF1ZXN0IHBhcmFtZXRlcnNcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGFzeW5jIF9sb2FkRGF0YShzZXR0aW5ncykge1xuICAgIGxldCBkYXRhO1xuICAgIHRyeSB7XG4gICAgICBkYXRhID0gYXdhaXQgdGhpcy5wcm9wcy5tb2RlbC5yZWFkKHNldHRpbmdzKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGlmIChlcnIgJiYgdGhpcy5wcm9wcy5vbkVycm9yKSB7XG4gICAgICAgIHRoaXMucHJvcHMub25FcnJvcihlcnIpO1xuICAgICAgfVxuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnByb3BzLm9uUGFnZUxvYWQpIHtcbiAgICAgIHRoaXMucHJvcHMub25QYWdlTG9hZChkYXRhKTtcbiAgICB9XG4gICAgcmV0dXJuIGRhdGE7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEZpbmQgcmVjb3JkIElEcyB0aGF0IG5lZWQgdG8gYmUgZGlzcGxheWVkIGFkZGl0aW9uYWxseVxuICAgKlxuICAgKiBAcmV0dXJuIHtBcnJheX0gQWRkaXRpb25hbCBJRHMgYXJyYXlcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9nZXRBZGRpdGlvbmFsSWRzKCkge1xuICAgIGNvbnN0IGFkZGl0aW9uYWxJZHMgPSB0aGlzLl9nZXRSZWNvcmRzV2l0aFN0YXR1cygpO1xuICAgIGxldCBpZDtcbiAgICBmb3IgKGNvbnN0IHJvdyBpbiB0aGlzLnN0YXRlLmNoYW5nZXMpIHtcbiAgICAgIGlkID0gdGhpcy5zdGF0ZS5yZWNvcmRzSW5mb1tyb3ddLmlkO1xuICAgICAgaWYgKGFkZGl0aW9uYWxJZHMuaW5kZXhPZihpZCkgPCAwKSB7XG4gICAgICAgIGFkZGl0aW9uYWxJZHMucHVzaChpZCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhZGRpdGlvbmFsSWRzO1xuICB9LFxuXG4gIF9yZW1vdmVSZWNvcmQocm93SWQsIGNiKSB7XG4gICAgY29uc3QgdG91Y2hlZENoYW5nZXMgPSB0aGlzLnN0YXRlLmNoYW5nZXNbcm93SWRdO1xuICAgIHRoaXMuX3JlbW92ZVRSKHJvd0lkKTtcbiAgICAvLyB0aGlzLnVuc2VsZWN0UmVjb3JkKHJlY29yZElkLCB0cnVlKTsgLy8gVE9ETyBNYWtlIHVuc2VsZWN0UmVjb3JkIGJ5IHJvd0lkIG1ldGhvZFxuICAgIGRlbGV0ZSB0aGlzLnN0YXRlLmRhdGFbcm93SWRdO1xuICAgIGRlbGV0ZSB0aGlzLnN0YXRlLnJlY29yZHNJbmZvW3Jvd0lkXTtcbiAgICBkZWxldGUgdGhpcy5zdGF0ZS5jaGFuZ2VzW3Jvd0lkXTtcbiAgICBkZWxldGUgdGhpcy5zdGF0ZS53YXJuaW5nc1tyb3dJZF07XG4gICAgZGVsZXRlIHRoaXMuc3RhdGUuZXJyb3JzW3Jvd0lkXTtcbiAgICBkZWxldGUgdGhpcy5zdGF0ZS5lZGl0b3Jbcm93SWRdO1xuICAgIHRoaXMuc2V0U3RhdGUodGhpcy5zdGF0ZSwgY2IgPyBjYi5iaW5kKHRoaXMpIDogbnVsbCk7XG5cbiAgICBpZiAodG91Y2hlZENoYW5nZXMgJiYgdGhpcy5wcm9wcy5vbkNoYW5nZSkge1xuICAgICAgdGhpcy5wcm9wcy5vbkNoYW5nZSh0aGlzLnN0YXRlLmNoYW5nZXMsIHRoaXMuc3RhdGUuZGF0YSk7XG4gICAgfVxuICB9LFxuXG4gIGFzeW5jIF9jaGVja1dhcm5pbmdzKHJvdykge1xuICAgIGlmICghdGhpcy5wcm9wcy53YXJuaW5nc1ZhbGlkYXRvcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fY2hlY2tWYWxpZGF0b3JFcnJvcnMoXG4gICAgICByb3csXG4gICAgICB0aGlzLnByb3BzLndhcm5pbmdzVmFsaWRhdG9yLFxuICAgICAgdGhpcy5fZ2V0UmVjb3JkV2l0aENoYW5nZXMsXG4gICAgICB0aGlzLnN0YXRlLndhcm5pbmdzXG4gICAgKTtcbiAgfSxcblxuICBhc3luYyBfdmFsaWRhdGVSb3cocm93KSB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuX2NoZWNrVmFsaWRhdG9yRXJyb3JzKHJvdywgdGhpcy5wcm9wcy5tb2RlbCwgdGhpcy5fZ2V0UmVjb3JkQ2hhbmdlcywgdGhpcy5zdGF0ZS5lcnJvcnMpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDaGVjayBlcnJvcnMgaW4gXCJ2YWxpZGF0b3JcIiBvYmplY3RcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9ICAgICAgICByb3cgICAgICAgICBSb3cgSURcbiAgICogQHBhcmFtIHtWYWxpZGF0b3J9ICAgICB2YWxpZGF0b3IgICBWYWxpZGF0b3Igb2JqZWN0XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259ICAgICAgZ2V0RGF0YSAgICAgRGF0YSBwcm92aWRlciBmdW5jdGlvblxuICAgKiBAcGFyYW0ge3t9fSAgICAgICAgICAgIHJlc3VsdCAgICAgIFZhbGlkYXRpb24gcmVzdWx0IG9iamVjdFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYXN5bmMgX2NoZWNrVmFsaWRhdG9yRXJyb3JzKHJvdywgdmFsaWRhdG9yLCBnZXREYXRhLCByZXN1bHQpIHtcbiAgICBjb25zdCByZWNvcmRJZCA9IHRoaXMuc3RhdGUucmVjb3Jkc0luZm9bcm93XS5pZDtcbiAgICBjb25zdCByZWNvcmQgPSBnZXREYXRhKHJvdyk7XG5cbiAgICBjb25zdCB2YWxpZEVycm9ycyA9IGF3YWl0IHZhbGlkYXRvci5pc1ZhbGlkUmVjb3JkKHJlY29yZCwgcmVjb3JkSWQpO1xuXG4gICAgaWYgKGlzRXF1YWwocmVjb3JkLCBnZXREYXRhKHJvdykpKSB7XG4gICAgICBpZiAodmFsaWRFcnJvcnMuaXNFbXB0eSgpKSB7XG4gICAgICAgIGRlbGV0ZSByZXN1bHRbcm93XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdFtyb3ddID0gdmFsaWRFcnJvcnM7XG4gICAgICB9XG5cbiAgICAgIGF3YWl0IHRoaXMuX3VwZGF0ZVJvdyhyb3cpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogSGFuZGxlciBmb3IgXCJjcmVhdGVcIiBldmVudCBvZiBHcmlkTW9kZWxcbiAgICpcbiAgICogQHBhcmFtIHsqW118Kn0gcmVjb3JkSWRzXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfb25SZWNvcmRzQ3JlYXRlZChyZWNvcmRJZHMpIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkocmVjb3JkSWRzKSkge1xuICAgICAgd2FybignTm90IGFycmF5IHJlY29yZHNJZHMgaW4gXCJjcmVhdGVcIiBldmVudCBpcyBkZXByZWNhdGVkJyk7XG4gICAgICByZWNvcmRJZHMgPSBbcmVjb3JkSWRzXTtcbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZVRhYmxlKCkudGhlbihcbiAgICAgIFByb21pc2UuYWxsKFxuICAgICAgICByZWNvcmRJZHMubWFwKGFzeW5jIHJlY29yZElkID0+IHtcbiAgICAgICAgICBpZiAoIXRoaXMuX2lzUmVjb3JkTG9hZGVkKHJlY29yZElkKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IHJvd0lkID0gdGhpcy5fZ2V0Um93SUQocmVjb3JkSWQpO1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9jaGVja1dhcm5pbmdzKHJvd0lkKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBpZiAoIShlIGluc3RhbmNlb2YgVGhyb3R0bGVFcnJvcikpIHtcbiAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICApXG4gICAgKTtcbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgR3JpZERhdGFNaXhpbjtcbiIsIi8qXG4gKiBDb3B5cmlnaHQgKNGBKSAyMDE1LXByZXNlbnQsIFNvZnRJbmRleCBMTEMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IHthdCwgY2xvbmVEZWVwLCBwYXJzZVZhbHVlRnJvbUV2ZW50LCB6aXBPYmplY3R9IGZyb20gJy4uLy4uL2NvbW1vbi91dGlscyc7XG5pbXBvcnQgVGhyb3R0bGVFcnJvciBmcm9tICcuLi8uLi9jb21tb24vVGhyb3R0bGVFcnJvcic7XG5cbmNvbnN0IGZpbmRET01Ob2RlID0gUmVhY3RET00uZmluZERPTU5vZGU7XG5cbmNvbnN0IEVOVEVSX0tFWSA9IDEzO1xuY29uc3QgRVNDQVBFX0tFWSA9IDI3O1xuXG5jb25zdCBHcmlkRWRpdG9yTWl4aW4gPSB7XG5cbiAgLyoqXG4gICAqIERpc3BsYXkgRWRpdG9yIGluIGEgdGFibGUgY2VsbFxuICAgKlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50ICAgICBDZWxsIERPTSBlbGVtZW50XG4gICAqIEBwYXJhbSB7c3RyaW5nfSAgICAgIHJvdyAgICAgICAgIFJvdyBJRFxuICAgKiBAcGFyYW0ge3N0cmluZ30gICAgICBjb2x1bW4gICAgICBDb2x1bW4gSURcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9yZW5kZXJFZGl0b3I6IGZ1bmN0aW9uIChlbGVtZW50LCByb3csIGNvbHVtbikge1xuICAgIGNvbnN0IGJpbmRzID0gdGhpcy5fZ2V0QmluZFBhcmFtKGNvbHVtbik7XG4gICAgY29uc3QgcmVjb3JkID0gdGhpcy5fZ2V0UmVjb3JkV2l0aENoYW5nZXMocm93KTtcbiAgICBsZXQgdmFsdWUgPSBhdChyZWNvcmQsIGJpbmRzKTtcbiAgICBsZXQgZm9jdXNEb25lID0gZmFsc2U7XG5cbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoYmluZHMpKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlWzBdO1xuICAgIH1cblxuICAgIC8vIFByZXZlbnQgcmVjcmVhdGUgb2YgdGhlIG9wZW5lZCBFZGl0b3JcbiAgICBpZiAodGhpcy5faXNFZGl0b3JWaXNpYmxlKHJvdywgY29sdW1uKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGVkaXRvckNvbnRleHQgPSB7XG4gICAgICB1cGRhdGVGaWVsZDogKGZpZWxkLCBuZXh0VmFsdWUpID0+IHtcbiAgICAgICAgY29uc3QgZGF0YSA9IHt9O1xuICAgICAgICBkYXRhW2ZpZWxkXSA9IG5leHRWYWx1ZTtcbiAgICAgICAgdGhpcy5fc2V0Um93Q2hhbmdlcyhyb3csIGRhdGEpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBwcm9wcyA9IHtcbiAgICAgIG9uQ2hhbmdlOiAodmFsdWVzKSA9PiB7XG4gICAgICAgIHRoaXMuX29uQ2hhbmdlRWRpdG9yKHJvdywgY29sdW1uLCB2YWx1ZXMsIGVkaXRvckNvbnRleHQsIGVsZW1lbnQpO1xuICAgICAgfSxcbiAgICAgIG9uRm9jdXM6ICgpID0+IHtcbiAgICAgICAgdGhpcy5fb25Gb2N1c0VkaXRvcihyb3csIGNvbHVtbik7XG4gICAgICB9LFxuICAgICAgb25CbHVyOiAoKSA9PiB7XG4gICAgICAgIC8vIFJlbW92ZSBFZGl0b3JcbiAgICAgICAgaWYgKGZvY3VzRG9uZSkge1xuICAgICAgICAgIHRoaXMuX3VubW91bnRFZGl0b3IoZWxlbWVudCwgcm93LCBjb2x1bW4pO1xuICAgICAgICAgIHRoaXMuX29uQmx1ckVkaXRvcihyb3cpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgb25LZXlVcDogKGUpID0+IHtcbiAgICAgICAgaWYgKGZvY3VzRG9uZSAmJiBbRU5URVJfS0VZLCBFU0NBUEVfS0VZXS5pbmNsdWRlcyhlLmtleUNvZGUpKSB7XG4gICAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gRVNDQVBFX0tFWSkge1xuICAgICAgICAgICAgdGhpcy5fc2V0Um93Q2hhbmdlcyhyb3csIHsgW2NvbHVtbl06IHZhbHVlIH0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuX3VubW91bnRFZGl0b3IoZWxlbWVudCwgcm93LCBjb2x1bW4pO1xuICAgICAgICAgIHRoaXMuX29uQmx1ckVkaXRvcihyb3cpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgdmFsdWU6IHZhbHVlXG4gICAgfTtcblxuICAgIGVkaXRvckNvbnRleHQucHJvcHMgPSBwcm9wcztcblxuICAgIC8vIERpc3BsYXkgRWRpdG9yXG4gICAgY29uc3QgQ29tcG9uZW50ID0gdGhpcy5wcm9wcy5jb2xzW2NvbHVtbl0uZWRpdG9yLmNhbGwoZWRpdG9yQ29udGV4dCwgcmVjb3JkLCB0aGlzKTtcblxuICAgIGlmICghQ29tcG9uZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5zdGF0ZS5lZGl0b3JbYCR7cm93fV8ke2NvbHVtbn1gXSA9IFJlYWN0RE9NLnJlbmRlcihDb21wb25lbnQsIGVsZW1lbnQsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZGdyaWQtaW5wdXQtd3JhcHBlcicpO1xuXG4gICAgICBpZiAodHlwZW9mIHRoaXMuZm9jdXMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhpcy5mb2N1cygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZmluZERPTU5vZGUodGhpcykuZm9jdXMoKTtcbiAgICAgIH1cbiAgICAgIGZvY3VzRG9uZSA9IHRydWU7XG4gICAgfSk7XG4gIH0sXG5cbiAgX3VubW91bnRFZGl0b3IoZWxlbWVudCwgcm93LCBjb2x1bW4pIHtcbiAgICBSZWFjdERPTS51bm1vdW50Q29tcG9uZW50QXROb2RlKGVsZW1lbnQpO1xuICAgIGRlbGV0ZSB0aGlzLnN0YXRlLmVkaXRvcltgJHtyb3d9XyR7Y29sdW1ufWBdO1xuICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZGdyaWQtaW5wdXQtd3JhcHBlcicpO1xuXG4gICAgY29uc3Qgc2VsZWN0ZWQgPSB0aGlzLmlzU2VsZWN0ZWQodGhpcy5zdGF0ZS5yZWNvcmRzSW5mb1tyb3ddLmlkKTtcbiAgICB0aGlzLl9yZW5kZXJDZWxsKHJvdywgY29sdW1uLCBzZWxlY3RlZCk7XG4gIH0sXG5cbiAgX29uQ2hhbmdlRWRpdG9yOiBmdW5jdGlvbiAocm93LCBjb2x1bW4sIHZhbHVlcywgZWRpdG9yQ29udGV4dCwgZWxlbWVudCkge1xuICAgIGxldCBiaW5kcyA9IHRoaXMuX2dldEJpbmRQYXJhbShjb2x1bW4pO1xuXG4gICAgdmFsdWVzID0gY2xvbmVEZWVwKHBhcnNlVmFsdWVGcm9tRXZlbnQodmFsdWVzKSk7XG5cbiAgICBjb25zdCByZWNvcmQgPSB0aGlzLl9nZXRSZWNvcmRXaXRoQ2hhbmdlcyhyb3cpO1xuICAgIGNvbnN0IGNvbnRleHQgPSBjbG9uZURlZXAoZWRpdG9yQ29udGV4dCk7XG4gICAgY29udGV4dC5wcm9wcy52YWx1ZSA9IHZhbHVlcztcbiAgICBjb25zdCBDb21wb25lbnQgPSB0aGlzLnByb3BzLmNvbHNbY29sdW1uXS5lZGl0b3IuY2FsbChjb250ZXh0LCByZWNvcmQsIHRoaXMpO1xuICAgIHRoaXMuc3RhdGUuZWRpdG9yW2Ake3Jvd31fJHtjb2x1bW59YF0gPSBSZWFjdERPTS5yZW5kZXIoQ29tcG9uZW50LCBlbGVtZW50KTtcblxuICAgIGlmICghQXJyYXkuaXNBcnJheShiaW5kcykpIHtcbiAgICAgIGJpbmRzID0gW2JpbmRzXTtcbiAgICAgIHZhbHVlcyA9IFt2YWx1ZXNdO1xuICAgIH1cblxuICAgIHRoaXMuX3NldFJvd0NoYW5nZXMocm93LCB6aXBPYmplY3QoYmluZHMsIHZhbHVlcykpO1xuICB9LFxuXG4gIF9vbkZvY3VzRWRpdG9yOiBmdW5jdGlvbiAocm93LCBjb2x1bW4pIHtcbiAgICBpZiAoIXRoaXMuc3RhdGUuZXJyb3JzW3Jvd10pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgYmluZHMgPSB0aGlzLl9nZXRCaW5kUGFyYW0oY29sdW1uKTtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoYmluZHMpKSB7XG4gICAgICBiaW5kcyA9IFtiaW5kc107XG4gICAgfVxuXG4gICAgYmluZHMuZm9yRWFjaChmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgIHRoaXMuc3RhdGUuZXJyb3JzW3Jvd10uY2xlYXJGaWVsZChmaWVsZCk7XG4gICAgfSwgdGhpcyk7XG4gICAgaWYgKHRoaXMuc3RhdGUuZXJyb3JzW3Jvd10uaXNFbXB0eSgpKSB7XG4gICAgICBkZWxldGUgdGhpcy5zdGF0ZS5lcnJvcnNbcm93XTtcbiAgICB9XG4gIH0sXG5cbiAgYXN5bmMgX29uQmx1ckVkaXRvcihyb3cpIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5fY2hlY2tXYXJuaW5ncyhyb3cpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGlmICghKGUgaW5zdGFuY2VvZiBUaHJvdHRsZUVycm9yKSkge1xuICAgICAgICB0aHJvdyBlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRPRE8gRGVwcmVjYXRlZCBwcm9wIHJlYWx0aW1lIGluIHYwLjE3XG4gICAgaWYgKHRoaXMucHJvcHMuYXV0b1N1Ym1pdCB8fCB0aGlzLnByb3BzLnJlYWx0aW1lKSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5yZWFsdGltZSkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ0RlcHJlY2F0ZWQ6IEdyaWQgcHJvcCBcInJlYWx0aW1lXCIgcmVuYW1lZCB0byBcImF1dG9TdWJtaXRcIicpO1xuICAgICAgfVxuICAgICAgdGhpcy5zYXZlKHRoaXMucHJvcHMub25SZWFsdGltZVN1Ym1pdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHRoaXMuX3ZhbGlkYXRlUm93KHJvdyk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGlmICghKGUgaW5zdGFuY2VvZiBUaHJvdHRsZUVycm9yKSkge1xuICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMucHJvcHMub25DaGFuZ2UpIHtcbiAgICAgIHRoaXMucHJvcHMub25DaGFuZ2UodGhpcy5zdGF0ZS5jaGFuZ2VzLCB0aGlzLnN0YXRlLmRhdGEpO1xuICAgIH1cbiAgfSxcblxuICBfaXNFZGl0b3JWaXNpYmxlOiBmdW5jdGlvbiAocm93LCBjb2x1bW4pIHtcbiAgICByZXR1cm4gQm9vbGVhbih0aGlzLnN0YXRlLmVkaXRvcltgJHtyb3d9XyR7Y29sdW1ufWBdKTtcbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgR3JpZEVkaXRvck1peGluO1xuIiwiLypcbiAqIENvcHlyaWdodCAo0YEpIDIwMTUtcHJlc2VudCwgU29mdEluZGV4IExMQy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxuaW1wb3J0IFJlYWN0LCB7RnJhZ21lbnR9IGZyb20gJ3JlYWN0JztcblxuY29uc3QgR3JpZFBhZ2luYXRpb25NaXhpbiA9IHtcbiAgLyoqXG4gICAqIENoYW5nZSBldmVudCBoYW5kbGVyIG9mIGRpc3BsYXllZCByb3dzIGNvdW50IGluIGEgdGFibGVcbiAgICpcbiAgICogQHBhcmFtIHtFdmVudH0gZXZlbnRcbiAgICovXG4gIGhhbmRsZUNoYW5nZVZpZXdDb3VudDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgY29uc3QgY291bnQgPSB0aGlzLnByb3BzLnZpZXdWYXJpYW50c1tldmVudC50YXJnZXQudmFsdWVdO1xuICAgIGlmICh0aGlzLl9pc1ZpZXdDb3VudFByb3BzTW9kZSgpKSB7XG4gICAgICB0aGlzLnByb3BzLm9uQ2hhbmdlVmlld0NvdW50KGNvdW50KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5zZXRWaWV3Q291bnQoY291bnQpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBNb3ZlIHRvIGZpcnN0IHBhZ2UgZXZlbnQgaGFuZGxlclxuICAgKlxuICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudFxuICAgKi9cbiAgaGFuZGxlRmlyc3RQYWdlOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRoaXMuc2V0UGFnZSgwKTtcbiAgfSxcblxuICAvKipcbiAgICogTW92ZSB0byBsYXN0IHBhZ2UgZXZlbnQgaGFuZGxlclxuICAgKlxuICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudFxuICAgKi9cbiAgaGFuZGxlTGFzdFBhZ2U6IGZ1bmN0aW9uIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy5zZXRQYWdlKHRoaXMuZ2V0UGFnZXNDb3VudCgpIC0gMSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIE1vdmUgdG8gcHJldmlvdXMgcGFnZSBldmVudCBoYW5kbGVyXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50XG4gICAqL1xuICBoYW5kbGVQcmV2UGFnZTogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB0aGlzLnNldFBhZ2UodGhpcy5zdGF0ZS5wYWdlIC0gMSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIE1vdmUgdG8gbmV4dCBwYWdlIGV2ZW50IGhhbmRsZXJcbiAgICpcbiAgICogQHBhcmFtIHtFdmVudH0gZXZlbnRcbiAgICovXG4gIGhhbmRsZU5leHRQYWdlOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRoaXMuc2V0UGFnZSh0aGlzLnN0YXRlLnBhZ2UgKyAxKTtcbiAgfSxcblxuICAvKipcbiAgICogUmVmcmVzaCB0YWJsZSBoYW5kbGVyXG4gICAqXG4gICAqL1xuICBoYW5kbGVSZWZyZXNoVGFibGU6IGZ1bmN0aW9uIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy51cGRhdGVUYWJsZSgpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgY3VycmVudCBwYWdlIGluZGV4IG51bWJlclxuICAgKlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICBnZXRDdXJyZW50UGFnZTogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLnBhZ2U7XG4gIH0sXG5cbiAgZ2V0Q291bnRSZWNvcmRzOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuY291bnQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIE1vdmUgdG8gb3RoZXIgcGFnZVxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gIHBhZ2UgICAgIFBhZ2UgaW5kZXggbnVtYmVyXG4gICAqL1xuICBzZXRQYWdlOiBmdW5jdGlvbiAocGFnZSkge1xuICAgIHRoaXMuX3NldFBhZ2UocGFnZSk7XG4gICAgdGhpcy51cGRhdGVUYWJsZSgpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTZXQgZGlzcGxheWVkIGVsZW1lbnRzIGNvdW50XG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB2aWV3Q291bnRcbiAgICovXG4gIHNldFZpZXdDb3VudDogZnVuY3Rpb24gKHZpZXdDb3VudCkge1xuICAgIGlmICh0aGlzLl9pc1ZpZXdDb3VudFByb3BzTW9kZSgpKSB7XG4gICAgICB0aHJvdyBFcnJvcignWW91IGNhbiBub3QgdXNlIGZ1bmN0aW9uIFwic2V0Vmlld0NvdW50XCIgd2hlbiBzZXQgcHJvcCBcInZpZXdDb3VudFwiJyk7XG4gICAgfVxuXG4gICAgdGhpcy5zdGF0ZS52aWV3Q291bnQgPSB2aWV3Q291bnQ7XG4gICAgdGhpcy5zdGF0ZS5wYWdlID0gdGhpcy5fY2hlY2tQYWdlKHRoaXMuc3RhdGUucGFnZSwgdmlld0NvdW50LCB0aGlzLnN0YXRlLmNvdW50KTtcbiAgICB0aGlzLnVwZGF0ZVRhYmxlKCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCBwYWdlcyBjb3VudFxuICAgKlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICBnZXRQYWdlc0NvdW50OiBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3Qgdmlld0NvdW50ID0gdGhpcy5nZXRWaWV3Q291bnQoKTtcbiAgICByZXR1cm4gdmlld0NvdW50ID8gTWF0aC5jZWlsKHRoaXMuc3RhdGUuY291bnQgLyB2aWV3Q291bnQpIDogMTtcbiAgfSxcblxuICBnZXRWaWV3Q291bnQ6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5faXNWaWV3Q291bnRQcm9wc01vZGUoKSkge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMudmlld0NvdW50O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zdGF0ZS52aWV3Q291bnQ7XG4gIH0sXG5cbiAgX3NldFBhZ2U6IGZ1bmN0aW9uIChwYWdlKSB7XG4gICAgdGhpcy5zdGF0ZS5wYWdlID0gdGhpcy5fY2hlY2tQYWdlKHBhZ2UsIHRoaXMuc3RhdGUudmlld0NvdW50LCB0aGlzLnN0YXRlLmNvdW50KTtcbiAgfSxcblxuICBfY2hlY2tQYWdlOiAocGFnZSwgdmlldywgY291bnQpID0+IHtcbiAgICBpZiAocGFnZSAqIHZpZXcgPj0gY291bnQpIHtcbiAgICAgIHBhZ2UgPSB2aWV3ID8gTWF0aC5jZWlsKGNvdW50IC8gdmlldykgLSAxIDogMDtcbiAgICB9XG4gICAgcmV0dXJuIE1hdGgubWF4KDAsIHBhZ2UpO1xuICB9LFxuXG4gIF9pc1ZpZXdDb3VudFByb3BzTW9kZTogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnByb3BzLmhhc093blByb3BlcnR5KCd2aWV3Q291bnQnKTtcbiAgfSxcblxuICBfcmVuZGVyUGFnaW5hdGlvbjogZnVuY3Rpb24gX3JlbmRlclBhZ2luYXRpb24oKSB7XG4gICAgY29uc3Qgdmlld0NvdW50ID0gdGhpcy5nZXRWaWV3Q291bnQoKTtcbiAgICByZXR1cm4gQm9vbGVhbih2aWV3Q291bnQpICYmIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZGdyaWQtZm9vdGVyXCI+XG4gICAgICAgIHtCb29sZWFuKHRoaXMucHJvcHMudmlld1ZhcmlhbnRzKSAmJiAoXG4gICAgICAgICAgPEZyYWdtZW50PlxuICAgICAgICAgICAgPGRpdiBrZXk9XCIwXCIgY2xhc3NOYW1lPVwiZGdyaWQtcGFnaW5hdGlvbi1wYWdlLXNpemVcIj4gUGFnZSBTaXplIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBrZXk9XCIxXCIgY2xhc3NOYW1lPVwiZGdyaWQtcGFnaW5hdGlvbi12aWV3LXZhcmlhbnRzXCI+XG4gICAgICAgICAgICAgIDxzZWxlY3RcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJkZ3JpZC1wYWdpbmF0aW9uLXZpZXctdmFyaWFudHMtc2VsZWN0XCJcbiAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5wcm9wcy52aWV3VmFyaWFudHMuaW5kZXhPZih2aWV3Q291bnQpfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUNoYW5nZVZpZXdDb3VudH1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLnZpZXdWYXJpYW50cy5tYXAoKG9wdGlvbiwga2V5KSA9PiA8b3B0aW9uIGtleT17a2V5fSB2YWx1ZT17a2V5fT57b3B0aW9ufTwvb3B0aW9uPiwgdGhpcyl9XG4gICAgICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9GcmFnbWVudD5cbiAgICAgICAgKX1cbiAgICAgICAgPGEgaHJlZj1cIiNcIiBjbGFzc05hbWU9XCJidG4tZmlyc3QtcGFnZVwiIG9uQ2xpY2s9e3RoaXMuaGFuZGxlRmlyc3RQYWdlfS8+XG4gICAgICAgIDxhIGhyZWY9XCIjXCIgY2xhc3NOYW1lPVwiYnRuLXByZXYtcGFnZVwiIG9uQ2xpY2s9e3RoaXMuaGFuZGxlUHJldlBhZ2V9Lz5cbiAgICAgICAge0Jvb2xlYW4odGhpcy5zdGF0ZS5jb3VudCkgJiYgKFxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICB7KHRoaXMuc3RhdGUucGFnZSAqIHZpZXdDb3VudCkgKyAxfVxuICAgICAgICAgICAgeycgLSAnfVxuICAgICAgICAgICAge01hdGgubWluKFxuICAgICAgICAgICAgICAodGhpcy5zdGF0ZS5wYWdlICsgMSkgKiB2aWV3Q291bnQsXG4gICAgICAgICAgICAgIHRoaXMuc3RhdGUuY291bnRcbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICB7JyBvZiAnfVxuICAgICAgICAgICAge3RoaXMuc3RhdGUuY291bnR9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICAgIDxhIGhyZWY9XCIjXCIgY2xhc3NOYW1lPVwiYnRuLW5leHQtcGFnZVwiIG9uQ2xpY2s9e3RoaXMuaGFuZGxlTmV4dFBhZ2V9Lz5cbiAgICAgICAgPGEgaHJlZj1cIiNcIiBjbGFzc05hbWU9XCJidG4tbGFzdC1wYWdlXCIgb25DbGljaz17dGhpcy5oYW5kbGVMYXN0UGFnZX0vPlxuICAgICAgICA8YSBocmVmPVwiI1wiIGNsYXNzTmFtZT1cImJ0bi1yZWZyZXNoLXBhZ2VcIiBvbkNsaWNrPXt0aGlzLmhhbmRsZVJlZnJlc2hUYWJsZX0vPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgR3JpZFBhZ2luYXRpb25NaXhpbjtcbiIsIi8qXG4gKiBDb3B5cmlnaHQgKNGBKSAyMDE1LXByZXNlbnQsIFNvZnRJbmRleCBMTEMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbmltcG9ydCB7Y2xvbmUsIGluZGV4T2YsIHRvRW5jb2RlZFN0cmluZ30gZnJvbSAnLi4vLi4vY29tbW9uL3V0aWxzJztcblxuLyoqXG4gKiBHcmlkIG1peGluLCByZXNwb25zaWJsZSBmb3Igcm93cyBTZWxlY3RcbiAqL1xuY29uc3QgR3JpZFNlbGVjdE1peGluID0ge1xuICAvKipcbiAgICogU2VsZWN0IG9ubHkgdGhlc2UgcmVjb3Jkc1xuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5fSAgIHNlbGVjdGVkSWRzICAgICAgIFJlY29yZCBJRHNcbiAgICogQHBhcmFtIHtib29sZWFufSBbYmxhY2tMaXN0TW9kZV0gICBJcyBibGFjayBsaXN0IG1vZGVcbiAgICovXG4gIHNldFNlbGVjdGVkUmVjb3JkczogZnVuY3Rpb24gKHNlbGVjdGVkSWRzLCBibGFja0xpc3RNb2RlKSB7XG4gICAgdGhpcy5zdGF0ZS5zZWxlY3RlZCA9IGNsb25lKHNlbGVjdGVkSWRzKTtcbiAgICBpZiAodHlwZW9mIGJsYWNrTGlzdE1vZGUgPT09ICdib29sZWFuJykge1xuICAgICAgdGhpcy5zdGF0ZS5zZWxlY3RCbGFja0xpc3RNb2RlID0gYmxhY2tMaXN0TW9kZTtcbiAgICB9XG5cbiAgICB0aGlzLmZvcmNlVXBkYXRlKCk7XG4gICAgdGhpcy5fcmVuZGVyQm9keSgpO1xuICAgIHRoaXMuX2VtaXRDaGFuZ2VTZWxlY3RlZE51bSgpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTZWxlY3QgYSByZWNvcmRcbiAgICpcbiAgICogQHBhcmFtIHsqfSAgICByZWNvcmRJZCAgICAgICBSZWNvcmQgSURcbiAgICogQHBhcmFtIHtib29sZWFufSAgICAgICAgICAgICBbaWdub3JlQmxhY2tMaXN0PWZhbHNlXSAgICAgSWdub3JlIEJsYWNrTGlzdCBtb2RlXG4gICAqL1xuICBzZWxlY3RSZWNvcmQ6IGZ1bmN0aW9uIChyZWNvcmRJZCwgaWdub3JlQmxhY2tMaXN0KSB7XG4gICAgY29uc3Qgcm93ID0gdG9FbmNvZGVkU3RyaW5nKHJlY29yZElkKTtcblxuICAgIGlmICh0aGlzLnN0YXRlLnNlbGVjdEJsYWNrTGlzdE1vZGUgJiYgIWlnbm9yZUJsYWNrTGlzdCkge1xuICAgICAgcmV0dXJuIHRoaXMudW5zZWxlY3RSZWNvcmQocmVjb3JkSWQsIHRydWUpO1xuICAgIH1cblxuICAgIGlmIChpbmRleE9mKHRoaXMuc3RhdGUuc2VsZWN0ZWQsIHJlY29yZElkKSA8IDApIHtcbiAgICAgIHRoaXMuc3RhdGUuc2VsZWN0ZWQucHVzaChyZWNvcmRJZCk7XG5cbiAgICAgIGlmICh0aGlzLnN0YXRlLnNlbGVjdGVkLmxlbmd0aCA9PT0gdGhpcy5zdGF0ZS5jb3VudCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5zZWxlY3RCbGFja0xpc3RNb2RlKSB7XG4gICAgICAgICAgdGhpcy51bnNlbGVjdEFsbCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuc2VsZWN0QWxsKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX3VwZGF0ZVJvdyhyb3cpLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy5fZW1pdENoYW5nZVNlbGVjdGVkTnVtKCk7XG4gICAgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFVuc2VsZWN0IHJlY29yZFxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcnxzdHJpbmd9ICAgcmVjb3JkSWQgICAgICAgICAgICAgICAgICAgIFJlY29yZCBJRFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59ICAgICAgICAgW2lnbm9yZUJsYWNrTGlzdD1mYWxzZV0gICAgIElnbm9yZSBCbGFja0xpc3QgbW9kZVxuICAgKi9cbiAgdW5zZWxlY3RSZWNvcmQ6IGZ1bmN0aW9uIChyZWNvcmRJZCwgaWdub3JlQmxhY2tMaXN0KSB7XG4gICAgY29uc3Qgcm93ID0gdG9FbmNvZGVkU3RyaW5nKHJlY29yZElkKTtcblxuICAgIGlmICh0aGlzLnN0YXRlLnNlbGVjdEJsYWNrTGlzdE1vZGUgJiYgIWlnbm9yZUJsYWNrTGlzdCkge1xuICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0UmVjb3JkKHJlY29yZElkLCB0cnVlKTtcbiAgICB9XG5cbiAgICBjb25zdCBwb3MgPSBpbmRleE9mKHRoaXMuc3RhdGUuc2VsZWN0ZWQsIHJlY29yZElkKTtcbiAgICBpZiAocG9zID49IDApIHtcbiAgICAgIHRoaXMuc3RhdGUuc2VsZWN0ZWQuc3BsaWNlKHBvcywgMSk7XG4gICAgfVxuXG4gICAgdGhpcy5fdXBkYXRlUm93KHJvdykudGhlbigoKSA9PiB7XG4gICAgICB0aGlzLl9lbWl0Q2hhbmdlU2VsZWN0ZWROdW0oKTtcbiAgICB9KTtcbiAgfSxcblxuICAvKipcbiAgICogSXMgc2VsZWN0ZWQgcm93IGZsYWcgaW4gYWNjb3JkYW5jZSB3aXRoXG4gICAqIGN1cnJlbnQgc2VsZWN0IG1vZGUgKHdoaXRlbGlzdC9ibGFja2xpc3QpLlxuICAgKlxuICAgKiBAcGFyYW0gICB7bnVtYmVyfHN0cmluZ30gICAgIHJlY29yZElkICAgIFJlY29yZCBJRFxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gICAgICAgICAgIElzIHNlbGVjdGVkIHJvdyBmbGFnXG4gICAqL1xuICBpc1NlbGVjdGVkOiBmdW5jdGlvbiAocmVjb3JkSWQpIHtcbiAgICBjb25zdCBzZWxlY3RlZCA9IGluZGV4T2YodGhpcy5zdGF0ZS5zZWxlY3RlZCwgcmVjb3JkSWQpID49IDA7XG4gICAgaWYgKHRoaXMuc3RhdGUuc2VsZWN0QmxhY2tMaXN0TW9kZSkge1xuICAgICAgcmV0dXJuICFzZWxlY3RlZDtcbiAgICB9XG4gICAgcmV0dXJuIHNlbGVjdGVkO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTd2l0Y2ggXCJzZWxlY3RcIlxuICAgKlxuICAgKiBAcGFyYW0geyp9ICAgcmVjb3JkSWQgIFJlY29yZCBJRFxuICAgKi9cbiAgdG9nZ2xlU2VsZWN0ZWQ6IGZ1bmN0aW9uIChyZWNvcmRJZCkge1xuICAgIGlmICh0aGlzLnByb3BzLm9uVG9nZ2xlU2VsZWN0ZWQpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLm9uVG9nZ2xlU2VsZWN0ZWQocmVjb3JkSWQpO1xuICAgIH1cbiAgICBpZiAodGhpcy5pc1NlbGVjdGVkKHJlY29yZElkKSkge1xuICAgICAgdGhpcy51bnNlbGVjdFJlY29yZChyZWNvcmRJZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2VsZWN0UmVjb3JkKHJlY29yZElkKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFN3aXRjaCByZWNvcmRzIHNlbGVjdGlvbiBtb2RlXG4gICAqL1xuICB0b2dnbGVTZWxlY3RBbGw6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5wcm9wcy5vblRvZ2dsZVNlbGVjdEFsbCkge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMub25Ub2dnbGVTZWxlY3RBbGwoKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuc3RhdGUuc2VsZWN0QmxhY2tMaXN0TW9kZSkge1xuICAgICAgdGhpcy51bnNlbGVjdEFsbCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNlbGVjdEFsbCgpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogU2VsZWN0IGFsbCByZWNvcmRzXG4gICAqIFN3aXRjaGVzIHJlY29yZHMgc2VsZWN0aW9uIG1vZGUgdG8gXCJibGFja2xpc3RcIlxuICAgKi9cbiAgc2VsZWN0QWxsOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5zdGF0ZS5zZWxlY3RCbGFja0xpc3RNb2RlID0gdHJ1ZTtcbiAgICB0aGlzLnN0YXRlLnNlbGVjdGVkID0gW107XG4gICAgdGhpcy5fcmVuZGVyQm9keSgpO1xuICAgIHRoaXMuX2VtaXRDaGFuZ2VTZWxlY3RlZE51bSgpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBVbnNlbGVjdCBhbGwgcmVjb3JkcyBzdGF0dXNcbiAgICogU3dpdGNoZXMgcmVjb3JkcyBzZWxlY3Rpb24gbW9kZSB0byBcIndoaXRlbGlzdFwiXG4gICAqL1xuICB1bnNlbGVjdEFsbDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuc3RhdGUuc2VsZWN0QmxhY2tMaXN0TW9kZSA9IGZhbHNlO1xuICAgIHRoaXMuc3RhdGUuc2VsZWN0ZWQgPSBbXTtcbiAgICB0aGlzLl9yZW5kZXJCb2R5KCk7XG4gICAgdGhpcy5fZW1pdENoYW5nZVNlbGVjdGVkTnVtKCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCBjdXJyZW50IHJlY29yZHMgc2VsZWN0aW9uIG1vZGVcbiAgICpcbiAgICogQHJldHVybnMge2Jvb2xlYW59IFJlY29yZHMgc2VsZWN0aW9uIG1vZGUuIHRydWUgLSBCbGFja2xpc3Q7IGZhbHNlIC0gV2hpdGVsaXN0XG4gICAqL1xuICBpc1NlbGVjdEJsYWNrTW9kZTogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLnNlbGVjdEJsYWNrTGlzdE1vZGU7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCBhbGwgc2VsZWN0ZWQgcmVjb3Jkc1xuICAgKlxuICAgKiBAcmV0dXJucyB7QXJyYXl9ICAgUmVjb3JkIElEcyBhcnJheVxuICAgKi9cbiAgZ2V0QWxsU2VsZWN0ZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gY2xvbmUodGhpcy5zdGF0ZS5zZWxlY3RlZCk7XG4gIH0sXG5cbiAgZ2V0U2VsZWN0QWxsU3RhdHVzKCkge1xuICAgIHJldHVybiB0aGlzLnByb3BzLnNlbGVjdEFsbFN0YXR1cztcbiAgfSxcblxuICAvKipcbiAgICogVHJpZ2dlciBzZWxlY3RlZCByZWNvcmRzIGNvdW50IGNoYW5nZSBoYW5kbGVyXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfZW1pdENoYW5nZVNlbGVjdGVkTnVtOiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMucHJvcHMub25TZWxlY3RlZENoYW5nZSkge1xuICAgICAgbGV0IHNlbGVjdGVkQ291bnQgPSB0aGlzLnN0YXRlLnNlbGVjdGVkLmxlbmd0aDtcbiAgICAgIGlmICh0aGlzLnN0YXRlLnNlbGVjdEJsYWNrTGlzdE1vZGUpIHtcbiAgICAgICAgc2VsZWN0ZWRDb3VudCA9IHRoaXMuZ2V0Q291bnRSZWNvcmRzKCkgLSBzZWxlY3RlZENvdW50O1xuICAgICAgfVxuICAgICAgdGhpcy5wcm9wcy5vblNlbGVjdGVkQ2hhbmdlKHRoaXMuZ2V0QWxsU2VsZWN0ZWQoKSwgc2VsZWN0ZWRDb3VudCk7XG4gICAgfVxuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBHcmlkU2VsZWN0TWl4aW47XG4iLCIvKlxuICogQ29weXJpZ2h0ICjRgSkgMjAxNS1wcmVzZW50LCBTb2Z0SW5kZXggTExDLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG5pbXBvcnQge2Nsb25lLCBmaW5kSW5kZXgsIGNsb25lRGVlcH0gZnJvbSAnLi4vLi4vY29tbW9uL3V0aWxzJztcblxuY29uc3QgR3JpZFNvcnRpbmdNaXhpbiA9IHtcbiAgLyoqXG4gICAqIFNvcnQgYnkgY29sdW1uXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjb2x1bW5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGRpcmVjdGlvblxuICAgKi9cbiAgc29ydDogZnVuY3Rpb24gKGNvbHVtbiwgZGlyZWN0aW9uKSB7XG4gICAgaWYgKHRoaXMuX2lzU29ydGluZ1Byb3BzTW9kZSgpKSB7XG4gICAgICB0aHJvdyBFcnJvcignWW91IGNhbiBub3QgdXNlIGZ1bmN0aW9uIFwic29ydFwiIHdoZW4gc2V0IHByb3AgXCJzb3J0XCInKTtcbiAgICB9XG5cbiAgICBjb25zdCBzb3J0ID0ge1xuICAgICAgY29sdW1uOiBjb2x1bW4sXG4gICAgICBkaXJlY3Rpb246IGRpcmVjdGlvblxuICAgIH07XG5cbiAgICBpZiAodGhpcy5wcm9wcy5tdWx0aXBsZVNvcnRpbmcpIHtcbiAgICAgIHRoaXMuc3RhdGUuc29ydC5wdXNoKHNvcnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN0YXRlLnNvcnQgPSBzb3J0O1xuICAgIH1cblxuICAgIHRoaXMuc2V0UGFnZSgwKTtcblxuICAgIGlmICh0aGlzLnByb3BzLm9uU29ydGluZykge1xuICAgICAgdGhpcy5wcm9wcy5vblNvcnRpbmcodGhpcy5zdGF0ZS5zb3J0LCBjb2x1bW4sIGRpcmVjdGlvbik7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgc29ydCBkaXJlY3Rpb25cbiAgICpcbiAgICogQHJldHVybiB7b2JqZWN0fG9iamVjdFtdfVxuICAgKi9cbiAgZ2V0U29ydERpcmVjdGlvbjogZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl9pc1NvcnRpbmdQcm9wc01vZGUoKSkge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMuc29ydDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuc29ydDtcbiAgfSxcblxuICAvKipcbiAgICogUmVzZXQgdG8gZGVmYXVsdCBzb3J0IHBhcmFtZXRlcnNcbiAgICovXG4gIHJlc2V0U29ydGluZzogZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl9pc1NvcnRpbmdQcm9wc01vZGUoKSkge1xuICAgICAgdGhyb3cgRXJyb3IoJ1lvdSBjYW4gbm90IHVzZSBmdW5jdGlvbiBcInJlc2V0U29ydGluZ1wiIHdoZW4gc2V0IHByb3AgXCJzb3J0XCInKTtcbiAgICB9XG5cbiAgICB0aGlzLl9yZXNldFNvcnRpbmcoKTtcbiAgICB0aGlzLmZvcmNlVXBkYXRlKCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlc2V0IHRvIGRlZmF1bHQgc29ydCBwYXJhbWV0ZXJzXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfcmVzZXRTb3J0aW5nOiBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3Qgc29ydCA9IHRoaXMuX2dldERlZmF1bHRTb3J0KCk7XG5cbiAgICBpZiAodGhpcy5faXNTb3J0aW5nUHJvcHNNb2RlKCkpIHtcbiAgICAgIHRoaXMub25Tb3J0aW5nKHNvcnQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuc3RhdGUuc29ydCA9IHNvcnQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFVzZSBjb2x1bW4gbmFtZSBmb3IgdGFibGUgc29ydFxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gY29sdW1uICBDb2x1bW4gbmFtZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3NvcnRDb2w6IGZ1bmN0aW9uIChjb2x1bW4pIHtcbiAgICBsZXQgbmV3T3JkZXI7XG4gICAgY29uc3QgY3ljbGUgPSB0aGlzLnByb3BzLmNvbHNbY29sdW1uXS5zb3J0Q3ljbGU7XG4gICAgbGV0IG5ld1NvcnRzID0gY2xvbmUodGhpcy5nZXRTb3J0RGlyZWN0aW9uKCkpO1xuICAgIGNvbnN0IHNvcnRFbGVtZW50ID0ge2NvbHVtbjogY29sdW1ufTtcbiAgICBsZXQgY3VycmVudFNvcnRJbmRleDtcbiAgICBsZXQgY3VycmVudFNvcnQ7XG5cbiAgICBpZiAodGhpcy5wcm9wcy5tdWx0aXBsZVNvcnRpbmcpIHtcbiAgICAgIC8vIEZpbmQgYW4gZWxlbWVudCBhbW9uZyB0aGUgb3RoZXIgc29ydHNcbiAgICAgIGN1cnJlbnRTb3J0SW5kZXggPSBmaW5kSW5kZXgobmV3U29ydHMsIHNvcnQgPT4gc29ydC5jb2x1bW4gPT09IGNvbHVtbik7XG5cbiAgICAgIGlmIChjdXJyZW50U29ydEluZGV4ID49IDApIHtcbiAgICAgICAgY3VycmVudFNvcnQgPSBuZXdTb3J0c1tjdXJyZW50U29ydEluZGV4XTtcblxuICAgICAgICAvLyBEZXRlcm1pbmUgdGhlIGRpcmVjdGlvbiBvZiBzb3J0aW5nXG4gICAgICAgIGlmIChjdXJyZW50U29ydEluZGV4IDwgbmV3U29ydHMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgIG5ld09yZGVyID0gY3ljbGVbMF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gSWYgdGhlIGl0ZW0gaXMgdGhlIGxhc3Qgb25lLCBzZWxlY3QgdGhlIG5leHQgZGlyZWN0aW9uIG9mIHNvcnRpbmdcbiAgICAgICAgICBuZXdPcmRlciA9IGN5Y2xlWyhjeWNsZS5pbmRleE9mKGN1cnJlbnRTb3J0LmRpcmVjdGlvbikgKyAxKSAlIGN5Y2xlLmxlbmd0aF07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobmV3T3JkZXIgPT09ICdkZWZhdWx0Jykge1xuICAgICAgICAgIC8vIFJlbW92ZSBpdGVtIGZyb20gdGhlIHNvcnRzXG4gICAgICAgICAgbmV3U29ydHMuc3BsaWNlKGN1cnJlbnRTb3J0SW5kZXgsIDEpO1xuICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRTb3J0SW5kZXggPT09IG5ld1NvcnRzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAvLyBTZXQgbmV3IGRpcmVjdGlvbiwgaWYgdGhlIGxhc3QgZWxlbWVudFxuICAgICAgICAgIGN1cnJlbnRTb3J0LmRpcmVjdGlvbiA9IG5ld09yZGVyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIE1vdmUgdGhlIGl0ZW0gdG8gdGhlIGVuZCwgaWYgaXQgaXMgYWxyZWFkeSBpbiBzb3J0c1xuICAgICAgICAgIG5ld1NvcnRzLnNwbGljZShjdXJyZW50U29ydEluZGV4LCAxKTtcbiAgICAgICAgICBzb3J0RWxlbWVudC5kaXJlY3Rpb24gPSBuZXdPcmRlcjtcbiAgICAgICAgICBuZXdTb3J0cy5wdXNoKHNvcnRFbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQWRkIG5ldyBlbGVtZW50XG4gICAgICAgIHNvcnRFbGVtZW50LmRpcmVjdGlvbiA9IG5ld09yZGVyID0gY3ljbGVbMF07XG4gICAgICAgIG5ld1NvcnRzLnB1c2goc29ydEVsZW1lbnQpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAobmV3U29ydHMgJiYgbmV3U29ydHMuY29sdW1uID09PSBjb2x1bW4pIHtcbiAgICAgICAgLy8gU2VsZWN0IHRoZSBuZXh0IGRpcmVjdGlvbiBvZiBzb3J0aW5nXG4gICAgICAgIG5ld09yZGVyID0gY3ljbGVbKGN5Y2xlLmluZGV4T2YobmV3U29ydHMuZGlyZWN0aW9uKSArIDEpICUgY3ljbGUubGVuZ3RoXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ld09yZGVyID0gY3ljbGVbMF07XG4gICAgICB9XG4gICAgICBpZiAobmV3T3JkZXIgPT09ICdkZWZhdWx0Jykge1xuICAgICAgICBuZXdTb3J0cyA9IG51bGw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzb3J0RWxlbWVudC5kaXJlY3Rpb24gPSBuZXdPcmRlcjtcbiAgICAgICAgbmV3U29ydHMgPSBzb3J0RWxlbWVudDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5wcm9wcy5vblNvcnRpbmcpIHtcbiAgICAgIHRoaXMucHJvcHMub25Tb3J0aW5nKG5ld1NvcnRzLCBjb2x1bW4sIG5ld09yZGVyKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuX2lzU29ydGluZ1Byb3BzTW9kZSgpKSB7XG4gICAgICB0aGlzLnN0YXRlLnNvcnQgPSBuZXdTb3J0cztcbiAgICAgIHRoaXMuc2V0UGFnZSgwKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCBpbml0aWFsIHNvcnQgc3RhdGVcbiAgICpcbiAgICogQHJldHVybnMge0FycmF5fSBJbml0aWFsIHNvcnQgc3RhdGVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9nZXREZWZhdWx0U29ydDogZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLnByb3BzLmRlZmF1bHRTb3J0KSB7XG4gICAgICByZXR1cm4gY2xvbmVEZWVwKHRoaXMucHJvcHMuZGVmYXVsdFNvcnQpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfSxcblxuICAvKipcbiAgICogR2V0IGN1cnJlbnQgbW9kZSBhbmQgY29sdW1uIHNvcnQgcGFyYW1ldGVyXG4gICAqXG4gICAqIEBwYXJhbSAgIGNvbHVtbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb2x1bW4gSURcbiAgICogQHJldHVybnMge3tmaWVsZDoge3N0cmluZ30sIHNvcnQ6IHtzdHJpbmd9fXx7fX0gIFNvcnQgcGFyYW1ldGVyIGFuZCBtb2RlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfZ2V0U29ydFBhcmFtczogZnVuY3Rpb24gKGNvbHVtbikge1xuICAgIGNvbnN0IHBhcmFtcyA9IHtjb2x1bW46IGNvbHVtbn07XG4gICAgY29uc3Qgc29ydHMgPSB0aGlzLmdldFNvcnREaXJlY3Rpb24oKTtcbiAgICBsZXQgc29ydEluZGV4O1xuXG4gICAgaWYgKCF0aGlzLnByb3BzLmNvbHNbY29sdW1uXS5zb3J0Q3ljbGUpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGlmICghc29ydHMpIHtcbiAgICAgIHBhcmFtcy5kaXJlY3Rpb24gPSAnZGVmYXVsdCc7XG4gICAgICByZXR1cm4gcGFyYW1zO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnByb3BzLm11bHRpcGxlU29ydGluZykge1xuICAgICAgc29ydEluZGV4ID0gZmluZEluZGV4KHNvcnRzLCBzb3J0ID0+IHNvcnQuY29sdW1uID09PSBwYXJhbXMuY29sdW1uKTtcblxuICAgICAgaWYgKHNvcnRJbmRleCA8IDAgfHwgc29ydEluZGV4IDwgc29ydHMubGVuZ3RoIC0gMSkge1xuICAgICAgICBwYXJhbXMuZGlyZWN0aW9uID0gJ2RlZmF1bHQnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFyYW1zLmRpcmVjdGlvbiA9IHNvcnRzW3NvcnRJbmRleF0uZGlyZWN0aW9uO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHBhcmFtcztcbiAgICB9XG5cbiAgICBpZiAoc29ydHMuY29sdW1uID09PSBjb2x1bW4pIHtcbiAgICAgIHBhcmFtcy5kaXJlY3Rpb24gPSBzb3J0cy5kaXJlY3Rpb247XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhcmFtcy5kaXJlY3Rpb24gPSAnZGVmYXVsdCc7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBhcmFtcztcbiAgfSxcblxuICAvKipcbiAgICogRG9lcyBzb3J0aW5nIHVzaW5nIHByb3BzXG4gICAqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfaXNTb3J0aW5nUHJvcHNNb2RlOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvcHMuaGFzT3duUHJvcGVydHkoJ3NvcnQnKTtcbiAgfSxcblxuICAvKipcbiAgICogQ29udmVydCBzb3J0aW5nIHRvIGFycmF5XG4gICAqXG4gICAqIEByZXR1cm4ge09iamVjdFtdfE9iamVjdH0gc29ydHNcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9zb3J0aW5nVG9BcnJheTogZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIHRvQXJyYXkoc29ydCkge1xuICAgICAgcmV0dXJuIFtzb3J0LmNvbHVtbiwgc29ydC5kaXJlY3Rpb25dO1xuICAgIH1cblxuICAgIGNvbnN0IGRpcmVjdGlvbiA9IHRoaXMuZ2V0U29ydERpcmVjdGlvbigpO1xuICAgIGlmICghZGlyZWN0aW9uKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wcm9wcy5tdWx0aXBsZVNvcnRpbmcpIHtcbiAgICAgIGlmICghZGlyZWN0aW9uLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBkaXJlY3Rpb24ubWFwKHRvQXJyYXkpO1xuICAgIH1cblxuICAgIHJldHVybiBbdG9BcnJheShkaXJlY3Rpb24pXTtcbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgR3JpZFNvcnRpbmdNaXhpbjtcbiIsIi8qXG4gKiBDb3B5cmlnaHQgKNGBKSAyMDE1LXByZXNlbnQsIFNvZnRJbmRleCBMTEMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbmltcG9ydCB7dG9FbmNvZGVkU3RyaW5nLCBzaXplfSBmcm9tICcuLi8uLi9jb21tb24vdXRpbHMnO1xuaW1wb3J0IHtmaW5kRE9NTm9kZX0gZnJvbSAncmVhY3QtZG9tJztcblxuLyoqXG4gKiBHcmlkIG1peGluLCByZXNwb25zaWJsZSBmb3Igcm93IHN0YXR1c2VzIHByb2Nlc3NpbmdcbiAqL1xuY29uc3QgR3JpZFN0YXR1c2VzTWl4aW4gPSB7XG5cbiAgLyoqXG4gICAqIEFkZCByZWNvcmQgc3RhdHVzXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gICAgcmVjb3JkSWQgICAgUmVjb3JkIElEXG4gICAqIEBwYXJhbSB7c3RyaW5nfSAgICAgICAgICAgc3RhdHVzICAgICAgUmVjb3JkIHN0YXR1c1xuICAgKi9cbiAgYWRkUmVjb3JkU3RhdHVzOiBmdW5jdGlvbiAocmVjb3JkSWQsIHN0YXR1cykge1xuICAgIGNvbnN0IHJvdyA9IHRvRW5jb2RlZFN0cmluZyhyZWNvcmRJZCk7XG5cbiAgICAvLyBJZiBsaXN0IGRvZXMgbm90IGNvbnRhaW4gdGhlIHJlY29yZCwgbWFyayBpdHMgc3RhdHVzIGFzIGVtcHR5XG4gICAgaWYgKCF0aGlzLnN0YXRlLnN0YXR1c2VzLmhhc093blByb3BlcnR5KHJvdykpIHtcbiAgICAgIHRoaXMuc3RhdGUuc3RhdHVzZXNbcm93XSA9IHtcbiAgICAgICAgaWQ6IHJlY29yZElkLFxuICAgICAgICBzdW06IDBcbiAgICAgIH07XG4gICAgfVxuXG4gICAgdGhpcy5zdGF0ZS5zdGF0dXNlc1tyb3ddLnN1bSB8PSB0aGlzLl9nZXRTdGF0dXNCaXQoc3RhdHVzKTtcblxuICAgIGNvbnN0IGVsZW0gPSBmaW5kRE9NTm9kZSh0aGlzLmJvZHkpLnF1ZXJ5U2VsZWN0b3IoYHRyW2tleT1cIiR7cm93fVwiXWApO1xuICAgIGlmIChlbGVtKSB7XG4gICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoc3RhdHVzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy51cGRhdGVUYWJsZSgpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogQWRkIHN0YXR1cyB0byByZWNvcmRzIGdyb3VwXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXl9ICAgICAgcmVjb3JkSWRzICAgUmVjb3JkIElEcyBhcnJheVxuICAgKiBAcGFyYW0ge3N0cmluZ30gICAgIHN0YXR1cyAgICAgIFN0YXR1c1xuICAgKi9cbiAgYWRkUmVjb3JkU3RhdHVzR3JvdXA6IGZ1bmN0aW9uIChyZWNvcmRJZHMsIHN0YXR1cykge1xuICAgIGNvbnN0IGJpdCA9IHRoaXMuX2dldFN0YXR1c0JpdChzdGF0dXMpO1xuICAgIGxldCBuZWVkVGFibGVVcGRhdGU7XG5cbiAgICBmb3IgKGNvbnN0IGlkIG9mIHJlY29yZElkcykge1xuICAgICAgY29uc3Qgcm93ID0gdG9FbmNvZGVkU3RyaW5nKGlkKTtcblxuICAgICAgaWYgKCF0aGlzLnN0YXRlLnN0YXR1c2VzLmhhc093blByb3BlcnR5KHJvdykpIHtcbiAgICAgICAgdGhpcy5zdGF0ZS5zdGF0dXNlc1tyb3ddID0ge1xuICAgICAgICAgIGlkLFxuICAgICAgICAgIHN1bTogMFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICB0aGlzLnN0YXRlLnN0YXR1c2VzW3Jvd10uc3VtIHw9IGJpdDtcblxuICAgICAgaWYgKHRoaXMuc3RhdGUuZGF0YVtyb3ddKSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZVJvdyhyb3cpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgbmVlZFRhYmxlVXBkYXRlID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAobmVlZFRhYmxlVXBkYXRlKSB7XG4gICAgICB0aGlzLnVwZGF0ZVRhYmxlKCk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBSZW1vdmUgcmVjb3JkIHN0YXR1c1xuICAgKlxuICAgKiBAcGFyYW0geyp9ICAgICAgIHJlY29yZElkICAgIFJlY29yZCBJRFxuICAgKiBAcGFyYW0ge3N0cmluZ30gIHN0YXR1cyAgICAgIFJlY29yZCBzdGF0dXNcbiAgICovXG4gIHJlbW92ZVJlY29yZFN0YXR1czogZnVuY3Rpb24gKHJlY29yZElkLCBzdGF0dXMpIHtcbiAgICBjb25zdCBiaXQgPSB0aGlzLl9nZXRTdGF0dXNCaXQoc3RhdHVzKTtcbiAgICBjb25zdCByb3dJZCA9IHRvRW5jb2RlZFN0cmluZyhyZWNvcmRJZCk7XG5cbiAgICAvLyBDYW5jZWwgbWV0aG9kIGV4ZWN1dGlvbiBpZiByZWNvcmQgaGFzIG5vIHN0YXR1c2VzXG4gICAgaWYgKCF0aGlzLnN0YXRlLnN0YXR1c2VzW3Jvd0lkXSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFJlbW92ZSBzdGF0dXMgaWYgcmVjb3JkIGhhcyBpdFxuICAgIGlmICh0aGlzLnN0YXRlLnN0YXR1c2VzW3Jvd0lkXS5zdW0gJiBiaXQpIHtcbiAgICAgIHRoaXMuc3RhdGUuc3RhdHVzZXNbcm93SWRdLnN1bSBePSBiaXQ7XG4gICAgICBpZiAoIXRoaXMuc3RhdGUuc3RhdHVzZXNbcm93SWRdLnN1bSkge1xuICAgICAgICAvLyBSZW1vdmUgdGFibGUgcmVjb3JkIGlmIGl0J3MgZXh0cmFcbiAgICAgICAgaWYgKCF0aGlzLl9pc01haW5Sb3cocm93SWQpKSB7XG4gICAgICAgICAgdGhpcy5fcmVtb3ZlUmVjb3JkKHJvd0lkKTtcbiAgICAgICAgfVxuICAgICAgICBkZWxldGUgdGhpcy5zdGF0ZS5zdGF0dXNlc1tyb3dJZF07XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIGVsZW1lbnQncyBjbGFzc1xuICAgIGNvbnN0IGVsZW0gPSBmaW5kRE9NTm9kZSh0aGlzLmJvZHkpLnF1ZXJ5U2VsZWN0b3IoYHRyW2tleT1cIiR7cm93SWR9XCJdYCk7XG4gICAgaWYgKGVsZW0pIHtcbiAgICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZShzdGF0dXMpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogQ2hlY2sgcmVjb3JkIHN0YXR1cyBwcmVzZW5jZVxuICAgKlxuICAgKiBAcGFyYW0gICB7Kn0gICAgICAgcmVjb3JkSWQgICAgUmVjb3JkIElEXG4gICAqIEBwYXJhbSAgIHtudW1iZXJ9ICBzdGF0dXMgICAgICBSZWNvcmQgc3RhdHVzXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBSZWNvcmQgaGFzIHN0YXR1cyBmbGFnXG4gICAqL1xuICBoYXNSZWNvcmRTdGF0dXM6IGZ1bmN0aW9uIChyZWNvcmRJZCwgc3RhdHVzKSB7XG4gICAgY29uc3Qgcm93ID0gdG9FbmNvZGVkU3RyaW5nKHJlY29yZElkKTtcbiAgICBpZiAodGhpcy5zdGF0ZS5zdGF0dXNlc1tyb3ddKSB7XG4gICAgICByZXR1cm4gKHRoaXMuc3RhdGUuc3RhdHVzZXNbcm93XS5zdW0gJiB0aGlzLl9nZXRTdGF0dXNCaXQoc3RhdHVzKSkgPiAwO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCBhbGwgcmVjb3JkIElEcyB0aGF0IGhhdmUgdGhlIHN0YXR1c1xuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gIHN0YXR1cyAgU3RhdHVzXG4gICAqIEByZXR1cm5zIHtBcnJheX0gUmVjb3JkIElEcyBhcnJheVxuICAgKi9cbiAgZ2V0QWxsV2l0aFN0YXR1czogZnVuY3Rpb24gKHN0YXR1cykge1xuICAgIGxldCBpO1xuICAgIGNvbnN0IHJlY29yZHMgPSBbXTtcbiAgICBjb25zdCBiaXQgPSB0aGlzLl9nZXRTdGF0dXNCaXQoc3RhdHVzKTtcblxuICAgIGZvciAoaSBpbiB0aGlzLnN0YXRlLnN0YXR1c2VzKSB7XG4gICAgICBpZiAodGhpcy5zdGF0ZS5zdGF0dXNlc1tpXS5zdW0gJiBiaXQpIHtcbiAgICAgICAgcmVjb3Jkcy5wdXNoKHRoaXMuc3RhdGUuc3RhdHVzZXNbaV0uaWQpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVjb3JkcztcbiAgfSxcblxuICAvKipcbiAgICogUmVtb3ZlIHJlY29yZHMgc3RhdHVzXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSAgICAgIHN0YXR1cyAgU3RhdHVzXG4gICAqL1xuICByZW1vdmVSZWNvcmRTdGF0dXNBbGw6IGZ1bmN0aW9uIChzdGF0dXMpIHtcbiAgICBsZXQgaTtcbiAgICBjb25zdCBiaXQgPSB0aGlzLl9nZXRTdGF0dXNCaXQoc3RhdHVzKTtcblxuICAgIGZvciAoaSBpbiB0aGlzLnN0YXRlLnN0YXR1c2VzKSB7XG4gICAgICBpZiAodGhpcy5zdGF0ZS5zdGF0dXNlc1tpXS5zdW0gJiBiaXQpIHtcbiAgICAgICAgdGhpcy5zdGF0ZS5zdGF0dXNlc1tpXS5zdW0gXj0gYml0O1xuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLnN0YXRlLnN0YXR1c2VzW2ldLnN1bSkge1xuICAgICAgICBpZiAoIXRoaXMuX2lzTWFpblJvdyhpKSAmJiAhdGhpcy5faXNDaGFuZ2VkKGkpKSB7XG4gICAgICAgICAgdGhpcy5fcmVtb3ZlUmVjb3JkKGkpO1xuICAgICAgICB9XG4gICAgICAgIGRlbGV0ZSB0aGlzLnN0YXRlLnN0YXR1c2VzW2ldO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBlbGVtID0gZmluZERPTU5vZGUodGhpcy5ib2R5KS5xdWVyeVNlbGVjdG9yKGAuZGdyaWQtYm9keSB0ci4ke3N0YXR1c31gKTtcbiAgICBpZiAoZWxlbSkge1xuICAgICAgZWxlbS5jbGFzc0xpc3QucmVtb3ZlKHN0YXR1cyk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgYWxsIHN0YXR1cyBuYW1lcyB0aGF0IGFyZSBhcHBsaWVkIHRvIHRoZSByb3dcbiAgICpcbiAgICogQHBhcmFtICAge3N0cmluZ30gICAgcm93ICAgIFJvdyBJRFxuICAgKiBAcmV0dXJuICB7QXJyYXl9ICBTdGF0dXMgbmFtZXMgYXJyYXlcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9nZXRSb3dTdGF0dXNOYW1lczogZnVuY3Rpb24gKHJvdykge1xuICAgIGNvbnN0IG5hbWVzID0gW107XG4gICAgY29uc3Qgc3RhdHVzZXMgPSB0aGlzLnN0YXRlLnN0YXR1c2VzW3Jvd10gJiYgdGhpcy5zdGF0ZS5zdGF0dXNlc1tyb3ddLnN1bTtcblxuICAgIGlmICghc3RhdHVzZXMpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGkgaW4gdGhpcy5zdGF0ZS5zdGF0dXNNYXApIHtcbiAgICAgIGlmIChzdGF0dXNlcyAmIHRoaXMuc3RhdGUuc3RhdHVzTWFwW2ldKSB7XG4gICAgICAgIG5hbWVzLnB1c2goaSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG5hbWVzO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgc3RhdHVzIGFzIGEgYml0IHVzaW5nIGl0cyB0ZXh0IG5hbWVcbiAgICpcbiAgICogQHBhcmFtICAgICAgIHtzdHJpbmd9ICAgIHN0YXR1c05hbWUgIFN0YXR1cyBuYW1lXG4gICAqIEByZXR1cm4gICAgICB7bnVtYmVyfSAgICBCaXRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9nZXRTdGF0dXNCaXQ6IGZ1bmN0aW9uIChzdGF0dXNOYW1lKSB7XG4gICAgbGV0IHN0YXR1cztcbiAgICBsZXQgb2Zmc2V0O1xuXG4gICAgaWYgKHRoaXMuc3RhdGUuc3RhdHVzTWFwLmhhc093blByb3BlcnR5KHN0YXR1c05hbWUpKSB7XG4gICAgICBzdGF0dXMgPSB0aGlzLnN0YXRlLnN0YXR1c01hcFtzdGF0dXNOYW1lXTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVE9ETyBvZmZzZXQgc3RvcmVkIGluIHRoZSBzdGF0ZSwgSSByZW1vdmUgdGhlIHV0aWxzLnNpemVcbiAgICAgIG9mZnNldCA9IHNpemUodGhpcy5zdGF0ZS5zdGF0dXNNYXApO1xuICAgICAgaWYgKG9mZnNldCA+IDMwKSB7XG4gICAgICAgIHRocm93IEVycm9yKCdTdGF0dXMgcXVhbnRpdHkgZXhjZWVkcyAzMCcpO1xuICAgICAgfVxuICAgICAgc3RhdHVzID0gdGhpcy5zdGF0ZS5zdGF0dXNNYXBbc3RhdHVzTmFtZV0gPSAxIDw8IG9mZnNldDtcbiAgICB9XG5cbiAgICByZXR1cm4gc3RhdHVzO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgcmVjb3JkIElEcyB0aGF0IGhhdmUgYSBzdGF0dXNcbiAgICpcbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfZ2V0UmVjb3Jkc1dpdGhTdGF0dXM6IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBpZHMgPSBbXTtcbiAgICBsZXQgaTtcblxuICAgIGZvciAoaSBpbiB0aGlzLnN0YXRlLnN0YXR1c2VzKSB7XG4gICAgICBpZHMucHVzaCh0aGlzLnN0YXRlLnN0YXR1c2VzW2ldLmlkKTtcbiAgICB9XG4gICAgcmV0dXJuIGlkcztcbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgR3JpZFN0YXR1c2VzTWl4aW47XG4iLCIvKlxuICogQ29weXJpZ2h0ICjRgSkgMjAxNS1wcmVzZW50LCBTb2Z0SW5kZXggTExDLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG5pbXBvcnQgdG9Qcm9taXNlIGZyb20gJy4uLy4uL2NvbW1vbi90b1Byb21pc2UnO1xuaW1wb3J0IHtwYXJlbnRzLCBwaWNrLCBlc2NhcGUsIGxhc3QsIGlzRGVmaW5lZCwgcGFpcnN9IGZyb20gJy4uLy4uL2NvbW1vbi91dGlscyc7XG5pbXBvcnQge2ZpbmRET01Ob2RlfSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBUaHJvdHRsZUVycm9yIGZyb20gJy4uLy4uL2NvbW1vbi9UaHJvdHRsZUVycm9yJztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuXG5jb25zdCBHcmlkVUlNaXhpbiA9IHtcbiAgLyoqXG4gICAqIFRhYmxlIGNvbnRlbnQgY2xpY2sgZXZlbnQgaGFuZGxlclxuICAgKlxuICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudFxuICAgKi9cbiAgX2hhbmRsZUJvZHlDbGljayhldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldDtcbiAgICBjb25zdCByZWZQYXJlbnQgPSBwYXJlbnRzKHRhcmdldCwgJ1tyZWZdJylbMF07XG5cbiAgICBsZXQgZWxlbWVudDtcblxuICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkZ3JpZC1jZWxsJykpIHtcbiAgICAgIGVsZW1lbnQgPSBldmVudC50YXJnZXQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsZW1lbnQgPSBwYXJlbnRzKHRhcmdldCwgJ3RkLmRncmlkLWNlbGwnKVswXTtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICBlbGVtZW50XG4gICAgICAmJiAhKHJlZlBhcmVudCAmJiByZWZQYXJlbnQuaGFzQXR0cmlidXRlKCdkaXNhYmxlZCcpKVxuICAgICkge1xuICAgICAgdGhpcy5faGFuZGxlQ2VsbENsaWNrKGV2ZW50LCBlbGVtZW50LCAocmVmUGFyZW50IHx8IGV2ZW50LnRhcmdldCkuZ2V0QXR0cmlidXRlKCdyZWYnKSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBDZWxsIGNsaWNrIGhhbmRsZXJcbiAgICpcbiAgICogQHBhcmFtIHtFdmVudH0gICAgICAgICAgIGV2ZW50ICAgICAgIEV2ZW50IG9iamVjdFxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSAgICAgZWxlbWVudCAgICAgQ2VsbCBET00gZWxlbWVudFxuICAgKiBAcGFyYW0ge3N0cmluZ30gICAgICAgICAgcmVmICAgICAgICAgQ2xpY2sgaGFuZGxlciBuYW1lIGluIHRoZSB0YWJsZSBjb25maWd1cmF0aW9uXG4gICAqL1xuICBfaGFuZGxlQ2VsbENsaWNrKGV2ZW50LCBlbGVtZW50LCByZWYpIHtcbiAgICBjb25zdCBjb2xJZCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdrZXknKTtcbiAgICBjb25zdCByb3cgPSBlbGVtZW50LnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlKCdrZXknKTtcbiAgICBjb25zdCBjb2x1bW5Db25maWcgPSB0aGlzLnByb3BzLmNvbHNbY29sSWRdO1xuICAgIGNvbnN0IHJlY29yZElkID0gdGhpcy5zdGF0ZS5yZWNvcmRzSW5mb1tyb3ddLmlkO1xuICAgIGNvbnN0IHJlY29yZCA9IHRoaXMuX2dldFJlY29yZFdpdGhDaGFuZ2VzKHJvdyk7XG5cbiAgICAvLyBUcmlnZ2VyIGNsaWNrIGhhbmRsZXIgb24gdGhlIHRhYmxlIGNvbmZpZ3VyYXRpb25cbiAgICBpZiAocmVmKSB7XG4gICAgICBjb2x1bW5Db25maWcub25DbGlja1JlZnNbcmVmXShldmVudCwgcmVjb3JkSWQsIHJlY29yZCwgdGhpcyk7XG4gICAgfSBlbHNlIGlmIChjb2x1bW5Db25maWcub25DbGljaykge1xuICAgICAgY29sdW1uQ29uZmlnLm9uQ2xpY2soZXZlbnQsIHJlY29yZElkLCByZWNvcmQsIHRoaXMpO1xuICAgIH1cblxuICAgIC8vIE9wZW4gY2VsbCBlZGl0b3JcbiAgICBpZiAodGhpcy5wcm9wcy5jb2xzW2NvbElkXS5lZGl0b3IpIHtcbiAgICAgIHRoaXMuX3JlbmRlckVkaXRvcihlbGVtZW50LCByb3csIGNvbElkKTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gVE9ETyBEZXByZWNhdGVkXG4gIF9oYW5kbGVIZWFkZXJDZWxsQ2xpY2soY29sLCBldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldDtcbiAgICBjb25zdCByZWZQYXJlbnQgPSBwYXJlbnRzKHRhcmdldCwgJ1tyZWZdJylbMF07XG4gICAgY29uc3QgcmVmID0gKHJlZlBhcmVudCB8fCB0YXJnZXQpLmdldEF0dHJpYnV0ZSgncmVmJyk7XG4gICAgbGV0IGhhbmRsZXI7XG5cbiAgICBpZiAocmVmICYmIGNvbC5vbkNsaWNrUmVmcykge1xuICAgICAgaGFuZGxlciA9IGNvbC5vbkNsaWNrUmVmc1tyZWZdO1xuICAgICAgaWYgKGhhbmRsZXIpIHtcbiAgICAgICAgcmV0dXJuIGhhbmRsZXIoZXZlbnQsIHRoaXMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjb2wub25DbGljaykge1xuICAgICAgY29sLm9uQ2xpY2soZXZlbnQsIHRoaXMpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogRmV0Y2ggc2VydmVyIGRhdGFcbiAgICovXG4gIHVwZGF0ZVRhYmxlOiBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7c2hvd0xvYWRlcjogdHJ1ZX0pO1xuXG4gICAgaWYgKCF0aGlzLnByb3BzLm1vZGVsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgdmlld0NvdW50ID0gdGhpcy5nZXRWaWV3Q291bnQoKTtcblxuICAgIGxldCBvYmo7XG4gICAgdHJ5IHtcbiAgICAgIG9iaiA9IGF3YWl0IHRoaXMuX2xvYWREYXRhKHtcbiAgICAgICAgbGltaXQ6IHZpZXdDb3VudCxcbiAgICAgICAgb2Zmc2V0OiB0aGlzLnN0YXRlLnBhZ2UgKiB2aWV3Q291bnQsXG4gICAgICAgIHNvcnQ6IHRoaXMuX3NvcnRpbmdUb0FycmF5KCksXG4gICAgICAgIGZpZWxkczogdGhpcy5fZ2V0RmllbGRzVG9SZW5kZXIoKSxcbiAgICAgICAgZXh0cmE6IHRoaXMuX2dldEFkZGl0aW9uYWxJZHMoKVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaWYgKCEoZSBpbnN0YW5jZW9mIFRocm90dGxlRXJyb3IpKSB7XG4gICAgICAgIHRocm93IGU7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLl9pc01vdW50ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5nZXRWaWV3Q291bnQoKSAmJiAhb2JqLmhhc093blByb3BlcnR5KCdjb3VudCcpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0luY29ycmVjdCByZXNwb25zZSBmcm9tIEdyaWRNb2RlbC4gXCJyZXNwb25zZS5jb3VudFwiIG5vdCBkZWZpbmVkJyk7XG4gICAgfVxuXG4gICAgLy8gSWYgcmVxdWlyZWQgcGFnZSBpcyBub3QgaW5jbHVkZWQgaW4gdGhlIHJhbmdlIG9mIGV4aXN0aW5nIHBhZ2VzLFxuICAgIC8vIHJlcXVlc3QgZXhpc3RpbmcgaW4gYSBtb21lbnQgcGFnZVxuICAgIGNvbnN0IHBhZ2UgPSB0aGlzLl9jaGVja1BhZ2UodGhpcy5zdGF0ZS5wYWdlLCB0aGlzLmdldFZpZXdDb3VudCgpLCBvYmouY291bnQpO1xuICAgIGlmIChwYWdlICE9PSB0aGlzLnN0YXRlLnBhZ2UpIHtcbiAgICAgIHRoaXMuc3RhdGUucGFnZSA9IHBhZ2U7XG4gICAgICB0aGlzLnVwZGF0ZVRhYmxlKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZGF0YSA9IHRoaXMuX2RhdGFBcnJheVRvT2JqZWN0KG9iai5yZWNvcmRzKTtcbiAgICBjb25zdCBleHRyYSA9IHRoaXMuX2RhdGFBcnJheVRvT2JqZWN0KG9iai5leHRyYVJlY29yZHMgfHwgW10pO1xuICAgIGNvbnN0IHJlY29yZElkcyA9IE9iamVjdC5rZXlzKGRhdGEucmVjb3JkcykuY29uY2F0KE9iamVjdC5rZXlzKGV4dHJhLnJlY29yZHMpKTtcblxuICAgIGF3YWl0IHRvUHJvbWlzZSh0aGlzLnNldFN0YXRlLmJpbmQodGhpcyksIHRydWUpKHtcbiAgICAgIGRhdGE6IE9iamVjdC5hc3NpZ24oe30sIGRhdGEucmVjb3JkcywgZXh0cmEucmVjb3JkcyksXG4gICAgICBtYWluSWRzOiBPYmplY3Qua2V5cyhkYXRhLnJlY29yZHMpLFxuICAgICAgY291bnQ6IG9iai5jb3VudCxcbiAgICAgIHRvdGFsczogb2JqLnRvdGFscyxcbiAgICAgIHJlY29yZHNJbmZvOiBPYmplY3QuYXNzaWduKHt9LCBleHRyYS5pbmZvLCBkYXRhLmluZm8pLFxuICAgICAgZXJyb3JzOiBwaWNrKHRoaXMuc3RhdGUuZXJyb3JzLCByZWNvcmRJZHMpLFxuICAgICAgY2hhbmdlczogcGljayh0aGlzLnN0YXRlLmNoYW5nZXMsIHJlY29yZElkcyksXG4gICAgICBzdGF0dXNlczogcGljayh0aGlzLnN0YXRlLnN0YXR1c2VzLCByZWNvcmRJZHMpXG4gICAgfSk7XG5cbiAgICB0aGlzLl9yZW5kZXJCb2R5KCk7XG4gICAgdGhpcy5zZXRTdGF0ZSh7c2hvd0xvYWRlcjogZmFsc2V9KTtcbiAgfSxcblxuICBfZ2V0SGVhZGVyQ2VsbEhUTUwoY29sdW1uTmFtZSkge1xuICAgIGNvbnN0IGNlbGxIdG1sID0gdHlwZW9mIGNvbHVtbk5hbWUgPT09ICdmdW5jdGlvbicgPyBjb2x1bW5OYW1lKHRoaXMpIDogY29sdW1uTmFtZTtcbiAgICBpZiAoY2VsbEh0bWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICByZXR1cm4gY2VsbEh0bWw7XG4gIH0sXG5cbiAgX2VzY2FwZVJlY29yZChjb2x1bW5JZCwgcmVjb3JkKSB7XG4gICAgbGV0IGZpZWxkO1xuICAgIGxldCB0eXBlO1xuICAgIGxldCBpO1xuICAgIGNvbnN0IGVzY2FwZWRSZWNvcmQgPSB7fTtcbiAgICBjb25zdCBjb2x1bW4gPSB0aGlzLnByb3BzLmNvbHNbY29sdW1uSWRdO1xuICAgIGNvbnN0IG5lZWRFc2NhcGluZyA9ICFjb2x1bW4uaGFzT3duUHJvcGVydHkoJ2VzY2FwZScpIHx8IGNvbHVtbi5lc2NhcGU7XG4gICAgY29uc3QgZmllbGRzID0gY29sdW1uLnJlbmRlci5zbGljZSgwLCAtMSk7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgZmllbGRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBmaWVsZCA9IGZpZWxkc1tpXTtcbiAgICAgIHR5cGUgPSB0eXBlb2YgcmVjb3JkW2ZpZWxkXTtcblxuICAgICAgaWYgKG5lZWRFc2NhcGluZykge1xuICAgICAgICBpZiAodHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBlc2NhcGVkUmVjb3JkW2ZpZWxkXSA9IGVzY2FwZShyZWNvcmRbZmllbGRdKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlID09PSAnb2JqZWN0JyAmJiByZWNvcmRbZmllbGRdICYmICF0aGlzLnN0YXRlLmNvbHNXaXRoRXNjYXBlRXJyb3JzW2NvbHVtbklkXSkge1xuICAgICAgICAgIHRoaXMuc3RhdGUuY29sc1dpdGhFc2NhcGVFcnJvcnNbY29sdW1uSWRdID0gdHJ1ZTtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgYFVJS2VybmVsLkdyaWQgd2FybmluZzogYCArXG4gICAgICAgICAgICBgWW91IHNlbmQgcmVjb3JkIHdpdGggZmllbGRzIG9mIE9iamVjdCB0eXBlIGluIGVzY2FwZWQgY29sdW1uIFwiJHtjb2x1bW5JZH1cIi4gYCArXG4gICAgICAgICAgICBgVG8gdXNlIE9iamVjdHMsIHNldCBjb2x1bW4gY29uZmlnIFwiZXNjYXBlXCIgdG8gZmFsc2UsIGAgK1xuICAgICAgICAgICAgYGFuZCBlc2NhcGUgXCIke2NvbHVtbklkfVwiIGZpZWxkIGluIHJlbmRlciBmdW5jdGlvbiBieSB5b3Vyc2VsZmBcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGVzY2FwZWRSZWNvcmRbZmllbGRdID0gcmVjb3JkW2ZpZWxkXTtcbiAgICB9XG5cbiAgICByZXR1cm4gZXNjYXBlZFJlY29yZDtcbiAgfSxcblxuICAvKipcbiAgICogR2V0IHRhYmxlIGNlbGwgSFRNTFxuICAgKlxuICAgKiBAcGFyYW0gICB7bnVtYmVyfSAgIGNvbHVtbklkICAgICAgIENvbHVtbiBJRFxuICAgKiBAcGFyYW0gICB7T2JqZWN0fSAgIHJlY29yZCAgICAgICAgIFRhYmxlIHJlY29yZCAoaW5pdGlhbCByZWNvcmQgKyBjaGFuZ2VzKVxuICAgKiBAcGFyYW0gICB7Ym9vbGVhbn0gIHNlbGVjdGVkICAgICAgIFwiU2VsZWN0ZWRcIiByb3cgc3RhdHVzXG4gICAqIEBwYXJhbSAgIHtPYmplY3R9ICAgaW5pdGlhbFJlY29yZCAgSW5pdGlhbCByZWNvcmRcbiAgICogQHJldHVybnMge3N0cmluZ30gICBUYWJsZSBjZWxsIEhUTUxcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9nZXRDZWxsSFRNTChjb2x1bW5JZCwgcmVjb3JkLCBzZWxlY3RlZCwgaW5pdGlhbFJlY29yZCkge1xuICAgIGNvbnN0IHJlbmRlciA9IGxhc3QodGhpcy5wcm9wcy5jb2xzW2NvbHVtbklkXS5yZW5kZXIpO1xuICAgIGNvbnN0IGNlbGxIdG1sID0gcmVuZGVyKFxuICAgICAgdGhpcy5fZXNjYXBlUmVjb3JkKGNvbHVtbklkLCByZWNvcmQpLFxuICAgICAgc2VsZWN0ZWQsXG4gICAgICB0aGlzLl9lc2NhcGVSZWNvcmQoY29sdW1uSWQsIGluaXRpYWxSZWNvcmQpLFxuICAgICAgdGhpc1xuICAgICk7XG4gICAgcmV0dXJuIGAke2lzRGVmaW5lZChjZWxsSHRtbCkgPyBjZWxsSHRtbCA6ICcnfWA7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCB0YWJsZSByb3cgSFRNTFxuICAgKlxuICAgKiBAcGFyYW0gICAgICAge251bWJlcn0gICAgcm93SWQgICAgICAgICBSb3cgSURcbiAgICogQHBhcmFtICAgICAgIHtzdHJpbmd9ICAgIGNsYXNzTmFtZSAgIDxUUj4gY2xhc3MgYXR0cmlidXRlXG4gICAqIEByZXR1cm5zICAgICB7c3RyaW5nfSAgICBUYWJsZSByb3cgSFRNTFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2dldFJvd0hUTUwocm93SWQsIGNsYXNzTmFtZSkge1xuICAgIGxldCBjb2xJZDtcbiAgICBjb25zdCByZWNvcmQgPSB0aGlzLl9nZXRSZWNvcmRXaXRoQ2hhbmdlcyhyb3dJZCk7XG4gICAgY29uc3QgaW5pdGlhbFJlY29yZCA9IHRoaXMuc3RhdGUuZGF0YVtyb3dJZF0gfHwgbnVsbDtcbiAgICBjb25zdCBzZWxlY3RlZCA9IHRoaXMuaXNTZWxlY3RlZCh0aGlzLnN0YXRlLnJlY29yZHNJbmZvW3Jvd0lkXS5pZCk7XG4gICAgY29uc3QgZ3JpZFJvd0NsYXNzID0gY2xhc3NOYW1lcyhcbiAgICAgIGNsYXNzTmFtZSxcbiAgICAgIHRoaXMuX2dldFJvd1N0YXR1c05hbWVzKHJvd0lkKS5qb2luKCcgJyksXG4gICAgICB7J2RncmlkX19yb3dfc2VsZWN0ZWQnOiBzZWxlY3RlZH1cbiAgICApO1xuICAgIGxldCBodG1sID0gYDx0ciBrZXk9XCIke3Jvd0lkfVwiIGNsYXNzPVwiJHtncmlkUm93Q2xhc3N9XCI+YDtcbiAgICBmb3IgKGNvbElkIG9mIE9iamVjdC5rZXlzKHRoaXMucHJvcHMuY29scykpIHtcbiAgICAgIGlmICh0aGlzLl9pc1ZpZXdDb2x1bW4oY29sSWQpKSB7XG4gICAgICAgIGNvbnN0IGdyaWRDZWxsQ2xhc3MgPSBjbGFzc05hbWVzKHRoaXMuX2dldENvbHVtbkNsYXNzKGNvbElkKSwge1xuICAgICAgICAgICdkZ3JpZC1jZWxsJzogdHJ1ZSxcbiAgICAgICAgICAnZGdyaWQtY2hhbmdlZCc6IHRoaXMuX2lzQ2hhbmdlZChyb3dJZCwgdGhpcy5fZ2V0QmluZFBhcmFtKGNvbElkKSksXG4gICAgICAgICAgJ2RncmlkLWVycm9yJzogdGhpcy5faGFzRXJyb3Iocm93SWQsIHRoaXMuX2dldEJpbmRQYXJhbShjb2xJZCkpLFxuICAgICAgICAgICdkZ3JpZC13YXJuaW5nJzogdGhpcy5faGFzV2FybmluZyhyb3dJZCwgdGhpcy5fZ2V0QmluZFBhcmFtKGNvbElkKSlcbiAgICAgICAgfSk7XG4gICAgICAgIGh0bWwgKz0gYFxuICAgICAgICAgIDx0ZCBrZXk9XCIke2NvbElkfVwiIGNsYXNzPVwiJHtncmlkQ2VsbENsYXNzfVwiPlxuICAgICAgICAgICAgJHt0aGlzLl9nZXRDZWxsSFRNTChjb2xJZCwgcmVjb3JkLCBzZWxlY3RlZCwgaW5pdGlhbFJlY29yZCl9XG4gICAgICAgICAgPC90ZD5gO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYCR7aHRtbH08L3RyPmA7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlZHJhdyB0YWJsZSBjb250ZW50IHRvdGFsbHlcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9yZW5kZXJCb2R5KCkge1xuICAgIGlmICghdGhpcy5zdGF0ZS5kYXRhKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGk7XG4gICAgbGV0IHJvdztcbiAgICBsZXQgaHRtbEV4dHJhID0gJyc7XG4gICAgbGV0IGh0bWxCb2R5ID0gJyc7XG4gICAgY29uc3Qgc29ydGVkID0gcGFpcnModGhpcy5zdGF0ZS5yZWNvcmRzSW5mbykuc29ydCgoYSwgYikgPT4gYVsxXS5pbmRleCAtIGJbMV0uaW5kZXgpO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IHNvcnRlZC5sZW5ndGg7IGkrKykge1xuICAgICAgcm93ID0gc29ydGVkW2ldWzBdO1xuICAgICAgaWYgKHRoaXMuX2lzTWFpblJvdyhyb3cpKSB7XG4gICAgICAgIGh0bWxCb2R5ICs9IHRoaXMuX2dldFJvd0hUTUwocm93KTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5faXNDaGFuZ2VkKHJvdykgfHwgdGhpcy5fZ2V0Um93U3RhdHVzTmFtZXMocm93KS5sZW5ndGgpIHtcbiAgICAgICAgaHRtbEV4dHJhICs9IHRoaXMuX2dldFJvd0hUTUwocm93LCAnb3RoZXJzJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy50Qm9keS5pbm5lckhUTUwgPSBodG1sRXh0cmEgKyBodG1sQm9keTtcbiAgfSxcblxuICAvKipcbiAgICogRGlzcGxheSBtb2RlbCBjaGFuZ2VzXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByb3cgICAgICBSb3cgSURcbiAgICogQHBhcmFtIHtzdHJpbmd9IHBhcmFtICAgIE1vZGVsIHBhcmFtZXRlclxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3JlbmRlckJpbmRzKHJvdywgcGFyYW0pIHtcbiAgICAvLyBJZiBwYXJhbWV0ZXIgZG9lcyBub3QgYWZmZWN0IG9uIHRoZSByZWRyYXcsIGRvIG5vdGhpbmdcbiAgICBpZiAoIXRoaXMuX2lzRmllbGRBZmZlY3RzUmVuZGVyKHBhcmFtKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHNlbGVjdGVkID0gdGhpcy5pc1NlbGVjdGVkKHRoaXMuc3RhdGUucmVjb3Jkc0luZm9bcm93XS5pZCk7XG5cbiAgICAvLyBVcGRhdGUgY29sdW1uIGRlcGVuZGVuY2llc1xuICAgIGZvciAoY29uc3QgY29sdW1uIG9mIHRoaXMuX2dldERlcGVuZGVudENvbHVtbnMocGFyYW0pKSB7XG4gICAgICBpZiAodGhpcy5faXNWaWV3Q29sdW1uKGNvbHVtbikgJiYgIXRoaXMuX2lzRWRpdG9yVmlzaWJsZShyb3csIGNvbHVtbikpIHtcbiAgICAgICAgdGhpcy5fcmVuZGVyQ2VsbChyb3csIGNvbHVtbiwgc2VsZWN0ZWQpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBfcmVtb3ZlVFIocm93SWQpIHtcbiAgICBmaW5kRE9NTm9kZSh0aGlzLmJvZHkpLnJlbW92ZVJvdyhyb3dJZCk7XG4gIH0sXG5cbiAgX3JlbmRlclRvdGFscyhpc1Njcm9sbGFibGUpIHtcbiAgICBsZXQgdG90YWxzRGlzcGxheWVkID0gZmFsc2U7XG4gICAgbGV0IGk7XG4gICAgbGV0IGNsYXNzTmFtZTtcbiAgICBsZXQgdG90YWxzUm93SFRNTCA9ICcnO1xuICAgIGNvbnN0IGhlYWRlciA9IHRoaXMuX2Zvcm1IZWFkZXIoKTtcblxuICAgIC8vIElmIGRhdGEgZm9yIHJlc3VsdCBsaW5lIGRpc3BsYXkgZXhpc3RzLCBmb3JtIGl0XG4gICAgaWYgKHRoaXMuc3RhdGUudG90YWxzKSB7XG4gICAgICBmb3IgKGkgb2YgT2JqZWN0LmtleXModGhpcy5wcm9wcy5jb2xzKSkge1xuICAgICAgICBpZiAoIXRoaXMuX2lzVmlld0NvbHVtbihpKSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgY2xhc3NOYW1lID0gdGhpcy5wcm9wcy5jb2xzW2ldLmNsYXNzTmFtZTtcbiAgICAgICAgaWYgKGNsYXNzTmFtZSkge1xuICAgICAgICAgIHRvdGFsc1Jvd0hUTUwgKz0gYDx0ZCBjbGFzcz1cIiR7Y2xhc3NOYW1lfVwiPmA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdG90YWxzUm93SFRNTCArPSAnPHRkPic7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5zdGF0ZS50b3RhbHMuaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgICAgICB0b3RhbHNSb3dIVE1MICs9IHRoaXMuX2dldENlbGxIVE1MKGksIHRoaXMuc3RhdGUudG90YWxzLCBmYWxzZSwgdGhpcy5zdGF0ZS50b3RhbHMpO1xuICAgICAgICAgIHRvdGFsc0Rpc3BsYXllZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICB0b3RhbHNSb3dIVE1MICs9ICc8L3RkPic7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCF0b3RhbHNEaXNwbGF5ZWQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGlmIChpc1Njcm9sbGFibGUpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDx0YWJsZSBjZWxsU3BhY2luZz1cIjBcIiBjbGFzc05hbWU9XCJkZ3JpZC10b3RhbHNcIj5cbiAgICAgICAgICA8Y29sZ3JvdXA+e2hlYWRlci5jb2xHcm91cH08L2NvbGdyb3VwPlxuICAgICAgICAgIDx0ciBkYW5nZXJvdXNseVNldElubmVySFRNTD17e19faHRtbDogdG90YWxzUm93SFRNTH19Lz5cbiAgICAgICAgPC90YWJsZT5cbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDx0Zm9vdCBjbGFzc05hbWU9XCJkZ3JpZC10b3RhbHNcIj5cbiAgICAgICAgPHRyIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXt7X19odG1sOiB0b3RhbHNSb3dIVE1MfX0vPlxuICAgICAgPC90Zm9vdD5cbiAgICApO1xuICB9LFxuXG4gIF9yZW5kZXJDZWxsKHJvd0lkLCBjb2x1bW4sIGlzU2VsZWN0ZWQpIHtcbiAgICBjb25zdCBjZWxsID0gZmluZERPTU5vZGUodGhpcy5ib2R5KS5xdWVyeVNlbGVjdG9yKGB0cltrZXk9XCIke3Jvd0lkfVwiXSB0ZFtrZXk9JHtjb2x1bW59XWApO1xuICAgIGNvbnN0IGluaXRpYWxSZWNvcmQgPSB0aGlzLnN0YXRlLmRhdGFbcm93SWRdIHx8IG51bGw7XG5cbiAgICBjb25zdCBjZWxsSFRNTCA9IHRoaXMuX2dldENlbGxIVE1MKGNvbHVtbiwgdGhpcy5fZ2V0UmVjb3JkV2l0aENoYW5nZXMocm93SWQpLCBpc1NlbGVjdGVkLCBpbml0aWFsUmVjb3JkKTtcblxuICAgIHRyeSB7XG4gICAgICBjZWxsLmlubmVySFRNTCA9IGNlbGxIVE1MO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIFNvbWV0aW1lcyBpdCBpcyBwb3NzaWJsZSBhIHNpdHVhdGlvbiB3aGVuIHJlcmVuZGVyaW5nIG9mIHRoZSBjZWxsIGlzIGNhbGxlZCBpbiB0aGUgbWlkZGxlIG9mIHBlcmZvcm1pbmcgb2YgYW5cbiAgICAgIC8vIGV2ZW50IGluIHRoYXQgY2VsbCB3aGljaCBtYXkgY2F1c2UgYW4gZXJyb3IgbGlrZSBcIkRPTUV4Y2VwdGlvbjogVGhlIG5vZGUgdG8gYmUgcmVtb3ZlZCBpcyBubyBsb25nZXIgYSBjaGlsZFxuICAgICAgLy8gb2YgdGhpcyBub2RlXCIsIHNvIGp1c3QgaWdub3JlIGl0XG4gICAgfVxuXG4gICAgY2VsbC5jbGFzc0xpc3QucmVtb3ZlKCdkZ3JpZC1jaGFuZ2VkJywgJ2RncmlkLWVycm9yJywgJ2RncmlkLXdhcm5pbmcnKTtcbiAgICBjb25zdCBjZWxsQ2xhc3NMaXN0ID0gW107XG4gICAgaWYgKHRoaXMuX2lzQ2hhbmdlZChyb3dJZCwgdGhpcy5fZ2V0QmluZFBhcmFtKGNvbHVtbikpKSB7XG4gICAgICBjZWxsQ2xhc3NMaXN0LnB1c2goJ2RncmlkLWNoYW5nZWQnKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2hhc0Vycm9yKHJvd0lkLCB0aGlzLl9nZXRCaW5kUGFyYW0oY29sdW1uKSkpIHtcbiAgICAgIGNlbGxDbGFzc0xpc3QucHVzaCgnZGdyaWQtZXJyb3InKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2hhc1dhcm5pbmcocm93SWQsIHRoaXMuX2dldEJpbmRQYXJhbShjb2x1bW4pKSkge1xuICAgICAgY2VsbENsYXNzTGlzdC5wdXNoKCdkZ3JpZC13YXJuaW5nJyk7XG4gICAgfVxuICAgIGNlbGwuY2xhc3NMaXN0LmFkZCguLi5jZWxsQ2xhc3NMaXN0KTtcbiAgfSxcblxuICBhc3luYyBfdXBkYXRlUm93KHJvdykge1xuICAgIGlmICghdGhpcy5zdGF0ZS5kYXRhKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdGUuZGF0YVtyb3ddKSB7XG4gICAgICBjb25zdCBzZWxlY3RlZCA9IHRoaXMuaXNTZWxlY3RlZCh0aGlzLnN0YXRlLnJlY29yZHNJbmZvW3Jvd10uaWQpO1xuICAgICAgY29uc3Qgdmlld0NvbHVtbnMgPSBPYmplY3Qua2V5cyh0aGlzLnByb3BzLmNvbHMpLmZpbHRlcih0aGlzLl9pc1ZpZXdDb2x1bW4pO1xuXG4gICAgICBmb3IgKGNvbnN0IHZpZXdDb2x1bW4gb2Ygdmlld0NvbHVtbnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9pc0VkaXRvclZpc2libGUocm93LCB2aWV3Q29sdW1uKSkge1xuICAgICAgICAgIHRoaXMuX3JlbmRlckNlbGwocm93LCB2aWV3Q29sdW1uLCBzZWxlY3RlZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgYXdhaXQgdGhpcy51cGRhdGVUYWJsZSgpOyAvLyBUT0RPIENoZWNrIGlzIGl0IG5lZWRcbiAgICB9XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IEdyaWRVSU1peGluO1xuIiwiLypcbiAqIENvcHlyaWdodCAo0YEpIDIwMTUtcHJlc2VudCwgU29mdEluZGV4IExMQy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxuaW1wb3J0IFZhbGlkYXRpb25FcnJvcnMgZnJvbSAnLi4vLi4vY29tbW9uL3ZhbGlkYXRpb24vVmFsaWRhdGlvbkVycm9ycyc7XG5pbXBvcnQgRXZlbnRzTW9kZWwgZnJvbSAnLi4vLi4vY29tbW9uL0V2ZW50cyc7XG5cbi8qKlxuICogR3JpZCBtb2RlbCBhYnN0cmFjdGlvblxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgRXZlbnRzTW9kZWxcbiAqL1xuY2xhc3MgQWJzdHJhY3RHcmlkTW9kZWwgZXh0ZW5kcyBFdmVudHNNb2RlbCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgcmVjb3JkXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSAgICAgIHJlY29yZCAgUmVjb3JkIG9iamVjdFxuICAgKiBAYWJzdHJhY3RcbiAgICovXG4gIGNyZWF0ZSgvKnJlY29yZCovKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCByZWNvcmRzIGxpc3RcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9ICAgICAgc2V0dGluZ3MgICAgICAgICAgICAgICAgUmVxdWVzdFxuICAgKiBAcGFyYW0ge0FycmF5fSAgICAgICBzZXR0aW5ncy5maWVsZHMgICAgICAgICBGaWVsZHNcbiAgICogQHBhcmFtIHtudW1iZXJ9ICAgICAgW3NldHRpbmdzLmxpbWl0XSAgICAgICAgTGltaXRcbiAgICogQHBhcmFtIHtudW1iZXJ9ICAgICAgW3NldHRpbmdzLm9mZnNldF0gICAgICAgT2Zmc2V0XG4gICAqIEBwYXJhbSB7T2JqZWN0fSAgICAgIFtzZXR0aW5ncy5maWx0ZXJzXSAgICAgIEZpbHRlciB2YWx1ZXMgb2JqZWN0XG4gICAqIEBwYXJhbSB7QXJyYXl9ICAgICAgIFtzZXR0aW5ncy5zb3J0XSAgICAgICAgIFNvcnQgcGFyYW1ldGVyc1xuICAgKiBAcGFyYW0ge0FycmF5fSAgICAgICBbc2V0dGluZ3MuZXh0cmFdICAgICAgICBSZWNvcmQgSURzLCB3ZSBuZWVkIHRvIGdldCBmb3Igc3VyZVxuICAgKiBAYWJzdHJhY3RcbiAgICovXG4gIHJlYWQoLypzZXR0aW5ncyovKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICByZWNvcmRzOiBbXSwgLy8gUHJpbWFyeSByZWNvcmRzXG4gICAgICBpZHM6IFtdLCAvLyBFeHRyYSByZWNvcmRzXG4gICAgICBleHRyYVJlY29yZHM6IDAgLy8gSW4gYWxsIHJlY29yZHMgY291bnRcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHBhcnRpY3VsYXIgcmVjb3JkXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gICAgICAgICBpZCAgICAgIFJlY29yZCBJRFxuICAgKiBAcGFyYW0ge0FycmF5fSAgICAgZmllbGRzICBSZXF1aXJlZCBmaWVsZHNcbiAgICogQGFic3RyYWN0XG4gICAqL1xuICBnZXRSZWNvcmQoLyppZCwgZmllbGRzKi8pIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIH1cblxuICAvKipcbiAgICogQXBwbHkgcmVjb3JkIGNoYW5nZXNcbiAgICpcbiAgICogQHBhcmFtIHtBcnJheX0gICAgICAgY2hhbmdlcyAgICAgQ2hhbmdlcyBhcnJheVxuICAgKiBAYWJzdHJhY3RcbiAgICovXG4gIHVwZGF0ZSgvKmNoYW5nZXMqLykge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoW10pO1xuICB9XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRpb24gY2hlY2tcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9ICAgICAgcmVjb3JkXG4gICAqIEBwYXJhbSB7KnxudWxsfSAgICAgIHJlY29yZElkXG4gICAqIEBhYnN0cmFjdFxuICAgKi9cbiAgaXNWYWxpZFJlY29yZCgvKnJlY29yZCwgcmVjb3JkSWQqLykge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IFZhbGlkYXRpb25FcnJvcnMoKSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGFsbCBkZXBlbmRlbnQgZmllbGRzLCB0aGF0IGFyZSByZXF1aXJlZCBmb3IgdmFsaWRhdGlvblxuICAgKlxuICAgKiBAcGFyYW0gICB7QXJyYXl9ICBmaWVsZHMgICBGaWVsZHMgbGlzdFxuICAgKiBAcmV0dXJucyB7QXJyYXl9ICBEZXBlbmRlbmNpZXNcbiAgICogQGFic3RyYWN0XG4gICAqL1xuICBnZXRWYWxpZGF0aW9uRGVwZW5kZW5jeSgpIHtcbiAgICByZXR1cm4gW107XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQWJzdHJhY3RHcmlkTW9kZWw7XG4iLCIvKlxuICogQ29weXJpZ2h0ICjRgSkgMjAxNS1wcmVzZW50LCBTb2Z0SW5kZXggTExDLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG5pbXBvcnQgVmFsaWRhdG9yIGZyb20gJy4uLy4uL2NvbW1vbi92YWxpZGF0aW9uL1ZhbGlkYXRvcic7XG5pbXBvcnQgQWJzdHJhY3RHcmlkTW9kZWwgZnJvbSAnLi9BYnN0cmFjdEdyaWRNb2RlbCc7XG5pbXBvcnQge2Nsb25lRGVlcCwgd2FybiwgaXNFcXVhbCwgd2l0aG91dCwgY2xvbmUsIGZvckVhY2gsIGZpbmR9IGZyb20gJy4uLy4uL2NvbW1vbi91dGlscyc7XG5cbmNsYXNzIEdyaWRDb2xsZWN0aW9uTW9kZWwgZXh0ZW5kcyBBYnN0cmFjdEdyaWRNb2RlbCB7XG4gIC8qKlxuICAgKiBTcGVjaWZpZXMgYSBncmlkIG1vZGVsIHRoYXQgd2lsbCB3b3JrIHdpdGggYXJyYXkgZGF0YSBwYXNzZWQgdG8gaXQgYXMgYSBwYXJhbWV0ZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSAgICBbb3B0aW9uc11cbiAgICogQHBhcmFtIHtPYmplY3RbXX0gIFtvcHRpb25zLmRhdGFdICAgICAgICAgICAgICBEYXRhIGFycmF5XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259ICBbb3B0aW9ucy5maWx0ZXJzSGFuZGxlcl1cbiAgICogQHBhcmFtIHtWYWxpZGF0b3J9IFtvcHRpb25zLnZhbGlkYXRvcl1cbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gIFtvcHRpb25zLnJlcXVpcmVkRmllbGRzXVxuICAgKiBAcGFyYW0ge2Jvb2x9ICAgICAgW29wdGlvbnMudmFsaWRhdGVPbkNyZWF0ZV1cbiAgICogQGNvbnN0cnVjdG9yXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5fZGF0YSA9IGNsb25lRGVlcChvcHRpb25zLmRhdGEpIHx8IFtdO1xuICAgIHRoaXMuX2lkID0gMTtcbiAgICB0aGlzLl9maWx0ZXJzSGFuZGxlciA9IG9wdGlvbnMuZmlsdGVyc0hhbmRsZXI7XG4gICAgaWYgKG9wdGlvbnMudmFsaWRhdGlvbikge1xuICAgICAgd2FybignUHJvcGVydHkgXCJ2YWxpZGF0aW9uXCIgaXMgZGVwcmVjYXRlZCwgdXNlIFwidmFsaWRhdG9yXCIgaW5zdGVhZCcpO1xuICAgIH1cbiAgICB0aGlzLl92YWxpZGF0b3IgPSBvcHRpb25zLnZhbGlkYXRvciB8fCBvcHRpb25zLnZhbGlkYXRpb24gfHwgbmV3IFZhbGlkYXRvcigpO1xuICAgIHRoaXMuX3JlcXVpcmVkRmllbGRzID0gb3B0aW9ucy5yZXF1aXJlZEZpZWxkcyB8fCBbXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgZGF0YSBhcnJheSBpbiBtb2RlbFxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdFtdfSBkYXRhXG4gICAqL1xuICBzZXREYXRhKGRhdGEpIHtcbiAgICBjb25zdCBjdXJyZW50RGF0YSA9IHRoaXMuX2RhdGEucmVkdWNlKChyZXN1bHQsIFtyZWNvcmRJZCwgcmVjb3JkXSkgPT4ge1xuICAgICAgcmVzdWx0W0pTT04uc3RyaW5naWZ5KHJlY29yZElkKV0gPSByZWNvcmQ7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0sIHt9KTtcblxuICAgIGNvbnN0IGNyZWF0ZWRSZWNvcmRzSWRzID0gW107XG4gICAgY29uc3QgdXBkYXRlZFJlY29yZHMgPSBbXTtcblxuICAgIGNvbnN0IHJlY29yZElkcyA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBbcmVjb3JkSWQsIHJlY29yZF0gb2YgZGF0YSkge1xuICAgICAgY29uc3QgaWQgPSBKU09OLnN0cmluZ2lmeShyZWNvcmRJZCk7XG5cbiAgICAgIHJlY29yZElkcy5wdXNoKGlkKTtcblxuICAgICAgaWYgKCFjdXJyZW50RGF0YVtpZF0pIHtcbiAgICAgICAgY3JlYXRlZFJlY29yZHNJZHMucHVzaChyZWNvcmRJZCk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWlzRXF1YWwocmVjb3JkLCBjdXJyZW50RGF0YVtpZF0pKSB7XG4gICAgICAgIHVwZGF0ZWRSZWNvcmRzLnB1c2gocmVjb3JkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBkZWxldGVkUmVjb3Jkc0lkcyA9IHdpdGhvdXQoT2JqZWN0LmtleXMoY3VycmVudERhdGEpLCByZWNvcmRJZHMpLm1hcChKU09OLnBhcnNlKTtcblxuICAgIHRoaXMuX2RhdGEgPSBjbG9uZURlZXAoZGF0YSk7XG5cbiAgICBpZiAoY3JlYXRlZFJlY29yZHNJZHMubGVuZ3RoKSB7XG4gICAgICB0aGlzLnRyaWdnZXIoJ2NyZWF0ZScsIFtjcmVhdGVkUmVjb3Jkc0lkc10pO1xuICAgIH1cblxuICAgIGlmIChkZWxldGVkUmVjb3Jkc0lkcy5sZW5ndGgpIHtcbiAgICAgIHRoaXMudHJpZ2dlcignZGVsZXRlJywgZGVsZXRlZFJlY29yZHNJZHMpO1xuICAgIH1cblxuICAgIGlmICh1cGRhdGVkUmVjb3Jkcy5sZW5ndGgpIHtcbiAgICAgIHRoaXMudHJpZ2dlcigndXBkYXRlJywgdXBkYXRlZFJlY29yZHMpO1xuICAgIH1cbiAgfVxuXG4gIGdldERhdGEoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RhdGE7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGZpZWxkIGJ5IHJlY29yZCBpZCBmcm9tIGRhdGFcbiAgICpcbiAgICogQHBhcmFtICAge051bWJlcn0gIHJlY29yZElkICAgcmVjb3JkIGlkIGZvciByZW1vdmVcbiAgICogQHJldHVybnMge051bWJlcn0gIHJlY29yZElkICAgcmV0dXJuIGlkIG9mIGRlbGV0ZWQgcmVjb3JkXG4gICAqL1xuICBhc3luYyBkZWxldGUocmVjb3JkSWQpIHtcbiAgICB0aGlzLl9kYXRhID0gdGhpcy5fZGF0YS5maWx0ZXIocmVjb3JkID0+IHtcbiAgICAgIHJldHVybiByZWNvcmRbMF0gIT09IHJlY29yZElkO1xuICAgIH0pO1xuICAgIHRoaXMudHJpZ2dlcignZGVsZXRlJywgcmVjb3JkSWQpO1xuICAgIHJldHVybiByZWNvcmRJZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYSByZWNvcmQgdG8gbG9jYWwgY29sbGVjdGlvblxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gICAgICByZWNvcmQgIFJlY29yZCBvYmplY3RcbiAgICovXG4gIGFzeW5jIGNyZWF0ZShyZWNvcmQpIHtcbiAgICBsZXQgaWQgPSB0aGlzLl9nZXRJRCgpO1xuICAgIGxldCBjbG9uZWRSZWNvcmQgPSBjbG9uZShyZWNvcmQpO1xuICAgIC8vIENyZWF0ZSByZWNvcmQgd2l0aCBkZWZpbml0ZSBpZFxuICAgIGlmIChBcnJheS5pc0FycmF5KGNsb25lZFJlY29yZCkgJiYgY2xvbmVkUmVjb3JkLmxlbmd0aCA9PT0gMikge1xuICAgICAgaWQgPSBjbG9uZWRSZWNvcmRbMF07XG4gICAgICBjbG9uZWRSZWNvcmQgPSBjbG9uZWRSZWNvcmRbMV07XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBmaWVsZCBvZiB0aGlzLl9yZXF1aXJlZEZpZWxkcykge1xuICAgICAgaWYgKCFjbG9uZWRSZWNvcmQuaGFzT3duUHJvcGVydHkoZmllbGQpKSB7XG4gICAgICAgIGNsb25lZFJlY29yZFtmaWVsZF0gPSBudWxsO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHZhbGlkYXRpb25FcnJvcnMgPSBhd2FpdCB0aGlzLmlzVmFsaWRSZWNvcmQoY2xvbmVkUmVjb3JkKTtcbiAgICBpZiAoIXZhbGlkYXRpb25FcnJvcnMuaXNFbXB0eSgpKSB7XG4gICAgICB0aHJvdyB2YWxpZGF0aW9uRXJyb3JzO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9jcmVhdGUoY2xvbmVkUmVjb3JkLCBpZCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHJlY29yZHMgbGlzdFxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gICAgICBzZXR0aW5ncyAgICAgICAgICAgICAgICBSZXF1ZXN0XG4gICAqIEBwYXJhbSB7c3RyaW5nW119ICAgIHNldHRpbmdzLmZpZWxkcyAgICAgICAgIEZpZWxkc1xuICAgKiBAcGFyYW0ge251bWJlcn0gICAgICBbc2V0dGluZ3MubGltaXRdICAgICAgICBMaW1pdFxuICAgKiBAcGFyYW0ge251bWJlcn0gICAgICBbc2V0dGluZ3Mub2Zmc2V0PTBdICAgICBPZmZzZXRcbiAgICogQHBhcmFtIHtPYmplY3R9ICAgICAgW3NldHRpbmdzLmZpbHRlcnNdICAgICAgRmlsdGVyIHZhbHVlcyBvYmplY3RcbiAgICogQHBhcmFtIHtBcnJheX0gICAgICAgW3NldHRpbmdzLnNvcnRdICAgICAgICAgU29ydCBwYXJhbWV0ZXJzXG4gICAqIEBwYXJhbSB7QXJyYXl9ICAgICAgIFtzZXR0aW5ncy5pZHNdICAgICAgICAgIFJlY29yZCBJRHMsIHdlIG5lZWQgdG8gZ2V0IGZvciBzdXJlXG4gICAqL1xuICByZWFkKHNldHRpbmdzKSB7XG4gICAgbGV0IGRhdGEgPSBjbG9uZURlZXAodGhpcy5fZGF0YSk7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG5cbiAgICAvLyBHZXQgZXh0cmEgcmVjb3Jkc1xuICAgIGlmIChzZXR0aW5ncy5leHRyYSAmJiBzZXR0aW5ncy5leHRyYS5sZW5ndGggPiAwKSB7XG4gICAgICByZXN1bHQuZXh0cmFSZWNvcmRzID0gZGF0YS5maWx0ZXIocmVjb3JkID0+IHNldHRpbmdzLmV4dHJhLmluZGV4T2YocmVjb3JkWzBdKSA+PSAwKTtcbiAgICB9XG5cbiAgICAvLyBEZWxldGUgdW5uZWNlc3NhcnkgZmllbGRzXG4gICAgaWYgKHNldHRpbmdzLmZpZWxkcykge1xuICAgICAgZm9yRWFjaChyZXN1bHQuZXh0cmFSZWNvcmRzLCByZWNvcmQgPT4ge1xuICAgICAgICBmb3JFYWNoKHJlY29yZFsxXSwgKHZhbHVlLCBrZXkpID0+IHtcbiAgICAgICAgICBpZiAoc2V0dGluZ3MuZmllbGRzLmluZGV4T2Yoa2V5KSA9PT0gLTEpIHtcbiAgICAgICAgICAgIGRlbGV0ZSByZWNvcmRbMV1ba2V5XTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gU29ydGluZ1xuICAgIGlmIChzZXR0aW5ncy5zb3J0ICYmIHNldHRpbmdzLnNvcnQubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3Qgc29ydEZpZWxkID0gc2V0dGluZ3Muc29ydFswXVswXTtcbiAgICAgIGNvbnN0IHNvcnRNb2RlID0gc2V0dGluZ3Muc29ydFswXVsxXTtcblxuICAgICAgZGF0YSA9IGRhdGEuc29ydCgocHJldiwgbmV4dCkgPT4ge1xuICAgICAgICBpZiAocHJldlsxXVtzb3J0RmllbGRdIDwgbmV4dFsxXVtzb3J0RmllbGRdKSB7XG4gICAgICAgICAgcmV0dXJuIHNvcnRNb2RlID09PSAnYXNjJyA/IC0xIDogMTtcbiAgICAgICAgfSBlbHNlIGlmIChwcmV2WzFdW3NvcnRGaWVsZF0gPiBuZXh0WzFdW3NvcnRGaWVsZF0pIHtcbiAgICAgICAgICByZXR1cm4gc29ydE1vZGUgPT09ICdhc2MnID8gMSA6IC0xO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBBcHBseSBmaWx0ZXJzXG4gICAgaWYgKHRoaXMuX2ZpbHRlcnNIYW5kbGVyICYmIHNldHRpbmdzLmZpbHRlcnMpIHtcbiAgICAgIGRhdGEgPSBjbG9uZURlZXAodGhpcy5fZmlsdGVyc0hhbmRsZXIoZGF0YSwgc2V0dGluZ3MuZmlsdGVycykpO1xuICAgIH1cblxuICAgIHJlc3VsdC5jb3VudCA9IGRhdGEubGVuZ3RoO1xuXG4gICAgLy8gT2Zmc2V0IGFuZCBsaW1pdFxuICAgIGlmIChzZXR0aW5ncy5vZmZzZXQgfHwgc2V0dGluZ3MubGltaXQpIHtcbiAgICAgIGNvbnN0IHN0YXJ0ID0gc2V0dGluZ3Mub2Zmc2V0IHx8IDA7XG4gICAgICBjb25zdCBlbmQgPSAoc2V0dGluZ3Mub2Zmc2V0ICsgc2V0dGluZ3MubGltaXQpIHx8IGRhdGEubGVuZ3RoO1xuICAgICAgZGF0YSA9IGRhdGEuc2xpY2Uoc3RhcnQsIGVuZCk7XG4gICAgfVxuXG4gICAgLy8gRGVsZXRlIHVubmVjZXNzYXJ5IGZpZWxkc1xuICAgIGlmIChzZXR0aW5ncy5maWVsZHMpIHtcbiAgICAgIGZvckVhY2goZGF0YSwgcmVjb3JkID0+IHtcbiAgICAgICAgZm9yRWFjaChyZWNvcmRbMV0sICh2YWx1ZSwga2V5KSA9PiB7XG4gICAgICAgICAgaWYgKHNldHRpbmdzLmZpZWxkcy5pbmRleE9mKGtleSkgPT09IC0xKSB7XG4gICAgICAgICAgICBkZWxldGUgcmVjb3JkWzFdW2tleV07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlc3VsdC5yZWNvcmRzID0gZGF0YTtcblxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHBhcnRpY3VsYXIgcmVjb3JkXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30gICBpZCAgICAgIFJlY29yZCBJRFxuICAgKiBAcGFyYW0ge0FycmF5fSAgICAgICAgICAgZmllbGRzICBSZXF1aXJlZCBmaWVsZHNcbiAgICovXG4gIGdldFJlY29yZChpZCwgZmllbGRzKSB7XG4gICAgY29uc3QgcmVjb3JkID0gY2xvbmVEZWVwKHRoaXMuX2dldFJlY29yZEJ5SUQoaWQpKTtcbiAgICBpZiAoIXJlY29yZCkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignUmVjb3JkIG5vdCBmb3VuZC4nKSk7XG4gICAgfVxuXG4gICAgY29uc3QgcmV0dXJuUmVjb3JkID0gcmVjb3JkWzFdO1xuXG4gICAgLy8gRGVsZXRpbmcgdW51c2VkIGZpZWxkc1xuICAgIGlmIChmaWVsZHMpIHtcbiAgICAgIGZvckVhY2gocmV0dXJuUmVjb3JkLCAodmFsdWUsIGtleSkgPT4ge1xuICAgICAgICBpZiAoZmllbGRzLmluZGV4T2Yoa2V5KSA9PT0gLTEpIHtcbiAgICAgICAgICBkZWxldGUgcmV0dXJuUmVjb3JkW2tleV07XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmV0dXJuUmVjb3JkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBcHBseSByZWNvcmQgY2hhbmdlc1xuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5fSAgICAgICBjaGFuZ2VzICAgICBDaGFuZ2VzIGFycmF5XG4gICAqIEBhYnN0cmFjdFxuICAgKi9cbiAgYXN5bmMgdXBkYXRlKGNoYW5nZXMpIHtcbiAgICBpZiAoIWNoYW5nZXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgY29uc3QgYXBwbGllZENoYW5nZXMgPSBbXTtcblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgY2hhbmdlcy5tYXAoXG4gICAgICAgIGFzeW5jIChbcmVjb3JkSWQsIGNoYW5nZXNdKSA9PiB7XG4gICAgICAgICAgY29uc3QgdmFsaWRFcnJvcnMgPSBhd2FpdCB0aGlzLmlzVmFsaWRSZWNvcmQoY2hhbmdlcyk7XG5cbiAgICAgICAgICBpZiAoIXZhbGlkRXJyb3JzLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgcmV0dXJuIFtyZWNvcmRJZCwgdmFsaWRFcnJvcnNdO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGFwcGxpZWRDaGFuZ2VzLnB1c2goW3JlY29yZElkLCBjaGFuZ2VzXSk7XG4gICAgICAgICAgcmV0dXJuIFtyZWNvcmRJZCwgY2hhbmdlc107XG4gICAgICAgIH1cbiAgICAgIClcbiAgICApO1xuXG4gICAgaWYgKGFwcGxpZWRDaGFuZ2VzLmxlbmd0aCkge1xuICAgICAgLy8gQXBwbHkgY2hhbmdlc1xuICAgICAgZm9yIChjb25zdCBbcmVjb3JkSWQsIGNoYW5nZXNdIG9mIGFwcGxpZWRDaGFuZ2VzKSB7XG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5fZ2V0UmVjb3JkQnlJRChyZWNvcmRJZClbMV0sIGNoYW5nZXMpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnRyaWdnZXIoJ3VwZGF0ZScsIGFwcGxpZWRDaGFuZ2VzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRpb24gY2hlY2tcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9ICAgICAgcmVjb3JkXG4gICAqL1xuICBpc1ZhbGlkUmVjb3JkKHJlY29yZCkge1xuICAgIHJldHVybiB0aGlzLl92YWxpZGF0b3IuaXNWYWxpZFJlY29yZChyZWNvcmQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbGwgZGVwZW5kZW50IGZpZWxkcywgdGhhdCBhcmUgcmVxdWlyZWQgZm9yIHZhbGlkYXRpb25cbiAgICpcbiAgICogQHBhcmFtICAge0FycmF5fSAgZmllbGRzICAgRmllbGRzIGxpc3RcbiAgICogQHJldHVybnMge0FycmF5fSAgRGVwZW5kZW5jaWVzXG4gICAqL1xuICBnZXRWYWxpZGF0aW9uRGVwZW5kZW5jeShmaWVsZHMpIHtcbiAgICByZXR1cm4gdGhpcy5fdmFsaWRhdG9yLmdldFZhbGlkYXRpb25EZXBlbmRlbmN5KGZpZWxkcyk7XG4gIH1cblxuICBfZ2V0SUQoKSB7XG4gICAgd2hpbGUgKHRoaXMuX2dldFJlY29yZEJ5SUQodGhpcy5faWQpKSB7XG4gICAgICB0aGlzLl9pZCsrO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5faWQrKztcbiAgfVxuXG4gIF9nZXRSZWNvcmRCeUlEKGlkKSB7XG4gICAgcmV0dXJuIGZpbmQodGhpcy5fZGF0YSwgcmVjb3JkID0+IHJlY29yZFswXSA9PT0gaWQpO1xuICB9XG5cbiAgX2NyZWF0ZShyZWNvcmQsIGlkKSB7XG4gICAgdGhpcy5fZGF0YSA9IFsuLi50aGlzLl9kYXRhLCBbaWQsIHJlY29yZF1dO1xuICAgIHRoaXMudHJpZ2dlcignY3JlYXRlJywgW2lkXSk7XG4gICAgcmV0dXJuIGlkO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEdyaWRDb2xsZWN0aW9uTW9kZWw7XG4iLCIvKlxuICogQ29weXJpZ2h0ICjRgSkgMjAxNS1wcmVzZW50LCBTb2Z0SW5kZXggTExDLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG5pbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCBWYWxpZGF0aW9uRXJyb3JzIGZyb20gJy4uLy4uL2NvbW1vbi92YWxpZGF0aW9uL1ZhbGlkYXRpb25FcnJvcnMnO1xuaW1wb3J0IHthc3luY0hhbmRsZXIsIHBhcnNlSnNvbn0gZnJvbSAnLi4vLi4vY29tbW9uL3V0aWxzJztcbmltcG9ydCBtdWx0ZXIgZnJvbSAnbXVsdGVyJztcblxuY29uc3QgREVGQVVMVF9NQVhfRklMRV9TSVpFID0gMTA0ODU3NjAwOyAvLyAxMDAgTUJcblxuLyoqXG4gKiBGb3JtIEV4cHJlc3MgQVBJIGZvciBHcmlkIG1vZGVsIGludGVyYWN0aW9uXG4gKlxuICogQHJldHVybiB7R3JpZEV4cHJlc3NBcGl9XG4gKiBAY29uc3RydWN0b3JcbiAqL1xuY2xhc3MgR3JpZEV4cHJlc3NBcGkge1xuICBzdGF0aWMgY3JlYXRlKG11bHRpcGFydEZvcm1EYXRhLCBtYXhGaWxlU2l6ZSkge1xuICAgIHJldHVybiBuZXcgR3JpZEV4cHJlc3NBcGkobXVsdGlwYXJ0Rm9ybURhdGEsIG1heEZpbGVTaXplKTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKG11bHRpcGFydEZvcm1EYXRhID0gZmFsc2UsIG1heEZpbGVTaXplID0gREVGQVVMVF9NQVhfRklMRV9TSVpFKSB7XG4gICAgY29uc3QgdXBsb2FkID0gbXVsdGVyKHtcbiAgICAgIGxpbWl0czoge1xuICAgICAgICBmaWxlU2l6ZTogbWF4RmlsZVNpemVcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMubWlkZGxld2FyZXMgPSB7XG4gICAgICByZWFkR2V0OiBbYXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgICAgICBjb25zdCBzZXR0aW5ncyA9IHt9O1xuICAgICAgICBpZiAocmVxLnF1ZXJ5LmxpbWl0KSB7XG4gICAgICAgICAgc2V0dGluZ3MubGltaXQgPSBwYXJzZUludChyZXEucXVlcnkubGltaXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXEucXVlcnkub2Zmc2V0KSB7XG4gICAgICAgICAgc2V0dGluZ3Mub2Zmc2V0ID0gcGFyc2VJbnQocmVxLnF1ZXJ5Lm9mZnNldCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcS5xdWVyeS5zb3J0KSB7XG4gICAgICAgICAgc2V0dGluZ3Muc29ydCA9IEpTT04ucGFyc2UocmVxLnF1ZXJ5LnNvcnQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXEucXVlcnkuZmllbGRzKSB7XG4gICAgICAgICAgc2V0dGluZ3MuZmllbGRzID0gSlNPTi5wYXJzZShyZXEucXVlcnkuZmllbGRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVxLnF1ZXJ5LmV4dHJhKSB7XG4gICAgICAgICAgc2V0dGluZ3MuZXh0cmEgPSBKU09OLnBhcnNlKHJlcS5xdWVyeS5leHRyYSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcS5xdWVyeS5maWx0ZXJzKSB7XG4gICAgICAgICAgc2V0dGluZ3MuZmlsdGVycyA9IEpTT04ucGFyc2UocmVxLnF1ZXJ5LmZpbHRlcnMpO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMuX2NvbW1vblJlYWRNaWRkbGV3YXJlKHJlcSwgcmVzLCBuZXh0LCBzZXR0aW5ncyk7XG4gICAgICB9KV0sXG4gICAgICByZWFkUG9zdDogW2FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSB7fTtcbiAgICAgICAgaWYgKHJlcS5ib2R5LmxpbWl0KSB7XG4gICAgICAgICAgc2V0dGluZ3MubGltaXQgPSBwYXJzZUludChyZXEuYm9keS5saW1pdCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcS5ib2R5Lm9mZnNldCkge1xuICAgICAgICAgIHNldHRpbmdzLm9mZnNldCA9IHBhcnNlSW50KHJlcS5ib2R5Lm9mZnNldCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcS5ib2R5LnNvcnQpIHtcbiAgICAgICAgICBzZXR0aW5ncy5zb3J0ID0gcmVxLmJvZHkuc29ydDtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVxLmJvZHkuZmllbGRzKSB7XG4gICAgICAgICAgc2V0dGluZ3MuZmllbGRzID0gcmVxLmJvZHkuZmllbGRzO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXEuYm9keS5leHRyYSkge1xuICAgICAgICAgIHNldHRpbmdzLmV4dHJhID0gcmVxLmJvZHkuZXh0cmE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcS5ib2R5LmZpbHRlcnMpIHtcbiAgICAgICAgICBzZXR0aW5ncy5maWx0ZXJzID0gcmVxLmJvZHkuZmlsdGVycztcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLl9jb21tb25SZWFkTWlkZGxld2FyZShyZXEsIHJlcywgbmV4dCwgc2V0dGluZ3MpO1xuICAgICAgfSldLFxuICAgICAgdmFsaWRhdGU6IFthc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgICAgIGNvbnN0IG1vZGVsID0gdGhpcy5fZ2V0TW9kZWwocmVxLCByZXMpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9yZXN1bHQoJ3ZhbGlkYXRlJyk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgZXJyb3JzID0gYXdhaXQgbW9kZWwuaXNWYWxpZFJlY29yZChyZXEuYm9keS5yZWNvcmQsIHJlcS5ib2R5LmlkKTtcbiAgICAgICAgICByZXN1bHQobnVsbCwgZXJyb3JzLCByZXEsIHJlcywgbmV4dCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIHJlc3VsdChlcnIsIG51bGwsIHJlcSwgcmVzLCBuZXh0KTtcbiAgICAgICAgfVxuICAgICAgfSldLFxuICAgICAgZ2V0UmVjb3JkOiBbYXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgICAgICBjb25zdCBjb2xzID0gcmVxLnF1ZXJ5LmNvbHMgPyBKU09OLnBhcnNlKHJlcS5xdWVyeS5jb2xzKSA6IG51bGw7XG4gICAgICAgIGNvbnN0IHJlY29yZElkID0gcmVxLnBhcmFtcy5yZWNvcmRJZCA/IEpTT04ucGFyc2UocmVxLnBhcmFtcy5yZWNvcmRJZCkgOiBudWxsO1xuICAgICAgICBjb25zdCBtb2RlbCA9IHRoaXMuX2dldE1vZGVsKHJlcSwgcmVzKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fcmVzdWx0KCdnZXRSZWNvcmQnKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG1vZGVsLmdldFJlY29yZChyZWNvcmRJZCwgY29scyk7XG4gICAgICAgICAgcmVzdWx0KG51bGwsIHJlc3BvbnNlLCByZXEsIHJlcywgbmV4dCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIHJlc3VsdChlcnIsIG51bGwsIHJlcSwgcmVzLCBuZXh0KTtcbiAgICAgICAgfVxuICAgICAgfSldLFxuICAgICAgdXBkYXRlOiBbXG4gICAgICAgIC4uLihtdWx0aXBhcnRGb3JtRGF0YSA/IFt1cGxvYWQuYW55KCldIDogW10pLFxuICAgICAgICBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgICAgICAgY29uc3QgbW9kZWwgPSB0aGlzLl9nZXRNb2RlbChyZXEsIHJlcyk7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fcmVzdWx0KCd1cGRhdGUnKTtcblxuICAgICAgICAgIGxldCBib2R5ID0gcmVxLmJvZHk7XG5cbiAgICAgICAgICBpZiAobXVsdGlwYXJ0Rm9ybURhdGEpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGVzQnlSZWNvcmRJZCA9IHt9O1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHtmaWVsZG5hbWUsIGJ1ZmZlcn0gb2YgcmVxLmZpbGVzKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHtyZWNvcmRJZCwgZmllbGR9ID0gcGFyc2VKc29uKFxuICAgICAgICAgICAgICAgIGRlY29kZVVSSShmaWVsZG5hbWUpLFxuICAgICAgICAgICAgICAgICdJbmNvcnJlY3QgbmFtZSBmb3IgZmllbGQgY29udGFpbmluZyBmaWxlIGRhdGEnXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGlmICghZmlsZXNCeVJlY29yZElkW3JlY29yZElkXSkge1xuICAgICAgICAgICAgICAgIGZpbGVzQnlSZWNvcmRJZFtyZWNvcmRJZF0gPSB7fTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBmaWxlc0J5UmVjb3JkSWRbcmVjb3JkSWRdW2ZpZWxkXSA9IGJ1ZmZlcjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYm9keSA9IHBhcnNlSnNvbihib2R5LnJlc3QsICdJbmNvcnJlY3QgXCJyZXN0XCIganNvbicpXG4gICAgICAgICAgICAgIC5tYXAoKFtyZWNvcmRJZCwgcmVjb3JkXSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBbcmVjb3JkSWQsIHtcbiAgICAgICAgICAgICAgICAgIC4uLnJlY29yZCxcbiAgICAgICAgICAgICAgICAgIC4uLmZpbGVzQnlSZWNvcmRJZFtyZWNvcmRJZF1cbiAgICAgICAgICAgICAgICB9XTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBtb2RlbC51cGRhdGUoYm9keSk7XG4gICAgICAgICAgICByZXN1bHQobnVsbCwgZGF0YSwgcmVxLCByZXMsIG5leHQpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgcmVzdWx0KGVyciwgbnVsbCwgcmVxLCByZXMsIG5leHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSldLFxuICAgICAgY3JlYXRlOiBbXG4gICAgICAgIC4uLihtdWx0aXBhcnRGb3JtRGF0YSA/IFt1cGxvYWQuYW55KCldIDogW10pLFxuICAgICAgICBhc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgICAgICAgY29uc3QgbW9kZWwgPSB0aGlzLl9nZXRNb2RlbChyZXEsIHJlcyk7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fcmVzdWx0KCdjcmVhdGUnKTtcbiAgICAgICAgICBsZXQgYm9keSA9IHJlcS5ib2R5O1xuXG4gICAgICAgICAgaWYgKG11bHRpcGFydEZvcm1EYXRhKSB7XG4gICAgICAgICAgICBib2R5ID0gcGFyc2VKc29uKGJvZHkucmVzdCk7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3Qge2ZpZWxkbmFtZSwgYnVmZmVyfSBvZiByZXEuZmlsZXMpIHtcbiAgICAgICAgICAgICAgYm9keVtKU09OLnBhcnNlKGRlY29kZVVSSShmaWVsZG5hbWUpKV0gPSBidWZmZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBtb2RlbC5jcmVhdGUoYm9keSk7XG4gICAgICAgICAgICByZXN1bHQobnVsbCwgZGF0YSwgcmVxLCByZXMsIG5leHQpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgcmVzdWx0KGVyciwgbnVsbCwgcmVxLCByZXMsIG5leHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSldXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTcGVjaWZ5IEdyaWQgbW9kZWxcbiAgICpcbiAgICogQHBhcmFtICAge0Z1bmN0aW9ufEFic3RyYWN0R3JpZE1vZGVsfSAgbW9kZWwgICBHcmlkIG1vZGVsXG4gICAqIEByZXR1cm4gIHtHcmlkRXhwcmVzc0FwaX1cbiAgICovXG4gIG1vZGVsKG1vZGVsKSB7XG4gICAgaWYgKHR5cGVvZiBtb2RlbCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpcy5fZ2V0TW9kZWwgPSBtb2RlbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZ2V0TW9kZWwgPSAoKSA9PiBtb2RlbDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBnZXRSb3V0ZXIoKSB7XG4gICAgcmV0dXJuIG5ldyBleHByZXNzLlJvdXRlcigpXG4gICAgICAuZ2V0KCcvJywgdGhpcy5taWRkbGV3YXJlcy5yZWFkR2V0KVxuICAgICAgLnBvc3QoJy9yZWFkJywgdGhpcy5taWRkbGV3YXJlcy5yZWFkUG9zdClcbiAgICAgIC5wb3N0KCcvdmFsaWRhdGlvbicsIHRoaXMubWlkZGxld2FyZXMudmFsaWRhdGUpXG4gICAgICAuZ2V0KCcvOnJlY29yZElkJywgdGhpcy5taWRkbGV3YXJlcy5nZXRSZWNvcmQpXG4gICAgICAucHV0KCcvJywgdGhpcy5taWRkbGV3YXJlcy51cGRhdGUpXG4gICAgICAucG9zdCgnLycsIHRoaXMubWlkZGxld2FyZXMuY3JlYXRlKVxuICAgICAgLnVzZSgoZXJyLCByZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgICAgICB0aGlzLl9yZXN1bHQoKShlcnIsIG51bGwsIHJlcSwgcmVzLCBuZXh0KTtcbiAgICAgIH0pO1xuICB9XG5cbiAgcmVhZChtaWRkbGV3YXJlcykge1xuICAgIHRoaXMuX2FkZE1pZGVsd2FyZXMoJ3JlYWRHZXQnLCBtaWRkbGV3YXJlcyk7XG4gICAgdGhpcy5fYWRkTWlkZWx3YXJlcygncmVhZFBvc3QnLCBtaWRkbGV3YXJlcyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICB2YWxpZGF0ZShtaWRkbGV3YXJlcykge1xuICAgIHJldHVybiB0aGlzLl9hZGRNaWRlbHdhcmVzKCd2YWxpZGF0ZScsIG1pZGRsZXdhcmVzKTtcbiAgfVxuXG4gIGdldFJlY29yZChtaWRkbGV3YXJlcykge1xuICAgIHJldHVybiB0aGlzLl9hZGRNaWRlbHdhcmVzKCdnZXRSZWNvcmQnLCBtaWRkbGV3YXJlcyk7XG4gIH1cblxuICB1cGRhdGUobWlkZGxld2FyZXMpIHtcbiAgICByZXR1cm4gdGhpcy5fYWRkTWlkZWx3YXJlcygndXBkYXRlJywgbWlkZGxld2FyZXMpO1xuICB9XG5cbiAgY3JlYXRlKG1pZGRsZXdhcmVzKSB7XG4gICAgcmV0dXJuIHRoaXMuX2FkZE1pZGVsd2FyZXMoJ2NyZWF0ZScsIG1pZGRsZXdhcmVzKTtcbiAgfVxuXG4gIF9hZGRNaWRlbHdhcmVzKG1ldGhvZCwgbWlkZGxld2FyZXMpIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkobWlkZGxld2FyZXMpKSB7XG4gICAgICBtaWRkbGV3YXJlcyA9IFttaWRkbGV3YXJlc107XG4gICAgfVxuICAgIHRoaXMubWlkZGxld2FyZXNbbWV0aG9kXSA9IG1pZGRsZXdhcmVzLmNvbmNhdCh0aGlzLm1pZGRsZXdhcmVzW21ldGhvZF0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLy8gRGVmYXVsdCBpbXBsZW1lbnRhdGlvblxuICBfZ2V0TW9kZWwoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNb2RlbCBpcyBub3QgZGVmaW5lZC4nKTtcbiAgfVxuXG4gIF9yZXN1bHQobWV0aG9kKSB7XG4gICAgaWYgKG1ldGhvZCA9PT0gJ3VwZGF0ZScpIHtcbiAgICAgIHJldHVybiAoZXJyLCBkYXRhLCByZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbmQoZXJyLCBudWxsLCByZXEsIHJlcywgbmV4dCk7XG4gICAgICAgIH1cblxuICAgICAgICBkYXRhID0gZGF0YS5yZWR1Y2UoXG4gICAgICAgICAgKHJlc3VsdCwgcmVjb3JkKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXJlY29yZCkge1xuICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlY29yZFsxXSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICAgIHJlc3VsdC5lcnJvcnMucHVzaChyZWNvcmQpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyZWNvcmRbMV0gaW5zdGFuY2VvZiBWYWxpZGF0aW9uRXJyb3JzKSB7XG4gICAgICAgICAgICAgIHJlc3VsdC52YWxpZGF0aW9uLnB1c2gocmVjb3JkKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJlc3VsdC5jaGFuZ2VzLnB1c2gocmVjb3JkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB7Y2hhbmdlczogW10sIGVycm9yczogW10sIHZhbGlkYXRpb246IFtdfVxuICAgICAgICApO1xuXG4gICAgICAgIHNlbmQobnVsbCwgZGF0YSwgcmVxLCByZXMsIG5leHQpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAobWV0aG9kID09PSAnY3JlYXRlJykge1xuICAgICAgcmV0dXJuIChlcnIsIGRhdGEsIHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICBpZiAoIShlcnIgaW5zdGFuY2VvZiBWYWxpZGF0aW9uRXJyb3JzKSkge1xuICAgICAgICAgICAgcmV0dXJuIHNlbmQoZXJyLCBudWxsLCByZXEsIHJlcywgbmV4dCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBzZW5kKG51bGwsIHtkYXRhOiBudWxsLCBlcnJvcjogZXJyfSwgcmVxLCByZXMsIG5leHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzZW5kKG51bGwsIHtkYXRhOiBkYXRhLCBlcnJvcjogbnVsbH0sIHJlcSwgcmVzLCBuZXh0KTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbmQ7XG5cbiAgICBmdW5jdGlvbiBzZW5kKGVyciwgZGF0YSwgcmVxLCByZXMsIG5leHQpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgbmV4dChlcnIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzLmpzb24oZGF0YSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX2NvbW1vblJlYWRNaWRkbGV3YXJlKHJlcSwgcmVzLCBuZXh0LCBzZXR0aW5ncykge1xuICAgIGNvbnN0IG1vZGVsID0gdGhpcy5fZ2V0TW9kZWwocmVxLCByZXMpO1xuICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX3Jlc3VsdCgncmVhZCcpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG1vZGVsLnJlYWQoc2V0dGluZ3MpO1xuICAgICAgcmVzdWx0KG51bGwsIHJlc3BvbnNlLCByZXEsIHJlcywgbmV4dCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICByZXN1bHQoZXJyLCBudWxsLCByZXEsIHJlcywgbmV4dCk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEdyaWRFeHByZXNzQXBpO1xuIiwiLypcbiAqIENvcHlyaWdodCAo0YEpIDIwMTUtcHJlc2VudCwgU29mdEluZGV4IExMQy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxuaW1wb3J0IFZhbGlkYXRpb25FcnJvcnMgZnJvbSAnLi4vLi4vY29tbW9uL3ZhbGlkYXRpb24vVmFsaWRhdGlvbkVycm9ycyc7XG5pbXBvcnQgVmFsaWRhdG9yIGZyb20gJy4uLy4uL2NvbW1vbi92YWxpZGF0aW9uL1ZhbGlkYXRvcic7XG5pbXBvcnQgZGVmYXVsdFhociBmcm9tICcuLi8uLi9jb21tb24vZGVmYXVsdFhocic7XG5pbXBvcnQgQWJzdHJhY3RHcmlkTW9kZWwgZnJvbSAnLi9BYnN0cmFjdEdyaWRNb2RlbCc7XG5pbXBvcnQgdXJsIGZyb20gJ3VybCc7XG5cbmNvbnN0IE1BWF9VUklfTEVOR1RIID0gMjA0ODtcblxuLyoqXG4gKiBHcmlkIG1vZGVsLCB0aGF0IHdvcmtzIHdpdGggQVBJIHZpYSBYSFJcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gICAgc2V0dGluZ3MgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb2RlbCBzZXR0aW5nc1xuICogQHBhcmFtIHtzdHJpbmd9ICAgIHNldHRpbmdzLmFwaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQVBJIGFkZHJlc3NcbiAqIEBwYXJhbSB7VmFsaWRhdG9yfSBbc2V0dGluZ3MudmFsaWRhdG9yXSAgICAgICAgICAgICAgICAgICAgIEdlbmVyYWwgdmFsaWRhdG9yXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSAgW3NldHRpbmdzLnhocl0gICAgICAgICAgICAgICAgICAgICAgICAgICBYSFIgaW50ZXJmYWNlXG4gKiBAcGFyYW0ge2Jvb2xlYW59ICAgW3NldHRpbmdzLnZhbGlkYXRlT25DbGllbnQ9ZmFsc2VdICAgICAgICBEb24ndCBzZW5kIHZhbGlkYXRpb24gcmVxdWVzdCB0byBzZXJ2ZXJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gICBbc2V0dGluZ3MubXVsdGlwYXJ0Rm9ybURhdGE9ZmFsc2VdIFNlbmQgZm9ybSBkYXRhIHdpdGggZW5jdHlwZT0nbXVsdGlwYXJ0L2Zvcm0tZGF0YSdcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5jbGFzcyBHcmlkWGhyTW9kZWwgZXh0ZW5kcyBBYnN0cmFjdEdyaWRNb2RlbCB7XG4gIGNvbnN0cnVjdG9yKHthcGksIHZhbGlkYXRvciwgeGhyLCB2YWxpZGF0ZU9uQ2xpZW50LCBtdWx0aXBhcnRGb3JtRGF0YX0pIHtcbiAgICBzdXBlcigpO1xuXG4gICAgaWYgKCFhcGkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW5pdGlhbGl6YXRpb24gcHJvYmxlbTogXFwnYXBpXFwnIG11c3QgYmUgc3BlY2lmaWVkLicpO1xuICAgIH1cblxuICAgIHRoaXMuX3ZhbGlkYXRvciA9IHZhbGlkYXRvciB8fCBuZXcgVmFsaWRhdG9yKCk7XG4gICAgdGhpcy5feGhyID0geGhyIHx8IGRlZmF1bHRYaHI7XG4gICAgdGhpcy5fdmFsaWRhdGVPbkNsaWVudCA9IHZhbGlkYXRlT25DbGllbnQgfHwgZmFsc2U7XG4gICAgdGhpcy5fbXVsdGlwYXJ0Rm9ybURhdGFFbmNvZGVkID0gbXVsdGlwYXJ0Rm9ybURhdGEgfHwgZmFsc2U7XG4gICAgdGhpcy5fYXBpVXJsID0gYXBpXG4gICAgICAucmVwbGFjZSgvKFteL10pXFw/LywgJyQxLz8nKSAvLyBBZGQgXCIvXCIgYmVmb3JlIFwiP1wiXG4gICAgICAucmVwbGFjZSgvXlteP10qW14vXSQvLCAnJCYvJyk7IC8vIEFkZCBcIi9cIiB0byB0aGUgZW5kXG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgcmVjb3JkXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSAgICAgIHJlY29yZCAgUmVjb3JkIG9iamVjdFxuICAgKi9cbiAgYXN5bmMgY3JlYXRlKHJlY29yZCkge1xuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG5cbiAgICBpZiAodGhpcy5fbXVsdGlwYXJ0Rm9ybURhdGFFbmNvZGVkKSB7XG4gICAgICBjb25zdCBvcmRpbmFyeURhdGEgPSB7fTtcbiAgICAgIGZvciAoY29uc3QgW3Byb3AsIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhyZWNvcmQpKSB7XG4gICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEZpbGUpIHtcbiAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoSlNPTi5zdHJpbmdpZnkocHJvcCksIHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvcmRpbmFyeURhdGFbcHJvcF0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZm9ybURhdGEuYXBwZW5kKCdyZXN0JywgSlNPTi5zdHJpbmdpZnkob3JkaW5hcnlEYXRhKSk7XG4gICAgfVxuXG4gICAgbGV0IGJvZHkgPSBhd2FpdCB0aGlzLl94aHIoe1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICB1cmk6IHRoaXMuX2FwaVVybCxcbiAgICAgIGJvZHk6IHRoaXMuX211bHRpcGFydEZvcm1EYXRhRW5jb2RlZCA/IGZvcm1EYXRhIDogSlNPTi5zdHJpbmdpZnkocmVjb3JkKSxcbiAgICAgIC4uLiF0aGlzLl9tdWx0aXBhcnRGb3JtRGF0YUVuY29kZWQgJiYge2hlYWRlcnM6IHsnQ29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nfX1cbiAgICB9KTtcblxuICAgIGJvZHkgPSBKU09OLnBhcnNlKGJvZHkpO1xuXG4gICAgaWYgKGJvZHkuZXJyb3IpIHtcbiAgICAgIHRocm93IFZhbGlkYXRpb25FcnJvcnMuY3JlYXRlRnJvbUpTT04oYm9keS5lcnJvcik7XG4gICAgfVxuXG4gICAgdGhpcy50cmlnZ2VyKCdjcmVhdGUnLCBbYm9keS5kYXRhXSk7XG5cbiAgICByZXR1cm4gYm9keS5kYXRhO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCByZWNvcmRzIGxpc3RcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9ICAgICAgc2V0dGluZ3MgICAgICAgICAgICAgICAgUmVxdWVzdFxuICAgKiBAcGFyYW0ge0FycmF5fSAgICAgICBzZXR0aW5ncy5maWVsZHMgICAgICAgICBGaWVsZHNcbiAgICogQHBhcmFtIHtudW1iZXJ9ICAgICAgW3NldHRpbmdzLmxpbWl0XSAgICAgICAgTGltaXRcbiAgICogQHBhcmFtIHtudW1iZXJ9ICAgICAgW3NldHRpbmdzLm9mZnNldD0wXSAgICAgT2Zmc2V0XG4gICAqIEBwYXJhbSB7T2JqZWN0fSAgICAgIFtzZXR0aW5ncy5maWx0ZXJzXSAgICAgIEZpbHRlciB2YWx1ZXMgb2JqZWN0XG4gICAqIEBwYXJhbSB7QXJyYXl9ICAgICAgIFtzZXR0aW5ncy5zb3J0XSAgICAgICAgIFNvcnQgcGFyYW1ldGVyc1xuICAgKiBAcGFyYW0ge0FycmF5fSAgICAgICBbc2V0dGluZ3MuZXh0cmFdICAgICAgICBSZWNvcmQgSURzLCB3ZSBuZWVkIHRvIGdldCBmb3Igc3VyZVxuICAgKi9cbiAgYXN5bmMgcmVhZChzZXR0aW5ncykge1xuICAgIGNvbnN0IHF1ZXJ5VXJsID0gdGhpcy5fZ2V0UXVlcnlVcmwoc2V0dGluZ3MpO1xuXG4gICAgaWYgKHVybC5mb3JtYXQocXVlcnlVcmwpLmxlbmd0aCA+IE1BWF9VUklfTEVOR1RIKSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5fcmVhZFBvc3RSZXF1ZXN0KHNldHRpbmdzKTtcbiAgICB9XG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuX3hocih7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgdXJpOiB1cmwuZm9ybWF0KHF1ZXJ5VXJsKVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIEpTT04ucGFyc2UocmVzcG9uc2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgcGFydGljdWxhciByZWNvcmRcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfSAgIGlkICAgICAgUmVjb3JkIElEXG4gICAqIEBwYXJhbSB7QXJyYXl9ICAgICAgICAgICBmaWVsZHMgIFJlcXVpcmVkIGZpZWxkc1xuICAgKi9cbiAgYXN5bmMgZ2V0UmVjb3JkKGlkLCBmaWVsZHMpIHtcbiAgICBjb25zdCBwYXJzZWRVcmwgPSB1cmwucGFyc2UodGhpcy5fYXBpVXJsLCB0cnVlKTtcbiAgICBwYXJzZWRVcmwucXVlcnkuY29scyA9IEpTT04uc3RyaW5naWZ5KGZpZWxkcyk7IC8vIFRPRE8gcmVuYW1lIGNvbHMgdG8gZmllbGRzXG4gICAgcGFyc2VkVXJsLnBhdGhuYW1lID0gdXJsLnJlc29sdmUocGFyc2VkVXJsLnBhdGhuYW1lLCBKU09OLnN0cmluZ2lmeShpZCkpO1xuICAgIGRlbGV0ZSBwYXJzZWRVcmwuc2VhcmNoO1xuXG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHRoaXMuX3hocih7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgdXJpOiB1cmwuZm9ybWF0KHBhcnNlZFVybClcbiAgICB9KTtcblxuICAgIHJldHVybiBKU09OLnBhcnNlKGJvZHkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFwcGx5IHJlY29yZCBjaGFuZ2VzXG4gICAqXG4gICAqIEBwYXJhbSB7W119ICAgICAgIGNoYW5nZXMgICAgIENoYW5nZXMgYXJyYXlcbiAgICogQGFic3RyYWN0XG4gICAqL1xuICBhc3luYyB1cGRhdGUoY2hhbmdlcykge1xuICAgIGNvbnN0IGZvcm1EYXRhQ2hhbmdlcyA9IG5ldyBGb3JtRGF0YSgpO1xuXG4gICAgaWYgKHRoaXMuX211bHRpcGFydEZvcm1EYXRhRW5jb2RlZCkge1xuICAgICAgY29uc3Qgb3JkaW5hcnlSZWNvcmRDaGFuZ2VzID0gW107XG5cbiAgICAgIGZvciAoY29uc3QgW3JlY29yZElkLCByZWNvcmRdIG9mIGNoYW5nZXMpIHtcbiAgICAgICAgY29uc3QgZmlsZUZpZWxkTmFtZXMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBmaWVsZCBvZiBPYmplY3Qua2V5cyhyZWNvcmQpKSB7XG4gICAgICAgICAgaWYgKHJlY29yZFtmaWVsZF0gaW5zdGFuY2VvZiBGaWxlKSB7XG4gICAgICAgICAgICBmb3JtRGF0YUNoYW5nZXMuYXBwZW5kKEpTT04uc3RyaW5naWZ5KHtyZWNvcmRJZCwgZmllbGR9KSwgcmVjb3JkW2ZpZWxkXSk7XG4gICAgICAgICAgICBmaWxlRmllbGROYW1lcy5wdXNoKGZpZWxkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmaWx0ZXJlZFJlY29yZCA9IE9iamVjdC5rZXlzKHJlY29yZClcbiAgICAgICAgICAuZmlsdGVyKGtleSA9PiAhZmlsZUZpZWxkTmFtZXMuaW5jbHVkZXMoa2V5KSlcbiAgICAgICAgICAucmVkdWNlKChhZ3IsIGtleSkgPT4gKHsuLi5hZ3IsIFtrZXldOiByZWNvcmRba2V5XX0pLCB7fSk7XG5cbiAgICAgICAgb3JkaW5hcnlSZWNvcmRDaGFuZ2VzLnB1c2goW3JlY29yZElkLCBmaWx0ZXJlZFJlY29yZF0pO1xuICAgICAgfVxuXG4gICAgICBmb3JtRGF0YUNoYW5nZXMuYXBwZW5kKCdyZXN0JywgSlNPTi5zdHJpbmdpZnkob3JkaW5hcnlSZWNvcmRDaGFuZ2VzKSk7XG4gICAgfVxuXG4gICAgbGV0IGJvZHkgPSBhd2FpdCB0aGlzLl94aHIoe1xuICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgIC4uLiF0aGlzLl9tdWx0aXBhcnRGb3JtRGF0YUVuY29kZWQgJiYge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgdXJpOiB0aGlzLl9hcGlVcmwsXG4gICAgICBib2R5OiB0aGlzLl9tdWx0aXBhcnRGb3JtRGF0YUVuY29kZWQgPyBmb3JtRGF0YUNoYW5nZXMgOiBKU09OLnN0cmluZ2lmeShjaGFuZ2VzKVxuICAgIH0pO1xuXG4gICAgYm9keSA9IEpTT04ucGFyc2UoYm9keSk7XG4gICAgY29uc3QgcmVzID0gW107XG5cbiAgICBpZiAoYm9keS5jaGFuZ2VzICYmIGJvZHkuY2hhbmdlcy5sZW5ndGgpIHtcbiAgICAgIHRoaXMudHJpZ2dlcigndXBkYXRlJywgYm9keS5jaGFuZ2VzKTtcbiAgICAgIHJlcy5wdXNoKC4uLmJvZHkuY2hhbmdlcyk7XG4gICAgfVxuICAgIGlmIChib2R5LnZhbGlkYXRpb24gJiYgYm9keS52YWxpZGF0aW9uLmxlbmd0aCkge1xuICAgICAgZm9yIChjb25zdCBlcnJvciBvZiBib2R5LnZhbGlkYXRpb24pIHtcbiAgICAgICAgaWYgKGVycm9yICYmIGVycm9yWzFdKSB7XG4gICAgICAgICAgZXJyb3JbMV0gPSBWYWxpZGF0aW9uRXJyb3JzLmNyZWF0ZUZyb21KU09OKGVycm9yWzFdKTtcbiAgICAgICAgICByZXMucHVzaChlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGJvZHkuZXJyb3JzICYmIGJvZHkuZXJyb3JzLmxlbmd0aCkge1xuICAgICAgZm9yIChjb25zdCBlcnJvciBvZiBib2R5LmVycm9ycykge1xuICAgICAgICBpZiAoZXJyb3IgJiYgZXJyb3JbMV0pIHtcbiAgICAgICAgICBlcnJvclsxXSA9IE9iamVjdC5hc3NpZ24obmV3IEVycm9yKCksIGVycm9yWzFdKTsgLy8gTm90ZSwgdGhhdCBPYmplY3Qgc3ByZWFkIG9wZXJhdG9yIHdvbid0IHdvcmsgaGVyZVxuICAgICAgICAgIHJlcy5wdXNoKGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXM7XG4gIH1cblxuICAvKipcbiAgICogVmFsaWRhdGlvbiBjaGVja1xuICAgKlxuICAgKiBAcGFyYW0ge3tbc3RyaW5nXTogKn19IHJlY29yZFxuICAgKiBAcGFyYW0ge1Byb21pc2U8Kj59ICAgIHJlY29yZElkXG4gICAqL1xuICBhc3luYyBpc1ZhbGlkUmVjb3JkKHJlY29yZCwgcmVjb3JkSWQpIHtcbiAgICBpZiAodGhpcy5fdmFsaWRhdGVPbkNsaWVudCkge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX3ZhbGlkYXRvci5pc1ZhbGlkUmVjb3JkKHJlY29yZCk7XG4gICAgfVxuXG4gICAgY29uc3QgcGFyc2VkVXJsID0gdXJsLnBhcnNlKHRoaXMuX2FwaVVybCwgdHJ1ZSk7XG4gICAgcGFyc2VkVXJsLnBhdGhuYW1lID0gdXJsLnJlc29sdmUocGFyc2VkVXJsLnBhdGhuYW1lLCAndmFsaWRhdGlvbicpO1xuXG4gICAgbGV0IHJlc3BvbnNlO1xuICAgIHRyeSB7XG4gICAgICByZXNwb25zZSA9IGF3YWl0IHRoaXMuX3hocih7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICB1cmk6IHVybC5mb3JtYXQocGFyc2VkVXJsKSxcbiAgICAgICAgYm9keToge1xuICAgICAgICAgIHJlY29yZCxcbiAgICAgICAgICBpZDogcmVjb3JkSWRcbiAgICAgICAgfSxcbiAgICAgICAganNvbjogdHJ1ZVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBpZiAoZXJyLnN0YXR1c0NvZGUgPT09IDQxMykge1xuICAgICAgICAvLyBXaGVuIHJlcXVlc3QgZXhjZWVkcyBzZXJ2ZXIgbGltaXRzIGFuZFxuICAgICAgICAvLyBjbGllbnQgdmFsaWRhdG9ycyBhcmUgYWJsZSB0byBmaW5kIGVycm9ycyxcbiAgICAgICAgLy8gd2UgbmVlZCB0byByZXR1cm4gdGhlc2UgZXJyb3Jze1xuICAgICAgICBjb25zdCB2YWxpZGF0aW9uRXJyb3JzID0gYXdhaXQgdGhpcy5fdmFsaWRhdG9yLmlzVmFsaWRSZWNvcmQocmVjb3JkKTtcbiAgICAgICAgaWYgKCF2YWxpZGF0aW9uRXJyb3JzLmlzRW1wdHkoKSkge1xuICAgICAgICAgIHJldHVybiB2YWxpZGF0aW9uRXJyb3JzO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuXG4gICAgcmV0dXJuIFZhbGlkYXRpb25FcnJvcnMuY3JlYXRlRnJvbUpTT04ocmVzcG9uc2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbGwgZGVwZW5kZW50IGZpZWxkcywgdGhhdCBhcmUgcmVxdWlyZWQgZm9yIHZhbGlkYXRpb25cbiAgICpcbiAgICogQHBhcmFtICAge3N0cmluZ1tdfSAgZmllbGRzICAgRmllbGRzIGxpc3RcbiAgICogQHJldHVybnMge3N0cmluZ1tdfSAgRGVwZW5kZW5jaWVzXG4gICAqL1xuICBnZXRWYWxpZGF0aW9uRGVwZW5kZW5jeShmaWVsZHMpIHtcbiAgICByZXR1cm4gdGhpcy5fdmFsaWRhdG9yLmdldFZhbGlkYXRpb25EZXBlbmRlbmN5KGZpZWxkcyk7XG4gIH1cblxuICBfZ2V0UXVlcnlVcmwoc2V0dGluZ3MpIHtcbiAgICBjb25zdCBwYXJzZWRVcmwgPSB1cmwucGFyc2UodGhpcy5fYXBpVXJsLCB0cnVlKTtcbiAgICBwYXJzZWRVcmwucXVlcnkuZmllbGRzID0gSlNPTi5zdHJpbmdpZnkoc2V0dGluZ3MuZmllbGRzKTtcbiAgICBwYXJzZWRVcmwucXVlcnkub2Zmc2V0ID0gc2V0dGluZ3Mub2Zmc2V0IHx8IDA7XG4gICAgaWYgKHNldHRpbmdzLmxpbWl0KSB7XG4gICAgICBwYXJzZWRVcmwucXVlcnkubGltaXQgPSBzZXR0aW5ncy5saW1pdDtcbiAgICB9XG4gICAgaWYgKHNldHRpbmdzLmZpbHRlcnMpIHtcbiAgICAgIHBhcnNlZFVybC5xdWVyeS5maWx0ZXJzID0gSlNPTi5zdHJpbmdpZnkoc2V0dGluZ3MuZmlsdGVycyk7XG4gICAgfVxuICAgIGlmIChzZXR0aW5ncy5zb3J0KSB7XG4gICAgICBwYXJzZWRVcmwucXVlcnkuc29ydCA9IEpTT04uc3RyaW5naWZ5KHNldHRpbmdzLnNvcnQpO1xuICAgIH1cbiAgICBpZiAoc2V0dGluZ3MuZXh0cmEpIHtcbiAgICAgIHBhcnNlZFVybC5xdWVyeS5leHRyYSA9IEpTT04uc3RyaW5naWZ5KHNldHRpbmdzLmV4dHJhKTtcbiAgICB9XG4gICAgZGVsZXRlIHBhcnNlZFVybC5zZWFyY2g7XG5cbiAgICByZXR1cm4gcGFyc2VkVXJsO1xuICB9XG5cbiAgYXN5bmMgX3JlYWRQb3N0UmVxdWVzdChzZXR0aW5ncykge1xuICAgIGNvbnN0IHJlcXVlc3RCb2R5ID0ge307XG4gICAgcmVxdWVzdEJvZHkuZmllbGRzID0gc2V0dGluZ3MuZmllbGRzO1xuICAgIHJlcXVlc3RCb2R5Lm9mZnNldCA9IHNldHRpbmdzLm9mZnNldCB8fCAwO1xuICAgIGlmIChzZXR0aW5ncy5saW1pdCkge1xuICAgICAgcmVxdWVzdEJvZHkubGltaXQgPSBzZXR0aW5ncy5saW1pdDtcbiAgICB9XG4gICAgaWYgKHNldHRpbmdzLmZpbHRlcnMpIHtcbiAgICAgIHJlcXVlc3RCb2R5LmZpbHRlcnMgPSBzZXR0aW5ncy5maWx0ZXJzO1xuICAgIH1cbiAgICBpZiAoc2V0dGluZ3Muc29ydCkge1xuICAgICAgcmVxdWVzdEJvZHkuc29ydCA9IHNldHRpbmdzLnNvcnQ7XG4gICAgfVxuICAgIGlmIChzZXR0aW5ncy5leHRyYSkge1xuICAgICAgcmVxdWVzdEJvZHkuZXh0cmEgPSBzZXR0aW5ncy5leHRyYTtcbiAgICB9XG5cbiAgICBjb25zdCBwYXJzZWRVcmwgPSB1cmwucGFyc2UodGhpcy5fYXBpVXJsLCB0cnVlKTtcbiAgICBwYXJzZWRVcmwucGF0aG5hbWUgPSB1cmwucmVzb2x2ZShwYXJzZWRVcmwucGF0aG5hbWUsICdyZWFkJyk7XG5cbiAgICByZXR1cm4gYXdhaXQgdGhpcy5feGhyKHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAganNvbjogdHJ1ZSxcbiAgICAgIHVyaTogdXJsLmZvcm1hdChwYXJzZWRVcmwpLFxuICAgICAgYm9keTogcmVxdWVzdEJvZHlcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBHcmlkWGhyTW9kZWw7XG4iLCIvKlxuICogQ29weXJpZ2h0ICjRgSkgMjAxNS1wcmVzZW50LCBTb2Z0SW5kZXggTExDLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG5pbXBvcnQge2RlY29yYXRlfSBmcm9tICcuLi8uLi9jb21tb24vdXRpbHMnO1xuXG4vKipcbiAqIERlZmluZXMgZmlsdGVyIHZhbHVlcyB3aGlsZSByZWFkaW5nIEdyaWQgbW9kZWwgZGF0YVxuICpcbiAqIEBwYXJhbSB7QWJzdHJhY3RHcmlkTW9kZWx9IG1vZGVsICAgICAgIEdyaWQgbW9kZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSAgICAgICAgICAgIGZpbHRlcnMgICAgIEZpbHRlciB2YWx1ZXNcbiAqL1xuZnVuY3Rpb24gYXBwbHlHcmlkRmlsdGVycyhtb2RlbCwgZmlsdGVycykge1xuICByZXR1cm4gZGVjb3JhdGUobW9kZWwsIHtcbiAgICBhc3luYyByZWFkKG9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMuZmlsdGVycyA9IHtcbiAgICAgICAgLi4uZmlsdGVycyxcbiAgICAgICAgLi4ub3B0aW9ucy5maWx0ZXJzXG4gICAgICB9O1xuICAgICAgcmV0dXJuIGF3YWl0IG1vZGVsLnJlYWQob3B0aW9ucyk7XG4gICAgfVxuICB9KTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgYXBwbHlHcmlkRmlsdGVycztcbiIsIi8qXG4gKiBDb3B5cmlnaHQgKNGBKSAyMDE1LXByZXNlbnQsIFNvZnRJbmRleCBMTEMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbi8qKlxuICogQWJzdHJhY3QgTGlzdCBtb2RlbFxuICovXG5jbGFzcyBBYnN0cmFjdExpc3RNb2RlbCB7XG4gIC8qKlxuICAgKiBHZXQgZGF0YVxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gICAgc2VhcmNoICBTZWFyY2ggcXVlcnlcbiAgICogQGFic3RyYWN0XG4gICAqL1xuICByZWFkKC8qc2VhcmNoKi8pIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgb3B0aW9uIG5hbWUgdXNpbmcgSURcbiAgICpcbiAgICogQHBhcmFtIHsqfSAgICAgICAgIGlkICBPcHRpb24gSURcbiAgICogQGFic3RyYWN0XG4gICAqL1xuICBnZXRMYWJlbCgvKmlkKi8pIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCcnKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBBYnN0cmFjdExpc3RNb2RlbDtcbiIsIi8qXG4gKiBDb3B5cmlnaHQgKNGBKSAyMDE1LXByZXNlbnQsIFNvZnRJbmRleCBMTEMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbmltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IHthc3luY0hhbmRsZXJ9IGZyb20gJy4uL2NvbW1vbi91dGlscyc7XG5cbi8qKlxuICogRm9ybSBFeHByZXNzIEFQSSBmb3IgTGlzdCBtb2RlbCBpbnRlcmFjdGlvblxuICpcbiAqIEByZXR1cm4ge0xpc3RFeHByZXNzQXBpfVxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmNsYXNzIExpc3RFeHByZXNzQXBpIHtcbiAgc3RhdGljIGNyZWF0ZSgpIHtcbiAgICByZXR1cm4gbmV3IExpc3RFeHByZXNzQXBpKCk7XG4gIH1cblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLm1pZGRsZXdhcmVzID0ge1xuICAgICAgcmVhZDogW2FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICAgICAgY29uc3QgbW9kZWwgPSB0aGlzLl9nZXRNb2RlbChyZXEsIHJlcyk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBtb2RlbC5yZWFkKHJlcS5xdWVyeS52KTtcbiAgICAgICAgICB0aGlzLl9yZXN1bHQobnVsbCwgcmVzcG9uc2UsIHJlcSwgcmVzLCBuZXh0KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgdGhpcy5fcmVzdWx0KGVyciwgbnVsbCwgcmVxLCByZXMsIG5leHQpO1xuICAgICAgICB9XG4gICAgICB9KV0sXG4gICAgICBnZXRMYWJlbDogW2FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICAgICAgY29uc3QgaWQgPSBKU09OLnBhcnNlKHJlcS5wYXJhbXMuaWQpO1xuICAgICAgICBjb25zdCBtb2RlbCA9IHRoaXMuX2dldE1vZGVsKHJlcSwgcmVzKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG1vZGVsLmdldExhYmVsKGlkKTtcbiAgICAgICAgICB0aGlzLl9yZXN1bHQobnVsbCwgcmVzcG9uc2UsIHJlcSwgcmVzLCBuZXh0KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgdGhpcy5fcmVzdWx0KGVyciwgbnVsbCwgcmVxLCByZXMsIG5leHQpO1xuICAgICAgICB9XG4gICAgICB9KV1cbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFNwZWNpZnkgTGlzdCBtb2RlbFxuICAgKlxuICAgKiBAcGFyYW0gICB7RnVuY3Rpb258QWJzdHJhY3RMaXN0TW9kZWx9ICBtb2RlbCAgTGlzdCBtb2RlbFxuICAgKiBAcmV0dXJuIHtMaXN0RXhwcmVzc0FwaX1cbiAgICovXG4gIG1vZGVsKG1vZGVsKSB7XG4gICAgaWYgKHR5cGVvZiBtb2RlbCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpcy5fZ2V0TW9kZWwgPSBtb2RlbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZ2V0TW9kZWwgPSAoKSA9PiBtb2RlbDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBnZXRSb3V0ZXIoKSB7XG4gICAgcmV0dXJuIG5ldyBleHByZXNzLlJvdXRlcigpXG4gICAgICAuZ2V0KCcvJywgdGhpcy5taWRkbGV3YXJlcy5yZWFkKVxuICAgICAgLmdldCgnL2xhYmVsLzppZCcsIHRoaXMubWlkZGxld2FyZXMuZ2V0TGFiZWwpO1xuICB9XG5cbiAgcmVhZChtaWRkbGV3YXJlcykge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShtaWRkbGV3YXJlcykpIHtcbiAgICAgIG1pZGRsZXdhcmVzID0gW21pZGRsZXdhcmVzXTtcbiAgICB9XG4gICAgdGhpcy5taWRkbGV3YXJlcy5yZWFkID0gbWlkZGxld2FyZXMuY29uY2F0KHRoaXMubWlkZGxld2FyZXMucmVhZCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBnZXRMYWJlbChtaWRkbGV3YXJlcykge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShtaWRkbGV3YXJlcykpIHtcbiAgICAgIG1pZGRsZXdhcmVzID0gW21pZGRsZXdhcmVzXTtcbiAgICB9XG4gICAgdGhpcy5taWRkbGV3YXJlcy5nZXRMYWJlbCA9IG1pZGRsZXdhcmVzLmNvbmNhdCh0aGlzLm1pZGRsZXdhcmVzLmdldExhYmVsKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8vIERlZmF1bHQgaW1wbGVtZW50YXRpb25cbiAgX2dldE1vZGVsKCkge1xuICAgIHRocm93IEVycm9yKCdNb2RlbCBpcyBub3QgZGVmaW5lZC4nKTtcbiAgfVxuXG4gIF9yZXN1bHQoZXJyLCBkYXRhLCByZXEsIHJlcywgbmV4dCkge1xuICAgIGlmIChlcnIpIHtcbiAgICAgIG5leHQoZXJyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHR5cGVvZiBkYXRhID09PSAnbnVtYmVyJykge1xuICAgICAgICBkYXRhID0gZGF0YS50b1N0cmluZygpO1xuICAgICAgfVxuICAgICAgcmVzLmpzb24oZGF0YSk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IExpc3RFeHByZXNzQXBpO1xuIiwiLypcbiAqIENvcHlyaWdodCAo0YEpIDIwMTUtcHJlc2VudCwgU29mdEluZGV4IExMQy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxuaW1wb3J0IGRlZmF1bHRYaHIgZnJvbSAnLi4vY29tbW9uL2RlZmF1bHRYaHInO1xuaW1wb3J0IHVybCBmcm9tICd1cmwnO1xuXG5jbGFzcyBMaXN0WE1MSHR0cFJlcXVlc3RNb2RlbCB7XG4gIC8qKlxuICAgKiBTaW1wbGUgbGlzdCBjbGllbnQgbW9kZWwgd2hpY2ggd29ya3MgdmlhIFhNTEh0dHBSZXF1ZXN0XG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSAgICBhcGlVUkwgIEFQSSBhZGRyZXNzIGZvciBsaXN0IG1vZGVsIGludGVyYWN0aW9uXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259ICBbeGhyXSAgIFhIUiB3cmFwcGVyXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKi9cbiAgY29uc3RydWN0b3IoYXBpVVJMLCB4aHIpIHtcbiAgICB0aGlzLl9hcGlVUkwgPSBhcGlVUkw7XG4gICAgdGhpcy5feGhyID0geGhyIHx8IGRlZmF1bHRYaHI7XG4gICAgdGhpcy5fYXBpVXJsID0gYXBpVVJMXG4gICAgICAucmVwbGFjZSgvKFteL10pXFw/LywgJyQxLz8nKSAvLyBBZGQgXCIvXCIgYmVmb3JlIFwiP1wiXG4gICAgICAucmVwbGFjZSgvXlteP10qW14vXSQvLCAnJCYvJyk7IC8vIEFkZCBcIi9cIiB0byB0aGUgZW5kXG4gIH1cblxuICAvKipcbiAgICogR2V0IG1vZGVsIGRhdGFcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9ICAgIHNlYXJjaCAgTGlzdCBzZWFyY2ggcXVlcnlcbiAgICovXG4gIGFzeW5jIHJlYWQoc2VhcmNoKSB7XG4gICAgY29uc3QgcGFyc2VkVXJsID0gdXJsLnBhcnNlKHRoaXMuX2FwaVVybCwgdHJ1ZSk7XG4gICAgZGVsZXRlIHBhcnNlZFVybC5zZWFyY2g7XG4gICAgaWYgKHNlYXJjaCkge1xuICAgICAgcGFyc2VkVXJsLnF1ZXJ5LnYgPSBzZWFyY2g7XG4gICAgfVxuXG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHRoaXMuX3hocih7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICB9LFxuICAgICAgdXJpOiB1cmwuZm9ybWF0KHBhcnNlZFVybClcbiAgICB9KTtcblxuICAgIHJldHVybiBKU09OLnBhcnNlKGJvZHkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBvcHRpb24gbmFtZSB1c2luZyBJRFxuICAgKlxuICAgKiBAcGFyYW0geyp9ICAgICAgICAgaWQgIE9wdGlvbiBJRFxuICAgKi9cbiAgYXN5bmMgZ2V0TGFiZWwoaWQpIHtcbiAgICBjb25zdCBwYXJzZWRVcmwgPSB1cmwucGFyc2UodGhpcy5fYXBpVXJsLCB0cnVlKTtcbiAgICBwYXJzZWRVcmwucGF0aG5hbWUgPSB1cmwucmVzb2x2ZShwYXJzZWRVcmwucGF0aG5hbWUsIGBsYWJlbC8ke0pTT04uc3RyaW5naWZ5KGlkKX1gKTtcblxuICAgIGxldCBib2R5ID0gYXdhaXQgdGhpcy5feGhyKHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdDb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgIH0sXG4gICAgICB1cmk6IHVybC5mb3JtYXQocGFyc2VkVXJsKVxuICAgIH0pO1xuXG4gICAgYm9keSA9IEpTT04ucGFyc2UoYm9keSk7XG5cbiAgICByZXR1cm4gYm9keTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBMaXN0WE1MSHR0cFJlcXVlc3RNb2RlbDtcbiIsIi8qXG4gKiBDb3B5cmlnaHQgKNGBKSAyMDE1LXByZXNlbnQsIFNvZnRJbmRleCBMTEMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbmltcG9ydCBicm93c2VyTW9kdWxlIGZyb20gJy4vYnJvd3Nlcic7XG5pbXBvcnQgR3JpZEV4cHJlc3NBcGkgZnJvbSAnLi9ncmlkL21vZGVscy9HcmlkRXhwcmVzc0FwaSc7XG5pbXBvcnQgTGlzdEV4cHJlc3NBcGkgZnJvbSAnLi9saXN0L0xpc3RFeHByZXNzQXBpJztcbmltcG9ydCBGb3JtRXhwcmVzc0FwaSBmcm9tICcuL2Zvcm0vRm9ybUV4cHJlc3NBcGknO1xuaW1wb3J0IHRvQ1NWIGZyb20gJy4vZ3JpZC9leHBvcnQvZXhwb3J0ZXJzL3RvQ1NWJztcblxuYnJvd3Nlck1vZHVsZS5ncmlkRXhwcmVzc0FwaSA9IEdyaWRFeHByZXNzQXBpLmNyZWF0ZTtcbmJyb3dzZXJNb2R1bGUubGlzdEV4cHJlc3NBcGkgPSBMaXN0RXhwcmVzc0FwaS5jcmVhdGU7XG5icm93c2VyTW9kdWxlLmZvcm1FeHByZXNzQXBpID0gRm9ybUV4cHJlc3NBcGkuY3JlYXRlO1xuYnJvd3Nlck1vZHVsZS50b0NTViA9IHRvQ1NWO1xuXG5leHBvcnQgZGVmYXVsdCBicm93c2VyTW9kdWxlO1xuIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiQGJhYmVsL3BvbHlmaWxsL2Jyb3dzZXJcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hc3NlcnRUaGlzSW5pdGlhbGl6ZWRcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hc3luY1RvR2VuZXJhdG9yXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2tcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzc1wiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5XCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXh0ZW5kc1wiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2dldFByb3RvdHlwZU9mXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHNcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9vYmplY3RTcHJlYWRcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9vYmplY3RXaXRob3V0UHJvcGVydGllc1wiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm5cIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9zbGljZWRUb0FycmF5XCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvdG9Db25zdW1hYmxlQXJyYXlcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy90eXBlb2ZcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3JcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiY2xhc3NuYW1lc1wiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJjcmVhdGUtcmVhY3QtY2xhc3NcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiY3N2LXN0cmluZ2lmeVwiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJleHByZXNzXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIm1vbWVudFwiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJtdWx0ZXJcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwicHJvcC10eXBlc1wiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJyZWFjdFwiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJyZWFjdC1kYXRlcGlja2VyXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInJlYWN0LWRvbVwiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJyZWFjdC1kb20tZmFjdG9yaWVzXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInVybFwiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJ4aHJcIik7Il0sInNvdXJjZVJvb3QiOiIifQ==